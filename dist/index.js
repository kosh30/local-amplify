/*! For license information please see index.js.LICENSE.txt */
var local_amplify;local_amplify=(()=>{var e={5439:(e,t,n)=>{"use strict";n.r(t),n.d(t,{API:()=>Tl,AWSKinesisFirehoseProvider:()=>i_,AWSKinesisProvider:()=>Nb,AWSPinpointProvider:()=>vv,AmazonPersonalizeProvider:()=>Yg,Amplify:()=>s,Analytics:()=>ng,Auth:()=>No,CognitoHostedUIIdentityProvider:()=>zr,CognitoUser:()=>Wi,ConsoleLogger:()=>i.k,CookieStorage:()=>so,Credentials:()=>Br,DataStore:()=>jf,Hub:()=>Yr,Parser:()=>Qr,Platform:()=>u,Predicates:()=>Cs.gA,Storage:()=>ox,StorageProvider:()=>r.StorageProvider,appendToCognitoUserAgent:()=>$i,getAmplifyUserAgent:()=>c,graphqlOperation:()=>_l,initSchema:()=>If});var r={};n.r(r),n.d(r,{Ke:()=>ox});var i=n(5069),o=new i.k("Amplify"),s=new(function(){function e(){this._components=[],this._config={},this._modules={},this.Auth=null,this.Analytics=null,this.API=null,this.Credentials=null,this.Storage=null,this.I18n=null,this.Cache=null,this.PubSub=null,this.Interactions=null,this.Pushnotification=null,this.UI=null,this.XR=null,this.Predictions=null,this.DataStore=null,this.Logger=i.k,this.ServiceWorker=null}return e.prototype.register=function(e){o.debug("component registered in amplify",e),this._components.push(e),"function"==typeof e.getModuleName?(this._modules[e.getModuleName()]=e,this[e.getModuleName()]=e):o.debug("no getModuleName method for component",e),e.configure(this._config)},e.prototype.configure=function(e){var t=this;return e?(this._config=Object.assign(this._config,e),o.debug("amplify config",this._config),Object.entries(this._modules).forEach((function(e){var n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(e,2),r=(n[0],n[1]);Object.keys(r).forEach((function(e){t._modules[e]&&(r[e]=t._modules[e])}))})),this._components.map((function(e){e.configure(t._config)})),this._config):this._config},e.prototype.addPluggable=function(e){e&&e.getCategory&&"function"==typeof e.getCategory&&this._components.map((function(t){t.addPluggable&&"function"==typeof t.addPluggable&&t.addPluggable(e)}))},e}()),a="aws-amplify/3.8.8",u={userAgent:a+" js",product:"",navigator:null,isReactNative:!1};if("undefined"!=typeof navigator&&navigator.product)switch(u.product=navigator.product||"",u.navigator=navigator||null,navigator.product){case"ReactNative":u.userAgent=a+" react-native",u.isReactNative=!0;break;default:u.userAgent=a+" js",u.isReactNative=!1}var c=function(){return u.userAgent},l={},f=function(){function e(){}return e.setItem=function(e,t){return l[e]=t,l[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(l,e)?l[e]:void 0},e.removeItem=function(e){return delete l[e]},e.clear=function(){return l={}},e}(),d=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.amplify.test-ls",1),this.storageWindow.removeItem("aws.amplify.test-ls")}catch(e){this.storageWindow=f}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),h=[{type:"text/plain",ext:"txt"},{type:"text/html",ext:"html"},{type:"text/javascript",ext:"js"},{type:"text/css",ext:"css"},{type:"text/csv",ext:"csv"},{type:"text/yaml",ext:"yml"},{type:"text/yaml",ext:"yaml"},{type:"text/calendar",ext:"ics"},{type:"text/calendar",ext:"ical"},{type:"image/apng",ext:"apng"},{type:"image/bmp",ext:"bmp"},{type:"image/gif",ext:"gif"},{type:"image/x-icon",ext:"ico"},{type:"image/x-icon",ext:"cur"},{type:"image/jpeg",ext:"jpg"},{type:"image/jpeg",ext:"jpeg"},{type:"image/jpeg",ext:"jfif"},{type:"image/jpeg",ext:"pjp"},{type:"image/jpeg",ext:"pjpeg"},{type:"image/png",ext:"png"},{type:"image/svg+xml",ext:"svg"},{type:"image/tiff",ext:"tif"},{type:"image/tiff",ext:"tiff"},{type:"image/webp",ext:"webp"},{type:"application/json",ext:"json"},{type:"application/xml",ext:"xml"},{type:"application/x-sh",ext:"sh"},{type:"application/zip",ext:"zip"},{type:"application/x-rar-compressed",ext:"rar"},{type:"application/x-tar",ext:"tar"},{type:"application/x-bzip",ext:"bz"},{type:"application/x-bzip2",ext:"bz2"},{type:"application/pdf",ext:"pdf"},{type:"application/java-archive",ext:"jar"},{type:"application/msword",ext:"doc"},{type:"application/vnd.ms-excel",ext:"xls"},{type:"application/vnd.ms-excel",ext:"xlsx"},{type:"message/rfc822",ext:"eml"}],p=function(e){return void 0===e&&(e={}),0===Object.keys(e).length},v=function(e,t,n){if(!e||!e.sort)return!1;var r=n&&"desc"===n?-1:1;return e.sort((function(e,n){var i=e[t],o=n[t];return void 0===o?void 0===i?0:1*r:void 0===i||i<o?-1*r:i>o?1*r:0})),!0},g=function(e,t){var n=Object.assign({},e);return t&&("string"==typeof t?delete n[t]:t.forEach((function(e){delete n[e]}))),n},y=function(e,t){void 0===t&&(t="application/octet-stream");var n=e.toLowerCase(),r=h.filter((function(e){return n.endsWith("."+e.ext)}));return r.length>0?r[0].type:t},m=function(e){var t=e.toLowerCase();return!!t.startsWith("text/")||"application/json"===t||"application/xml"===t||"application/sh"===t},b=function(){for(var e="",t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=32;n>0;n-=1)e+=t[Math.floor(Math.random()*t.length)];return e},w=function(e){if(e.isResolved)return e;var t=!0,n=!1,r=!1,i=e.then((function(e){return r=!0,t=!1,e}),(function(e){throw n=!0,t=!1,e}));return i.isFullfilled=function(){return r},i.isPending=function(){return t},i.isRejected=function(){return n},i},S=function(){if("undefined"==typeof self)return!1;var e=self;return void 0!==e.WorkerGlobalScope&&self instanceof e.WorkerGlobalScope},_=function(){return{isBrowser:"undefined"!=typeof window&&void 0!==window.document,isNode:"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node}},E=function(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),!A(e))return e;var r={};for(var i in e)e.hasOwnProperty(i)&&(r[t.includes(i)?i:i[0].toLowerCase()+i.slice(1)]=n.includes(i)?e[i]:E(e[i],t,n));return r},I=function(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),!A(e))return e;var r={};for(var i in e)e.hasOwnProperty(i)&&(r[t.includes(i)?i:i[0].toUpperCase()+i.slice(1)]=n.includes(i)?e[i]:I(e[i],t,n));return r},A=function(e){return!(!(e instanceof Object)||e instanceof Array||e instanceof Function||e instanceof Number||e instanceof String||e instanceof Boolean)},C=function(){function e(){}return e.isEmpty=p,e.sortByField=v,e.objectLessAttributes=g,e.filenameToContentType=y,e.isTextFile=m,e.generateRandomString=b,e.makeQuerablePromise=w,e.isWebWorker=S,e.browserOrNode=_,e.transferKeyToLowerCase=E,e.transferKeyToUpperCase=I,e.isStrictObject=A,e}(),T=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),O=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},x=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(O(arguments[t]));return e},k=new i.k("Util"),P=function(e){function t(t){var n=e.call(this,t)||this;return n.nonRetryable=!0,n}return T(t,e),t}(Error);function N(e,t,n,r){return void 0===r&&(r=1),function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var i,o;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(s){switch(s.label){case 0:if("function"!=typeof e)throw Error("functionToRetry must be a function");k.debug(e.name+" attempt #"+r+" with this vars: "+JSON.stringify(t)),s.label=1;case 1:return s.trys.push([1,3,,8]),[4,e.apply(void 0,x(t))];case 2:return[2,s.sent()];case 3:if(i=s.sent(),k.debug("error on "+e.name,i),(a=i)&&a.nonRetryable)throw k.debug(e.name+" non retryable error",i),i;return o=n(r,t,i),k.debug(e.name+" retrying in "+o+" ms"),!1===o?[3,6]:[4,new Promise((function(e){return setTimeout(e,o)}))];case 4:return s.sent(),[4,N(e,t,n,r+1)];case 5:return[2,s.sent()];case 6:throw i;case 7:return[3,8];case 8:return[2]}var a}))}))}var L=function(e,t,n){return void 0===n&&(n=3e5),N(e,t,function(e){return function(t){var n=100*Math.pow(2,t)+100*Math.random();return!(n>e)&&n}}(n))},M=new i.k("CognitoCredentials"),R=new Promise((function(e,t){return _().isBrowser?window.gapi&&window.gapi.auth2&&window.gapi.auth2?(M.debug("google api already loaded"),e()):void setTimeout((function(){return e()}),2e3):(M.debug("not in the browser, directly resolved"),e())})),D=function(){function e(){this.initialized=!1,this.refreshGoogleToken=this.refreshGoogleToken.bind(this),this._refreshGoogleTokenImpl=this._refreshGoogleTokenImpl.bind(this)}return e.prototype.refreshGoogleToken=function(){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(e){switch(e.label){case 0:return this.initialized?[3,2]:(M.debug("need to wait for the Google SDK loaded"),[4,R]);case 1:e.sent(),this.initialized=!0,M.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshGoogleTokenImpl()]}}))}))},e.prototype._refreshGoogleTokenImpl=function(){var e=null;return _().isBrowser&&(e=window.gapi&&window.gapi.auth2?window.gapi.auth2:null),e?new Promise((function(t,n){e.getAuthInstance().then((function(e){e||(M.debug("google Auth undefined"),n(new P("google Auth undefined")));var r=e.currentUser.get();r.isSignedIn()?(M.debug("refreshing the google access token"),r.reloadAuthResponse().then((function(e){var n=e.id_token,r=e.expires_at;t({token:n,expires_at:r})})).catch((function(e){e&&"network_error"===e.error?n("Network error reloading google auth response"):n(new P("Failed to reload google auth response"))}))):n(new P("User is not signed in with Google"))})).catch((function(e){M.debug("Failed to refresh google token",e),n(new P("Failed to refresh google token"))}))})):(M.debug("no gapi auth2 available"),Promise.reject("no gapi auth2 available"))},e}(),U=new i.k("CognitoCredentials"),j=new Promise((function(e,t){return _().isBrowser?window.FB?(U.debug("FB SDK already loaded"),e()):void setTimeout((function(){return e()}),2e3):(U.debug("not in the browser, directly resolved"),e())})),F=function(){function e(){this.initialized=!1,this.refreshFacebookToken=this.refreshFacebookToken.bind(this),this._refreshFacebookTokenImpl=this._refreshFacebookTokenImpl.bind(this)}return e.prototype.refreshFacebookToken=function(){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(e){switch(e.label){case 0:return this.initialized?[3,2]:(U.debug("need to wait for the Facebook SDK loaded"),[4,j]);case 1:e.sent(),this.initialized=!0,U.debug("finish waiting"),e.label=2;case 2:return[2,this._refreshFacebookTokenImpl()]}}))}))},e.prototype._refreshFacebookTokenImpl=function(){var e=null;if(_().isBrowser&&(e=window.FB),!e){var t="no fb sdk available";return U.debug(t),Promise.reject(new P(t))}return new Promise((function(t,n){e.getLoginStatus((function(e){if(e&&e.authResponse){var r=e.authResponse,i=r.accessToken,o=1e3*r.expiresIn+(new Date).getTime();i||(s="the jwtToken is undefined",U.debug(s),n(new P(s))),t({token:i,expires_at:o})}else{var s="no response from facebook when refreshing the jwt token";U.debug(s),n(new P(s))}}),{scope:"public_profile,email"})}))},e}(),B=new D,z=new F,q=n(655),K=function(e,t){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function V(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}K(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var H,G,W,Y,$,J,Q,Z,X,ee,te,ne,re,ie,oe,se,ae,ue,ce,le,fe,de,he,pe,ve,ge,ye,me,be,we,Se,_e,Ee,Ie,Ae,Ce,Te,Oe,xe,ke,Pe,Ne,Le,Me,Re,De,Ue,je,Fe,Be,ze,qe,Ke,Ve,He,Ge,We,Ye=function(){return(Ye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function $e(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function Je(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create,Object.create,function(e){e.AUTHENTICATED_ROLE="AuthenticatedRole",e.DENY="Deny"}(H||(H={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(G||(G={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(W||(W={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(Y||(Y={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}($||($={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(J||(J={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(Q||(Q={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(Z||(Z={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(X||(X={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(ee||(ee={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(te||(te={})),function(e){e.ACCESS_DENIED="AccessDenied",e.INTERNAL_SERVER_ERROR="InternalServerError"}(ne||(ne={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(re||(re={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(ie||(ie={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(oe||(oe={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(se||(se={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(ae||(ae={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(ue||(ue={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(ce||(ce={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(le||(le={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(fe||(fe={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(de||(de={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(he||(he={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(pe||(pe={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(ve||(ve={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(ge||(ge={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(ye||(ye={})),function(e){e.CONTAINS="Contains",e.EQUALS="Equals",e.NOT_EQUAL="NotEqual",e.STARTS_WITH="StartsWith"}(me||(me={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(be||(be={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(we||(we={})),function(e){e.RULES="Rules",e.TOKEN="Token"}(Se||(Se={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(_e||(_e={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(Ee||(Ee={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(Ie||(Ie={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(Ae||(Ae={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(Ce||(Ce={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(Te||(Te={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(Oe||(Oe={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(xe||(xe={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(ke||(ke={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(Pe||(Pe={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(Ne||(Ne={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(Le||(Le={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(Me||(Me={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(Re||(Re={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(De||(De={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(Ue||(Ue={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(je||(je={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(Fe||(Fe={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(Be||(Be={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(ze||(ze={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(qe||(qe={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(Ke||(Ke={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(Ve||(Ve={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(He||(He={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(Ge||(Ge={})),function(e){e.filterSensitiveLog=function(e){return Ye({},e)}}(We||(We={}));var Qe=function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return e.isInstance=function(e){if(!e)return!1;var t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers},e}(),Ze=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}return e.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers},e.prototype.clone=function(){var t,n=new e((0,q.__assign)((0,q.__assign)({},this),{headers:(0,q.__assign)({},this.headers)}));return n.query&&(n.query=(t=n.query,Object.keys(t).reduce((function(e,n){var r,i=t[n];return(0,q.__assign)((0,q.__assign)({},e),((r={})[n]=Array.isArray(i)?(0,q.__spread)(i):i,r))}),{}))),n},e}(),Xe=function(e,t){return $e(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d,h,p,v,g,y;return Je(this,(function(m){switch(m.label){case 0:return r=[Ye({},e)],y={},[4,Et(e.body,t)];case 1:switch(n=Ye.apply(void 0,r.concat([(y.body=m.sent(),y)])),o="UnknownError",s=n.body.__type.split("#"),o=void 0===s[1]?s[0]:s[1]){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":return[3,6];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return a=[{}],[4,tt(n,t)];case 3:return i=Ye.apply(void 0,[Ye.apply(void 0,a.concat([m.sent()])),{name:o,$metadata:St(e)}]),[3,19];case 4:return u=[{}],[4,nt(n,t)];case 5:return i=Ye.apply(void 0,[Ye.apply(void 0,u.concat([m.sent()])),{name:o,$metadata:St(e)}]),[3,19];case 6:return c=[{}],[4,rt(n,t)];case 7:return i=Ye.apply(void 0,[Ye.apply(void 0,c.concat([m.sent()])),{name:o,$metadata:St(e)}]),[3,19];case 8:return l=[{}],[4,it(n,t)];case 9:return i=Ye.apply(void 0,[Ye.apply(void 0,l.concat([m.sent()])),{name:o,$metadata:St(e)}]),[3,19];case 10:return f=[{}],[4,st(n,t)];case 11:return i=Ye.apply(void 0,[Ye.apply(void 0,f.concat([m.sent()])),{name:o,$metadata:St(e)}]),[3,19];case 12:return d=[{}],[4,at(n,t)];case 13:return i=Ye.apply(void 0,[Ye.apply(void 0,d.concat([m.sent()])),{name:o,$metadata:St(e)}]),[3,19];case 14:return h=[{}],[4,ut(n,t)];case 15:return i=Ye.apply(void 0,[Ye.apply(void 0,h.concat([m.sent()])),{name:o,$metadata:St(e)}]),[3,19];case 16:return p=[{}],[4,ct(n,t)];case 17:return i=Ye.apply(void 0,[Ye.apply(void 0,p.concat([m.sent()])),{name:o,$metadata:St(e)}]),[3,19];case 18:v=n.body,o=v.code||v.Code||o,i=Ye(Ye({},v),{name:""+o,message:v.message||v.Message||o,$fault:"client",$metadata:St(e)}),m.label=19;case 19:return g=i.message||i.Message||o,i.message=g,delete i.Message,[2,Promise.reject(Object.assign(new Error(g),i))]}}))}))},et=function(e,t){return $e(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d,h,p,v,g,y;return Je(this,(function(m){switch(m.label){case 0:return r=[Ye({},e)],y={},[4,Et(e.body,t)];case 1:switch(n=Ye.apply(void 0,r.concat([(y.body=m.sent(),y)])),o="UnknownError",s=n.body.__type.split("#"),o=void 0===s[1]?s[0]:s[1]){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return a=[{}],[4,tt(n,t)];case 3:return i=Ye.apply(void 0,[Ye.apply(void 0,a.concat([m.sent()])),{name:o,$metadata:St(e)}]),[3,19];case 4:return u=[{}],[4,nt(n,t)];case 5:return i=Ye.apply(void 0,[Ye.apply(void 0,u.concat([m.sent()])),{name:o,$metadata:St(e)}]),[3,19];case 6:return c=[{}],[4,it(n,t)];case 7:return i=Ye.apply(void 0,[Ye.apply(void 0,c.concat([m.sent()])),{name:o,$metadata:St(e)}]),[3,19];case 8:return l=[{}],[4,ot(n,t)];case 9:return i=Ye.apply(void 0,[Ye.apply(void 0,l.concat([m.sent()])),{name:o,$metadata:St(e)}]),[3,19];case 10:return f=[{}],[4,st(n,t)];case 11:return i=Ye.apply(void 0,[Ye.apply(void 0,f.concat([m.sent()])),{name:o,$metadata:St(e)}]),[3,19];case 12:return d=[{}],[4,at(n,t)];case 13:return i=Ye.apply(void 0,[Ye.apply(void 0,d.concat([m.sent()])),{name:o,$metadata:St(e)}]),[3,19];case 14:return h=[{}],[4,ut(n,t)];case 15:return i=Ye.apply(void 0,[Ye.apply(void 0,h.concat([m.sent()])),{name:o,$metadata:St(e)}]),[3,19];case 16:return p=[{}],[4,ct(n,t)];case 17:return i=Ye.apply(void 0,[Ye.apply(void 0,p.concat([m.sent()])),{name:o,$metadata:St(e)}]),[3,19];case 18:v=n.body,o=v.code||v.Code||o,i=Ye(Ye({},v),{name:""+o,message:v.message||v.Message||o,$fault:"client",$metadata:St(e)}),m.label=19;case 19:return g=i.message||i.Message||o,i.message=g,delete i.Message,[2,Promise.reject(Object.assign(new Error(g),i))]}}))}))},tt=function(e,t){return $e(void 0,void 0,void 0,(function(){var n,r;return Je(this,(function(i){return n=e.body,r=dt(n,t),[2,Ye({name:"ExternalServiceException",$fault:"client",$metadata:St(e)},r)]}))}))},nt=function(e,t){return $e(void 0,void 0,void 0,(function(){var n,r;return Je(this,(function(i){return n=e.body,r=ht(n,t),[2,Ye({name:"InternalErrorException",$fault:"server",$metadata:St(e)},r)]}))}))},rt=function(e,t){return $e(void 0,void 0,void 0,(function(){var n,r;return Je(this,(function(i){return n=e.body,r=pt(n,t),[2,Ye({name:"InvalidIdentityPoolConfigurationException",$fault:"client",$metadata:St(e)},r)]}))}))},it=function(e,t){return $e(void 0,void 0,void 0,(function(){var n,r;return Je(this,(function(i){return n=e.body,r=vt(n,t),[2,Ye({name:"InvalidParameterException",$fault:"client",$metadata:St(e)},r)]}))}))},ot=function(e,t){return $e(void 0,void 0,void 0,(function(){var n,r;return Je(this,(function(i){return n=e.body,r=gt(n,t),[2,Ye({name:"LimitExceededException",$fault:"client",$metadata:St(e)},r)]}))}))},st=function(e,t){return $e(void 0,void 0,void 0,(function(){var n,r;return Je(this,(function(i){return n=e.body,r=yt(n,t),[2,Ye({name:"NotAuthorizedException",$fault:"client",$metadata:St(e)},r)]}))}))},at=function(e,t){return $e(void 0,void 0,void 0,(function(){var n,r;return Je(this,(function(i){return n=e.body,r=mt(n,t),[2,Ye({name:"ResourceConflictException",$fault:"client",$metadata:St(e)},r)]}))}))},ut=function(e,t){return $e(void 0,void 0,void 0,(function(){var n,r;return Je(this,(function(i){return n=e.body,r=bt(n,t),[2,Ye({name:"ResourceNotFoundException",$fault:"client",$metadata:St(e)},r)]}))}))},ct=function(e,t){return $e(void 0,void 0,void 0,(function(){var n,r;return Je(this,(function(i){return n=e.body,r=wt(n,t),[2,Ye({name:"TooManyRequestsException",$fault:"client",$metadata:St(e)},r)]}))}))},lt=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(t,2),i=r[0],o=r[1];return Ye(Ye({},e),((n={})[i]=o,n))}),{})},ft=function(e,t){return{AccessKeyId:void 0!==e.AccessKeyId&&null!==e.AccessKeyId?e.AccessKeyId:void 0,Expiration:void 0!==e.Expiration&&null!==e.Expiration?new Date(Math.round(1e3*e.Expiration)):void 0,SecretKey:void 0!==e.SecretKey&&null!==e.SecretKey?e.SecretKey:void 0,SessionToken:void 0!==e.SessionToken&&null!==e.SessionToken?e.SessionToken:void 0}},dt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},ht=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},pt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},vt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},gt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},yt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},mt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},bt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},wt=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},St=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},_t=function(e,t,n,r,i){return $e(void 0,void 0,void 0,(function(){var o,s,a,u,c,l;return Je(this,(function(f){switch(f.label){case 0:return[4,e.endpoint()];case 1:return o=f.sent(),s=o.hostname,a=o.protocol,u=void 0===a?"https":a,c=o.port,l={protocol:u,hostname:s,port:c,method:"POST",path:n,headers:t},void 0!==r&&(l.hostname=r),void 0!==i&&(l.body=i),[2,new Ze(l)]}}))}))},Et=function(e,t){return function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},It={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"]},At={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"]};function Ct(e,t,n){return{applyToStack:function(r){r.add(function(e,t){return function(n,r){return function(i){return(0,q.__awaiter)(void 0,void 0,void 0,(function(){var o,s,a,u,c;return(0,q.__generator)(this,(function(l){switch(l.label){case 0:return o=r.logger,s=r.outputFilterSensitiveLog,[4,n(i)];case 1:return a=l.sent().response,"function"==typeof(null==o?void 0:o.debug)&&o.debug({httpResponse:a}),[4,t(a,e)];case 2:return(u=l.sent()).$metadata,c=(0,q.__rest)(u,["$metadata"]),"function"==typeof(null==o?void 0:o.info)&&o.info({output:s(c)}),[2,{response:a,output:u}]}}))}))}}}(e,n),It),r.add(function(e,t){return function(n,r){return function(i){return(0,q.__awaiter)(void 0,void 0,void 0,(function(){var o,s,a;return(0,q.__generator)(this,(function(u){switch(u.label){case 0:return o=r.logger,s=r.inputFilterSensitiveLog,"function"==typeof(null==o?void 0:o.info)&&o.info({input:s(i.input)}),[4,t(i.input,e)];case 1:return a=u.sent(),"function"==typeof(null==o?void 0:o.debug)&&o.debug({httpRequest:a}),[2,n((0,q.__assign)((0,q.__assign)({},i),{request:a}))]}}))}))}}}(e,t),At)}}}var Tt=function(){var e=[],t=[],n=new Set,r=function(n){return e.forEach((function(e){n.add(e.middleware,(0,q.__assign)({},e))})),t.forEach((function(e){n.addRelativeTo(e.middleware,(0,q.__assign)({},e))})),n},i=function(e){var t=[];return e.before.forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,(0,q.__spread)(i(e)))})),t.push(e),e.after.reverse().forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,(0,q.__spread)(i(e)))})),t},o={add:function(t,r){void 0===r&&(r={});var i=r.name,o=(0,q.__assign)({step:"initialize",priority:"normal",middleware:t},r);if(i){if(n.has(i))throw new Error("Duplicate middleware name '"+i+"'");n.add(i)}e.push(o)},addRelativeTo:function(e,r){var i=r.name,o=(0,q.__assign)({middleware:e},r);if(i){if(n.has(i))throw new Error("Duplicated middleware name '"+i+"'");n.add(i)}t.push(o)},clone:function(){return r(Tt())},use:function(e){e.applyToStack(o)},remove:function(r){return"string"==typeof r?function(r){var i=!1,o=function(e){return!e.name||e.name!==r||(i=!0,n.delete(r),!1)};return e=e.filter(o),t=t.filter(o),i}(r):function(r){var i=!1,o=function(e){return e.middleware!==r||(i=!0,e.name&&n.delete(e.name),!1)};return e=e.filter(o),t=t.filter(o),i}(r)},removeByTag:function(r){var i=!1,o=function(e){var t=e.tags,o=e.name;return!t||!t.includes(r)||(o&&n.delete(o),i=!0,!1)};return e=e.filter(o),t=t.filter(o),i},concat:function(e){var t=r(Tt());return t.use(e),t},applyToStack:r,resolve:function(n,r){var o,s;try{for(var a=(0,q.__values)(function(){var n,r=[],o=[],s={};return e.forEach((function(e){var t=(0,q.__assign)((0,q.__assign)({},e),{before:[],after:[]});t.name&&(s[t.name]=t),r.push(t)})),t.forEach((function(e){var t=(0,q.__assign)((0,q.__assign)({},e),{before:[],after:[]});t.name&&(s[t.name]=t),o.push(t)})),o.forEach((function(e){if(e.toMiddleware){var t=s[e.toMiddleware];if(void 0===t)throw new Error(e.toMiddleware+" is not found when adding "+(e.name||"anonymous")+" middleware "+e.relation+" "+e.toMiddleware);"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}})),(n=r,n.sort((function(e,t){return Ot[t.step]-Ot[e.step]||xt[t.priority||"normal"]-xt[e.priority||"normal"]}))).map(i).reduce((function(e,t){return e.push.apply(e,(0,q.__spread)(t)),e}),[]).map((function(e){return e.middleware}))}().reverse()),u=a.next();!u.done;u=a.next())n=(0,u.value)(n,r)}catch(e){o={error:e}}finally{try{u&&!u.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}return n}};return o},Ot={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},xt={high:3,normal:2,low:1},kt=function(){function e(e){this.middlewareStack=Tt(),this.config=e}return e.prototype.send=function(e,t,n){var r="function"!=typeof t?t:void 0,i="function"==typeof t?t:n,o=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!i)return o(e).then((function(e){return e.output}));o(e).then((function(e){return i(null,e.output)}),(function(e){return i(e)})).catch((function(){}))},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),Pt=function(){this.middlewareStack=Tt()};function Nt(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))}var Lt=function(e){return Array.isArray(e)?e:[e]},Mt=function(e){for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t]["#text"]?e[t]=e[t]["#text"]:"object"==typeof e[t]&&null!==e[t]&&(e[t]=Mt(e[t]));return e},Rt=function(){var e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,(0,q.__spread)([null],arguments)),n=new t;return Object.setPrototypeOf(n,e.prototype),n};Rt.prototype=Object.create(String.prototype,{constructor:{value:Rt,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(Rt,String);var Dt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,q.__extends)(t,e),t.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},t.prototype.toJSON=function(){return e.prototype.toString.call(this)},t.fromObject=function(e){return e instanceof t?e:new t(e instanceof String||"string"==typeof e?e:JSON.stringify(e))},t}(Rt),Ut=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],jt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Ft(e){var t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDay(),i=e.getUTCDate(),o=e.getUTCHours(),s=e.getUTCMinutes(),a=e.getUTCSeconds();return Ut[r]+", "+(i<10?"0"+i:""+i)+" "+jt[n]+" "+t+" "+(o<10?"0"+o:""+o)+":"+(s<10?"0"+s:""+s)+":"+(a<10?"0"+a:""+a)+" GMT"}var Bt="***SensitiveInformation***",zt=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return V(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ct(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.logger,o="CognitoIdentityClient",s="GetCredentialsForIdentityCommand",a={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:fe.filterSensitiveLog,outputFilterSensitiveLog:he.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var u=t.requestHandler;return r.resolve((function(e){return u.handle(e.request,n||{})}),a)},t.prototype.serialize=function(e,t){return function(e,t){return $e(void 0,void 0,void 0,(function(){var n,r;return Je(this,(function(i){return n={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityService.GetCredentialsForIdentity"},r=JSON.stringify(function(e,t){return Ye(Ye(Ye({},void 0!==e.CustomRoleArn&&{CustomRoleArn:e.CustomRoleArn}),void 0!==e.IdentityId&&{IdentityId:e.IdentityId}),void 0!==e.Logins&&{Logins:lt(e.Logins,t)})}(e,t)),[2,_t(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return $e(void 0,void 0,void 0,(function(){var n,r,i;return Je(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,Xe(e,t)]:[4,Et(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{Credentials:void 0!==e.Credentials&&null!==e.Credentials?ft(e.Credentials):void 0,IdentityId:void 0!==e.IdentityId&&null!==e.IdentityId?e.IdentityId:void 0}}(n),i=Ye({$metadata:St(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Pt),qt=function(e){function t(t,n){void 0===n&&(n=!0);var r=e.call(this,t)||this;return r.tryNextLink=n,r}return(0,q.__extends)(t,e),t}(Error);function Kt(e){return Promise.all(Object.keys(e).reduce((function(t,n){var r=e[n];return"string"==typeof r?t.push([n,r]):t.push(r().then((function(e){return[n,e]}))),t}),[])).then((function(e){return e.reduce((function(e,t){var n=(0,q.__read)(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})}))}function Vt(e){var t=this;return function(){return(0,q.__awaiter)(t,void 0,void 0,(function(){var t,n,r,i,o,s,a,u,c,l,f,d,h;return(0,q.__generator)(this,(function(p){switch(p.label){case 0:return l=(c=e.client).send,f=zt.bind,h={CustomRoleArn:e.customRoleArn,IdentityId:e.identityId},e.logins?[4,Kt(e.logins)]:[3,2];case 1:return d=p.sent(),[3,3];case 2:d=void 0,p.label=3;case 3:return[4,l.apply(c,[new(f.apply(zt,[void 0,(h.Logins=d,h)]))])];case 4:return t=p.sent().Credentials,n=void 0===t?function(){throw new qt("Response from Amazon Cognito contained no credentials")}():t,r=n.AccessKeyId,i=void 0===r?function(){throw new qt("Response from Amazon Cognito contained no access key ID")}():r,o=n.Expiration,s=n.SecretKey,a=void 0===s?function(){throw new qt("Response from Amazon Cognito contained no secret key")}():s,u=n.SessionToken,[2,{identityId:e.identityId,accessKeyId:i,secretAccessKey:a,sessionToken:u,expiration:o}]}}))}))}}var Ht=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return V(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ct(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.logger,o="CognitoIdentityClient",s="GetIdCommand",a={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:ve.filterSensitiveLog,outputFilterSensitiveLog:ge.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var u=t.requestHandler;return r.resolve((function(e){return u.handle(e.request,n||{})}),a)},t.prototype.serialize=function(e,t){return function(e,t){return $e(void 0,void 0,void 0,(function(){var n,r;return Je(this,(function(i){return n={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityService.GetId"},r=JSON.stringify(function(e,t){return Ye(Ye(Ye({},void 0!==e.AccountId&&{AccountId:e.AccountId}),void 0!==e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId}),void 0!==e.Logins&&{Logins:lt(e.Logins,t)})}(e,t)),[2,_t(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return $e(void 0,void 0,void 0,(function(){var n,r,i;return Je(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,et(e,t)]:[4,Et(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{IdentityId:void 0!==e.IdentityId&&null!==e.IdentityId?e.IdentityId:void 0}}(n),i=Ye({$metadata:St(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Pt),Gt="IdentityIds",Wt=function(){function e(e){void 0===e&&(e="aws:cognito-identity-ids"),this.dbName=e}return e.prototype.getItem=function(e){return this.withObjectStore("readonly",(function(t){var n=t.get(e);return new Promise((function(e){n.onerror=function(){return e(null)},n.onsuccess=function(){return e(n.result?n.result.value:null)}}))})).catch((function(){return null}))},e.prototype.removeItem=function(e){return this.withObjectStore("readwrite",(function(t){var n=t.delete(e);return new Promise((function(e,t){n.onerror=function(){return t(n.error)},n.onsuccess=function(){return e()}}))}))},e.prototype.setItem=function(e,t){return this.withObjectStore("readwrite",(function(n){var r=n.put({id:e,value:t});return new Promise((function(e,t){r.onerror=function(){return t(r.error)},r.onsuccess=function(){return e()}}))}))},e.prototype.getDb=function(){var e=self.indexedDB.open(this.dbName,1);return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)},e.onblocked=function(){n(new Error("Unable to access DB"))},e.onupgradeneeded=function(){var t=e.result;t.onerror=function(){n(new Error("Failed to create object store"))},t.createObjectStore(Gt,{keyPath:"id"})}}))},e.prototype.withObjectStore=function(e,t){return this.getDb().then((function(n){var r=n.transaction(Gt,e);return r.oncomplete=function(){return n.close()},new Promise((function(e,n){r.onerror=function(){return n(r.error)},e(t(r.objectStore(Gt)))})).catch((function(e){throw n.close(),e}))}))},e}(),Yt=new(function(){function e(e){void 0===e&&(e={}),this.store=e}return e.prototype.getItem=function(e){return e in this.store?this.store[e]:null},e.prototype.removeItem=function(e){delete this.store[e]},e.prototype.setItem=function(e,t){this.store[e]=t},e}());const $t=JSON.parse('{"u2":"@aws-sdk/client-cognito-identity","i8":"1.0.0-rc.4"}');var Jt=n(7643),Qt=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,Zt)},Zt=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function Xt(e){var t,n,r=[];try{for(var i=(0,q.__values)(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var s=o.value,a=e[s];if(s=Qt(s),Array.isArray(a))for(var u=0,c=a.length;u<c;u++)r.push(s+"="+Qt(a[u]));else{var l=s;(a||"string"==typeof a)&&(l+="="+Qt(a)),r.push(l)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}for(var en=function(){function e(e){void 0===e&&(e={}),this.httpOptions=e}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=null==t?void 0:t.abortSignal,r=this.httpOptions.requestTimeout;if(null==n?void 0:n.aborted){var i=new Error("Request aborted");return i.name="AbortError",Promise.reject(i)}var o=e.path;if(e.query){var s=Xt(e.query);s&&(o+="?"+s)}var a=e.port,u=e.protocol+"//"+e.hostname+(a?":"+a:"")+o,c={body:e.body,headers:new Headers(e.headers),method:e.method};"undefined"!=typeof AbortController&&(c.signal=n);var l,f=new Request(u,c),d=[fetch(f).then((function(e){var t,n,r=e.headers,i={};try{for(var o=(0,q.__values)(r.entries()),s=o.next();!s.done;s=o.next()){var a=s.value;i[a[0]]=a[1]}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return void 0!==e.body?{response:new Qe({headers:i,statusCode:e.status,body:e.body})}:e.blob().then((function(t){return{response:new Qe({headers:i,statusCode:e.status,body:t})}}))})),(l=r,void 0===l&&(l=0),new Promise((function(e,t){l&&setTimeout((function(){var e=new Error("Request did not complete within "+l+" ms");e.name="TimeoutError",t(e)}),l)})))];return n&&d.push(new Promise((function(e,t){n.onabort=function(){var e=new Error("Request aborted");e.name="AbortError",t(e)}}))),Promise.race(d)},e}(),tn={},nn=new Array(64),rn=0,on="A".charCodeAt(0),sn="Z".charCodeAt(0);rn+on<=sn;rn++){var an=String.fromCharCode(rn+on);tn[an]=rn,nn[rn]=an}for(rn=0,on="a".charCodeAt(0),sn="z".charCodeAt(0);rn+on<=sn;rn++){an=String.fromCharCode(rn+on);var un=rn+26;tn[an]=un,nn[un]=an}for(rn=0;rn<10;rn++)tn[rn.toString(10)]=rn+52,an=rn.toString(10),un=rn+52,tn[an]=un,nn[un]=an;function cn(e){var t=e.length/4*3;"=="===e.substr(-2)?t-=2:"="===e.substr(-1)&&t--;for(var n=new ArrayBuffer(t),r=new DataView(n),i=0;i<e.length;i+=4){for(var o=0,s=0,a=i,u=i+3;a<=u;a++)"="!==e[a]?(o|=tn[e[a]]<<6*(u-a),s+=6):o>>=6;var c=i/4*3;o>>=s%8;for(var l=Math.floor(s/8),f=0;f<l;f++){var d=8*(l-f-1);r.setUint8(c+f,(o&255<<d)>>d)}}return new Uint8Array(n)}function ln(e){for(var t="",n=0;n<e.length;n+=3){for(var r=0,i=0,o=n,s=Math.min(n+3,e.length);o<s;o++)r|=e[o]<<8*(s-o-1),i+=8;var a=Math.ceil(i/6);r<<=6*a-i;for(var u=1;u<=a;u++){var c=6*(a-u);t+=nn[(r&63<<c)>>c]}t+="==".slice(0,4-a)}return t}tn["+"]=62,nn[62]="+",tn["/"]=63,nn[63]="/";var fn=function(e){return"function"==typeof Blob&&e instanceof Blob?function(e){return(0,q.__awaiter)(this,void 0,void 0,(function(){var t,n;return(0,q.__generator)(this,(function(r){switch(r.label){case 0:return[4,dn(e)];case 1:return t=r.sent(),n=cn(t),[2,new Uint8Array(n)]}}))}))}(e):function(e){return(0,q.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i,o,s,a;return(0,q.__generator)(this,(function(u){switch(u.label){case 0:t=new Uint8Array(0),n=e.getReader(),r=!1,u.label=1;case 1:return r?[3,3]:[4,n.read()];case 2:return i=u.sent(),o=i.done,(s=i.value)&&(a=t,(t=new Uint8Array(a.length+s.length)).set(a),t.set(s,a.length)),r=o,[3,1];case 3:return[2,t]}}))}))}(e)};function dn(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){var e;if(2!==r.readyState)return n(new Error("Reader aborted too early"));var i=null!==(e=r.result)&&void 0!==e?e:"",o=i.indexOf(","),s=o>-1?o+1:i.length;t(i.substring(s))},r.onabort=function(){return n(new Error("Read aborted"))},r.onerror=function(){return n(r.error)},r.readAsDataURL(e)}))}var hn=function(e){return function(){throw new Error(e)}},pn={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high"},vn=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return(0,q.__awaiter)(void 0,void 0,void 0,(function(){return(0,q.__generator)(this,(function(r){return[2,e.retryStrategy.retry(t,n)]}))}))}}}(e),pn)}}},gn=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],yn=["Throttling","ThrottlingException","ThrottledException","RequestThrottledException","TooManyRequestsException","ProvisionedThroughputExceededException","TransactionInProgressException","RequestLimitExceeded","BandwidthLimitExceeded","LimitExceededException","RequestThrottled","SlowDown","PriorRequestNotComplete","EC2ThrottledException"],mn=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],bn=[500,502,503,504],wn=function(e){var t;return yn.includes(e.name)||1==(null===(t=e.$retryable)||void 0===t?void 0:t.throttling)},Sn=n(5877),_n=function(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))},En=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return gn.includes(e.name)}(e)||wn(e)||function(e){var t;return mn.includes(e.name)||bn.includes((null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||0)}(e))},In=function(){function e(e,t){var n,r,i,o,s,a,u;this.maxAttemptsProvider=e,this.retryDecider=null!==(n=null==t?void 0:t.retryDecider)&&void 0!==n?n:En,this.delayDecider=null!==(r=null==t?void 0:t.delayDecider)&&void 0!==r?r:_n,this.retryQuota=null!==(i=null==t?void 0:t.retryQuota)&&void 0!==i?i:(o=500,s=500,a=function(e){return"TimeoutError"===e.name?10:5},u=function(e){return a(e)<=s},Object.freeze({hasRetryTokens:u,retrieveRetryTokens:function(e){if(!u(e))throw new Error("No retry token available");var t=a(e);return s-=t,t},releaseRetryTokens:function(e){s+=null!=e?e:1,s=Math.min(s,o)}}))}return e.prototype.shouldRetry=function(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},e.prototype.getMaxAttempts=function(){return(0,q.__awaiter)(this,void 0,void 0,(function(){var e;return(0,q.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return e=t.sent(),[3,3];case 2:return t.sent(),e=3,[3,3];case 3:return[2,e]}}))}))},e.prototype.retry=function(e,t){return(0,q.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return(0,q.__generator)(this,(function(l){switch(l.label){case 0:return r=0,i=0,[4,this.getMaxAttempts()];case 1:o=l.sent(),s=t.request,Ze.isInstance(s)&&(s.headers["amz-sdk-invocation-id"]=(0,Sn.v4)()),a=function(){var a,c,l,f,d;return(0,q.__generator)(this,(function(h){switch(h.label){case 0:return h.trys.push([0,2,,5]),Ze.isInstance(s)&&(s.headers["amz-sdk-request"]="attempt="+(r+1)+"; max="+o),[4,e(t)];case 1:return a=h.sent(),c=a.response,l=a.output,u.retryQuota.releaseRetryTokens(n),l.$metadata.attempts=r+1,l.$metadata.totalRetryDelay=i,[2,{value:{response:c,output:l}}];case 2:return f=h.sent(),r++,u.shouldRetry(f,r,o)?(n=u.retryQuota.retrieveRetryTokens(f),d=u.delayDecider(wn(f)?500:100,r),i+=d,[4,new Promise((function(e){return setTimeout(e,d)}))]):[3,4];case 3:return h.sent(),[2,"continue"];case 4:throw f.$metadata||(f.$metadata={}),f.$metadata.attempts=r,f.$metadata.totalRetryDelay=i,f;case 5:return[2]}}))},u=this,l.label=2;case 2:return[5,a()];case 3:return"object"==typeof(c=l.sent())?[2,c.value]:[3,2];case 4:return[2]}}))}))},e}(),An=function(e){var t=Cn(e.maxAttempts);return(0,q.__assign)((0,q.__assign)({},e),{maxAttempts:t,retryStrategy:e.retryStrategy||new In(t)})},Cn=function(e){if(void 0===e&&(e=3),"number"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e};function Tn(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var i=(0,q.__values)(e.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value,a=(0,q.__read)(s.split("="),2),u=a[0],c=a[1],l=void 0===c?null:c;u=decodeURIComponent(u),l&&(l=decodeURIComponent(l)),u in r?Array.isArray(r[u])?r[u].push(l):r[u]=[r[u],l]:r[u]=l}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}var On=function(e){var t,n=new URL(e),r=n.hostname,i=n.pathname,o=n.port,s=n.protocol,a=n.search;return a&&(t=Tn(a)),{hostname:r,port:o?parseInt(o):void 0,protocol:s,path:i,query:t}};function xn(e){if("string"==typeof e){for(var t=e.length,n=t-1;n>=0;n--){var r=e.charCodeAt(n);r>127&&r<=2047?t++:r>2047&&r<=65535&&(t+=2)}return t}return"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:void 0}function kn(e,t){return"aws-sdk-js-v3-"+e+"/"+t+" "+("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}var Pn=function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)}(e)},Nn=function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var s="%"+[i,e[++n],e[++n],e[++n]].map((function(e){return e.toString(16)})).join("%");t+=decodeURIComponent(s)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)},Ln="cognito-identity.{region}.amazonaws.com",Mn=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Rn=new Set(["cn-north-1","cn-northwest-1"]),Dn=new Set(["us-iso-east-1"]),Un=new Set(["us-isob-east-1"]),jn=new Set(["us-gov-east-1","us-gov-west-1"]),Fn=Ye(Ye({},{apiVersion:"2014-06-30",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-northeast-1":n={hostname:"cognito-identity.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"cognito-identity.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"cognito-identity.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"cognito-identity.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"cognito-identity.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":n={hostname:"cognito-identity.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"cognito-identity.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"cognito-identity.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"cognito-identity.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"cognito-identity.eu-west-2.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"cognito-identity.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"cognito-identity.us-east-2.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"cognito-identity.us-west-2.amazonaws.com",partition:"aws"};break;default:Mn.has(e)&&(n={hostname:Ln.replace("{region}",e),partition:"aws"}),Rn.has(e)&&(n={hostname:"cognito-identity.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Dn.has(e)&&(n={hostname:"cognito-identity.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Un.has(e)&&(n={hostname:"cognito-identity.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),jn.has(e)&&(n={hostname:"cognito-identity.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:Ln.replace("{region}",e),partition:"aws"})}return Promise.resolve(n)},signingName:"cognito-identity"}),{runtime:"browser",base64Decoder:cn,base64Encoder:ln,bodyLengthChecker:xn,credentialDefaultProvider:function(){},defaultUserAgent:kn($t.u2,$t.i8),maxAttempts:3,region:hn("Region is missing"),requestHandler:new en,sha256:Jt.Sha256,streamCollector:fn,urlParser:On,utf8Decoder:Pn,utf8Encoder:Nn}),Bn=function(e){var t;return(0,q.__assign)((0,q.__assign)({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:e.endpoint?zn(e):function(){return qn(e)},isCustomEndpoint:!!e.endpoint})},zn=function(e){var t=e.endpoint,n=e.urlParser;if("string"==typeof t){var r=Promise.resolve(n(t));return function(){return r}}if("object"==typeof t){var i=Promise.resolve(t);return function(){return i}}return t},qn=function(e){return(0,q.__awaiter)(void 0,void 0,void 0,(function(){var t,n,r,i,o;return(0,q.__generator)(this,(function(s){switch(s.label){case 0:return t=e.tls,n=void 0===t||t,[4,e.region()];case 1:if(r=s.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");return[4,e.regionInfoProvider(r)];case 2:if(!(i=(null!==(o=s.sent())&&void 0!==o?o:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((n?"https:":"http:")+"//"+i)]}}))}))},Kn=function(e){if(!e.region)throw new Error("Region is missing");return(0,q.__assign)((0,q.__assign)({},e),{region:Vn(e.region)})},Vn=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},Hn={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware"},Gn=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return(0,q.__awaiter)(t,void 0,void 0,(function(){var t,i,o,s,a;return(0,q.__generator)(this,(function(u){return t=r.request,Ze.isInstance(t)&&(i=t.body,o=t.headers,i&&-1===Object.keys(o).map((function(e){return e.toLowerCase()})).indexOf("content-length")&&void 0!==(s=e(i))&&(t.headers=(0,q.__assign)((0,q.__assign)({},t.headers),((a={})["content-length"]=String(s),a)))),[2,n((0,q.__assign)((0,q.__assign)({},r),{request:t}))]}))}))}}}(e.bodyLengthChecker),Hn)}}},Wn={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"]},Yn=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return(0,q.__awaiter)(void 0,void 0,void 0,(function(){var r,i;return(0,q.__generator)(this,(function(o){return Ze.isInstance(n.request)?(r=n.request,(void 0===(i=(e.requestHandler.metadata||{}).handlerProtocol)?"":i).indexOf("h2")>=0&&!r.headers[":authority"]?(delete r.headers.host,r.headers[":authority"]=""):r.headers.host||(r.headers.host=r.hostname),[2,t(n)]):[2,t(n)]}))}))}}}(e),Wn)}}},$n={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize"},Jn=function(e){return{applyToStack:function(e){e.add((function(e,t){return function(n){return(0,q.__awaiter)(void 0,void 0,void 0,(function(){var r,i,o,s;return(0,q.__generator)(this,(function(a){switch(a.label){case 0:return r=t.logger,[4,e(n)];case 1:return i=a.sent(),r?(o=i.response,"function"==typeof r.info&&r.info({metadata:{statusCode:o.statusCode,requestId:null!==(s=o.headers["x-amzn-requestid"])&&void 0!==s?s:o.headers["x-amzn-request-id"],extendedRequestId:o.headers["x-amz-id-2"],cfId:o.headers["x-amz-cf-id"]}}),[2,i]):[2,i]}}))}))}}),$n)}}},Qn="X-Amz-Signature",Zn="X-Amz-Security-Token",Xn="authorization",er="X-Amz-Date".toLowerCase(),tr=[Xn,er,"date"],nr=Qn.toLowerCase(),rr="x-amz-content-sha256",ir=Zn.toLowerCase(),or={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},sr=/^proxy-/,ar=/^sec-/,ur="AWS4-HMAC-SHA256-PAYLOAD",cr="aws4_request",lr={},fr=[];function dr(e,t,n){return e+"/"+t+"/"+n+"/"+cr}for(var hr={},pr={},vr=0;vr<256;vr++){var gr=vr.toString(16).toLowerCase();1===gr.length&&(gr="0"+gr),hr[vr]=gr,pr[gr]=vr}function yr(e){for(var t="",n=0;n<e.byteLength;n++)t+=hr[e[n]];return t}function mr(e,t,n){var r,i,o=e.headers,s={};try{for(var a=(0,q.__values)(Object.keys(o).sort()),u=a.next();!u.done;u=a.next()){var c=u.value,l=c.toLowerCase();(l in or||(null==t?void 0:t.has(l))||sr.test(l)||ar.test(l))&&(!n||n&&!n.has(l))||(s[l]=o[c].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return s}function br(e,t){var n=e.headers,r=e.body;return(0,q.__awaiter)(this,void 0,void 0,(function(){var e,i,o,s,a,u,c;return(0,q.__generator)(this,(function(l){switch(l.label){case 0:try{for(e=(0,q.__values)(Object.keys(n)),i=e.next();!i.done;i=e.next())if((o=i.value).toLowerCase()===rr)return[2,n[o]]}catch(e){u={error:e}}finally{try{i&&!i.done&&(c=e.return)&&c.call(e)}finally{if(u)throw u.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||(f=r,"function"==typeof ArrayBuffer&&f instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(f))?((s=new t).update(r),a=yr,[4,s.digest()]):[3,3];case 2:return[2,a.apply(void 0,[l.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}var f}))}))}function wr(e){var t=e.headers,n=e.query,r=(0,q.__rest)(e,["headers","query"]);return(0,q.__assign)((0,q.__assign)({},r),{headers:(0,q.__assign)({},t),query:n?Sr(n):void 0})}function Sr(e){return Object.keys(e).reduce((function(t,n){var r,i=e[n];return(0,q.__assign)((0,q.__assign)({},t),((r={})[n]=Array.isArray(i)?(0,q.__spread)(i):i,r))}),{})}function _r(e){var t,n;e="function"==typeof e.clone?e.clone():wr(e);try{for(var r=(0,q.__values)(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;tr.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}var Er=function(){function e(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,s=e.uriEscapePath,a=void 0===s||s;this.service=i,this.sha256=o,this.uriEscapePath=a,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=Cr(r),this.credentialProvider=Tr(n)}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),(0,q.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d,h,p,v,g,y,m,b,w,S,_,E,I;return(0,q.__generator)(this,(function(A){switch(A.label){case 0:return n=t.signingDate,r=void 0===n?new Date:n,i=t.expiresIn,o=void 0===i?3600:i,s=t.unsignableHeaders,a=t.signableHeaders,u=t.signingRegion,c=t.signingService,[4,this.credentialProvider()];case 1:return l=A.sent(),null==u?[3,2]:(d=u,[3,4]);case 2:return[4,this.regionProvider()];case 3:d=A.sent(),A.label=4;case 4:return f=d,h=Ir(r),p=h.longDate,v=h.shortDate,o>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(g=dr(v,f,null!=c?c:this.service),y=function(e){var t,n,r="function"==typeof e.clone?e.clone():wr(e),i=r.headers,o=r.query,s=void 0===o?{}:o;try{for(var a=(0,q.__values)(Object.keys(i)),u=a.next();!u.done;u=a.next()){var c=u.value;"x-amz-"===c.toLowerCase().substr(0,6)&&(s[c]=i[c],delete i[c])}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return(0,q.__assign)((0,q.__assign)({},e),{headers:i,query:s})}(_r(e)),l.sessionToken&&(y.query[Zn]=l.sessionToken),y.query["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",y.query["X-Amz-Credential"]=l.accessKeyId+"/"+g,y.query["X-Amz-Date"]=p,y.query["X-Amz-Expires"]=o.toString(10),m=mr(y,s,a),y.query["X-Amz-SignedHeaders"]=Ar(m),b=y.query,w=Qn,S=this.getSignature,_=[p,g,this.getSigningKey(l,f,v,c)],E=this.createCanonicalRequest,I=[y,m],[4,br(e,this.sha256)]);case 5:return[4,S.apply(this,_.concat([E.apply(this,I.concat([A.sent()]))]))];case 6:return b[w]=A.sent(),[2,y]}}))}))},e.prototype.sign=function(e,t){return(0,q.__awaiter)(this,void 0,void 0,(function(){return(0,q.__generator)(this,(function(n){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]}))}))},e.prototype.signEvent=function(e,t){var n=e.headers,r=e.payload,i=t.signingDate,o=void 0===i?new Date:i,s=t.priorSignature,a=t.signingRegion,u=t.signingService;return(0,q.__awaiter)(this,void 0,void 0,(function(){var e,t,i,c,l,f,d,h,p,v,g;return(0,q.__generator)(this,(function(y){switch(y.label){case 0:return null==a?[3,1]:(t=a,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=y.sent(),y.label=3;case 3:return e=t,i=Ir(o),c=i.shortDate,l=i.longDate,f=dr(c,e,null!=u?u:this.service),[4,br({headers:{},body:r},this.sha256)];case 4:return d=y.sent(),(h=new this.sha256).update(n),v=yr,[4,h.digest()];case 5:return p=v.apply(void 0,[y.sent()]),g=[ur,l,f,s,p,d].join("\n"),[2,this.signString(g,{signingDate:o,signingRegion:e,signingService:u})]}}))}))},e.prototype.signString=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,o=n.signingRegion,s=n.signingService;return(0,q.__awaiter)(this,void 0,void 0,(function(){var t,n,r,a,u,c,l,f;return(0,q.__generator)(this,(function(d){switch(d.label){case 0:return[4,this.credentialProvider()];case 1:return t=d.sent(),null==o?[3,2]:(r=o,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=d.sent(),d.label=4;case 4:return n=r,a=Ir(i).shortDate,l=(c=this.sha256).bind,[4,this.getSigningKey(t,n,a,s)];case 5:return(u=new(l.apply(c,[void 0,d.sent()]))).update(e),f=yr,[4,u.digest()];case 6:return[2,f.apply(void 0,[d.sent()])]}}))}))},e.prototype.signRequest=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,o=n.signableHeaders,s=n.unsignableHeaders,a=n.signingRegion,u=n.signingService;return(0,q.__awaiter)(this,void 0,void 0,(function(){var t,n,r,c,l,f,d,h,p,v,g;return(0,q.__generator)(this,(function(y){switch(y.label){case 0:return[4,this.credentialProvider()];case 1:return t=y.sent(),null==a?[3,2]:(r=a,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=y.sent(),y.label=4;case 4:return n=r,c=_r(e),l=Ir(i),f=l.longDate,d=l.shortDate,h=dr(d,n,null!=u?u:this.service),c.headers[er]=f,t.sessionToken&&(c.headers[ir]=t.sessionToken),[4,br(c,this.sha256)];case 5:return p=y.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=(0,q.__values)(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}(rr,c.headers)&&this.applyChecksum&&(c.headers[rr]=p),v=mr(c,s,o),[4,this.getSignature(f,h,this.getSigningKey(t,n,d,u),this.createCanonicalRequest(c,v,p))];case 6:return g=y.sent(),c.headers[Xn]="AWS4-HMAC-SHA256 Credential="+t.accessKeyId+"/"+h+", SignedHeaders="+Ar(v)+", Signature="+g,[2,c]}}))}))},e.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){var t,n,r=e.query,i=void 0===r?{}:r,o=[],s={},a=function(e){if(e.toLowerCase()===nr)return"continue";o.push(e);var t=i[e];"string"==typeof t?s[e]=Qt(e)+"="+Qt(t):Array.isArray(t)&&(s[e]=t.slice(0).sort().reduce((function(t,n){return t.concat([Qt(e)+"="+Qt(n)])}),[]).join("&"))};try{for(var u=(0,q.__values)(Object.keys(i).sort()),c=u.next();!c.done;c=u.next())a(c.value)}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return o.map((function(e){return s[e]})).filter((function(e){return e})).join("&")}(e)+"\n"+r.map((function(e){return e+":"+t[e]})).join("\n")+"\n\n"+r.join(";")+"\n"+n},e.prototype.createStringToSign=function(e,t,n){return(0,q.__awaiter)(this,void 0,void 0,(function(){var r,i;return(0,q.__generator)(this,(function(o){switch(o.label){case 0:return(r=new this.sha256).update(n),[4,r.digest()];case 1:return i=o.sent(),[2,"AWS4-HMAC-SHA256\n"+e+"\n"+t+"\n"+yr(i)]}}))}))},e.prototype.getCanonicalPath=function(e){var t=e.path;return this.uriEscapePath?"/"+encodeURIComponent(t.replace(/^\//,"")).replace(/%2F/g,"/"):t},e.prototype.getSignature=function(e,t,n,r){return(0,q.__awaiter)(this,void 0,void 0,(function(){var i,o,s,a,u;return(0,q.__generator)(this,(function(c){switch(c.label){case 0:return[4,this.createStringToSign(e,t,r)];case 1:return i=c.sent(),a=(s=this.sha256).bind,[4,n];case 2:return(o=new(a.apply(s,[void 0,c.sent()]))).update(i),u=yr,[4,o.digest()];case 3:return[2,u.apply(void 0,[c.sent()])]}}))}))},e.prototype.getSigningKey=function(e,t,n,r){return function(e,t,n,r,i){var o=n+":"+r+":"+i+":"+t.accessKeyId+":"+t.sessionToken;if(o in lr)return lr[o];for(fr.push(o);fr.length>50;)delete lr[fr.shift()];return lr[o]=new Promise((function(s,a){var u,c,l=Promise.resolve("AWS4"+t.secretAccessKey),f=function(t){(l=l.then((function(n){return function(e,t,n){var r=new e(t);return r.update(n),r.digest()}(e,n,t)}))).catch((function(){}))};try{for(var d=(0,q.__values)([n,r,i,cr]),h=d.next();!h.done;h=d.next())f(h.value)}catch(e){u={error:e}}finally{try{h&&!h.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}l.then(s,(function(e){delete lr[o],a(e)}))}))}(this.sha256,e,n,t,r||this.service)},e}(),Ir=function(e){var t,n=(t=e,function(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e}(t).toISOString().replace(/\.\d{3}Z$/,"Z")).replace(/[\-:]/g,"");return{longDate:n,shortDate:n.substr(0,8)}},Ar=function(e){return Object.keys(e).sort().join(";")},Cr=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},Tr=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e};function Or(e){var t,n=this,r=xr(e.credentials||e.credentialDefaultProvider(e)),i=e.signingEscapePath,o=void 0===i||i,s=e.systemClockOffset,a=void 0===s?e.systemClockOffset||0:s,u=e.sha256;return t=e.signer?xr(e.signer):function(){return xr(e.region)().then((function(t){return(0,q.__awaiter)(n,void 0,void 0,(function(){return(0,q.__generator)(this,(function(n){switch(n.label){case 0:return[4,e.regionInfoProvider(t)];case 1:return[2,[n.sent()||{},t]]}}))}))})).then((function(t){var n=(0,q.__read)(t,2),i=n[0],s=n[1],a=i.signingRegion,c=void 0===a?e.signingRegion:a,l=i.signingService,f=void 0===l?e.signingName:l;return e.signingRegion=e.signingRegion||c||s,e.signingName=e.signingName||f,new Er({credentials:r,region:e.signingRegion,service:e.signingName,sha256:u,uriEscapePath:o})}))},(0,q.__assign)((0,q.__assign)({},e),{systemClockOffset:a,signingEscapePath:o,credentials:r,signer:t})}function xr(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}function kr(e){return function(t,n){return function(r){return(0,q.__awaiter)(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,f,d;return(0,q.__generator)(this,(function(h){switch(h.label){case 0:return Ze.isInstance(r.request)?"function"!=typeof e.signer?[3,2]:[4,e.signer()]:[2,t(r)];case 1:return o=h.sent(),[3,3];case 2:o=e.signer,h.label=3;case 3:return i=o,a=t,u=[(0,q.__assign)({},r)],d={},[4,i.sign(r.request,{signingDate:new Date(Date.now()+e.systemClockOffset),signingRegion:n.signing_region,signingService:n.signing_service})];case 4:return[4,a.apply(void 0,[q.__assign.apply(void 0,u.concat([(d.request=h.sent(),d)]))])];case 5:return s=h.sent(),c=s.response.headers,(l=c&&(c.date||c.Date))&&(p=f=Date.parse(l),v=e.systemClockOffset,Math.abs(function(e){return new Date(Date.now()+e)}(v).getTime()-p)>=3e5&&(e.systemClockOffset=f-Date.now())),[2,s]}var p,v}))}))}}}var Pr={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware"},Nr=function(e){return{applyToStack:function(t){t.addRelativeTo(kr(e),Pr)}}},Lr={name:"getUserAgentMiddleware",step:"build",tags:["SET_USER_AGENT","USER_AGENT"]},Mr=function(e){return{applyToStack:function(t){var n;t.add((n=e,function(e){return function(t){var r=t.request;if(!Ze.isInstance(r))return e(t);var i=r.headers,o="node"===n.runtime?"user-agent":"x-amz-user-agent";return i[o]?i[o]+=" "+n.defaultUserAgent:i[o]=""+n.defaultUserAgent,n.customUserAgent&&(i[o]+=" "+n.customUserAgent),e((0,q.__assign)((0,q.__assign)({},t),{request:r}))}}),Lr)}}},Rr=function(e){function t(t){var n=this,r=Ye(Ye({},Fn),t),i=Kn(r),o=Or(Bn(i)),s=An(o);return(n=e.call(this,s)||this).config=s,n.middlewareStack.use(vn(n.config)),n.middlewareStack.use(Mr(n.config)),n.middlewareStack.use(Gn(n.config)),n.middlewareStack.use(Yn(n.config)),n.middlewareStack.use(Jn(n.config)),n}return V(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(kt),Dr=function(){return(Dr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ur=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},jr=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Fr=new i.k("Credentials"),Br=new(function(){function e(e){this._gettingCredPromise=null,this._refreshHandlers={},this.Auth=void 0,this.configure(e),this._refreshHandlers.google=B.refreshGoogleToken,this._refreshHandlers.facebook=z.refreshFacebookToken}return e.prototype.getModuleName=function(){return"Credentials"},e.prototype.getCredSource=function(){return this._credentials_source},e.prototype.configure=function(e){if(!e)return this._config||{};this._config=Object.assign({},this._config,e);var t=this._config.refreshHandlers;return t&&(this._refreshHandlers=Dr(Dr({},this._refreshHandlers),t)),this._storage=this._config.storage,this._storage||(this._storage=(new d).getStorage()),this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),this._config},e.prototype.get=function(){return Fr.debug("getting credentials"),this._pickupCredentials()},e.prototype._pickupCredentials=function(){return Fr.debug("picking up credentials"),this._gettingCredPromise&&this._gettingCredPromise.isPending()?Fr.debug("getting old cred promise"):(Fr.debug("getting new cred promise"),this._gettingCredPromise=w(this._keepAlive())),this._gettingCredPromise},e.prototype._keepAlive=function(){return Ur(this,void 0,void 0,(function(){var e,t,n,r,i,o,a;return jr(this,(function(u){switch(u.label){case 0:if(Fr.debug("checking if credentials exists and not expired"),(e=this._credentials)&&!this._isExpired(e)&&!this._isPastTTL())return Fr.debug("credentials not changed and not expired, directly return"),[2,Promise.resolve(e)];if(Fr.debug("need to get a new credential or refresh the existing one"),t=this.Auth,!(n=void 0===t?s.Auth:t)||"function"!=typeof n.currentUserCredentials)return[2,Promise.reject("No Auth module registered in Amplify")];if(this._isExpired(e)||!this._isPastTTL())return[3,6];Fr.debug("ttl has passed but token is not yet expired"),u.label=1;case 1:return u.trys.push([1,5,,6]),[4,n.currentUserPoolUser()];case 2:return r=u.sent(),[4,n.currentSession()];case 3:return i=u.sent(),o=i.refreshToken,[4,new Promise((function(e,t){r.refreshSession(o,(function(n,r){return n?t(n):e(r)}))}))];case 4:return u.sent(),[3,6];case 5:return a=u.sent(),Fr.debug("Error attempting to refreshing the session",a),[3,6];case 6:return[2,n.currentUserCredentials()]}}))}))},e.prototype.refreshFederatedToken=function(e){Fr.debug("Getting federated credentials");var t=e.provider,n=e.user,r=e.token,i=e.identity_id,o=e.expires_at;o=1970===new Date(o).getFullYear()?1e3*o:o;var s=this;return Fr.debug("checking if federated jwt token expired"),o>(new Date).getTime()?(Fr.debug("token not expired"),this._setCredentialsFromFederation({provider:t,token:r,user:n,identity_id:i,expires_at:o})):s._refreshHandlers[t]&&"function"==typeof s._refreshHandlers[t]?(Fr.debug("getting refreshed jwt token from federation provider"),this._providerRefreshWithRetry({refreshHandler:s._refreshHandlers[t],provider:t,user:n})):(Fr.debug("no refresh handler for provider:",t),this.clear(),Promise.reject("no refresh handler for provider"))},e.prototype._providerRefreshWithRetry=function(e){var t=this,n=e.refreshHandler,r=e.provider,i=e.user;return L(n,[],1e4).then((function(e){return Fr.debug("refresh federated token sucessfully",e),t._setCredentialsFromFederation({provider:r,token:e.token,user:i,identity_id:e.identity_id,expires_at:e.expires_at})})).catch((function(e){return"string"==typeof e&&0===e.toLowerCase().lastIndexOf("network error",e.length)||t.clear(),Fr.debug("refresh federated token failed",e),Promise.reject("refreshing federation token failed: "+e)}))},e.prototype._isExpired=function(e){if(!e)return Fr.debug("no credentials for expiration check"),!0;Fr.debug("are these credentials expired?",e);var t=Date.now();return e.expiration.getTime()<=t},e.prototype._isPastTTL=function(){return this._nextCredentialsRefresh<=Date.now()},e.prototype._setCredentialsForGuest=function(){return Ur(this,void 0,void 0,(function(){var e,t,n,r,i,o,s,a=this;return jr(this,(function(u){switch(u.label){case 0:if(Fr.debug("setting credentials for guest"),e=this._config,t=e.identityPoolId,n=e.region,e.mandatorySignIn)return[2,Promise.reject("cannot get guest credentials when mandatory signin enabled")];if(!t)return Fr.debug("No Cognito Identity pool provided for unauthenticated access"),[2,Promise.reject("No Cognito Identity pool provided for unauthenticated access")];if(!n)return Fr.debug("region is not configured for getting the credentials"),[2,Promise.reject("region is not configured for getting the credentials")];r=void 0,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this._storageSync];case 2:return u.sent(),r=this._storage.getItem("CognitoIdentityId-"+t),this._identityId=r,[3,4];case 3:return i=u.sent(),Fr.debug("Failed to get the cached identityId",i),[3,4];case 4:return o=new Rr({region:n,customUserAgent:c()}),s=void 0,s=r?Vt({identityId:r,client:o})():Ur(a,void 0,void 0,(function(){var e;return jr(this,(function(n){switch(n.label){case 0:return[4,o.send(new Ht({IdentityPoolId:t}))];case 1:return e=n.sent().IdentityId,this._identityId=e,[2,Vt({client:o,identityId:e})()]}}))})).catch((function(e){return Ur(a,void 0,void 0,(function(){return jr(this,(function(t){throw e}))}))})),[2,this._loadCredentials(s,"guest",!1,null).then((function(e){return e})).catch((function(e){return Ur(a,void 0,void 0,(function(){var n=this;return jr(this,(function(i){return"ResourceNotFoundException"===e.name&&e.message==="Identity '"+r+"' not found."?(Fr.debug("Failed to load guest credentials"),this._storage.removeItem("CognitoIdentityId-"+t),s=Ur(n,void 0,void 0,(function(){var e;return jr(this,(function(n){switch(n.label){case 0:return[4,o.send(new Ht({IdentityPoolId:t}))];case 1:return e=n.sent().IdentityId,this._identityId=e,[2,Vt({client:o,identityId:e})()]}}))})).catch((function(e){return Ur(n,void 0,void 0,(function(){return jr(this,(function(t){throw e}))}))})),[2,this._loadCredentials(s,"guest",!1,null)]):[2,e]}))}))}))]}}))}))},e.prototype._setCredentialsFromFederation=function(e){var t=e.provider,n=e.token,r=e.identity_id,i={google:"accounts.google.com",facebook:"graph.facebook.com",amazon:"www.amazon.com",developer:"cognito-identity.amazonaws.com"}[t]||t;if(!i)return Promise.reject("You must specify a federated provider");var o={};o[i]=n;var s=this._config,a=s.identityPoolId,u=s.region;if(!a)return Fr.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!u)return Fr.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var l=new Rr({region:u,customUserAgent:c()}),f=void 0;return f=r?Vt({identityId:r,logins:o,client:l})():function(e){var t=this,n=e.accountId,r=e.cache,i=void 0===r?"object"==typeof self&&self.indexedDB?new Wt:"object"==typeof window&&window.localStorage?window.localStorage:Yt:r,o=e.client,s=e.customRoleArn,a=e.identityPoolId,u=e.logins,c=e.userIdentifier,l=void 0===c?u&&0!==Object.keys(u).length?void 0:"ANONYMOUS":c,f=l?"aws:cognito-identity-credentials:"+a+":"+l:void 0,d=function(){return(0,q.__awaiter)(t,void 0,void 0,(function(){var e,t,r,c,l,h,p,v,g;return(0,q.__generator)(this,(function(y){switch(y.label){case 0:return(t=f)?[4,i.getItem(f)]:[3,2];case 1:t=y.sent(),y.label=2;case 2:return(e=t)?[3,7]:(h=(l=o).send,p=Ht.bind,g={AccountId:n,IdentityPoolId:a},u?[4,Kt(u)]:[3,4]);case 3:return v=y.sent(),[3,5];case 4:v=void 0,y.label=5;case 5:return[4,h.apply(l,[new(p.apply(Ht,[void 0,(g.Logins=v,g)]))])];case 6:r=y.sent().IdentityId,c=void 0===r?function(){throw new qt("Response from Amazon Cognito contained no identity ID")}():r,e=c,f&&Promise.resolve(i.setItem(f,e)).catch((function(){})),y.label=7;case 7:return[2,(d=Vt({client:o,customRoleArn:s,logins:u,identityId:e}))()]}}))}))};return function(){return d().catch((function(e){return(0,q.__awaiter)(t,void 0,void 0,(function(){return(0,q.__generator)(this,(function(t){throw f&&Promise.resolve(i.removeItem(f)).catch((function(){})),e}))}))}))}}({logins:o,identityPoolId:a,client:l})(),this._loadCredentials(f,"federated",!0,e)},e.prototype._setCredentialsFromSession=function(e){var t=this;Fr.debug("set credentials from session");var n=e.getIdToken().getJwtToken(),r=this._config,i=r.region,o=r.userPoolId,s=r.identityPoolId;if(!s)return Fr.debug("No Cognito Federated Identity pool provided"),Promise.reject("No Cognito Federated Identity pool provided");if(!i)return Fr.debug("region is not configured for getting the credentials"),Promise.reject("region is not configured for getting the credentials");var a={};a["cognito-idp."+i+".amazonaws.com/"+o]=n;var u=new Rr({region:i,customUserAgent:c()}),l=Ur(t,void 0,void 0,(function(){var e;return jr(this,(function(t){switch(t.label){case 0:return[4,u.send(new Ht({IdentityPoolId:s,Logins:a}))];case 1:return e=t.sent().IdentityId,this._identityId=e,[2,Vt({client:u,logins:a,identityId:e})()]}}))})).catch((function(e){return Ur(t,void 0,void 0,(function(){return jr(this,(function(t){throw e}))}))}));return this._loadCredentials(l,"userPool",!0,null)},e.prototype._loadCredentials=function(e,t,n,r){var i=this,o=this,s=this._config.identityPoolId;return new Promise((function(a,u){e.then((function(e){return Ur(i,void 0,void 0,(function(){var i,u,c,l,f,d;return jr(this,(function(h){switch(h.label){case 0:if(Fr.debug("Load credentials successfully",e),this._identityId&&!e.identityId&&(e.identityId=this._identityId),o._credentials=e,o._credentials.authenticated=n,o._credentials_source=t,o._nextCredentialsRefresh=(new Date).getTime()+3e6,"federated"===t){i=Object.assign({id:this._credentials.identityId},r.user),u=r.provider,c=r.token,l=r.expires_at,f=r.identity_id;try{this._storage.setItem("aws-amplify-federatedInfo",JSON.stringify({provider:u,token:c,user:i,expires_at:l,identity_id:f}))}catch(e){Fr.debug("Failed to put federated info into auth storage",e)}}if("guest"!==t)return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this._storageSync];case 2:return h.sent(),this._storage.setItem("CognitoIdentityId-"+s,e.identityId),[3,4];case 3:return d=h.sent(),Fr.debug("Failed to cache identityId",d),[3,4];case 4:return a(o._credentials),[2]}}))}))})).catch((function(t){if(t)return Fr.debug("Failed to load credentials",e),Fr.debug("Error loading credentials",t),void u(t)}))}))},e.prototype.set=function(e,t){return"session"===t?this._setCredentialsFromSession(e):"federation"===t?this._setCredentialsFromFederation(e):"guest"===t?this._setCredentialsForGuest():(Fr.debug("no source specified for setting credentials"),Promise.reject("invalid source"))},e.prototype.clear=function(){return Ur(this,void 0,void 0,(function(){return jr(this,(function(e){return this._credentials=null,this._credentials_source=null,Fr.debug("removing aws-amplify-federatedInfo from storage"),this._storage.removeItem("aws-amplify-federatedInfo"),[2]}))}))},e.prototype.shear=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},e}())(null);s.register(Br);var zr,qr,Kr=function(){return(Kr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Vr=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Hr=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Vr(arguments[t]));return e},Gr=new i.k("Hub"),Wr="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Yr=new(function(){function e(e){this.listeners=[],this.patterns=[],this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","xr"],this.name=e}return e.prototype.remove=function(e,t){if(e instanceof RegExp){var n=this.patterns.find((function(t){return t.pattern.source===e.source}));if(!n)return void Gr.warn("No listeners for "+e);this.patterns=Hr(this.patterns.filter((function(e){return e!==n})))}else{var r=this.listeners[e];if(!r)return void Gr.warn("No listeners for "+e);this.listeners[e]=Hr(r.filter((function(e){return e.callback!==t})))}},e.prototype.dispatch=function(e,t,n,r){void 0===n&&(n=""),this.protectedChannels.indexOf(e)>-1&&(r===Wr||Gr.warn("WARNING: "+e+" is protected and dispatching on it can have unintended consequences"));var i={channel:e,payload:Kr({},t),source:n,patternInfo:[]};try{this._toListeners(i)}catch(e){Gr.error(e)}},e.prototype.listen=function(e,t,n){var r,i=this;if(void 0===n&&(n="noname"),function(e){return void 0!==e.onHubCapsule}(t))Gr.warn("WARNING onHubCapsule is Deprecated. Please pass in a callback."),r=t.onHubCapsule.bind(t);else{if("function"!=typeof t)throw new Error("No callback supplied to Hub");r=t}if(e instanceof RegExp)this.patterns.push({pattern:e,callback:r});else{var o=this.listeners[e];o||(o=[],this.listeners[e]=o),o.push({name:n,callback:r})}return function(){i.remove(e,r)}},e.prototype._toListeners=function(e){var t=e.channel,n=e.payload,r=this.listeners[t];if(r&&r.forEach((function(r){Gr.debug("Dispatching to "+t+" with ",n);try{r.callback(e)}catch(e){Gr.error(e)}})),this.patterns.length>0){if(!n.message)return void Gr.warn("Cannot perform pattern matching without a message key");var i=n.message;this.patterns.forEach((function(t){var n=i.match(t.pattern);if(n){var r=Vr(n).slice(1),o=Kr(Kr({},e),{patternInfo:r});try{t.callback(o)}catch(e){Gr.error(e)}}}))}},e}())("__default__"),$r=new i.k("Parser"),Jr=function(e){var t,n={};if(e.aws_mobile_analytics_app_id){var r={AWSPinpoint:{appId:e.aws_mobile_analytics_app_id,region:e.aws_mobile_analytics_app_region}};n.Analytics=r}return(e.aws_cognito_identity_pool_id||e.aws_user_pools_id)&&(n.Auth={userPoolId:e.aws_user_pools_id,userPoolWebClientId:e.aws_user_pools_web_client_id,region:e.aws_cognito_region,identityPoolId:e.aws_cognito_identity_pool_id,identityPoolRegion:e.aws_cognito_region,mandatorySignIn:"enable"===e.aws_mandatory_sign_in}),t=e.aws_user_files_s3_bucket?{AWSS3:{bucket:e.aws_user_files_s3_bucket,region:e.aws_user_files_s3_bucket_region,dangerouslyConnectToHttpEndpointForTesting:e.aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing}}:e?e.Storage||e:{},n.Analytics=Object.assign({},n.Analytics,e.Analytics),n.Auth=Object.assign({},n.Auth,e.Auth),n.Storage=Object.assign({},t),$r.debug("parse config",e,"to amplifyconfig",n),n},Qr=function(){function e(){}return e.parseMobilehubConfig=Jr,e}();function Zr(e){return e&&!!["provider"].find((function(t){return e.hasOwnProperty(t)}))}function Xr(e){return void 0!==e.redirectSignIn}!function(e){e.Cognito="COGNITO",e.Google="Google",e.Facebook="Facebook",e.Amazon="LoginWithAmazon",e.Apple="SignInWithApple"}(zr||(zr={})),function(e){e.NoConfig="noConfig",e.MissingAuthConfig="missingAuthConfig",e.EmptyUsername="emptyUsername",e.InvalidUsername="invalidUsername",e.EmptyPassword="emptyPassword",e.EmptyCode="emptyCode",e.SignUpError="signUpError",e.NoMFA="noMFA",e.InvalidMFA="invalidMFA",e.EmptyChallengeResponse="emptyChallengeResponse",e.NoUserSession="noUserSession",e.Default="default"}(qr||(qr={}));var ei=n(6489);function ti(e,t){void 0===t&&(t={});var n=function(e){return e&&"j"===e[0]&&":"===e[1]?e.substr(2):e}(e);if(function(e,t){return void 0===t&&(t=!e||"{"!==e[0]&&"["!==e[0]&&'"'!==e[0]),!t}(n,t.doNotParse))try{return JSON.parse(n)}catch(e){}return e}var ni=function(){return(ni=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};const ri=function(){function e(e,t){var n=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(e,t){return"string"==typeof e?ei.Q(e,t):"object"==typeof e&&null!==e?e:{}}(e,t),new Promise((function(){n.HAS_DOCUMENT_COOKIE="object"==typeof document&&"string"==typeof document.cookie})).catch((function(){}))}return e.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=ei.Q(document.cookie,e))},e.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},e.prototype.get=function(e,t,n){return void 0===t&&(t={}),this._updateBrowserValues(n),ti(this.cookies[e],t)},e.prototype.getAll=function(e,t){void 0===e&&(e={}),this._updateBrowserValues(t);var n={};for(var r in this.cookies)n[r]=ti(this.cookies[r],e);return n},e.prototype.set=function(e,t,n){var r;"object"==typeof t&&(t=JSON.stringify(t)),this.cookies=ni(ni({},this.cookies),((r={})[e]=t,r)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=ei.q(e,t,n)),this._emitChange({name:e,value:t,options:n})},e.prototype.remove=function(e,t){var n=t=ni(ni({},t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=ni({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=ei.q(e,"",n)),this._emitChange({name:e,value:void 0,options:t})},e.prototype.addChangeListener=function(e){this.changeListeners.push(e)},e.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},e}();var ii,oi=_().isBrowser,si=function(){function e(e){void 0===e&&(e={}),this.cookies=new ri,this.store=oi?window.localStorage:Object.create(null),this.cookies=e.req?new ri(e.req.headers.cookie):new ri,Object.assign(this.store,this.cookies.getAll())}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.entries(this.store).length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){var e=this;Array.from(new Array(this.length)).map((function(t,n){return e.key(n)})).forEach((function(t){return e.removeItem(t)}))},e.prototype.getItem=function(e){return this.getLocalItem(e)},e.prototype.getLocalItem=function(e){return Object.prototype.hasOwnProperty.call(this.store,e)?this.store[e]:null},e.prototype.getUniversalItem=function(e){return this.cookies.get(e)},e.prototype.key=function(e){return Object.keys(this.store)[e]},e.prototype.removeItem=function(e){this.removeLocalItem(e),this.removeUniversalItem(e)},e.prototype.removeLocalItem=function(e){delete this.store[e]},e.prototype.removeUniversalItem=function(e){this.cookies.remove(e,{path:"/"})},e.prototype.setItem=function(e,t){switch(this.setLocalItem(e,t),e.split(".").pop()){case"LastAuthUser":case"accessToken":case"idToken":this.setUniversalItem(e,t)}},e.prototype.setLocalItem=function(e,t){this.store[e]=t},e.prototype.setUniversalItem=function(e,t){this.cookies.set(e,t,{path:"/",sameSite:!0,secure:"localhost"!==window.location.hostname})},e}(),ai=function(){function e(e){var t=e||{},n=t.ValidationData,r=t.Username,i=t.Password,o=t.AuthParameters,s=t.ClientMetadata;this.validationData=n||{},this.authParameters=o||{},this.clientMetadata=s||{},this.username=r,this.password=i}var t=e.prototype;return t.getUsername=function(){return this.username},t.getPassword=function(){return this.password},t.getValidationData=function(){return this.validationData},t.getAuthParameters=function(){return this.authParameters},t.getClientMetadata=function(){return this.clientMetadata},e}(),ui=n(8764),ci=n(8249),li=n.n(ci),fi=(n(4433),n(2153)),di=n.n(fi),hi=n(8010),pi=n.n(hi);if("undefined"!=typeof window&&window.crypto&&(ii=window.crypto),!ii&&"undefined"!=typeof window&&window.msCrypto&&(ii=window.msCrypto),!ii&&void 0!==n.g&&n.g.crypto&&(ii=n.g.crypto),!ii)try{ii=n(Object(function(){var e=new Error("Cannot find module 'crypto'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(e){}function vi(){if(ii){if("function"==typeof ii.getRandomValues)try{return ii.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof ii.randomBytes)try{return ii.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}var gi=function(){function e(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length}var t=e.prototype;return t.random=function(t){for(var n=[],r=0;r<t;r+=4)n.push(vi());return new e(n,t)},t.toString=function(){return function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")}(this)},e}();const yi=mi;function mi(e,t){null!=e&&this.fromString(e,t)}function bi(){return new mi(null)}var wi,Si="undefined"!=typeof navigator;Si&&"Microsoft Internet Explorer"==navigator.appName?(mi.prototype.am=function(e,t,n,r,i,o){for(var s=32767&t,a=t>>15;--o>=0;){var u=32767&this[e],c=this[e++]>>15,l=a*u+c*s;i=((u=s*u+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+a*c+(i>>>30),n[r++]=1073741823&u}return i},wi=30):Si&&"Netscape"!=navigator.appName?(mi.prototype.am=function(e,t,n,r,i,o){for(;--o>=0;){var s=t*this[e++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i},wi=26):(mi.prototype.am=function(e,t,n,r,i,o){for(var s=16383&t,a=t>>14;--o>=0;){var u=16383&this[e],c=this[e++]>>14,l=a*u+c*s;i=((u=s*u+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+a*c,n[r++]=268435455&u}return i},wi=28),mi.prototype.DB=wi,mi.prototype.DM=(1<<wi)-1,mi.prototype.DV=1<<wi,mi.prototype.FV=Math.pow(2,52),mi.prototype.F1=52-wi,mi.prototype.F2=2*wi-52;var _i,Ei,Ii=new Array;for(_i="0".charCodeAt(0),Ei=0;Ei<=9;++Ei)Ii[_i++]=Ei;for(_i="a".charCodeAt(0),Ei=10;Ei<36;++Ei)Ii[_i++]=Ei;for(_i="A".charCodeAt(0),Ei=10;Ei<36;++Ei)Ii[_i++]=Ei;function Ai(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function Ci(e,t){var n=Ii[e.charCodeAt(t)];return null==n?-1:n}function Ti(e){var t=bi();return t.fromInt(e),t}function Oi(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function xi(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}xi.prototype.convert=function(e){var t=bi();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(mi.ZERO)>0&&this.m.subTo(t,t),t},xi.prototype.revert=function(e){var t=bi();return e.copyTo(t),this.reduce(t),t},xi.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},xi.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},xi.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},mi.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},mi.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},mi.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var r=e.length,i=!1,o=0;--r>=0;){var s=Ci(e,r);s<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=s:o+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=n)>=this.DB&&(o-=this.DB))}this.clamp(),i&&mi.ZERO.subTo(this,this)},mi.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},mi.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},mi.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},mi.prototype.lShiftTo=function(e,t){var n,r=e%this.DB,i=this.DB-r,o=(1<<i)-1,s=Math.floor(e/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+s+1]=this[n]>>i|a,a=(this[n]&o)<<r;for(n=s-1;n>=0;--n)t[n]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()},mi.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&o)<<i,t[s-n]=this[s]>>r;r>0&&(t[this.t-n-1]|=(this.s&o)<<i),t.t=this.t-n,t.clamp()}},mi.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()},mi.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;--i>=0;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&mi.ZERO.subTo(t,t)},mi.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},mi.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=bi());var o=bi(),s=this.s,a=e.s,u=this.DB-Oi(r[r.t-1]);u>0?(r.lShiftTo(u,o),i.lShiftTo(u,n)):(r.copyTo(o),i.copyTo(n));var c=o.t,l=o[c-1];if(0!=l){var f=l*(1<<this.F1)+(c>1?o[c-2]>>this.F2:0),d=this.FV/f,h=(1<<this.F1)/f,p=1<<this.F2,v=n.t,g=v-c,y=null==t?bi():t;for(o.dlShiftTo(g,y),n.compareTo(y)>=0&&(n[n.t++]=1,n.subTo(y,n)),mi.ONE.dlShiftTo(c,y),y.subTo(o,o);o.t<c;)o[o.t++]=0;for(;--g>=0;){var m=n[--v]==l?this.DM:Math.floor(n[v]*d+(n[v-1]+p)*h);if((n[v]+=o.am(0,m,n,g,0,c))<m)for(o.dlShiftTo(g,y),n.subTo(y,n);n[v]<--m;)n.subTo(y,n)}null!=t&&(n.drShiftTo(c,t),s!=a&&mi.ZERO.subTo(t,t)),n.t=c,n.clamp(),u>0&&n.rShiftTo(u,n),s<0&&mi.ZERO.subTo(n,n)}}},mi.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},mi.prototype.addTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},mi.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}var n,r=(1<<t)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(n=this[s]>>a)>0&&(i=!0,o=Ai(n));s>=0;)a<t?(n=(this[s]&(1<<a)-1)<<t-a,n|=this[--s]>>(a+=this.DB-t)):(n=this[s]>>(a-=t)&r,a<=0&&(a+=this.DB,--s)),n>0&&(i=!0),i&&(o+=Ai(n));return i?o:"0"},mi.prototype.negate=function(){var e=bi();return mi.ZERO.subTo(this,e),e},mi.prototype.abs=function(){return this.s<0?this.negate():this},mi.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},mi.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Oi(this[this.t-1]^this.s&this.DM)},mi.prototype.mod=function(e){var t=bi();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(mi.ZERO)>0&&e.subTo(t,t),t},mi.prototype.equals=function(e){return 0==this.compareTo(e)},mi.prototype.add=function(e){var t=bi();return this.addTo(e,t),t},mi.prototype.subtract=function(e){var t=bi();return this.subTo(e,t),t},mi.prototype.multiply=function(e){var t=bi();return this.multiplyTo(e,t),t},mi.prototype.divide=function(e){var t=bi();return this.divRemTo(e,t,null),t},mi.prototype.modPow=function(e,t,n){var r,i=e.bitLength(),o=Ti(1),s=new xi(t);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6;var a=new Array,u=3,c=r-1,l=(1<<r)-1;if(a[1]=s.convert(this),r>1){var f=bi();for(s.sqrTo(a[1],f);u<=l;)a[u]=bi(),s.mulTo(f,a[u-2],a[u]),u+=2}var d,h,p=e.t-1,v=!0,g=bi();for(i=Oi(e[p])-1;p>=0;){for(i>=c?d=e[p]>>i-c&l:(d=(e[p]&(1<<i+1)-1)<<c-i,p>0&&(d|=e[p-1]>>this.DB+i-c)),u=r;0==(1&d);)d>>=1,--u;if((i-=u)<0&&(i+=this.DB,--p),v)a[d].copyTo(o),v=!1;else{for(;u>1;)s.sqrTo(o,g),s.sqrTo(g,o),u-=2;u>0?s.sqrTo(o,g):(h=o,o=g,g=h),s.mulTo(g,a[d],o)}for(;p>=0&&0==(e[p]&1<<i);)s.sqrTo(o,g),h=o,o=g,g=h,--i<0&&(i=this.DB-1,--p)}var y=s.revert(o);return n(null,y),y},mi.ZERO=Ti(0),mi.ONE=Ti(1);var ki=function(e){return ui.lW.from((new gi).random(e).toString(),"hex")},Pi=function(){function e(e){this.N=new yi("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new yi("2",16),this.k=new yi(this.hexHash("00"+this.N.toString(16)+"0"+this.g.toString(16)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue((function(){})),this.infoBits=ui.lW.from("Caldera Derived Key","utf8"),this.poolName=e}var t=e.prototype;return t.getSmallAValue=function(){return this.smallAValue},t.getLargeAValue=function(e){var t=this;this.largeAValue?e(null,this.largeAValue):this.calculateA(this.smallAValue,(function(n,r){n&&e(n,null),t.largeAValue=r,e(null,t.largeAValue)}))},t.generateRandomSmallA=function(){var e=ki(128).toString("hex");return new yi(e,16).mod(this.N)},t.generateRandomString=function(){return ki(40).toString("base64")},t.getRandomPassword=function(){return this.randomPassword},t.getSaltDevices=function(){return this.SaltToHashDevices},t.getVerifierDevices=function(){return this.verifierDevices},t.generateHashDevice=function(e,t,n){var r=this;this.randomPassword=this.generateRandomString();var i=""+e+t+":"+this.randomPassword,o=this.hash(i),s=ki(16).toString("hex");this.SaltToHashDevices=this.padHex(new yi(s,16)),this.g.modPow(new yi(this.hexHash(this.SaltToHashDevices+o),16),this.N,(function(e,t){e&&n(e,null),r.verifierDevices=r.padHex(t),n(null,null)}))},t.calculateA=function(e,t){var n=this;this.g.modPow(e,this.N,(function(e,r){e&&t(e,null),r.mod(n.N).equals(yi.ZERO)&&t(new Error("Illegal paramater. A mod N cannot be 0."),null),t(null,r)}))},t.calculateU=function(e,t){return this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t)),new yi(this.UHexHash,16)},t.hash=function(e){var t=e instanceof ui.lW?li().lib.WordArray.create(e):e,n=di()(t).toString();return new Array(64-n.length).join("0")+n},t.hexHash=function(e){return this.hash(ui.lW.from(e,"hex"))},t.computehkdf=function(e,t){var n=li().lib.WordArray.create(ui.lW.concat([this.infoBits,ui.lW.from(String.fromCharCode(1),"utf8")])),r=e instanceof ui.lW?li().lib.WordArray.create(e):e,i=t instanceof ui.lW?li().lib.WordArray.create(t):t,o=pi()(r,i),s=pi()(n,o);return ui.lW.from(s.toString(),"hex").slice(0,16)},t.getPasswordAuthenticationKey=function(e,t,n,r,i){var o=this;if(n.mod(this.N).equals(yi.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(yi.ZERO))throw new Error("U cannot be zero.");var s=""+this.poolName+e+":"+t,a=this.hash(s),u=new yi(this.hexHash(this.padHex(r)+a),16);this.calculateS(u,n,(function(e,t){e&&i(e,null);var n=o.computehkdf(ui.lW.from(o.padHex(t),"hex"),ui.lW.from(o.padHex(o.UValue.toString(16)),"hex"));i(null,n)}))},t.calculateS=function(e,t,n){var r=this;this.g.modPow(e,this.N,(function(i,o){i&&n(i,null),t.subtract(r.k.multiply(o)).modPow(r.smallAValue.add(r.UValue.multiply(e)),r.N,(function(e,t){e&&n(e,null),n(null,t.mod(r.N))}))}))},t.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},t.padHex=function(e){var t=e.toString(16);return t.length%2==1?t="0"+t:-1!=="89ABCDEFabcdef".indexOf(t[0])&&(t="00"+t),t},e}(),Ni=function(){function e(e){this.jwtToken=e||"",this.payload=this.decodePayload()}var t=e.prototype;return t.getJwtToken=function(){return this.jwtToken},t.getExpiration=function(){return this.payload.exp},t.getIssuedAt=function(){return this.payload.iat},t.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(ui.lW.from(e,"base64").toString("utf8"))}catch(e){return{}}},e}(),Li=function(e){var t,n;function r(t){var n=(void 0===t?{}:t).AccessToken;return e.call(this,n||"")||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r}(Ni),Mi=function(e){var t,n;function r(t){var n=(void 0===t?{}:t).IdToken;return e.call(this,n||"")||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r}(Ni),Ri=function(){function e(e){var t=(void 0===e?{}:e).RefreshToken;this.token=t||""}return e.prototype.getToken=function(){return this.token},e}(),Di=n(8269),Ui=n.n(Di),ji=function(){function e(e){var t=void 0===e?{}:e,n=t.IdToken,r=t.RefreshToken,i=t.AccessToken,o=t.ClockDrift;if(null==i||null==n)throw new Error("Id token and Access Token must be present.");this.idToken=n,this.refreshToken=r,this.accessToken=i,this.clockDrift=void 0===o?this.calculateClockDrift():o}var t=e.prototype;return t.getIdToken=function(){return this.idToken},t.getRefreshToken=function(){return this.refreshToken},t.getAccessToken=function(){return this.accessToken},t.getClockDrift=function(){return this.clockDrift},t.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},t.isValid=function(){var e=Math.floor(new Date/1e3)-this.clockDrift;return e<this.accessToken.getExpiration()&&e<this.idToken.getExpiration()},e}(),Fi=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Bi=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],zi=function(){function e(){}return e.prototype.getNowString=function(){var e=new Date,t=Bi[e.getUTCDay()],n=Fi[e.getUTCMonth()],r=e.getUTCDate(),i=e.getUTCHours();i<10&&(i="0"+i);var o=e.getUTCMinutes();o<10&&(o="0"+o);var s=e.getUTCSeconds();return s<10&&(s="0"+s),t+" "+n+" "+r+" "+i+":"+o+":"+s+" UTC "+e.getUTCFullYear()},e}(),qi=function(){function e(e){var t=void 0===e?{}:e,n=t.Name,r=t.Value;this.Name=n||"",this.Value=r||""}var t=e.prototype;return t.getValue=function(){return this.Value},t.setValue=function(e){return this.Value=e,this},t.getName=function(){return this.Name},t.setName=function(e){return this.Name=e,this},t.toString=function(){return JSON.stringify(this)},t.toJSON=function(){return{Name:this.Name,Value:this.Value}},e}(),Ki={},Vi=function(){function e(){}return e.setItem=function(e,t){return Ki[e]=t,Ki[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(Ki,e)?Ki[e]:void 0},e.removeItem=function(e){return delete Ki[e]},e.clear=function(){return Ki={}},e}(),Hi=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=Vi}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),Gi="undefined"!=typeof navigator?navigator.userAgent:"nodejs",Wi=function(){function e(e){if(null==e||null==e.Username||null==e.Pool)throw new Error("Username and Pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||(new Hi).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var t=e.prototype;return t.setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},t.getSignInUserSession=function(){return this.signInUserSession},t.getUsername=function(){return this.username},t.getAuthenticationFlowType=function(){return this.authenticationFlowType},t.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},t.initiateAuth=function(e,t){var n=this,r=e.getAuthParameters();r.USERNAME=this.username;var i=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),o={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:r,ClientMetadata:i};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",o,(function(e,r){if(e)return t.onFailure(e);var i=r.ChallengeName,o=r.ChallengeParameters;return"CUSTOM_CHALLENGE"===i?(n.Session=r.Session,t.customChallenge(o)):(n.signInUserSession=n.getCognitoUserSession(r.AuthenticationResult),n.cacheTokens(),t.onSuccess(n.signInUserSession))}))},t.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(new Error("Authentication flow type is invalid."))},t.authenticateUserDefaultAuth=function(e,t){var n,r,i=this,o=new Pi(this.pool.getUserPoolId().split("_")[1]),s=new zi,a={};null!=this.deviceKey&&(a.DEVICE_KEY=this.deviceKey),a.USERNAME=this.username,o.getLargeAValue((function(u,c){u&&t.onFailure(u),a.SRP_A=c.toString(16),"CUSTOM_AUTH"===i.authenticationFlowType&&(a.CHALLENGE_NAME="SRP_A");var l=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),f={AuthFlow:i.authenticationFlowType,ClientId:i.pool.getClientId(),AuthParameters:a,ClientMetadata:l};i.getUserContextData(i.username)&&(f.UserContextData=i.getUserContextData(i.username)),i.client.request("InitiateAuth",f,(function(a,u){if(a)return t.onFailure(a);var c=u.ChallengeParameters;i.username=c.USER_ID_FOR_SRP,n=new yi(c.SRP_B,16),r=new yi(c.SALT,16),i.getCachedDeviceKeyAndPassword(),o.getPasswordAuthenticationKey(i.username,e.getPassword(),n,r,(function(e,n){e&&t.onFailure(e);var r=s.getNowString(),a=li().lib.WordArray.create(ui.lW.concat([ui.lW.from(i.pool.getUserPoolId().split("_")[1],"utf8"),ui.lW.from(i.username,"utf8"),ui.lW.from(c.SECRET_BLOCK,"base64"),ui.lW.from(r,"utf8")])),f=li().lib.WordArray.create(n),d=Ui().stringify(pi()(a,f)),h={};h.USERNAME=i.username,h.PASSWORD_CLAIM_SECRET_BLOCK=c.SECRET_BLOCK,h.TIMESTAMP=r,h.PASSWORD_CLAIM_SIGNATURE=d,null!=i.deviceKey&&(h.DEVICE_KEY=i.deviceKey);var p={ChallengeName:"PASSWORD_VERIFIER",ClientId:i.pool.getClientId(),ChallengeResponses:h,Session:u.Session,ClientMetadata:l};i.getUserContextData()&&(p.UserContextData=i.getUserContextData()),function e(t,n){return i.client.request("RespondToAuthChallenge",t,(function(r,o){return r&&"ResourceNotFoundException"===r.code&&-1!==r.message.toLowerCase().indexOf("device")?(h.DEVICE_KEY=null,i.deviceKey=null,i.randomPassword=null,i.deviceGroupKey=null,i.clearCachedDeviceKeyAndPassword(),e(t,n)):n(r,o)}))}(p,(function(e,n){return e?t.onFailure(e):i.authenticateUserInternal(n,o,t)}))}))}))}))},t.authenticateUserPlainUsernamePassword=function(e,t){var n=this,r={};if(r.USERNAME=this.username,r.PASSWORD=e.getPassword(),r.PASSWORD){var i=new Pi(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(r.DEVICE_KEY=this.deviceKey);var o=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),s={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:r,ClientMetadata:o};this.getUserContextData(this.username)&&(s.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",s,(function(e,r){return e?t.onFailure(e):n.authenticateUserInternal(r,i,t)}))}else t.onFailure(new Error("PASSWORD parameter is required"))},t.authenticateUserInternal=function(e,t,n){var r=this,i=e.ChallengeName,o=e.ChallengeParameters;if("SMS_MFA"===i)return this.Session=e.Session,n.mfaRequired(i,o);if("SELECT_MFA_TYPE"===i)return this.Session=e.Session,n.selectMFAType(i,o);if("MFA_SETUP"===i)return this.Session=e.Session,n.mfaSetup(i,o);if("SOFTWARE_TOKEN_MFA"===i)return this.Session=e.Session,n.totpRequired(i,o);if("CUSTOM_CHALLENGE"===i)return this.Session=e.Session,n.customChallenge(o);if("NEW_PASSWORD_REQUIRED"===i){this.Session=e.Session;var s=null,a=null,u=[],c=t.getNewPasswordRequiredChallengeUserAttributePrefix();if(o&&(s=JSON.parse(e.ChallengeParameters.userAttributes),a=JSON.parse(e.ChallengeParameters.requiredAttributes)),a)for(var l=0;l<a.length;l++)u[l]=a[l].substr(c.length);return n.newPasswordRequired(s,u)}if("DEVICE_SRP_AUTH"!==i){this.signInUserSession=this.getCognitoUserSession(e.AuthenticationResult),this.challengeName=i,this.cacheTokens();var f=e.AuthenticationResult.NewDeviceMetadata;if(null==f)return n.onSuccess(this.signInUserSession);t.generateHashDevice(e.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,e.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(i){if(i)return n.onFailure(i);var o={Salt:ui.lW.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:ui.lW.from(t.getVerifierDevices(),"hex").toString("base64")};r.verifierDevices=o.PasswordVerifier,r.deviceGroupKey=f.DeviceGroupKey,r.randomPassword=t.getRandomPassword(),r.client.request("ConfirmDevice",{DeviceKey:f.DeviceKey,AccessToken:r.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:o,DeviceName:Gi},(function(t,i){return t?n.onFailure(t):(r.deviceKey=e.AuthenticationResult.NewDeviceMetadata.DeviceKey,r.cacheDeviceKeyAndPassword(),!0===i.UserConfirmationNecessary?n.onSuccess(r.signInUserSession,i.UserConfirmationNecessary):n.onSuccess(r.signInUserSession))}))}))}else this.getDeviceResponse(n)},t.completeNewPasswordChallenge=function(e,t,n,r){var i=this;if(!e)return n.onFailure(new Error("New password is required."));var o=new Pi(this.pool.getUserPoolId().split("_")[1]),s=o.getNewPasswordRequiredChallengeUserAttributePrefix(),a={};t&&Object.keys(t).forEach((function(e){a[s+e]=t[e]})),a.NEW_PASSWORD=e,a.USERNAME=this.username;var u={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:a,Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",u,(function(e,t){return e?n.onFailure(e):i.authenticateUserInternal(t,o,n)}))},t.getDeviceResponse=function(e,t){var n=this,r=new Pi(this.deviceGroupKey),i=new zi,o={};o.USERNAME=this.username,o.DEVICE_KEY=this.deviceKey,r.getLargeAValue((function(s,a){s&&e.onFailure(s),o.SRP_A=a.toString(16);var u={ChallengeName:"DEVICE_SRP_AUTH",ClientId:n.pool.getClientId(),ChallengeResponses:o,ClientMetadata:t};n.getUserContextData()&&(u.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",u,(function(t,o){if(t)return e.onFailure(t);var s=o.ChallengeParameters,a=new yi(s.SRP_B,16),u=new yi(s.SALT,16);r.getPasswordAuthenticationKey(n.deviceKey,n.randomPassword,a,u,(function(t,r){if(t)return e.onFailure(t);var a=i.getNowString(),u=li().lib.WordArray.create(ui.lW.concat([ui.lW.from(n.deviceGroupKey,"utf8"),ui.lW.from(n.deviceKey,"utf8"),ui.lW.from(s.SECRET_BLOCK,"base64"),ui.lW.from(a,"utf8")])),c=li().lib.WordArray.create(r),l=Ui().stringify(pi()(u,c)),f={};f.USERNAME=n.username,f.PASSWORD_CLAIM_SECRET_BLOCK=s.SECRET_BLOCK,f.TIMESTAMP=a,f.PASSWORD_CLAIM_SIGNATURE=l,f.DEVICE_KEY=n.deviceKey;var d={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:n.pool.getClientId(),ChallengeResponses:f,Session:o.Session};n.getUserContextData()&&(d.UserContextData=n.getUserContextData()),n.client.request("RespondToAuthChallenge",d,(function(t,r){return t?e.onFailure(t):(n.signInUserSession=n.getCognitoUserSession(r.AuthenticationResult),n.cacheTokens(),e.onSuccess(n.signInUserSession))}))}))}))}))},t.confirmRegistration=function(e,t,n,r){var i={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t,ClientMetadata:r};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",i,(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.sendCustomChallengeAnswer=function(e,t,n){var r=this,i={};i.USERNAME=this.username,i.ANSWER=e;var o=new Pi(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(i.DEVICE_KEY=this.deviceKey);var s={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:i,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n};this.getUserContextData()&&(s.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",s,(function(e,n){return e?t.onFailure(e):r.authenticateUserInternal(n,o,t)}))},t.sendMFACode=function(e,t,n,r){var i=this,o={};o.USERNAME=this.username,o.SMS_MFA_CODE=e;var s=n||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===s&&(o.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(o.DEVICE_KEY=this.deviceKey);var a={ChallengeName:s,ChallengeResponses:o,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",a,(function(e,n){if(e)return t.onFailure(e);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(i.signInUserSession=i.getCognitoUserSession(n.AuthenticationResult),i.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return t.onSuccess(i.signInUserSession);var r=new Pi(i.pool.getUserPoolId().split("_")[1]);r.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,(function(e){if(e)return t.onFailure(e);var o={Salt:ui.lW.from(r.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:ui.lW.from(r.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=o.PasswordVerifier,i.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,i.randomPassword=r.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:o,DeviceName:Gi},(function(e,r){return e?t.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===r.UserConfirmationNecessary?t.onSuccess(i.signInUserSession,r.UserConfirmationNecessary):t.onSuccess(i.signInUserSession))}))}))}else i.getDeviceResponse(t)}))},t.changePassword=function(e,t,n,r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.enableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);var t=[];t.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?e(t,null):e(null,"SUCCESS")}))},t.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?n(e,null):n(null,"SUCCESS")}))},t.disableMFA=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t){return t?e(t,null):e(null,"SUCCESS")}))},t.deleteUser=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:t},(function(t){return t?e(t,null):(n.clearCachedUser(),e(null,"SUCCESS"))}))},t.updateAttributes=function(e,t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},(function(e){return e?t(e,null):r.getUserData((function(){return t(null,"SUCCESS")}),{bypassCache:!0})}))},t.getUserAttributes=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){if(t)return e(t,null);for(var r=[],i=0;i<n.UserAttributes.length;i++){var o={Name:n.UserAttributes[i].Name,Value:n.UserAttributes[i].Value},s=new qi(o);r.push(s)}return e(null,r)}))},t.getMFAOptions=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){return t?e(t,null):e(null,n.MFAOptions)}))},t.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},t.refreshSessionIfPossible=function(){var e=this;return new Promise((function(t){var n=e.signInUserSession.getRefreshToken();n&&n.getToken()?e.refreshSession(n,t):t()}))},t.getUserData=function(e,t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),e(new Error("User is not authenticated"),null);var r=this.getUserDataFromCache();if(r)if(this.isFetchUserDataAndTokenRequired(t))this.fetchUserData().then((function(e){return n.refreshSessionIfPossible().then((function(){return e}))})).then((function(t){return e(null,t)})).catch(e);else try{return void e(null,JSON.parse(r))}catch(t){return this.clearCachedUserData(),void e(t,null)}else this.fetchUserData().then((function(t){e(null,t)})).catch(e)},t.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},t.isFetchUserDataAndTokenRequired=function(e){var t=(e||{}).bypassCache;return void 0!==t&&t},t.fetchUserData=function(){var e=this;return this.createGetUserRequest().then((function(t){return e.cacheUserData(t),t}))},t.deleteAttributes=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?t(e,null):t(null,"SUCCESS")}))},t.resendConfirmationCode=function(e,t){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:t};this.client.request("ResendConfirmationCode",n,(function(t,n){return t?e(t,null):e(null,n)}))},t.getSession=function(e){if(null==this.username)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var t="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,n=t+".idToken",r=t+".accessToken",i=t+".refreshToken",o=t+".clockDrift";if(this.storage.getItem(n)){var s=new Mi({IdToken:this.storage.getItem(n)}),a=new Li({AccessToken:this.storage.getItem(r)}),u=new Ri({RefreshToken:this.storage.getItem(i)}),c=parseInt(this.storage.getItem(o),0)||0,l=new ji({IdToken:s,AccessToken:a,RefreshToken:u,ClockDrift:c});if(l.isValid())return this.signInUserSession=l,e(null,this.signInUserSession);if(!u.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(u,e)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},t.refreshSession=function(e,t,n){var r=this,i=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(t):t,o={};o.REFRESH_TOKEN=e.getToken();var s="CognitoIdentityServiceProvider."+this.pool.getClientId(),a=s+".LastAuthUser";if(this.storage.getItem(a)){this.username=this.storage.getItem(a);var u=s+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(u),o.DEVICE_KEY=this.deviceKey}var c={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:o,ClientMetadata:n};this.getUserContextData()&&(c.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",c,(function(t,n){if(t)return"NotAuthorizedException"===t.code&&r.clearCachedUser(),i(t,null);if(n){var o=n.AuthenticationResult;return Object.prototype.hasOwnProperty.call(o,"RefreshToken")||(o.RefreshToken=e.getToken()),r.signInUserSession=r.getCognitoUserSession(o),r.cacheTokens(),i(null,r.signInUserSession)}}))},t.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",i=e+"."+this.username+".clockDrift",o=e+".LastAuthUser";this.storage.setItem(t,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(r,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(i,""+this.signInUserSession.getClockDrift()),this.storage.setItem(o,this.username)},t.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},t.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},t.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},t.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.setItem(t,this.deviceKey),this.storage.setItem(n,this.randomPassword),this.storage.setItem(r,this.deviceGroupKey)},t.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.getItem(t)&&(this.deviceKey=this.storage.getItem(t),this.randomPassword=this.storage.getItem(n),this.deviceGroupKey=this.storage.getItem(r))},t.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r)},t.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",i=e+".LastAuthUser",o=e+"."+this.username+".clockDrift";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r),this.storage.removeItem(i),this.storage.removeItem(o)},t.getCognitoUserSession=function(e){var t=new Mi(e),n=new Li(e),r=new Ri(e);return new ji({IdToken:t,AccessToken:n,RefreshToken:r})},t.forgotPassword=function(e,t){var n={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:t};this.getUserContextData()&&(n.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",n,(function(t,n){return t?e.onFailure(t):"function"==typeof e.inputVerificationCode?e.inputVerificationCode(n):e.onSuccess(n)}))},t.confirmPassword=function(e,t,n,r){var i={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t,ClientMetadata:r};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",i,(function(e){return e?n.onFailure(e):n.onSuccess()}))},t.getAttributeVerificationCode=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:n},(function(e,n){return e?t.onFailure(e):"function"==typeof t.inputVerificationCode?t.inputVerificationCode(n):t.onSuccess()}))},t.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")}))},t.getDevice=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},(function(t,n){return t?e.onFailure(t):e.onSuccess(n)}))},t.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},(function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")}))},t.forgetDevice=function(e){var t=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:e.onFailure,onSuccess:function(n){return t.deviceKey=null,t.deviceGroupKey=null,t.randomPassword=null,t.clearCachedDeviceKeyAndPassword(),e.onSuccess(n)}})},t.setDeviceStatusRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},(function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")}))},t.setDeviceStatusNotRemembered=function(e){if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},(function(t){return t?e.onFailure(t):e.onSuccess("SUCCESS")}))},t.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));var r={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e};t&&(r.PaginationToken=t),this.client.request("ListDevices",r,(function(e,t){return e?n.onFailure(e):n.onSuccess(t)}))},t.globalSignOut=function(e){var t=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(n){return n?e.onFailure(n):(t.clearCachedUser(),e.onSuccess("SUCCESS"))}))},t.signOut=function(){this.signInUserSession=null,this.clearCachedUser()},t.sendMFASelectionAnswer=function(e,t){var n=this,r={};r.USERNAME=this.username,r.ANSWER=e;var i={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:r,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(i.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",i,(function(r,i){return r?t.onFailure(r):(n.Session=i.Session,"SMS_MFA"===e?t.mfaRequired(i.ChallengeName,i.ChallengeParameters):"SOFTWARE_TOKEN_MFA"===e?t.totpRequired(i.ChallengeName,i.ChallengeParameters):void 0)}))},t.getUserContextData=function(){return this.pool.getUserContextData(this.username)},t.associateSoftwareToken=function(e){var t=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},(function(t,n){return t?e.onFailure(t):e.associateSecretCode(n.SecretCode)})):this.client.request("AssociateSoftwareToken",{Session:this.Session},(function(n,r){return n?e.onFailure(n):(t.Session=r.Session,e.associateSecretCode(r.SecretCode))}))},t.verifySoftwareToken=function(e,t,n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},(function(e,t){return e?n.onFailure(e):n.onSuccess(t)})):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},(function(e,t){if(e)return n.onFailure(e);r.Session=t.Session;var i={};i.USERNAME=r.username;var o={ChallengeName:"MFA_SETUP",ClientId:r.pool.getClientId(),ChallengeResponses:i,Session:r.Session};r.getUserContextData()&&(o.UserContextData=r.getUserContextData()),r.client.request("RespondToAuthChallenge",o,(function(e,t){return e?n.onFailure(e):(r.signInUserSession=r.getCognitoUserSession(t.AuthenticationResult),r.cacheTokens(),n.onSuccess(r.signInUserSession))}))}))},e}();function Yi(){}n(204),Yi.prototype.userAgent="aws-amplify/0.1.x js";var $i=function(e){e&&(Yi.prototype.userAgent&&!Yi.prototype.userAgent.includes(e)&&(Yi.prototype.userAgent=Yi.prototype.userAgent.concat(" ",e)),Yi.prototype.userAgent&&""!==Yi.prototype.userAgent||(Yi.prototype.userAgent=e))};const Ji=Yi;function Qi(e){var t="function"==typeof Map?new Map:void 0;return(Qi=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Zi(e,arguments,to(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),eo(r,e)})(e)}function Zi(e,t,n){return(Zi=Xi()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&eo(i,n.prototype),i}).apply(null,arguments)}function Xi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function eo(e,t){return(eo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function to(e){return(to=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var no=function(e){var t,n;function r(t,n,r,i){var o;return(o=e.call(this,t)||this).code=n,o.name=r,o.statusCode=i,o}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r}(Qi(Error)),ro=function(){function e(e,t,n){this.endpoint=t||"https://cognito-idp."+e+".amazonaws.com/";var r=(n||{}).credentials;this.fetchOptions=r?{credentials:r}:{}}var t=e.prototype;return t.promisifyRequest=function(e,t){var n=this;return new Promise((function(r,i){n.request(e,t,(function(e,t){e?i(new no(e.message,e.code,e.name,e.statusCode)):r(t)}))}))},t.request=function(e,t,n){var r,i={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":Ji.prototype.userAgent},o=Object.assign({},this.fetchOptions,{headers:i,method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(t)});fetch(this.endpoint,o).then((function(e){return r=e,e}),(function(e){if(e instanceof TypeError)throw new Error("Network error");throw e})).then((function(e){return e.json().catch((function(){return{}}))})).then((function(e){if(r.ok)return n(null,e);var t=(e.__type||e.code).split("#").pop(),i={code:t,name:t,message:e.message||e.Message||null};return n(i)})).catch((function(e){if(!(r&&r.headers&&r.headers.get("x-amzn-errortype"))){if(e instanceof Error&&"Network error"===e.message){var t={code:"NetworkError",name:e.name,message:e.message};return n(t)}return n(e)}try{var i=r.headers.get("x-amzn-errortype").split(":")[0],o={code:i,name:i,statusCode:r.status,message:r.status?r.status.toString():null};return n(o)}catch(t){return n(e)}}))},e}(),io=function(){function e(e,t){var n=e||{},r=n.UserPoolId,i=n.ClientId,o=n.endpoint,s=n.fetchOptions,a=n.AdvancedSecurityDataCollectionFlag;if(!r||!i)throw new Error("Both UserPoolId and ClientId are required.");if(!/^[\w-]+_.+$/.test(r))throw new Error("Invalid UserPoolId format.");var u=r.split("_")[0];this.userPoolId=r,this.clientId=i,this.client=new ro(u,o,s),this.advancedSecurityDataCollectionFlag=!1!==a,this.storage=e.Storage||(new Hi).getStorage(),t&&(this.wrapRefreshSessionCallback=t)}var t=e.prototype;return t.getUserPoolId=function(){return this.userPoolId},t.getClientId=function(){return this.clientId},t.signUp=function(e,t,n,r,i,o){var s=this,a={ClientId:this.clientId,Username:e,Password:t,UserAttributes:n,ValidationData:r,ClientMetadata:o};this.getUserContextData(e)&&(a.UserContextData=this.getUserContextData(e)),this.client.request("SignUp",a,(function(t,n){if(t)return i(t,null);var r={Username:e,Pool:s,Storage:s.storage},o={user:new Wi(r),userConfirmed:n.UserConfirmed,userSub:n.UserSub,codeDeliveryDetails:n.CodeDeliveryDetails};return i(null,o)}))},t.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",t=this.storage.getItem(e);if(t){var n={Username:t,Pool:this,Storage:this.storage};return new Wi(n)}return null},t.getUserContextData=function(e){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var n=t.getData(e,this.userPoolId,this.clientId);if(n)return{EncodedData:n}}return{}}},e}(),oo=n(6808),so=function(){function e(e){if(!e.domain)throw new Error("The domain of cookieStorage can not be undefined.");if(this.domain=e.domain,e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!["strict","lax","none"].includes(e.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===e.sameSite&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=e.sameSite}else this.sameSite=null}var t=e.prototype;return t.setItem=function(e,t){var n={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(n.sameSite=this.sameSite),oo.set(e,t,n),oo.get(e)},t.getItem=function(e){return oo.get(e)},t.removeItem=function(e){var t={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(t.sameSite=this.sameSite),oo.remove(e,t)},t.clear=function(){var e,t=oo.get();for(e=0;e<t.length;++e)oo.remove(t[e]);return{}},e}(),ao=n(8575),uo=function(e){var t=window.open(e,"_self");return t?Promise.resolve(t):Promise.reject()},co=function(){return(co=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},lo=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},fo=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},ho=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},po="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",vo=function(e,t,n){Yr.dispatch("auth",{event:e,data:t,message:n},"Auth",po)},go=new i.k("OAuth");const yo=function(){function e(e){var t=e.config,n=e.cognitoClientId,r=e.scopes,i=void 0===r?[]:r;if(this._urlOpener=t.urlOpener||uo,this._config=t,this._cognitoClientId=n,!this.isValidScopes(i))throw Error("scopes must be a String Array");this._scopes=i}return e.prototype.isValidScopes=function(e){return Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))},e.prototype.oauthSignIn=function(e,t,n,r,i,o){void 0===e&&(e="code"),void 0===i&&(i=zr.Cognito);var s=this._generateState(32),a=o?s+"-"+o.split("").map((function(e){return e.charCodeAt(0).toString(16).padStart(2,"0")})).join(""):s;!function(e){window.sessionStorage.setItem("oauth_state",e)}(a);var u,c=this._generateRandom(128);u=c,window.sessionStorage.setItem("ouath_pkce_key",u);var l=this._generateChallenge(c),f=this._scopes.join(" "),d="https://"+t+"/oauth2/authorize?"+Object.entries(co(co({redirect_uri:n,response_type:e,client_id:r,identity_provider:i,scope:f,state:a},"code"===e?{code_challenge:l}:{}),"code"===e?{code_challenge_method:"S256"}:{})).map((function(e){var t=ho(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)})).join("&");go.debug("Redirecting to "+d),this._urlOpener(d,n)},e.prototype._handleCodeFlow=function(e){return lo(this,void 0,void 0,(function(){var t,n,r,i,o,s,a,u,c,l,f,d;return fo(this,(function(h){switch(h.label){case 0:return(t=((0,ao.Qc)(e).query||"").split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n,r=ho(t,2),i=r[0],o=r[1];return co(co({},e),((n={})[i]=o,n))}),{code:void 0}).code)&&(0,ao.Qc)(e).pathname===(0,ao.Qc)(this._config.redirectSignIn).pathname?(n="https://"+this._config.domain+"/oauth2/token",vo("codeFlow",{},"Retrieving tokens from "+n),r=Xr(this._config)?this._cognitoClientId:this._config.clientID,i=Xr(this._config)?this._config.redirectSignIn:this._config.redirectUri,p=window.sessionStorage.getItem("ouath_pkce_key"),window.sessionStorage.removeItem("ouath_pkce_key"),s=co({grant_type:"authorization_code",code:t,client_id:r,redirect_uri:i},(o=p)?{code_verifier:o}:{}),go.debug("Calling token endpoint: "+n+" with",s),a=Object.entries(s).map((function(e){var t=ho(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)})).join("&"),[4,fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a})]):[2];case 1:return[4,h.sent().json()];case 2:if(u=h.sent(),c=u.access_token,l=u.refresh_token,f=u.id_token,d=u.error)throw new Error(d);return[2,{accessToken:c,refreshToken:l,idToken:f}]}var p}))}))},e.prototype._handleImplicitFlow=function(e){return lo(this,void 0,void 0,(function(){var t,n,r;return fo(this,(function(i){return t=((0,ao.Qc)(e).hash||"#").substr(1).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n,r=ho(t,2),i=r[0],o=r[1];return co(co({},e),((n={})[i]=o,n))}),{id_token:void 0,access_token:void 0}),n=t.id_token,r=t.access_token,vo("implicitFlow",{},"Got tokens from "+e),go.debug("Retrieving implicit tokens from "+e+" with"),[2,{accessToken:r,idToken:n,refreshToken:null}]}))}))},e.prototype.handleAuthResponse=function(e){return lo(this,void 0,void 0,(function(){var t,n,r,i,o,s,a;return fo(this,(function(u){switch(u.label){case 0:if(u.trys.push([0,5,,6]),t=e?co(co({},((0,ao.Qc)(e).hash||"#").substr(1).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n=ho(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})),((0,ao.Qc)(e).query||"").split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var n=ho(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})):{},n=t.error,r=t.error_description,n)throw new Error(r);return i=this._validateState(t),go.debug("Starting "+this._config.responseType+" flow with "+e),"code"!==this._config.responseType?[3,2]:(o=[{}],[4,this._handleCodeFlow(e)]);case 1:return[2,co.apply(void 0,[co.apply(void 0,o.concat([u.sent()])),{state:i}])];case 2:return s=[{}],[4,this._handleImplicitFlow(e)];case 3:return[2,co.apply(void 0,[co.apply(void 0,s.concat([u.sent()])),{state:i}])];case 4:return[3,6];case 5:throw a=u.sent(),go.error("Error handling auth response.",a),a;case 6:return[2]}}))}))},e.prototype._validateState=function(e){if(e){var t,n=(t=window.sessionStorage.getItem("oauth_state"),window.sessionStorage.removeItem("oauth_state"),t),r=e.state;if(n&&n!==r)throw new Error("Invalid state in OAuth flow");return r}},e.prototype.signOut=function(){return lo(this,void 0,void 0,(function(){var e,t,n;return fo(this,(function(r){return e="https://"+this._config.domain+"/logout?",t=Xr(this._config)?this._cognitoClientId:this._config.oauth.clientID,n=Xr(this._config)?this._config.redirectSignOut:this._config.returnTo,e+=Object.entries({client_id:t,logout_uri:encodeURIComponent(n)}).map((function(e){var t=ho(e,2);return t[0]+"="+t[1]})).join("&"),vo("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+e),go.debug("Signing out from "+e),[2,this._urlOpener(e)]}))}))},e.prototype._generateState=function(e){for(var t="",n=e,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";n>0;--n)t+=r[Math.round(Math.random()*(r.length-1))];return t},e.prototype._generateChallenge=function(e){return this._base64URL(di()(e))},e.prototype._base64URL=function(e){return e.toString(Ui()).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},e.prototype._generateRandom=function(e){var t=new Uint8Array(e);if("undefined"!=typeof window&&window.crypto)window.crypto.getRandomValues(t);else for(var n=0;n<e;n+=1)t[n]=Math.random()*"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~".length|0;return this._bufferToString(t)},e.prototype._bufferToString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],r=0;r<e.byteLength;r+=1){var i=e[r]%t.length;n.push(t[i])}return n.join("")},e}();var mo;!function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty"}(mo||(mo={}));var bo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wo=new i.k("AuthError"),So=function(e){function t(n){var r=this,i=Eo[n],o=i.message,s=i.log;return(r=e.call(this,o)||this).constructor=t,Object.setPrototypeOf(r,t.prototype),r.name="AuthError",r.log=s||o,wo.error(r.log),r}return bo(t,e),t}(Error),_o=function(e){function t(n){var r=e.call(this,n)||this;return r.constructor=t,Object.setPrototypeOf(r,t.prototype),r.name="NoUserPoolError",r}return bo(t,e),t}(So),Eo={noConfig:{message:mo.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of aws-amplify or amplify packages in your node_modules.\n                Try deleting your node_modules folder and reinstalling the dependencies with `yarn install`\n        "},missingAuthConfig:{message:mo.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties. \n            Did you run `amplify push` after adding auth via `amplify add auth`?\n            See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n        "},emptyUsername:{message:mo.EMPTY_USERNAME},invalidUsername:{message:mo.INVALID_USERNAME},emptyPassword:{message:mo.EMPTY_PASSWORD},emptyCode:{message:mo.EMPTY_CODE},signUpError:{message:mo.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:mo.NO_MFA},invalidMFA:{message:mo.INVALID_MFA},emptyChallengeResponse:{message:mo.EMPTY_CHALLENGE},noUserSession:{message:mo.NO_USER_SESSION},default:{message:mo.DEFAULT_MSG}},Io=function(){return(Io=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ao=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Co=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},To=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Oo=new i.k("AuthClass"),xo="aws.cognito.signin.user.admin",ko="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Po=function(e,t,n){Yr.dispatch("auth",{event:e,data:t,message:n},"Auth",ko)},No=new(function(){function e(e){var t=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.Credentials=Br,this.wrapRefreshSessionCallback=function(e){return function(t,n){return n?Po("tokenRefresh",void 0,"New token retrieved"):Po("tokenRefresh_failure",t,"Failed to retrieve new token"),e(t,n)}},this.configure(e),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),Yr.listen("auth",(function(e){switch(e.payload.event){case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true")}}))}return e.prototype.getModuleName=function(){return"Auth"},e.prototype.configure=function(e){var t=this;if(!e)return this._config||{};Oo.debug("configure Auth");var n=Object.assign({},this._config,Qr.parseMobilehubConfig(e).Auth,e);this._config=n;var r=this._config,i=r.userPoolId,o=r.userPoolWebClientId,s=r.cookieStorage,a=r.oauth,u=r.region,c=r.identityPoolId,l=r.mandatorySignIn,f=r.refreshHandlers,h=r.identityPoolRegion,p=r.clientMetadata,v=r.endpoint;if(this._config.storage){if(!this._isValidAuthStorage(this._config.storage))throw Oo.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=this._config.storage}else this._storage=s?new so(s):e.ssr?new si:(new d).getStorage();if(this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),i){var g={UserPoolId:i,ClientId:o,endpoint:v};g.Storage=this._storage,this.userPool=new io(g,this.wrapRefreshSessionCallback)}this.Credentials.configure({mandatorySignIn:l,region:h||u,userPoolId:i,identityPoolId:c,refreshHandlers:f,storage:this._storage});var y=a?Xr(this._config.oauth)?a:a.awsCognito:void 0;if(y){var m=Object.assign({cognitoClientId:o,UserPoolId:i,domain:y.domain,scopes:y.scope,redirectSignIn:y.redirectSignIn,redirectSignOut:y.redirectSignOut,responseType:y.responseType,Storage:this._storage,urlOpener:y.urlOpener,clientMetadata:p},y.options);this._oAuthHandler=new yo({scopes:m.scopes,config:m,cognitoClientId:m.cognitoClientId});var b={};!function(e){if(C.browserOrNode().isBrowser&&window.location)!function(e){var n=e.url;b[n]||(b[n]=!0,t._handleAuthResponse(n))}({url:window.location.href});else if(!C.browserOrNode().isNode)throw new Error("Not supported")}()}return Po("configured",null,"The Auth category has been configured successfully"),this._config},e.prototype.signUp=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this.userPool)return this.rejectNoUserPool();var i,o=null,s=null,a=[],u=null;if(e&&"string"==typeof e){o=e,s=n?n[0]:null;var c=n?n[1]:null,l=n?n[2]:null;c&&a.push({Name:"email",Value:c}),l&&a.push({Name:"phone_number",Value:l})}else{if(!e||"object"!=typeof e)return this.rejectAuthError(qr.SignUpError);o=e.username,s=e.password,e&&e.clientMetadata?i=e.clientMetadata:this._config.clientMetadata&&(i=this._config.clientMetadata);var f=e.attributes;f&&Object.keys(f).map((function(e){var t={Name:e,Value:f[e]};a.push(t)})),u=e.validationData||null}return o?s?(Oo.debug("signUp attrs:",a),Oo.debug("signUp validation data:",u),new Promise((function(e,n){t.userPool.signUp(o,s,a,u,(function(t,r){t?(Po("signUp_failure",t,o+" failed to signup"),n(t)):(Po("signUp",r,o+" has signed up successfully"),e(r))}),i)}))):this.rejectAuthError(qr.EmptyPassword):this.rejectAuthError(qr.EmptyUsername)},e.prototype.confirmSignUp=function(e,t,n){if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(qr.EmptyUsername);if(!t)return this.rejectAuthError(qr.EmptyCode);var r,i=this.createCognitoUser(e),o=!n||"boolean"!=typeof n.forceAliasCreation||n.forceAliasCreation;return n&&n.clientMetadata?r=n.clientMetadata:this._config.clientMetadata&&(r=this._config.clientMetadata),new Promise((function(e,n){i.confirmRegistration(t,o,(function(t,r){t?n(t):e(r)}),r)}))},e.prototype.resendSignUp=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(qr.EmptyUsername);var n=this.createCognitoUser(e);return new Promise((function(e,r){n.resendConfirmationCode((function(t,n){t?r(t):e(n)}),t)}))},e.prototype.signIn=function(e,t,n){if(void 0===n&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var r=null,i=null,o={};if("string"==typeof e)r=e,i=t;else{if(!e.username)return this.rejectAuthError(qr.InvalidUsername);void 0!==t&&Oo.warn("The password should be defined under the first parameter object!"),r=e.username,i=e.password,o=e.validationData}if(!r)return this.rejectAuthError(qr.EmptyUsername);var s=new ai({Username:r,Password:i,ValidationData:o,ClientMetadata:n});return i?this.signInWithPassword(s):this.signInWithoutPassword(s)},e.prototype.authCallbacks=function(e,t,n){var r=this,i=this;return{onSuccess:function(o){return Ao(r,void 0,void 0,(function(){var r,s,a,u;return Co(this,(function(c){switch(c.label){case 0:Oo.debug(o),delete e.challengeName,delete e.challengeParam,c.label=1;case 1:return c.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return c.sent(),[4,this.Credentials.set(o,"session")];case 3:return r=c.sent(),Oo.debug("succeed to get cognito credentials",r),[3,9];case 4:return s=c.sent(),Oo.debug("cannot get cognito credentials",s),[3,9];case 5:return c.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return a=c.sent(),i.user=a,Po("signIn",a,"A user "+e.getUsername()+" has been signed in"),t(a),[3,8];case 7:return u=c.sent(),Oo.error("Failed to get the signed in user",u),n(u),[3,8];case 8:return[7];case 9:return[2]}}))}))},onFailure:function(t){Oo.debug("signIn failure",t),Po("signIn_failure",t,e.getUsername()+" failed to signin"),n(t)},customChallenge:function(n){Oo.debug("signIn custom challenge answer required"),e.challengeName="CUSTOM_CHALLENGE",e.challengeParam=n,t(e)},mfaRequired:function(n,r){Oo.debug("signIn MFA required"),e.challengeName=n,e.challengeParam=r,t(e)},mfaSetup:function(n,r){Oo.debug("signIn mfa setup",n),e.challengeName=n,e.challengeParam=r,t(e)},newPasswordRequired:function(n,r){Oo.debug("signIn new password"),e.challengeName="NEW_PASSWORD_REQUIRED",e.challengeParam={userAttributes:n,requiredAttributes:r},t(e)},totpRequired:function(n,r){Oo.debug("signIn totpRequired"),e.challengeName=n,e.challengeParam=r,t(e)},selectMFAType:function(n,r){Oo.debug("signIn selectMFAType",n),e.challengeName=n,e.challengeParam=r,t(e)}}},e.prototype.signInWithPassword=function(e){var t=this;if(this.pendingSignIn)throw new Error("Pending sign-in attempt already in progress");var n=this.createCognitoUser(e.getUsername());return this.pendingSignIn=new Promise((function(r,i){n.authenticateUser(e,t.authCallbacks(n,(function(e){t.pendingSignIn=null,r(e)}),(function(e){t.pendingSignIn=null,i(e)})))})),this.pendingSignIn},e.prototype.signInWithoutPassword=function(e){var t=this,n=this.createCognitoUser(e.getUsername());return n.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise((function(r,i){n.initiateAuth(e,t.authCallbacks(n,r,i))}))},e.prototype.getMFAOptions=function(e){return new Promise((function(t,n){e.getMFAOptions((function(e,r){if(e)return Oo.debug("get MFA Options failed",e),void n(e);Oo.debug("get MFA options success",r),t(r)}))}))},e.prototype.getPreferredMFA=function(e,t){var n=this;return new Promise((function(r,i){var o=!!t&&t.bypassCache;e.getUserData((function(e,t){if(e)return Oo.debug("getting preferred mfa failed",e),void i(e);var o=n._getMfaTypeFromUserData(t);return o?void r(o):void i("invalid MFA Type")}),{bypassCache:o})}))},e.prototype._getMfaTypeFromUserData=function(e){var t=null,n=e.PreferredMfaSetting;if(n)t=n;else{var r=e.UserMFASettingList;r?0===r.length?t="NOMFA":Oo.debug("invalid case for getPreferredMFA",e):t=e.MFAOptions?"SMS_MFA":"NOMFA"}return t},e.prototype._getUserData=function(e,t){return new Promise((function(n,r){e.getUserData((function(e,t){return e?(Oo.debug("getting user data failed",e),void r(e)):void n(t)}),t)}))},e.prototype.setPreferredMFA=function(e,t){return Ao(this,void 0,void 0,(function(){var n,r,i,o,s;return Co(this,(function(a){switch(a.label){case 0:return[4,this._getUserData(e,{bypassCache:!0})];case 1:switch(n=a.sent(),r=null,i=null,t){case"TOTP":return[3,2];case"SMS":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return i={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return r={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return o=n.UserMFASettingList,[4,this._getMfaTypeFromUserData(n)];case 5:if("NOMFA"===(s=a.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===s)r={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==s)return[2,this.rejectAuthError(qr.InvalidMFA)];i={PreferredMfa:!1,Enabled:!1}}return o&&0!==o.length&&o.forEach((function(e){"SMS_MFA"===e?r={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===e&&(i={PreferredMfa:!1,Enabled:!1})})),[3,7];case 6:return Oo.debug("no validmfa method provided"),[2,this.rejectAuthError(qr.NoMFA)];case 7:return[2,new Promise((function(t,n){e.setUserMfaPreference(r,i,(function(r,i){if(r)return Oo.debug("Set user mfa preference error",r),n(r);Oo.debug("Set user mfa success",i),Oo.debug("Caching the latest user data into local"),e.getUserData((function(e,r){return e?(Oo.debug("getting user data failed",e),n(e)):t(i)}),{bypassCache:!0})}))}))]}}))}))},e.prototype.disableSMS=function(e){return new Promise((function(t,n){e.disableMFA((function(e,r){if(e)return Oo.debug("disable mfa failed",e),void n(e);Oo.debug("disable mfa succeed",r),t(r)}))}))},e.prototype.enableSMS=function(e){return new Promise((function(t,n){e.enableMFA((function(e,r){if(e)return Oo.debug("enable mfa failed",e),void n(e);Oo.debug("enable mfa succeed",r),t(r)}))}))},e.prototype.setupTOTP=function(e){return new Promise((function(t,n){e.associateSoftwareToken({onFailure:function(e){Oo.debug("associateSoftwareToken failed",e),n(e)},associateSecretCode:function(e){Oo.debug("associateSoftwareToken sucess",e),t(e)}})}))},e.prototype.verifyTotpToken=function(e,t){return Oo.debug("verification totp token",e,t),new Promise((function(n,r){e.verifySoftwareToken(t,"My TOTP device",{onFailure:function(e){Oo.debug("verifyTotpToken failed",e),r(e)},onSuccess:function(t){Po("signIn",e,"A user "+e.getUsername()+" has been signed in"),Oo.debug("verifyTotpToken success",t),n(t)}})}))},e.prototype.confirmSignIn=function(e,t,n,r){var i=this;if(void 0===r&&(r=this._config.clientMetadata),!t)return this.rejectAuthError(qr.EmptyCode);var o=this;return new Promise((function(s,a){e.sendMFACode(t,{onSuccess:function(t){return Ao(i,void 0,void 0,(function(){var n,r;return Co(this,(function(i){switch(i.label){case 0:Oo.debug(t),i.label=1;case 1:return i.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return i.sent(),[4,this.Credentials.set(t,"session")];case 3:return n=i.sent(),Oo.debug("succeed to get cognito credentials",n),[3,6];case 4:return r=i.sent(),Oo.debug("cannot get cognito credentials",r),[3,6];case 5:return o.user=e,Po("signIn",e,"A user "+e.getUsername()+" has been signed in"),s(e),[7];case 6:return[2]}}))}))},onFailure:function(e){Oo.debug("confirm signIn failure",e),a(e)}},n,r)}))},e.prototype.completeNewPassword=function(e,t,n,r){var i=this;if(void 0===n&&(n={}),void 0===r&&(r=this._config.clientMetadata),!t)return this.rejectAuthError(qr.EmptyPassword);var o=this;return new Promise((function(s,a){e.completeNewPasswordChallenge(t,n,{onSuccess:function(t){return Ao(i,void 0,void 0,(function(){var n,r;return Co(this,(function(i){switch(i.label){case 0:Oo.debug(t),i.label=1;case 1:return i.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return i.sent(),[4,this.Credentials.set(t,"session")];case 3:return n=i.sent(),Oo.debug("succeed to get cognito credentials",n),[3,6];case 4:return r=i.sent(),Oo.debug("cannot get cognito credentials",r),[3,6];case 5:return o.user=e,Po("signIn",e,"A user "+e.getUsername()+" has been signed in"),s(e),[7];case 6:return[2]}}))}))},onFailure:function(e){Oo.debug("completeNewPassword failure",e),Po("completeNewPassword_failure",e,i.user+" failed to complete the new password flow"),a(e)},mfaRequired:function(t,n){Oo.debug("signIn MFA required"),e.challengeName=t,e.challengeParam=n,s(e)},mfaSetup:function(t,n){Oo.debug("signIn mfa setup",t),e.challengeName=t,e.challengeParam=n,s(e)},totpRequired:function(t,n){Oo.debug("signIn mfa setup",t),e.challengeName=t,e.challengeParam=n,s(e)}},r)}))},e.prototype.sendCustomChallengeAnswer=function(e,t,n){var r=this;return void 0===n&&(n=this._config.clientMetadata),this.userPool?t?new Promise((function(i,o){e.sendCustomChallengeAnswer(t,r.authCallbacks(e,i,o),n)})):this.rejectAuthError(qr.EmptyChallengeResponse):this.rejectNoUserPool()},e.prototype.updateUserAttributes=function(e,t,n){void 0===n&&(n=this._config.clientMetadata);var r=[],i=this;return new Promise((function(o,s){i.userSession(e).then((function(i){for(var a in t)if("sub"!==a&&a.indexOf("_verified")<0){var u={Name:a,Value:t[a]};r.push(u)}e.updateAttributes(r,(function(e,t){return e?s(e):o(t)}),n)}))}))},e.prototype.userAttributes=function(e){var t=this;return new Promise((function(n,r){t.userSession(e).then((function(t){e.getUserAttributes((function(e,t){e?r(e):n(t)}))}))}))},e.prototype.verifiedContact=function(e){var t=this;return this.userAttributes(e).then((function(e){var n=t.attributesToObject(e),r={},i={};return n.email&&(n.email_verified?i.email=n.email:r.email=n.email),n.phone_number&&(n.phone_number_verified?i.phone_number=n.phone_number:r.phone_number=n.phone_number),{verified:i,unverified:r}}))},e.prototype.currentUserPoolUser=function(e){var t=this;return this.userPool?new Promise((function(n,r){t._storageSync.then((function(){return Ao(t,void 0,void 0,(function(){var t,i=this;return Co(this,(function(o){switch(o.label){case 0:return this.isOAuthInProgress()?(Oo.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise((function(e){var t=setTimeout((function(){Oo.debug("OAuth signIn in progress timeout"),Yr.remove("auth",n),e()}),1e4);function n(r){var i=r.payload.event;"cognitoHostedUI"!==i&&"cognitoHostedUI_failure"!==i||(Oo.debug("OAuth signIn resolved: "+i),clearTimeout(t),Yr.remove("auth",n),e())}Yr.listen("auth",n)}))]):[3,2];case 1:o.sent(),o.label=2;case 2:return(t=this.userPool.getCurrentUser())?(t.getSession((function(o,s){return Ao(i,void 0,void 0,(function(){var i,a,u=this;return Co(this,(function(c){switch(c.label){case 0:return o?(Oo.debug("Failed to get the user session",o),r(o),[2]):(i=!!e&&e.bypassCache)?[4,this.Credentials.clear()]:[3,2];case 1:c.sent(),c.label=2;case 2:return(void 0===(a=s.getAccessToken().decodePayload().scope)?"":a).split(" ").includes(xo)?(t.getUserData((function(e,i){if(e)return Oo.debug("getting user data failed",e),void("User is disabled."===e.message||"User does not exist."===e.message||"Access Token has been revoked"===e.message?r(e):n(t));for(var o=i.PreferredMfaSetting||"NOMFA",s=[],a=0;a<i.UserAttributes.length;a++){var c={Name:i.UserAttributes[a].Name,Value:i.UserAttributes[a].Value},l=new qi(c);s.push(l)}var f=u.attributesToObject(s);return Object.assign(t,{attributes:f,preferredMFA:o}),n(t)}),{bypassCache:i}),[2]):(Oo.debug("Unable to get the user data because the "+xo+" is not in the scopes of the access token"),[2,n(t)])}}))}))})),[2]):(Oo.debug("Failed to get user from user pool"),r("No current user"),[2])}}))}))})).catch((function(e){return Oo.debug("Failed to sync cache info into memory",e),r(e)}))})):this.rejectNoUserPool()},e.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},e.prototype.currentAuthenticatedUser=function(e){return Ao(this,void 0,void 0,(function(){var t,n,r,i,o;return Co(this,(function(s){switch(s.label){case 0:Oo.debug("getting current authenticated user"),t=null,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._storageSync];case 2:return s.sent(),[3,4];case 3:throw n=s.sent(),Oo.debug("Failed to sync cache info into memory",n),n;case 4:try{(r=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")))&&(t=Io(Io({},r.user),{token:r.token}))}catch(e){Oo.debug("cannot load federated user from auth storage")}return t?(this.user=t,Oo.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:Oo.debug("get current authenticated userpool user"),i=null,s.label=6;case 6:return s.trys.push([6,8,,9]),[4,this.currentUserPoolUser(e)];case 7:return i=s.sent(),[3,9];case 8:return"No userPool"===(o=s.sent())&&Oo.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),Oo.debug("The user is not authenticated by the error",o),[2,Promise.reject("The user is not authenticated")];case 9:return this.user=i,[2,this.user]}}))}))},e.prototype.currentSession=function(){var e=this;return Oo.debug("Getting current session"),this.userPool?new Promise((function(t,n){e.currentUserPoolUser().then((function(r){e.userSession(r).then((function(e){t(e)})).catch((function(e){Oo.debug("Failed to get the current session",e),n(e)}))})).catch((function(e){Oo.debug("Failed to get the current user",e),n(e)}))})):Promise.reject()},e.prototype.userSession=function(e){return e?new Promise((function(t,n){Oo.debug("Getting the session from this user:",e),e.getSession((function(r,i){return r?(Oo.debug("Failed to get the session from user",e),void n(r)):(Oo.debug("Succeed to get the user session",i),void t(i))}))})):(Oo.debug("the user is null"),this.rejectAuthError(qr.NoUserSession))},e.prototype.currentUserCredentials=function(){return Ao(this,void 0,void 0,(function(){var e,t,n=this;return Co(this,(function(r){switch(r.label){case 0:Oo.debug("Getting current user credentials"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._storageSync];case 2:return r.sent(),[3,4];case 3:throw e=r.sent(),Oo.debug("Failed to sync cache info into memory",e),e;case 4:t=null;try{t=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(e){Oo.debug("failed to get or parse item aws-amplify-federatedInfo",e)}return t?[2,this.Credentials.refreshFederatedToken(t)]:[2,this.currentSession().then((function(e){return Oo.debug("getting session success",e),n.Credentials.set(e,"session")})).catch((function(e){return Oo.debug("getting session failed",e),n.Credentials.set(null,"guest")}))]}}))}))},e.prototype.currentCredentials=function(){return Oo.debug("getting current credentials"),this.Credentials.get()},e.prototype.verifyUserAttribute=function(e,t,n){return void 0===n&&(n=this._config.clientMetadata),new Promise((function(r,i){e.getAttributeVerificationCode(t,{onSuccess:function(){return r()},onFailure:function(e){return i(e)}},n)}))},e.prototype.verifyUserAttributeSubmit=function(e,t,n){return n?new Promise((function(r,i){e.verifyAttribute(t,n,{onSuccess:function(e){r(e)},onFailure:function(e){i(e)}})})):this.rejectAuthError(qr.EmptyCode)},e.prototype.verifyCurrentUserAttribute=function(e){var t=this;return t.currentUserPoolUser().then((function(n){return t.verifyUserAttribute(n,e)}))},e.prototype.verifyCurrentUserAttributeSubmit=function(e,t){var n=this;return n.currentUserPoolUser().then((function(r){return n.verifyUserAttributeSubmit(r,e,t)}))},e.prototype.cognitoIdentitySignOut=function(e,t){return Ao(this,void 0,void 0,(function(){var n,r,i=this;return Co(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this._storageSync];case 1:return o.sent(),[3,3];case 2:throw n=o.sent(),Oo.debug("Failed to sync cache info into memory",n),n;case 3:return r=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise((function(n,o){if(e&&e.global)Oo.debug("user global sign out",t),t.getSession((function(e,s){if(e)return Oo.debug("failed to get the user session",e),o(e);t.globalSignOut({onSuccess:function(e){if(Oo.debug("global sign out success"),!r)return n();i.oAuthSignOutRedirect(n,o)},onFailure:function(e){return Oo.debug("global sign out failed",e),o(e)}})}));else{if(Oo.debug("user sign out",t),t.signOut(),!r)return n();i.oAuthSignOutRedirect(n,o)}}))]}}))}))},e.prototype.oAuthSignOutRedirect=function(e,t){C.browserOrNode().isBrowser?this.oAuthSignOutRedirectOrReject(t):this.oAuthSignOutAndResolve(e)},e.prototype.oAuthSignOutAndResolve=function(e){this._oAuthHandler.signOut(),e()},e.prototype.oAuthSignOutRedirectOrReject=function(e){this._oAuthHandler.signOut(),setTimeout((function(){return e("Signout timeout fail")}),3e3)},e.prototype.signOut=function(e){return Ao(this,void 0,void 0,(function(){var t;return Co(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return n.sent(),[3,3];case 2:return n.sent(),Oo.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(t=this.userPool.getCurrentUser())?[4,this.cognitoIdentitySignOut(e,t)]:[3,5]:[3,7];case 4:return n.sent(),[3,6];case 5:Oo.debug("no current Cognito user"),n.label=6;case 6:return[3,8];case 7:Oo.debug("no Congito User pool"),n.label=8;case 8:return Po("signOut",this.user,"A user has been signed out"),this.user=null,[2]}}))}))},e.prototype.cleanCachedItems=function(){return Ao(this,void 0,void 0,(function(){return Co(this,(function(e){switch(e.label){case 0:return[4,this.Credentials.clear()];case 1:return e.sent(),[2]}}))}))},e.prototype.changePassword=function(e,t,n,r){var i=this;return void 0===r&&(r=this._config.clientMetadata),new Promise((function(o,s){i.userSession(e).then((function(i){e.changePassword(t,n,(function(e,t){return e?(Oo.debug("change password failure",e),s(e)):o(t)}),r)}))}))},e.prototype.forgotPassword=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(qr.EmptyUsername);var n=this.createCognitoUser(e);return new Promise((function(r,i){n.forgotPassword({onSuccess:function(){r()},onFailure:function(t){Oo.debug("forgot password failure",t),Po("forgotPassword_failure",t,e+" forgotPassword failed"),i(t)},inputVerificationCode:function(t){Po("forgotPassword",n,e+" has initiated forgot password flow"),r(t)}},t)}))},e.prototype.forgotPasswordSubmit=function(e,t,n,r){if(void 0===r&&(r=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(qr.EmptyUsername);if(!t)return this.rejectAuthError(qr.EmptyCode);if(!n)return this.rejectAuthError(qr.EmptyPassword);var i=this.createCognitoUser(e);return new Promise((function(o,s){i.confirmPassword(t,n,{onSuccess:function(){Po("forgotPasswordSubmit",i,e+" forgotPasswordSubmit successful"),o()},onFailure:function(t){Po("forgotPasswordSubmit_failure",t,e+" forgotPasswordSubmit failed"),s(t)}},r)}))},e.prototype.currentUserInfo=function(){return Ao(this,void 0,void 0,(function(){var e,t,n,r,i,o,s;return Co(this,(function(a){switch(a.label){case 0:return(e=this.Credentials.getCredSource())&&"aws"!==e&&"userPool"!==e?[3,9]:[4,this.currentUserPoolUser().catch((function(e){return Oo.debug(e)}))];case 1:if(!(s=a.sent()))return[2,null];a.label=2;case 2:return a.trys.push([2,8,,9]),[4,this.userAttributes(s)];case 3:t=a.sent(),n=this.attributesToObject(t),r=null,a.label=4;case 4:return a.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return r=a.sent(),[3,7];case 6:return i=a.sent(),Oo.debug("Failed to retrieve credentials while getting current user info",i),[3,7];case 7:return[2,{id:r?r.identityId:void 0,username:s.getUsername(),attributes:n}];case 8:return o=a.sent(),Oo.debug("currentUserInfo error",o),[2,{}];case 9:return"federated"===e?[2,(s=this.user)||{}]:[2]}}))}))},e.prototype.federatedSignIn=function(e,t,n){return Ao(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,f,d,h;return Co(this,(function(p){switch(p.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(void 0===e&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return Zr(e)||(v=e)&&["customProvider"].find((function(e){return v.hasOwnProperty(e)}))||function(e){return e&&!!["customState"].find((function(t){return e.hasOwnProperty(t)}))}(e)||void 0===e?(r=e||{provider:zr.Cognito},a=Zr(r)?r.provider:r.customProvider,Zr(r),i=r.customState,this._config.userPoolId&&(o=Xr(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,s=Xr(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,s,o,a,i)),[3,4]):[3,1];case 1:a=e;try{(u=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&Oo.warn("There is already a signed in user: "+u+" in your app.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch(e){}return c=t.token,l=t.identity_id,f=t.expires_at,[4,this.Credentials.set({provider:a,token:c,identity_id:l,user:n,expires_at:f},"federation")];case 2:return d=p.sent(),[4,this.currentAuthenticatedUser()];case 3:return h=p.sent(),Po("signIn",h,"A user "+h.username+" has been signed in"),Oo.debug("federated sign in credentials",d),[2,d];case 4:return[2]}var v}))}))},e.prototype._handleAuthResponse=function(e){return Ao(this,void 0,void 0,(function(){var t,n,r,i,o,s,a,u,c,l,f,d,h,p;return Co(this,(function(v){switch(v.label){case 0:if(this.oAuthFlowInProgress)return Oo.debug("Skipping URL "+e+" current flow in progress"),[2];v.label=1;case 1:if(v.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(Po("parsingCallbackUrl",{url:e},"The callback url is being parsed"),t=e||(C.browserOrNode().isBrowser?window.location.href:""),n=!!((0,ao.Qc)(t).query||"").split("&").map((function(e){return e.split("=")})).find((function(e){var t=To(e,1)[0];return"code"===t||"error"===t})),r=!!((0,ao.Qc)(t).hash||"#").substr(1).split("&").map((function(e){return e.split("=")})).find((function(e){var t=To(e,1)[0];return"access_token"===t||"error"===t})),!n&&!r)return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),v.label=2;case 2:return v.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(t)];case 3:return i=v.sent(),o=i.accessToken,s=i.idToken,a=i.refreshToken,u=i.state,c=new ji({IdToken:new Mi({IdToken:s}),RefreshToken:new Ri({RefreshToken:a}),AccessToken:new Li({AccessToken:o})}),l=void 0,this._config.identityPoolId?[4,this.Credentials.set(c,"session")]:[3,5];case 4:l=v.sent(),Oo.debug("AWS credentials",l),v.label=5;case 5:return f=/-/.test(u),(d=this.createCognitoUser(c.getIdToken().decodePayload()["cognito:username"])).setSignInUserSession(c),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),Po("signIn",d,"A user "+d.getUsername()+" has been signed in"),Po("cognitoHostedUI",d,"A user "+d.getUsername()+" has been signed in via Cognito Hosted UI"),f&&(h=u.split("-").splice(1).join("-"),Po("customOAuthState",h.match(/.{2}/g).map((function(e){return String.fromCharCode(parseInt(e,16))})).join(""),"State for user "+d.getUsername())),[2,l];case 6:return p=v.sent(),Oo.debug("Error in cognito hosted auth response",p),Po("signIn_failure",p,"The OAuth response flow failed"),Po("cognitoHostedUI_failure",p,"A failure occurred when returning to the Cognito Hosted UI"),Po("customState_failure",p,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}}))}))},e.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},e.prototype.attributesToObject=function(e){var t={};return e&&e.map((function(e){"email_verified"===e.Name||"phone_number_verified"===e.Name?t[e.Name]="true"===e.Value||!0===e.Value:t[e.Name]=e.Value})),t},e.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};t.Storage=this._storage;var n=this._config.authenticationFlowType,r=new Wi(t);return n&&r.setAuthenticationFlowType(n),r},e.prototype._isValidAuthStorage=function(e){return!!e&&"function"==typeof e.getItem&&"function"==typeof e.setItem&&"function"==typeof e.removeItem&&"function"==typeof e.clear},e.prototype.noUserPoolErrorHandler=function(e){return!e||e.userPoolId&&e.identityPoolId?qr.NoConfig:qr.MissingAuthConfig},e.prototype.rejectAuthError=function(e){return Promise.reject(new So(e))},e.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new _o(e))},e}())(null);function Lo(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.join(","):"")+". Find the full error at: https://bit.ly/38PiBHb")}function Mo(e){return!!e&&!!e[vs]}function Ro(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[ps]||!!e.constructor[ps]||Bo(e)||zo(e))}function Do(e,t){0===Uo(e)?gs(e).forEach((function(n){return t(n,e[n],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function Uo(e){var t=e[vs];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Bo(e)?2:zo(e)?3:0}function jo(e,t){return 2===Uo(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Fo(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function Bo(e){return ls&&e instanceof Map}function zo(e){return fs&&e instanceof Set}function qo(e){return e.o||e.t}function Ko(e,t){if(void 0===t&&(t=!1),Array.isArray(e))return e.slice();var n=Object.create(Object.getPrototypeOf(e));return Do(e,(function(r){if(r!==vs){var i=Object.getOwnPropertyDescriptor(e,r),o=i.value;i.get&&(t||Lo(1),o=i.get.call(e)),i.enumerable?n[r]=o:Object.defineProperty(n,r,{value:o,writable:!0,configurable:!0})}})),n}function Vo(e,t){Mo(e)||Object.isFrozen(e)||!Ro(e)||(Uo(e)>1&&(e.set=e.add=e.clear=e.delete=Ho),Object.freeze(e),t&&Do(e,(function(e,t){return Vo(t,!0)})))}function Ho(){Lo(2)}function Go(e){var t=ys[e];return t||Lo(19,e),t}function Wo(){return us}function Yo(e,t){t&&(Go("Patches"),e.u=[],e.s=[],e.v=t)}function $o(e){Jo(e),e.p.forEach(Zo),e.p=null}function Jo(e){e===us&&(us=e.l)}function Qo(e){return us={p:[],l:us,h:e,m:!0,_:0}}function Zo(e){var t=e[vs];0===t.i||1===t.i?t.j():t.O=!0}function Xo(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||Go("ES5").P(t,e,r),r?(n[vs].S&&($o(t),Lo(4)),Ro(e)&&(e=es(t,e),t.l||ns(t,e)),t.u&&Go("Patches").M(n[vs],e,t.u,t.s)):e=es(t,n,[]),$o(t),t.u&&t.v(t.u,t.s),e!==hs?e:void 0}function es(e,t,n){if(Object.isFrozen(t))return t;var r=t[vs];if(!r)return Do(t,(function(i,o){return ts(e,r,t,i,o,n)})),t;if(r.A!==e)return t;if(!r.S)return ns(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=Ko(r.k,!0):r.o;Do(i,(function(t,o){return ts(e,r,i,t,o,n)})),ns(e,i,!1),n&&e.u&&Go("Patches").R(r,n,e.u,e.s)}return r.o}function ts(e,t,n,r,i,o){if(Mo(i)){var s=es(e,i,o&&t&&3!==t.i&&!jo(t.D,r)?o.concat(r):void 0);if(u=r,c=s,2===(l=Uo(a=n))?a.set(u,c):3===l?(a.delete(u),a.add(c)):a[u]=c,!Mo(s))return;e.m=!1}var a,u,c,l;if((!t||!Fo(i,function(e,t){return 2===Uo(e)?e.get(t):e[t]}(t.t,r)))&&Ro(i)){if(!e.h.N&&e._<1)return;es(e,i),t&&t.A.l||ns(e,i)}}function ns(e,t,n){void 0===n&&(n=!1),e.h.N&&e.m&&Vo(t,n)}function rs(e,t){var n=e[vs],r=Reflect.getOwnPropertyDescriptor(n?qo(n):e,t);return r&&r.value}function is(e){if(!e.S){if(e.S=!0,0===e.i||1===e.i){var t=e.o=Ko(e.t);Do(e.p,(function(e,n){t[e]=n})),e.p=void 0}e.l&&is(e.l)}}function os(e){e.o||(e.o=Ko(e.t))}function ss(e,t,n){var r=Bo(t)?Go("MapSet").T(t,n):zo(t)?Go("MapSet").F(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:Wo(),S:!1,I:!1,D:{},l:t,t:e,k:null,p:{},o:null,j:null,C:!1},i=r,o=ms;n&&(i=[r],o=bs);var s=Proxy.revocable(i,o),a=s.revoke,u=s.proxy;return r.k=u,r.j=a,u}(t,n):Go("ES5").J(t,n);return(n?n.A:Wo()).p.push(r),r}s.register(No);var as,us,cs="undefined"!=typeof Symbol,ls="undefined"!=typeof Map,fs="undefined"!=typeof Set,ds="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,hs=cs?Symbol("immer-nothing"):((as={})["immer-nothing"]=!0,as),ps=cs?Symbol("immer-draftable"):"__$immer_draftable",vs=cs?Symbol("immer-state"):"__$immer_state",gs=(cs&&Symbol.iterator,"undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames),ys={},ms={get:function(e,t){if(t===vs)return e;var n=e.p;if(!e.S&&jo(n,t))return n[t];var r=qo(e)[t];if(e.I||!Ro(r))return r;if(e.S){if(r!==rs(e.t,t))return r;n=e.o}return n[t]=ss(e.A.h,r,e)},has:function(e,t){return t in qo(e)},ownKeys:function(e){return Reflect.ownKeys(qo(e))},set:function(e,t,n){if(!e.S){var r=rs(e.t,t);if(n?Fo(r,n)||n===e.p[t]:Fo(r,n)&&t in e.t)return!0;os(e),is(e)}return e.D[t]=!0,e.o[t]=n,!0},deleteProperty:function(e,t){return void 0!==rs(e.t,t)||t in e.t?(e.D[t]=!1,os(e),is(e)):e.D[t]&&delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=qo(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&(r.writable=!0,r.configurable=1!==e.i||"length"!==t),r},defineProperty:function(){Lo(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Lo(12)}},bs={};Do(ms,(function(e,t){bs[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),bs.deleteProperty=function(e,t){return ms.deleteProperty.call(this,e[0],t)},bs.set=function(e,t,n){return ms.set.call(this,e[0],t,n,e[0])};var ws=new(function(){function e(e){this.g=ds,this.N=!1,"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var t=e.prototype;return t.produce=function(e,t,n){if("function"==typeof e&&"function"!=typeof t){var r=t;t=e;var i=this;return function(e){var n=this;void 0===e&&(e=r);for(var o=arguments.length,s=Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];return i.produce(e,(function(e){var r;return(r=t).call.apply(r,[n,e].concat(s))}))}}var o;if("function"!=typeof t&&Lo(6),void 0!==n&&"function"!=typeof n&&Lo(7),Ro(e)){var s=Qo(this),a=ss(this,e,void 0),u=!0;try{o=t(a),u=!1}finally{u?$o(s):Jo(s)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return Yo(s,n),Xo(e,s)}),(function(e){throw $o(s),e})):(Yo(s,n),Xo(o,s))}if((o=t(e))!==hs)return void 0===o&&(o=e),this.N&&Vo(o,!0),o},t.produceWithPatches=function(e,t){var n,r,i=this;return"function"==typeof e?function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return i.produceWithPatches(t,(function(t){return e.apply(void 0,[t].concat(r))}))}:[this.produce(e,t,(function(e,t){n=e,r=t})),n,r]},t.createDraft=function(e){Ro(e)||Lo(8);var t=Qo(this),n=ss(this,e,void 0);return n[vs].C=!0,Jo(t),n},t.finishDraft=function(e,t){var n=(e&&e[vs]).A;return Yo(n,t),Xo(void 0,n)},t.setAutoFreeze=function(e){this.N=e},t.setUseProxies=function(e){ds||Lo(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}var i=Go("Patches").H;return Mo(e)?i(e,t):this.produce(e,(function(e){return i(e,t.slice(n+1))}))},e}()),Ss=ws.produce,_s=(ws.produceWithPatches.bind(ws),ws.setAutoFreeze.bind(ws));ws.setUseProxies.bind(ws),ws.applyPatches.bind(ws),ws.createDraft.bind(ws),ws.finishDraft.bind(ws);var Es=n(8029),Is=n(9013);const As=n.n(Is)();var Cs=n(6460),Ts=n(3581);const Os=function(){function e(){this._queue=[],this._pending=!1}return e.prototype.isLocked=function(){return this._pending},e.prototype.acquire=function(){var e=this,t=new Promise((function(t){return e._queue.push(t)}));return this._pending||this._dispatchNext(),t},e.prototype.runExclusive=function(e){return this.acquire().then((function(t){var n;try{n=e()}catch(e){throw t(),e}return Promise.resolve(n).then((function(e){return t(),e}),(function(e){throw t(),e}))}))},e.prototype._dispatchNext=function(){this._queue.length>0?(this._pending=!0,this._queue.shift()(this._dispatchNext.bind(this))):this._pending=!1},e}();var xs=n(1404),ks=n.n(xs),Ps=n(6471),Ns=n(591);var Ls=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Ms=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Rs=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Ds=new i.k("DataStore"),Us=function(){function e(e,t,r,i,o,s){this.schema=e,this.namespaceResolver=t,this.getModelConstructorByModelName=r,this.modelInstanceCreator=i,this.adapter=o,this.sessionId=s,this.adapter=_().isBrowser&&window.indexedDB||S()&&self.indexedDB?n(6263).Z:new(0,n(3177).l),this.pushStream=new(ks())}return e.getNamespace=function(){return{name:Ns.P_,relationships:{},enums:{},models:{},nonModels:{}}},e.prototype.init=function(){return Ls(this,void 0,void 0,(function(){var e,t;return Ms(this,(function(n){switch(n.label){case 0:return void 0===this.initialized?[3,2]:[4,this.initialized];case 1:return n.sent(),[2];case 2:return Ds.debug("Starting Storage"),this.initialized=new Promise((function(n,r){e=n,t=r})),this.adapter.setUp(this.schema,this.namespaceResolver,this.modelInstanceCreator,this.getModelConstructorByModelName,this.sessionId).then(e,t),[4,this.initialized];case 3:return n.sent(),[2]}}))}))},e.prototype.save=function(e,t,n){return Ls(this,void 0,void 0,(function(){var r,i=this;return Ms(this,(function(o){switch(o.label){case 0:return[4,this.init()];case 1:return o.sent(),[4,this.adapter.save(e,t)];case 2:return(r=o.sent()).forEach((function(e){var r=Rs(e,2),o=r[0],s=r[1],a=Object.getPrototypeOf(o).constructor;i.pushStream.next({model:a,opType:s,element:o,mutator:n,condition:Cs.OY.getPredicates(t,!1)})})),[2,r]}}))}))},e.prototype.delete=function(e,t,n){return Ls(this,void 0,void 0,(function(){var r,i,o,s,a=this;return Ms(this,(function(u){switch(u.label){case 0:return[4,this.init()];case 1:return u.sent(),[4,this.adapter.delete(e,t)];case 2:return s=Rs.apply(void 0,[u.sent(),2]),i=s[0],r=s[1],o=new Set(i.map((function(e){return e.id}))),(0,Ns.hK)(e)||Array.isArray(r)||(r=[r]),r.forEach((function(r){var i,s=Object.getPrototypeOf(r).constructor;(0,Ns.hK)(e)||(i=o.has(r.id)?Cs.OY.getPredicates(t,!1):void 0),a.pushStream.next({model:s,opType:Ps.HP.DELETE,element:r,mutator:n,condition:i})})),[2,[i,r]]}}))}))},e.prototype.query=function(e,t,n){return Ls(this,void 0,void 0,(function(){return Ms(this,(function(r){switch(r.label){case 0:return[4,this.init()];case 1:return r.sent(),[4,this.adapter.query(e,t,n)];case 2:return[2,r.sent()]}}))}))},e.prototype.queryOne=function(e,t){return void 0===t&&(t=Ps.fI.FIRST),Ls(this,void 0,void 0,(function(){return Ms(this,(function(n){switch(n.label){case 0:return[4,this.init()];case 1:return n.sent(),[4,this.adapter.queryOne(e,t)];case 2:return[2,n.sent()]}}))}))},e.prototype.observe=function(e,t,n){var r=!e,i=Cs.OY.getPredicates(t,!1)||{},o=i.predicates,s=i.type,a=!!o,u=this.pushStream.observable.filter((function(e){var t=e.mutator;return!n||t!==n})).map((function(e){return e.mutator,function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["mutator"])}));return r||(u=u.filter((function(t){var n=t.model,r=t.element;return e===n&&(!a||(0,Ns.u8)(r,s,o))}))),u},e.prototype.clear=function(e){return void 0===e&&(e=!0),Ls(this,void 0,void 0,(function(){return Ms(this,(function(t){switch(t.label){case 0:return this.initialized=void 0,[4,this.adapter.clear()];case 1:return t.sent(),e&&this.pushStream.complete(),[2]}}))}))},e.prototype.batchSave=function(e,t,n){return Ls(this,void 0,void 0,(function(){var r,i=this;return Ms(this,(function(o){switch(o.label){case 0:return[4,this.init()];case 1:return o.sent(),[4,this.adapter.batchSave(e,t)];case 2:return(r=o.sent()).forEach((function(t){var r=Rs(t,2),o=r[0],s=r[1];i.pushStream.next({model:e,opType:s,element:o,mutator:n,condition:void 0})})),[2,r]}}))}))},e}(),js=function(){function e(e,t,n,r,i,o){this.mutex=new Os,this.storage=new Us(e,t,n,r,i,o)}return e.prototype.runExclusive=function(e){return this.mutex.runExclusive(e.bind(this,this.storage))},e.prototype.save=function(e,t,n){return Ls(this,void 0,void 0,(function(){return Ms(this,(function(r){return[2,this.runExclusive((function(r){return r.save(e,t,n)}))]}))}))},e.prototype.delete=function(e,t,n){return Ls(this,void 0,void 0,(function(){return Ms(this,(function(r){return[2,this.runExclusive((function(r){if((0,Ns.hK)(e)){var i=e;return r.delete(i,t,n)}var o=e;return r.delete(o,t,n)}))]}))}))},e.prototype.query=function(e,t,n){return Ls(this,void 0,void 0,(function(){return Ms(this,(function(r){return[2,this.runExclusive((function(r){return r.query(e,t,n)}))]}))}))},e.prototype.queryOne=function(e,t){return void 0===t&&(t=Ps.fI.FIRST),Ls(this,void 0,void 0,(function(){return Ms(this,(function(n){return[2,this.runExclusive((function(n){return n.queryOne(e,t)}))]}))}))},e.getNamespace=function(){return Us.getNamespace()},e.prototype.observe=function(e,t,n){return this.storage.observe(e,t,n)},e.prototype.clear=function(){return Ls(this,void 0,void 0,(function(){return Ms(this,(function(e){switch(e.label){case 0:return[4,this.storage.clear()];case 1:return e.sent(),[2]}}))}))},e.prototype.batchSave=function(e,t){return this.storage.batchSave(e,t)},e.prototype.init=function(){return Ls(this,void 0,void 0,(function(){return Ms(this,(function(e){return[2,this.storage.init()]}))}))},e}(),Fs="undefined"!=typeof Symbol&&"function"==typeof Symbol.for,Bs=Fs?Symbol.for("INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER",zs=Fs?Symbol.for("INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER"):"@@INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER",qs=n(8295),Ks=function(){return(Ks=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Vs=new i.k("AbstractPubSubProvider"),Hs=function(){function e(e){void 0===e&&(e={}),this._config=e}return e.prototype.configure=function(e){return void 0===e&&(e={}),this._config=Ks(Ks({},e),this._config),Vs.debug("configure "+this.getProviderName(),this._config),this.options},e.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(e.prototype,"options",{get:function(){return Ks({},this._config)},enumerable:!0,configurable:!0}),e}(),Gs=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ws=function(){return(Ws=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ys=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},$s=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Js=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Qs=new i.k("MqttOverWSProvider"),Zs=function(){function e(){this.promises=new Map}return e.prototype.get=function(e,t){return Ys(this,void 0,void 0,(function(){var n;return $s(this,(function(r){return(n=this.promises.get(e))||(n=t(e),this.promises.set(e,n)),[2,n]}))}))},Object.defineProperty(e.prototype,"allClients",{get:function(){return Array.from(this.promises.keys())},enumerable:!0,configurable:!0}),e.prototype.remove=function(e){this.promises.delete(e)},e}(),Xs="undefined"!=typeof Symbol?Symbol("topic"):"@@topic",ea=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,Ws(Ws({},t),{clientId:t.clientId||(0,Sn.v4)()}))||this;return n._clientsQueue=new Zs,n._topicObservers=new Map,n._clientIdObservers=new Map,n}return Gs(t,e),Object.defineProperty(t.prototype,"clientId",{get:function(){return this.options.clientId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endpoint",{get:function(){return this.options.aws_pubsub_endpoint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientsQueue",{get:function(){return this._clientsQueue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),t.prototype.getTopicForValue=function(e){return"object"==typeof e&&e[Xs]},t.prototype.getProviderName=function(){return"MqttOverWSProvider"},t.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,i=Js(e,["clientId","errorCode"]);if(0!==r){Qs.warn(n,JSON.stringify(Ws({errorCode:r},i),null,2));var o=[],s=this._clientIdObservers.get(n);if(!s)return;s.forEach((function(e){e.error("Disconnected, error code: "+r),t._topicObservers.forEach((function(t,n){t.delete(e),0===t.size&&o.push(n)}))})),this._clientIdObservers.delete(n),o.forEach((function(e){t._topicObservers.delete(e)}))}},t.prototype.newClient=function(e){var t=e.url,n=e.clientId;return Ys(this,void 0,void 0,(function(){var e,r=this;return $s(this,(function(i){switch(i.label){case 0:return Qs.debug("Creating new MQTT client",n),(e=new qs.Client(t,n)).onMessageArrived=function(e){var t=e.destinationName,n=e.payloadString;r._onMessage(t,n)},e.onConnectionLost=function(e){var t=e.errorCode,i=Js(e,["errorCode"]);r.onDisconnect(Ws({clientId:n,errorCode:t},i))},[4,new Promise((function(t,n){e.connect({useSSL:r.isSSLEnabled,mqttVersion:3,onSuccess:function(){return t(e)},onFailure:n})}))];case 1:return i.sent(),[2,e]}}))}))},t.prototype.connect=function(e,t){return void 0===t&&(t={}),Ys(this,void 0,void 0,(function(){var n=this;return $s(this,(function(r){switch(r.label){case 0:return[4,this.clientsQueue.get(e,(function(e){return n.newClient(Ws(Ws({},t),{clientId:e}))}))];case 1:return[2,r.sent()]}}))}))},t.prototype.disconnect=function(e){return Ys(this,void 0,void 0,(function(){var t;return $s(this,(function(n){switch(n.label){case 0:return[4,this.clientsQueue.get(e,(function(){return null}))];case 1:return(t=n.sent())&&t.isConnected()&&t.disconnect(),this.clientsQueue.remove(e),[2]}}))}))},t.prototype.publish=function(e,t){return Ys(this,void 0,void 0,(function(){var n,r,i,o;return $s(this,(function(s){switch(s.label){case 0:return n=[].concat(e),r=JSON.stringify(t),[4,this.endpoint];case 1:return i=s.sent(),[4,this.connect(this.clientId,{url:i})];case 2:return o=s.sent(),Qs.debug("Publishing to topic(s)",n.join(","),r),n.forEach((function(e){return o.send(e,r)})),[2]}}))}))},t.prototype._onMessage=function(e,t){try{var n=[];this._topicObservers.forEach((function(t,r){(function(e,t){for(var n=e.split("/"),r=n.length,i=t.split("/"),o=0;o<r;++o){var s=n[o],a=i[o];if("#"===s)return i.length>=r;if("+"!==s&&s!==a)return!1}return r===i.length})(r,e)&&n.push(t)}));var r=JSON.parse(t);"object"==typeof r&&(r[Xs]=e),n.forEach((function(e){e.forEach((function(e){return e.next(r)}))}))}catch(e){Qs.warn("Error handling message",e,t)}},t.prototype.subscribe=function(e,t){var n=this;void 0===t&&(t={});var r=[].concat(e);return Qs.debug("Subscribing to topic(s)",r.join(",")),new As((function(e){var i;r.forEach((function(t){var r=n._topicObservers.get(t);r||(r=new Set,n._topicObservers.set(t,r)),r.add(e)}));var o=t.clientId,s=void 0===o?n.clientId:o,a=n._clientIdObservers.get(s);return a||(a=new Set),a.add(e),n._clientIdObservers.set(s,a),Ys(n,void 0,void 0,(function(){var n,o,a,u;return $s(this,(function(c){switch(c.label){case 0:return void 0!==(n=t.url)?[3,2]:[4,this.endpoint];case 1:return a=c.sent(),[3,3];case 2:a=n,c.label=3;case 3:o=a,c.label=4;case 4:return c.trys.push([4,6,,7]),[4,this.connect(s,{url:o})];case 5:return i=c.sent(),r.forEach((function(e){i.subscribe(e)})),[3,7];case 6:return u=c.sent(),e.error(u),[3,7];case 7:return[2]}}))})),function(){return Qs.debug("Unsubscribing from topic(s)",r.join(",")),i&&(n._clientIdObservers.get(s).delete(e),0===n._clientIdObservers.get(s).size&&(n.disconnect(s),n._clientIdObservers.delete(s)),r.forEach((function(t){var r=n._topicObservers.get(t)||new Set;r.delete(e),0===r.size&&(n._topicObservers.delete(t),i.isConnected()&&i.unsubscribe(t))}))),null}}))},t}(Hs),ta=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),na=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},ra=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},ia=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},oa=new i.k("AWSAppSyncProvider"),sa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._topicClient=new Map,t._topicAlias=new Map,t}return ta(t,e),Object.defineProperty(t.prototype,"endpoint",{get:function(){throw new Error("Not supported")},enumerable:!0,configurable:!0}),t.prototype.getProviderName=function(){return"AWSAppSyncProvider"},t.prototype.publish=function(e,t,n){return na(this,void 0,void 0,(function(){return ra(this,(function(e){throw new Error("Operation not supported")}))}))},t.prototype._cleanUp=function(e){var t=this;Array.from(this._topicClient.entries()).filter((function(t){return ia(t,2)[1].clientId===e})).map((function(e){return ia(e,1)[0]})).forEach((function(e){return t._cleanUpForTopic(e)}))},t.prototype._cleanUpForTopic=function(e){this._topicClient.delete(e),this._topicAlias.delete(e)},t.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["clientId","errorCode"]);0!==r&&(Array.from(this._topicClient.entries()).filter((function(e){return ia(e,2)[1].clientId===n})).map((function(e){return ia(e,1)[0]})).forEach((function(e){t._topicObservers.has(e)&&(t._topicObservers.get(e).forEach((function(e){e.closed||e.error(i)})),t._topicObservers.delete(e))})),this._cleanUp(n))},t.prototype.disconnect=function(t){return na(this,void 0,void 0,(function(){return ra(this,(function(n){switch(n.label){case 0:return[4,this.clientsQueue.get(t,(function(){return null}))];case 1:return n.sent(),[4,e.prototype.disconnect.call(this,t)];case 2:return n.sent(),this._cleanUp(t),[2]}}))}))},t.prototype.subscribe=function(e,t){var n=this;void 0===t&&(t={});var r=new As((function(r){var i=[].concat(e);return oa.debug("Subscribing to topic(s)",i.join(",")),na(n,void 0,void 0,(function(){var e,n,o,s,a,u=this;return ra(this,(function(c){switch(c.label){case 0:return i.forEach((function(e){u._topicObservers.has(e)||u._topicObservers.set(e,new Set),u._topicObservers.get(e).add(r)})),e=t.mqttConnections,n=void 0===e?[]:e,o=t.newSubscriptions,s=Object.entries(o).map((function(e){var t=ia(e,2),n=t[0];return[t[1].topic,n]})),this._topicAlias=new Map(function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ia(arguments[t]));return e}(Array.from(this._topicAlias.entries()),s)),a=Object.entries(i.reduce((function(e,t){var r=n.find((function(e){return e.topics.indexOf(t)>-1}));if(r){var i=r.client,o=r.url;e[i]||(e[i]={url:o,topics:new Set}),e[i].topics.add(t)}return e}),{})),[4,Promise.all(a.map((function(e){var t=ia(e,2),n=t[0],i=t[1],o=i.url,s=i.topics;return na(u,void 0,void 0,(function(){var e,t,i=this;return ra(this,(function(a){switch(a.label){case 0:e=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.connect(n,{clientId:n,url:o})];case 2:return e=a.sent(),[3,4];case 3:return t=a.sent(),r.error({message:"Failed to connect",error:t}),r.complete(),[2,void 0];case 4:return s.forEach((function(t){e.isConnected()&&(e.subscribe(t),i._topicClient.set(t,e))})),[2,e]}}))}))})))];case 1:return c.sent(),[2]}}))})),function(){oa.debug("Unsubscribing from topic(s)",i.join(",")),i.forEach((function(e){var t=n._topicClient.get(e);t&&t.isConnected()&&(t.unsubscribe(e),n._topicClient.delete(e),Array.from(n._topicClient.values()).some((function(e){return e===t}))||n.disconnect(t.clientId)),n._topicObservers.delete(e)}))}}));return As.from(r).map((function(e){var t=n.getTopicForValue(e),r=n._topicAlias.get(t);return e.data=Object.entries(e.data).reduce((function(e,t){var n=ia(t,2),i=n[0],o=n[1];return e[r||i]=o,e}),{}),e}))},t}(ea);function aa(e,t){for(var n,r=/\r\n|[\n\r]/g,i=1,o=t+1;(n=r.exec(e.body))&&n.index<t;)i+=1,o=t+1-(n.index+n[0].length);return{line:i,column:o}}function ua(e,t){var n=e.locationOffset.column-1,r=ca(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,s=t.line+o,a=1===t.line?n:0,u=t.column+a,c=r.split(/\r\n|[\n\r]/g);return"".concat(e.name," (").concat(s,":").concat(u,")\n")+function(e){var t=e.filter((function(e){return e[0],void 0!==e[1]})),n=0,r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var u=s.value[0];n=Math.max(n,u.length)}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return t.map((function(e){var t,r=e[0],i=e[1];return ca(n-(t=r).length)+t+i})).join("\n")}([["".concat(s-1,": "),c[i-1]],["".concat(s,": "),c[i]],["",ca(u-1)+"^"],["".concat(s+1,": "),c[i+1]]])}function ca(e){return Array(e+1).join(" ")}function la(e,t,n,r,i,o,s){var a=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,u=n;if(!u&&a){var c=a[0];u=c&&c.loc&&c.loc.source}var l,f=r;!f&&a&&(f=a.reduce((function(e,t){return t.loc&&e.push(t.loc.start),e}),[])),f&&0===f.length&&(f=void 0),r&&n?l=r.map((function(e){return aa(n,e)})):a&&(l=a.reduce((function(e,t){return t.loc&&e.push(aa(t.loc.source,t.loc.start)),e}),[]));var d=s||o&&o.extensions;Object.defineProperties(this,{message:{value:e,enumerable:!0,writable:!0},locations:{value:l||void 0,enumerable:Boolean(l)},path:{value:i||void 0,enumerable:Boolean(i)},nodes:{value:a||void 0},source:{value:u||void 0},positions:{value:f||void 0},originalError:{value:o},extensions:{value:d||void 0,enumerable:Boolean(d)}}),o&&o.stack?Object.defineProperty(this,"stack",{value:o.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,la):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}la.prototype=Object.create(Error.prototype,{constructor:{value:la},name:{value:"GraphQLError"},toString:{value:function(){return function(e){var t=[];if(e.nodes){var n=!0,r=!1,i=void 0;try{for(var o,s=e.nodes[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;a.loc&&t.push(ua(a.loc.source,aa(a.loc.source,a.loc.start)))}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}else if(e.source&&e.locations){var u=e.source,c=!0,l=!1,f=void 0;try{for(var d,h=e.locations[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var p=d.value;t.push(ua(u,p))}}catch(e){l=!0,f=e}finally{try{c||null==h.return||h.return()}finally{if(l)throw f}}}return 0===t.length?e.message:[e.message].concat(t).join("\n\n")+"\n"}(this)}}});var fa=new i.k("I18n"),da=function(){function e(e){this._options=null,this._lang=null,this._dict={},this._options=Object.assign({},e),this._lang=this._options.language,!this._lang&&"undefined"!=typeof window&&window&&window.navigator&&(this._lang=window.navigator.language),fa.debug(this._lang)}return e.prototype.setLanguage=function(e){this._lang=e},e.prototype.get=function(e,t){if(void 0===t&&(t=void 0),!this._lang)return void 0!==t?t:e;var n=this._lang,r=this.getByLanguage(e,n);return r||(n.indexOf("-")>0&&(r=this.getByLanguage(e,n.split("-")[0])),r||(void 0!==t?t:e))},e.prototype.getByLanguage=function(e,t,n){if(void 0===n&&(n=null),!t)return n;var r=this._dict[t];return r?r[e]:n},e.prototype.putVocabulariesForLanguage=function(e,t){var n=this._dict[e];n||(n=this._dict[e]={}),Object.assign(n,t)},e.prototype.putVocabularies=function(e){var t=this;Object.keys(e).map((function(n){t.putVocabulariesForLanguage(n,e[n])}))},e}(),ha=new i.k("I18n"),pa=null,va=null,ga=function(){function e(){}return e.configure=function(t){return ha.debug("configure I18n"),t?(pa=Object.assign({},pa,t.I18n||t),e.createInstance(),pa):pa},e.getModuleName=function(){return"I18n"},e.createInstance=function(){ha.debug("create I18n instance"),va||(va=new da(pa))},e.setLanguage=function(t){return e.checkConfig(),va.setLanguage(t)},e.get=function(t,n){return e.checkConfig()?va.get(t,n):void 0===n?t:n},e.putVocabulariesForLanguage=function(t,n){return e.checkConfig(),va.putVocabulariesForLanguage(t,n)},e.putVocabularies=function(t){return e.checkConfig(),va.putVocabularies(t)},e.checkConfig=function(){return va||(va=new da(pa)),!0},e}();s.register(ga);var ya={userAgent:u.userAgent},ma=n(6051),ba={clockOffset:0,getDateWithClockOffset:function(){return ba.clockOffset?new Date((new Date).getTime()+ba.clockOffset):new Date},getClockOffset:function(){return ba.clockOffset},getHeaderStringFromDate:function(e){return void 0===e&&(e=ba.getDateWithClockOffset()),e.toISOString().replace(/[:\-]|\.\d{3}/g,"")},getDateFromHeaderString:function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(e.match(/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2}).+/),7),n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6];return new Date(Date.UTC(Number(n),Number(r)-1,Number(i),Number(o),Number(s),Number(a)))},isClockSkewed:function(e){return Math.abs(e.getTime()-ba.getDateWithClockOffset().getTime())>=3e5},isClockSkewError:function(e){if(!e.response||!e.response.headers)return!1;var t=e.response.headers;return Boolean("BadRequestException"===t["x-amzn-errortype"]&&(t.date||t.Date))},setClockOffset:function(e){ba.clockOffset=e}},wa=function(){return(wa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Sa=new i.k("Signer"),_a="AWS4-HMAC-SHA256",Ea=function(e,t){var n=new ma.Sha256(e);return n.update(t),n.digestSync()},Ia=function(e){var t=e||"",n=new ma.Sha256;return n.update(t),yr(n.digestSync())},Aa=function(e){return Object.keys(e).map((function(e){return e.toLowerCase()})).sort().join(";")},Ca=function(e){var t,n,r=(0,ao.Qc)(e.url);return[e.method||"/",encodeURIComponent(r.pathname).replace(/%2F/gi,"/"),(n=r.query,n&&0!==n.length?n.split("&").map((function(e){var t=e.split("=");if(1===t.length)return e;var n=t[1].replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}));return t[0]+"="+n})).sort((function(e,t){var n=e.split("=")[0],r=t.split("=")[0];return n===r?e<t?-1:1:n<r?-1:1})).join("&"):""),(t=e.headers,t&&0!==Object.keys(t).length?Object.keys(t).map((function(e){return{key:e.toLowerCase(),value:t[e]?t[e].trim().replace(/\s+/g," "):""}})).sort((function(e,t){return e.key<t.key?-1:1})).map((function(e){return e.key+":"+e.value})).join("\n")+"\n":""),Aa(e.headers),Ia(e.data)].join("\n")},Ta=function(e){var t=((0,ao.Qc)(e.url).host.match(/([^\.]+)\.(?:([^\.]*)\.)?amazonaws\.com$/)||[]).slice(1,3);return"es"===t[1]&&(t=t.reverse()),{service:e.service||t[0],region:e.region||t[1]}},Oa=function(e,t,n){return[e,t,n,"aws4_request"].join("/")},xa=function(e,t,n,r){return[e,n,r,Ia(t)].join("\n")},ka=function(e,t,n){Sa.debug(n);var r=Ea("AWS4"+e,t),i=Ea(r,n.region),o=Ea(i,n.service);return Ea(o,"aws4_request")},Pa=function(e,t){return yr(Ea(e,t))},Na=function(){function e(){}return e.sign=function(e,t,n){void 0===n&&(n=null),e.headers=e.headers||{};var r=ba.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),i=r.substr(0,8),o=(0,ao.Qc)(e.url);e.headers.host=o.host,e.headers["x-amz-date"]=r,t.session_token&&(e.headers["X-Amz-Security-Token"]=t.session_token);var s=Ca(e);Sa.debug(s);var a=n||Ta(e),u=Oa(i,a.region,a.service),c=xa(_a,s,r,u),l=ka(t.secret_key,i,a),f=Pa(l,c),d=function(e,t,n,r,i){return["AWS4-HMAC-SHA256 Credential="+t+"/"+n,"SignedHeaders="+r,"Signature="+i].join(", ")}(0,t.access_key,u,Aa(e.headers),f);return e.headers.Authorization=d,e},e.signUrl=function(e,t,n,r){var i="object"==typeof e?e.url:e,o="object"==typeof e?e.method:"GET",s="object"==typeof e?e.body:void 0,a=ba.getDateWithClockOffset().toISOString().replace(/[:\-]|\.\d{3}/g,""),u=a.substr(0,8),c=(0,ao.Qc)(i,!0,!0),l=(c.search,function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(c,["search"])),f={host:l.host},d=n||Ta({url:(0,ao.WU)(l)}),h=d.region,p=d.service,v=Oa(u,h,p),g=t.session_token&&"iotdevicegateway"!==p,y=wa(wa(wa({"X-Amz-Algorithm":_a,"X-Amz-Credential":[t.access_key,v].join("/"),"X-Amz-Date":a.substr(0,16)},g?{"X-Amz-Security-Token":""+t.session_token}:{}),r?{"X-Amz-Expires":""+r}:{}),{"X-Amz-SignedHeaders":Object.keys(f).join(",")}),m=Ca({method:o,url:(0,ao.WU)(wa(wa({},l),{query:wa(wa({},l.query),y)})),headers:f,data:s}),b=xa(_a,m,a,v),w=ka(t.secret_key,u,{region:h,service:p}),S=Pa(w,b),_=wa({"X-Amz-Signature":S},t.session_token&&{"X-Amz-Security-Token":t.session_token});return(0,ao.WU)({protocol:l.protocol,slashes:!0,hostname:l.hostname,port:l.port,pathname:l.pathname,query:wa(wa(wa({},l.query),y),_)})},e}(),La={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new d).getStorage()};function Ma(e){var t=0;t=e.length;for(var n=e.length;n>=0;n-=1){var r=e.charCodeAt(n);r>127&&r<=2047?t+=1:r>2047&&r<=65535&&(t+=2),r>=56320&&r<=57343&&(n-=1)}return t}function Ra(){return(new Date).getTime()}function Da(e){return Number.isInteger?Number.isInteger(e):function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}(e)}var Ua={},ja=(function(){function e(){}e.clear=function(){Ua={}},e.getItem=function(e){return Ua[e]||null},e.setItem=function(e,t){Ua[e]=t},e.removeItem=function(e){delete Ua[e]}}(),new i.k("StorageCache")),Fa=function(){function e(e){this.config=Object.assign({},e),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}return e.prototype.getModuleName=function(){return"Cache"},e.prototype.checkConfig=function(){Da(this.config.capacityInBytes)||(ja.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=La.capacityInBytes),Da(this.config.itemMaxSize)||(ja.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=La.itemMaxSize),Da(this.config.defaultTTL)||(ja.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=La.defaultTTL),Da(this.config.defaultPriority)||(ja.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=La.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(ja.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=La.itemMaxSize),(this.config.defaultPriority>5||this.config.defaultPriority<1)&&(ja.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=La.defaultPriority),(Number(this.config.warningThreshold)>1||Number(this.config.warningThreshold)<0)&&(ja.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=La.warningThreshold),this.config.capacityInBytes>5242880&&(ja.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=La.capacityInBytes)},e.prototype.fillCacheItem=function(e,t,n){var r={key:e,data:t,timestamp:Ra(),visitedTime:Ra(),priority:n.priority,expires:n.expires,type:typeof t,byteSize:0};return r.byteSize=Ma(JSON.stringify(r)),r.byteSize=Ma(JSON.stringify(r)),r},e.prototype.configure=function(e){return e?(e.keyPrefix&&ja.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,e,e.Cache),this.checkConfig(),this.config):this.config},e}(),Ba=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),za=new i.k("Cache"),qa=new(function(e){function t(t){var n=this,r=t?Object.assign({},La,t):La;return(n=e.call(this,r)||this).config.storage=r.storage,n.getItem=n.getItem.bind(n),n.setItem=n.setItem.bind(n),n.removeItem=n.removeItem.bind(n),n}return Ba(t,e),t.prototype._decreaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t-e).toString())},t.prototype._increaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t+e).toString())},t.prototype._refreshItem=function(e,t){return e.visitedTime=Ra(),this.config.storage.setItem(t,JSON.stringify(e)),e},t.prototype._isExpired=function(e){var t=this.config.storage.getItem(e),n=JSON.parse(t);return Ra()>=n.expires},t.prototype._removeItem=function(e,t){var n=t||JSON.parse(this.config.storage.getItem(e)).byteSize;this._decreaseCurSizeInBytes(n),this.config.storage.removeItem(e)},t.prototype._setItem=function(e,t){this._increaseCurSizeInBytes(t.byteSize);try{this.config.storage.setItem(e,JSON.stringify(t))}catch(e){this._decreaseCurSizeInBytes(t.byteSize),za.error("Failed to set item "+e)}},t.prototype._sizeToPop=function(e){var t=this.getCacheCurSize()+e-this.config.capacityInBytes,n=(1-this.config.warningThreshold)*this.config.capacityInBytes;return t>n?t:n},t.prototype._isCacheFull=function(e){return e+this.getCacheCurSize()>this.config.capacityInBytes},t.prototype._findValidKeys=function(){for(var e=[],t=[],n=0;n<this.config.storage.length;n+=1)t.push(this.config.storage.key(n));for(n=0;n<t.length;n+=1){var r=t[n];0===r.indexOf(this.config.keyPrefix)&&r!==this.cacheCurSizeKey&&(this._isExpired(r)?this._removeItem(r):e.push(r))}return e},t.prototype._popOutItems=function(e,t){for(var n=[],r=t,i=0;i<e.length;i+=1){var o=this.config.storage.getItem(e[i]);if(null!=o){var s=JSON.parse(o);n.push(s)}}for(n.sort((function(e,t){return e.priority>t.priority?-1:e.priority<t.priority?1:e.visitedTime<t.visitedTime?-1:1})),i=0;i<n.length;i+=1)if(this._removeItem(n[i].key,n[i].byteSize),(r-=n[i].byteSize)<=0)return},t.prototype.setItem=function(e,t,n){za.log("Set item: key is "+e+", value is "+t+" with options: "+n);var r=this.config.keyPrefix+e;if(r!==this.config.keyPrefix&&r!==this.cacheCurSizeKey)if(void 0!==t){var i={priority:n&&void 0!==n.priority?n.priority:this.config.defaultPriority,expires:n&&void 0!==n.expires?n.expires:this.config.defaultTTL+Ra()};if(i.priority<1||i.priority>5)za.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else{var o=this.fillCacheItem(r,t,i);if(o.byteSize>this.config.itemMaxSize)za.warn("Item with key: "+e+" you are trying to put into is too big!");else try{var s=this.config.storage.getItem(r);if(s&&this._removeItem(r,JSON.parse(s).byteSize),this._isCacheFull(o.byteSize)){var a=this._findValidKeys();if(this._isCacheFull(o.byteSize)){var u=this._sizeToPop(o.byteSize);this._popOutItems(a,u)}}this._setItem(r,o)}catch(e){za.warn("setItem failed! "+e)}}}else za.warn("The value of item should not be undefined!");else za.warn("Invalid key: should not be empty or 'CurSize'")},t.prototype.getItem=function(e,t){za.log("Get item: key is "+e+" with options "+t);var n=null,r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey)return za.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(n=this.config.storage.getItem(r))){if(!this._isExpired(r)){var i=JSON.parse(n);return(i=this._refreshItem(i,r)).data}this._removeItem(r,JSON.parse(n).byteSize),n=null}if(t&&void 0!==t.callback){var o=t.callback();return null!==o&&this.setItem(e,o,t),o}return null}catch(e){return za.warn("getItem failed! "+e),null}},t.prototype.removeItem=function(e){za.log("Remove item: key is "+e);var t=this.config.keyPrefix+e;if(t!==this.config.keyPrefix&&t!==this.cacheCurSizeKey)try{var n=this.config.storage.getItem(t);n&&this._removeItem(t,JSON.parse(n).byteSize)}catch(e){za.warn("removeItem failed! "+e)}},t.prototype.clear=function(){za.log("Clear Cache");for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&e.push(n)}try{for(t=0;t<e.length;t+=1)this.config.storage.removeItem(e[t])}catch(e){za.warn("clear failed! "+e)}},t.prototype.getAllKeys=function(){for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&n!==this.cacheCurSizeKey&&e.push(n.substring(this.config.keyPrefix.length))}return e},t.prototype.getCacheCurSize=function(){var e=this.config.storage.getItem(this.cacheCurSizeKey);return e||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),e="0"),Number(e)},t.prototype.createInstance=function(e){return e.keyPrefix&&e.keyPrefix!==La.keyPrefix||(za.error("invalid keyPrefix, setting keyPrefix with timeStamp"),e.keyPrefix=Ra.toString()),new t(e)},t}(Fa));const Ka=qa;s.register(qa);const Va=No;var Ha,Ga,Wa,Ya=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$a=function(){return($a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ja=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Qa=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Za=new i.k("AWSAppSyncRealTimeProvider"),Xa="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",eu=[400,401,403];!function(e){e.GQL_CONNECTION_INIT="connection_init",e.GQL_CONNECTION_ERROR="connection_error",e.GQL_CONNECTION_ACK="connection_ack",e.GQL_START="start",e.GQL_START_ACK="start_ack",e.GQL_DATA="data",e.GQL_CONNECTION_KEEP_ALIVE="ka",e.GQL_STOP="stop",e.GQL_COMPLETE="complete",e.GQL_ERROR="error"}(Ha||(Ha={})),function(e){e[e.PENDING=0]="PENDING",e[e.CONNECTED=1]="CONNECTED",e[e.FAILED=2]="FAILED"}(Ga||(Ga={})),function(e){e[e.CLOSED=0]="CLOSED",e[e.READY=1]="READY",e[e.CONNECTING=2]="CONNECTING"}(Wa||(Wa={}));var tu,nu={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},ru=3e5,iu=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.socketStatus=Wa.CLOSED,t.keepAliveTimeout=ru,t.subscriptionObserverMap=new Map,t.promiseArray=[],t}return Ya(t,e),t.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},t.prototype.newClient=function(){throw new Error("Not used here")},t.prototype.publish=function(e,t,n){return Ja(this,void 0,void 0,(function(){return Qa(this,(function(e){throw new Error("Operation not supported")}))}))},t.prototype.subscribe=function(e,t){var n=this,r=t.appSyncGraphqlEndpoint;return new As((function(e){if(r){var i=(0,Sn.v4)();return n._startSubscriptionWithAWSAppSyncRealTime({options:t,observer:e,subscriptionId:i}),function(){return Ja(n,void 0,void 0,(function(){var e,t;return Qa(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),[4,this._waitForSubscriptionToBeConnected(i)];case 1:if(n.sent(),!(e=(this.subscriptionObserverMap.get(i)||{}).subscriptionState))return[2];if(e!==Ga.CONNECTED)throw new Error("Subscription never connected");return this._sendUnsubscriptionMessage(i),[3,4];case 2:return t=n.sent(),Za.debug("Error while unsubscribing "+t),[3,4];case 3:return this._removeSubscriptionObserver(i),[7];case 4:return[2]}}))}))}}e.error({errors:[$a({},new la("Subscribe only available for AWS AppSync endpoint"))]}),e.complete()}))},Object.defineProperty(t.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),t.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var t=e.options,n=e.observer,r=e.subscriptionId;return Ja(this,void 0,void 0,(function(){var e,i,o,s,a,u,c,l,f,d,h,p,v,g,y,m,b,w,S,_,E,I,A,C,T,O,x=this;return Qa(this,(function(k){switch(k.label){case 0:return e=t.appSyncGraphqlEndpoint,i=t.authenticationType,o=t.query,s=t.variables,a=t.apiKey,u=t.region,c=t.graphql_headers,l=void 0===c?function(){return{}}:c,f=t.additionalHeaders,d=void 0===f?{}:f,h=Ga.PENDING,p={query:o,variables:s},this.subscriptionObserverMap.set(r,{observer:n,query:o,variables:s,subscriptionState:h,startAckTimeoutId:null}),v=JSON.stringify(p),y=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:a,appSyncGraphqlEndpoint:e,authenticationType:i,payload:v,canonicalUri:"",region:u})];case 1:return m=[$a.apply(void 0,y.concat([k.sent()]))],[4,l()];case 2:g=$a.apply(void 0,[$a.apply(void 0,[$a.apply(void 0,m.concat([k.sent()])),d]),(O={},O["x-amz-user-agent"]=ya.userAgent,O)]),b={id:r,payload:{data:v,extensions:{authorization:$a({},g)}},type:Ha.GQL_START},w=JSON.stringify(b),k.label=3;case 3:return k.trys.push([3,5,,6]),[4,this._initializeWebSocketConnection({apiKey:a,appSyncGraphqlEndpoint:e,authenticationType:i,region:u})];case 4:return k.sent(),[3,6];case 5:return S=k.sent(),Za.debug({err:S}),_=S.message,E=void 0===_?"":_,n.error({errors:[$a({},new la("Connection failed: "+E))]}),n.complete(),"function"==typeof(I=(this.subscriptionObserverMap.get(r)||{}).subscriptionFailedCallback)&&I(),[2];case 6:return A=this.subscriptionObserverMap.get(r),C=A.subscriptionFailedCallback,T=A.subscriptionReadyCallback,this.subscriptionObserverMap.set(r,{observer:n,subscriptionState:h,variables:s,query:o,subscriptionReadyCallback:T,subscriptionFailedCallback:C,startAckTimeoutId:setTimeout((function(){x._timeoutStartSubscriptionAck.call(x,r)}),15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(w),[2]}}))}))},t.prototype._waitForSubscriptionToBeConnected=function(e){return Ja(this,void 0,void 0,(function(){var t=this;return Qa(this,(function(n){return this.subscriptionObserverMap.get(e).subscriptionState===Ga.PENDING?[2,new Promise((function(n,r){var i=t.subscriptionObserverMap.get(e),o=i.observer,s=i.subscriptionState,a=i.variables,u=i.query;t.subscriptionObserverMap.set(e,{observer:o,subscriptionState:s,variables:a,query:u,subscriptionReadyCallback:n,subscriptionFailedCallback:r})}))]:[2]}))}))},t.prototype._sendUnsubscriptionMessage=function(e){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===Wa.READY){var t={id:e,type:Ha.GQL_STOP},n=JSON.stringify(t);this.awsRealTimeSocket.send(n)}}catch(e){Za.debug({err:e})}},t.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},t.prototype._closeSocketIfRequired=function(){if(!(this.subscriptionObserverMap.size>0))if(this.awsRealTimeSocket)if(this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{Za.debug("closing WebSocket..."),clearTimeout(this.keepAliveTimeoutId);var e=this.awsRealTimeSocket;e.onclose=void 0,e.onerror=void 0,e.close(1e3),this.awsRealTimeSocket=null,this.socketStatus=Wa.CLOSED}else this.socketStatus=Wa.CLOSED},t.prototype._handleIncomingSubscriptionMessage=function(e){Za.debug("subscription message from AWS AppSync RealTime: "+e.data);var t,n,r=JSON.parse(e.data),i=r.id,o=void 0===i?"":i,s=r.payload,a=r.type,u=this.subscriptionObserverMap.get(o)||{},c=u.observer,l=void 0===c?null:c,f=u.query,d=void 0===f?"":f,h=u.variables,p=void 0===h?{}:h,v=u.startAckTimeoutId,g=u.subscriptionReadyCallback,y=u.subscriptionFailedCallback;if(Za.debug({id:o,observer:l,query:d,variables:p}),a===Ha.GQL_DATA&&s&&s.data)l?l.next(s):Za.debug("observer not found for id: "+o);else if(a!==Ha.GQL_START_ACK){if(a===Ha.GQL_CONNECTION_KEEP_ALIVE)return clearTimeout(this.keepAliveTimeoutId),void(this.keepAliveTimeoutId=setTimeout(this._errorDisconnect.bind(this,tu.TIMEOUT_DISCONNECT),this.keepAliveTimeout));a===Ha.GQL_ERROR&&(m=Ga.FAILED,this.subscriptionObserverMap.set(o,{observer:l,query:d,variables:p,startAckTimeoutId:v,subscriptionReadyCallback:g,subscriptionFailedCallback:y,subscriptionState:m}),l.error({errors:[$a({},new la("Connection failed: "+JSON.stringify(s)))]}),clearTimeout(v),l.complete(),"function"==typeof y&&y())}else{Za.debug("subscription ready for "+JSON.stringify({query:d,variables:p})),"function"==typeof g&&g(),clearTimeout(v),t=tu.SUBSCRIPTION_ACK,n={query:d,variables:p},Yr.dispatch("api",{event:t,data:n,message:"Connection established for subscription"},"PubSub",Xa);var m=Ga.CONNECTED;this.subscriptionObserverMap.set(o,{observer:l,query:d,variables:p,startAckTimeoutId:null,subscriptionState:m,subscriptionReadyCallback:g,subscriptionFailedCallback:y})}},t.prototype._errorDisconnect=function(e){Za.debug("Disconnect error: "+e),this.subscriptionObserverMap.forEach((function(t){var n=t.observer;n&&!n.closed&&n.error({errors:[$a({},new la(e))]})})),this.subscriptionObserverMap.clear(),this.awsRealTimeSocket&&this.awsRealTimeSocket.close(),this.socketStatus=Wa.CLOSED},t.prototype._timeoutStartSubscriptionAck=function(e){var t=this.subscriptionObserverMap.get(e)||{},n=t.observer,r=t.query,i=t.variables;n&&(this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:i,subscriptionState:Ga.FAILED}),n&&!n.closed&&(n.error({errors:[$a({},new la("Subscription timeout "+JSON.stringify({query:r,variables:i})))]}),n.complete()),Za.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:i})))},t.prototype._initializeWebSocketConnection=function(e){var t=this,n=e.appSyncGraphqlEndpoint,r=e.authenticationType,i=e.apiKey,o=e.region;if(this.socketStatus!==Wa.READY)return new Promise((function(e,s){return Ja(t,void 0,void 0,(function(){var t,a,u,c,l,f,d,h,p,v;return Qa(this,(function(g){switch(g.label){case 0:if(this.promiseArray.push({res:e,rej:s}),this.socketStatus!==Wa.CLOSED)return[3,5];g.label=1;case 1:return g.trys.push([1,4,,5]),this.socketStatus=Wa.CONNECTING,t=this.isSSLEnabled?"wss://":"ws://",a=n.replace("https://",t).replace("http://",t).replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),u="{}",f=(l=JSON).stringify,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:r,payload:u,canonicalUri:"/connect",apiKey:i,appSyncGraphqlEndpoint:n,region:o})];case 2:return c=f.apply(l,[g.sent()]),d=ui.lW.from(c).toString("base64"),h=ui.lW.from(u).toString("base64"),p=a+"?header="+d+"&payload="+h,[4,this._initializeRetryableHandshake({awsRealTimeUrl:p})];case 3:return g.sent(),this.promiseArray.forEach((function(e){var t=e.res;Za.debug("Notifying connection successful"),t()})),this.socketStatus=Wa.READY,this.promiseArray=[],[3,5];case 4:return v=g.sent(),this.promiseArray.forEach((function(e){return(0,e.rej)(v)})),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=null,this.socketStatus=Wa.CLOSED,[3,5];case 5:return[2]}}))}))}))},t.prototype._initializeRetryableHandshake=function(e){var t=e.awsRealTimeUrl;return Ja(this,void 0,void 0,(function(){return Qa(this,(function(e){switch(e.label){case 0:return Za.debug("Initializaling retryable Handshake"),[4,L(this._initializeHandshake.bind(this),[{awsRealTimeUrl:t}],5e3)];case 1:return e.sent(),[2]}}))}))},t.prototype._initializeHandshake=function(e){var t=e.awsRealTimeUrl;return Ja(this,void 0,void 0,(function(){var e,n,r,i=this;return Qa(this,(function(o){switch(o.label){case 0:Za.debug("Initializing handshake "+t),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,new Promise((function(e,n){var r=new WebSocket(t,"graphql-ws");r.onerror=function(){Za.debug("WebSocket connection error")},r.onclose=function(){n(new Error("Connection handshake error"))},r.onopen=function(){return i.awsRealTimeSocket=r,e()}}))];case 2:return o.sent(),[4,new Promise((function(e,t){var n=!1;i.awsRealTimeSocket.onerror=function(e){Za.debug("WebSocket error "+JSON.stringify(e))},i.awsRealTimeSocket.onclose=function(e){Za.debug("WebSocket closed "+e.reason),t(new Error(JSON.stringify(e)))},i.awsRealTimeSocket.onmessage=function(r){Za.debug("subscription message from AWS AppSyncRealTime: "+r.data+" ");var o=JSON.parse(r.data),s=o.type,a=o.payload,u=(void 0===a?{}:a).connectionTimeoutMs,c=void 0===u?ru:u;if(s===Ha.GQL_CONNECTION_ACK)return n=!0,i.keepAliveTimeout=c,i.awsRealTimeSocket.onmessage=i._handleIncomingSubscriptionMessage.bind(i),i.awsRealTimeSocket.onerror=function(e){Za.debug(e),i._errorDisconnect(tu.CONNECTION_CLOSED)},i.awsRealTimeSocket.onclose=function(e){Za.debug("WebSocket closed "+e.reason),i._errorDisconnect(tu.CONNECTION_CLOSED)},void e("Cool, connected to AWS AppSyncRealTime");if(s===Ha.GQL_CONNECTION_ERROR){var l=o.payload,f=(void 0===l?{}:l).errors,d=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(void 0===f?[]:f,1)[0],h=void 0===d?{}:d,p=h.errorType,v=void 0===p?"":p,g=h.errorCode;t({errorType:v,errorCode:void 0===g?0:g})}};var r={type:Ha.GQL_CONNECTION_INIT};i.awsRealTimeSocket.send(JSON.stringify(r)),setTimeout(function(){n||t(new Error("Connection timeout: ack from AWSRealTime was not received on 15000 ms"))}.bind(i),15e3)}))];case 3:return o.sent(),[3,5];case 4:throw e=o.sent(),n=e.errorType,r=e.errorCode,eu.includes(r)?new P(n):n?new Error(n):e;case 5:return[2]}}))}))},t.prototype._awsRealTimeHeaderBasedAuth=function(e){var t=e.authenticationType,n=e.payload,r=e.canonicalUri,i=e.appSyncGraphqlEndpoint,o=e.apiKey,s=e.region;return Ja(this,void 0,void 0,(function(){var e,a,u;return Qa(this,(function(c){switch(c.label){case 0:return e={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this)},"function"!=typeof(a=e[t])?(Za.debug("Authentication type "+t+" not supported"),[2,""]):(u=ao.Qc(i).host,[4,a({payload:n,canonicalUri:r,appSyncGraphqlEndpoint:i,apiKey:o,region:s,host:u})]);case 1:return[2,c.sent()]}}))}))},t.prototype._awsRealTimeCUPHeader=function(e){var t=e.host;return Ja(this,void 0,void 0,(function(){return Qa(this,(function(e){switch(e.label){case 0:return[4,Va.currentSession()];case 1:return[2,{Authorization:e.sent().getAccessToken().getJwtToken(),host:t}]}}))}))},t.prototype._awsRealTimeOPENIDHeader=function(e){var t=e.host;return Ja(this,void 0,void 0,(function(){var e,n,r;return Qa(this,(function(i){switch(i.label){case 0:return[4,Ka.getItem("federatedInfo")];case 1:return(n=i.sent())?(e=n.token,[3,4]):[3,2];case 2:return[4,Va.currentAuthenticatedUser()];case 3:(r=i.sent())&&(e=r.token),i.label=4;case 4:if(!e)throw new Error("No federated jwt");return[2,{Authorization:e,host:t}]}}))}))},t.prototype._awsRealTimeApiKeyHeader=function(e){var t=e.apiKey,n=e.host;return Ja(this,void 0,void 0,(function(){var e,r;return Qa(this,(function(i){return e=new Date,r=e.toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:n,"x-amz-date":r,"x-api-key":t}]}))}))},t.prototype._awsRealTimeIAMHeader=function(e){var t=e.payload,n=e.canonicalUri,r=e.appSyncGraphqlEndpoint,i=e.region;return Ja(this,void 0,void 0,(function(){var e,o,s;return Qa(this,(function(a){switch(a.label){case 0:return e={region:i,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!a.sent())throw new Error("No credentials");return[4,Br.get().then((function(e){return{secret_key:e.secretAccessKey,access_key:e.accessKeyId,session_token:e.sessionToken}}))];case 2:return o=a.sent(),s={url:""+r+n,data:t,method:"POST",headers:$a({},nu)},[2,Na.sign(s,o,e).headers]}}))}))},t.prototype._ensureCredentials=function(){return Br.get().then((function(e){if(!e)return!1;var t=Br.shear(e);return Za.debug("set credentials for AWSAppSyncRealTimeProvider",t),!0})).catch((function(e){return Za.warn("ensure credentials error",e),!1}))},t}(Hs),ou=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},su=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},au=_().isNode,uu=new i.k("PubSub"),cu=new(function(){function e(e){this._options=e,uu.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this)}return Object.defineProperty(e.prototype,"awsAppSyncProvider",{get:function(){return this._awsAppSyncProvider||(this._awsAppSyncProvider=new sa(this._options)),this._awsAppSyncProvider},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new iu(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),e.prototype.getModuleName=function(){return"PubSub"},e.prototype.configure=function(e){var t=this,n=e?e.PubSub||e:{};return uu.debug("configure PubSub",{opt:n}),this._options=Object.assign({},this._options,n),this._pluggables.map((function(e){return e.configure(t._options)})),this._options},e.prototype.addPluggable=function(e){return ou(this,void 0,void 0,(function(){return su(this,(function(t){return e&&"PubSub"===e.getCategory()?(this._pluggables.push(e),[2,e.configure(this._options)]):[2]}))}))},e.prototype.getProviderByName=function(e){return e===Bs?this.awsAppSyncProvider:e===zs?this.awsAppSyncRealTimeProvider:this._pluggables.find((function(t){return t.getProviderName()===e}))},e.prototype.getProviders=function(e){void 0===e&&(e={});var t=e.provider;if(!t)return this._pluggables;var n=this.getProviderByName(t);if(!n)throw new Error("Could not find provider named "+t);return[n]},e.prototype.publish=function(e,t,n){return ou(this,void 0,void 0,(function(){return su(this,(function(r){return[2,Promise.all(this.getProviders(n).map((function(r){return r.publish(e,t,n)})))]}))}))},e.prototype.subscribe=function(e,t){if(au&&this._options&&this._options.ssr)throw new Error("Subscriptions are not supported for Server-Side Rendering (SSR)");uu.debug("subscribe options",t);var n=this.getProviders(t);return new As((function(r){var i=n.map((function(n){return{provider:n,observable:n.subscribe(e,t)}})).map((function(e){var t=e.provider;return e.observable.subscribe({start:console.error,next:function(e){return r.next({provider:t,value:e})},error:function(e){return r.error({provider:t,error:e})}})}));return function(){return i.forEach((function(e){return e.unsubscribe()}))}}))},e}())(null);s.register(cu),function(e){e.CONNECTION_CLOSED="Connection closed",e.TIMEOUT_DISCONNECT="Timeout disconnect",e.SUBSCRIPTION_ACK="Subscription ack"}(tu||(tu={}));const lu=cu;var fu=(new(function(){function e(){}return e.prototype.networkMonitor=function(t){if(_().isNode)return As.from([{online:!0}]);var n=S()?self:window;return new As((function(t){t.next({online:n.navigator.onLine});var r=function(){return t.next({online:!0})},i=function(){return t.next({online:!1})};return n.addEventListener("online",r),n.addEventListener("offline",i),e._observers.push(t),function(){n.removeEventListener("online",r),n.removeEventListener("offline",i),e._observers=e._observers.filter((function(e){return e!==t}))}}))},e._observerOverride=function(t){var n,r,i=function(n){if(n.closed)return e._observers=e._observers.filter((function(e){return e!==n})),"continue";n.next(t)};try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e._observers),s=o.next();!s.done;s=o.next())i(s.value)}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e._observers=[],e}())).networkMonitor(),du=function(){return(du=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};new i.k("DataStore");const hu=function(){function e(){this.connectionStatus={online:!1}}return e.prototype.status=function(){var e=this;if(this.observer)throw new Error("Subscriber already exists");return new As((function(t){return e.observer=t,e.subscription=fu.subscribe((function(n){var r=n.online;e.connectionStatus.online=r;var i=du({},e.connectionStatus);t.next(i)})),function(){e.unsubscribe()}}))},e.prototype.unsubscribe=function(){this.subscription&&this.subscription.unsubscribe()},e.prototype.socketDisconnected=function(){var e=this;this.observer&&"function"==typeof this.observer.next&&(this.observer.next({online:!1}),setTimeout((function(){var t=du({},e.connectionStatus);e.observer.next(t)}),5e3))},e}();var pu,vu,gu=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},yu=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},mu=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},bu=function(){function e(e,t){this.outbox=e,this.ownSymbol=t}return e.prototype.merge=function(e,t){return gu(this,void 0,void 0,(function(){var n,r,i,o,s;return yu(this,(function(a){switch(a.label){case 0:return[4,this.outbox.getForModel(e,t)];case 1:return r=a.sent(),i=t._deleted,0!==r.length?[3,5]:i?(n=Ps.HP.DELETE,[4,e.delete(t,void 0,this.ownSymbol)]):[3,3];case 2:return a.sent(),[3,5];case 3:return[4,e.save(t,void 0,this.ownSymbol)];case 4:o=mu.apply(void 0,[a.sent(),1]),s=mu(o[0],2),n=s[1],a.label=5;case 5:return[2,n]}}))}))},e.prototype.mergePage=function(e,t,n){return gu(this,void 0,void 0,(function(){return yu(this,(function(r){switch(r.label){case 0:return[4,e.batchSave(t,n,this.ownSymbol)];case 1:return[2,r.sent()]}}))}))},e}(),wu=function(){return(wu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};!function(e){e.LIST="query",e.CREATE="mutation",e.UPDATE="mutation",e.DELETE="mutation",e.GET="query"}(pu||(pu={})),function(e){e.CREATE="Create",e.UPDATE="Update",e.DELETE="Delete",e.GET="Get"}(vu||(vu={}));var Su=Object.keys({_version:void 0,_lastChangedAt:void 0,_deleted:void 0});function _u(e,t){var n=Eu(t),r=function(e,t){var n=[];return Object.values(t.fields).forEach((function(t){var r=t.name,i=t.type;if((0,Ps.$v)(i)){var o=e.nonModels[i.nonModel],s=Object.values(Eu(o)).map((function(e){return e.name})),a=[];Object.values(o.fields).forEach((function(t){var n=t.type,r=t.name;if((0,Ps.$v)(n)){var i=e.nonModels[n.nonModel];a.push(r+" { "+_u(e,i)+" }")}})),n.push(r+" { "+s.join(" ")+" "+a.join(" ")+" }")}})),n}(e,t),i=function(e,t){var n=function(e){var t=[];return(0,Ps.aQ)(e)&&e.attributes&&e.attributes.forEach((function(e){if(e.properties&&e.properties.rules){var n=e.properties.rules.find((function(e){return"owner"===e.allow}));n&&n.ownerField&&t.push(n.ownerField)}})),t}(e);return!t.owner&&n.includes("owner")?["owner"]:[]}(t,n),o=Object.values(n).map((function(e){return e.name})).concat(i).concat(r);return(0,Ps.aQ)(t)&&(o=o.concat(Su).concat(function(e){var t=[];return Object.values(e.fields).filter((function(e){var t=e.association;return t&&Object.keys(t).length})).forEach((function(e){var n=e.name,r=e.association,i=r.connectionType;switch(i){case"HAS_ONE":case"HAS_MANY":break;case"BELONGS_TO":(0,Ps.Fr)(r)&&t.push(n+" { id _deleted }");break;default:(0,Ns.y0)(i)}})),t}(t))),o.join("\n")}function Eu(e){var t=e.fields;return Object.values(t).filter((function(e){return!(!(0,Ps.BV)(e.type)&&!(0,Ps.g5)(e.type))})).reduce((function(e,t){return e[t.name]=t,e}),{})}function Iu(e,t,n){var r,i,o=_u(e,t),s=t.name,a=t.pluralName,u=" ",c=" ";switch(n){case"LIST":r="sync"+a,u="($limit: Int, $nextToken: String, $lastSync: AWSTimestamp, $filter: Model"+s+"FilterInput)",c="(limit: $limit, nextToken: $nextToken, lastSync: $lastSync, filter: $filter)",o="items {\n\t\t\t\t\t\t\t"+o+"\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnextToken\n\t\t\t\t\t\tstartedAt";break;case"CREATE":r="create"+s,u="($input: Create"+s+"Input!)",c="(input: $input)",i=vu.CREATE;break;case"UPDATE":r="update"+s,u="($input: Update"+s+"Input!, $condition: Model"+s+"ConditionInput)",c="(input: $input, condition: $condition)",i=vu.UPDATE;break;case"DELETE":r="delete"+s,u="($input: Delete"+s+"Input!, $condition: Model"+s+"ConditionInput)",c="(input: $input, condition: $condition)",i=vu.DELETE;break;case"GET":r="get"+s,u="($id: ID!)",c="(id: $id)",i=vu.GET;break;default:(0,Ns.y0)(n)}return[[i,r,pu[n]+" operation"+u+"{\n\t\t"+r+c+"{\n\t\t\t"+o+"\n\t\t}\n\t}"]]}function Au(e,t,n,r,i,o,s,a,u){var c;switch(n){case Ps.HP.INSERT:c=vu.CREATE;break;case Ps.HP.UPDATE:c=vu.UPDATE;break;case Ps.HP.DELETE:c=vu.DELETE;break;default:(0,Ns.y0)(n)}return a(s,wu(wu({},u?{id:u}:{}),{data:JSON.stringify(i),modelId:i.id,model:r.name,operation:c,condition:JSON.stringify(o)}))}function Cu(e){var t={};return e&&Array.isArray(e.predicates)?(e.predicates.forEach((function(e){var n;if((0,Ps.w5)(e)){var r=e.field,i=e.operator,o=e.operand;if("id"===r)return;t[r]=((n={})[i]=o,n)}else t[e.type]=Cu(e)})),t):t}function Tu(e){var t={};if(!e||!Array.isArray(e.predicates))return t;var n=e.type,r=e.predicates,i="and"===n||"or"===n;t[n]=i?[]:{};var o=function(e){return i?t[n].push(e):t[n]=e};return r.forEach((function(e){var t,n;if((0,Ps.w5)(e)){var r=e.field,i=e.operator,s=e.operand,a=((t={})[r]=((n={})[i]=s,n),t);o(a)}else o(Tu(e))})),t}function Ou(e,t){var n=e[t.groupClaim]||[];if("string"==typeof n){var r=void 0;try{r=JSON.parse(n)}catch(e){r=n}n=[].concat(r)}return n}var xu=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},ku=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Pu=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Nu=function(){function e(e,t,n,r){this.schema=e,this.namespaceResolver=t,this.MutationEvent=n,this.ownSymbol=r}return e.prototype.enqueue=function(e,t){return xu(this,void 0,void 0,(function(){var n=this;return ku(this,(function(r){return e.runExclusive((function(e){return xu(n,void 0,void 0,(function(){var n,r,i,o,s,a,u,c=this;return ku(this,(function(l){switch(l.label){case 0:return n=this.schema.namespaces[Ns.J3].models.MutationEvent,r=Cs.OY.createFromExisting(n,(function(e){return e.modelId("eq",t.modelId).id("ne",c.inProgressMutationEventId)})),[4,e.query(this.MutationEvent,r)];case 1:return i=Pu.apply(void 0,[l.sent(),1]),void 0!==(o=i[0])?[3,3]:[4,e.save(t,void 0,this.ownSymbol)];case 2:return l.sent(),[2];case 3:return s=t.operation,o.operation!==vu.CREATE?[3,8]:s!==vu.DELETE?[3,5]:[4,e.delete(this.MutationEvent,r)];case 4:return l.sent(),[3,7];case 5:return[4,e.save(this.MutationEvent.copyOf(o,(function(e){e.data=t.data})),void 0,this.ownSymbol)];case 6:l.sent(),l.label=7;case 7:return[3,12];case 8:return a=t.condition,u=JSON.parse(a),0!==Object.keys(u).length?[3,10]:[4,e.delete(this.MutationEvent,r)];case 9:l.sent(),l.label=10;case 10:return[4,e.save(t,void 0,this.ownSymbol)];case 11:l.sent(),l.label=12;case 12:return[2]}}))}))})),[2]}))}))},e.prototype.dequeue=function(e){return xu(this,void 0,void 0,(function(){var t;return ku(this,(function(n){switch(n.label){case 0:return[4,this.peek(e)];case 1:return t=n.sent(),[4,e.delete(t)];case 2:return n.sent(),this.inProgressMutationEventId=void 0,[2,t]}}))}))},e.prototype.peek=function(e){return xu(this,void 0,void 0,(function(){var t;return ku(this,(function(n){switch(n.label){case 0:return[4,e.queryOne(this.MutationEvent,Ps.fI.FIRST)];case 1:return t=n.sent(),this.inProgressMutationEventId=t?t.id:void 0,[2,t]}}))}))},e.prototype.getForModel=function(e,t){return xu(this,void 0,void 0,(function(){var n;return ku(this,(function(r){switch(r.label){case 0:return n=this.schema.namespaces[Ns.J3].models.MutationEvent,[4,e.query(this.MutationEvent,Cs.OY.createFromExisting(n,(function(e){return e.modelId("eq",t.id)})))];case 1:return[2,r.sent()]}}))}))},e.prototype.getModelIds=function(e){return xu(this,void 0,void 0,(function(){var t,n;return ku(this,(function(r){switch(r.label){case 0:return[4,e.query(this.MutationEvent)];case 1:return t=r.sent(),n=new Set,t.forEach((function(e){var t=e.modelId;return n.add(t)})),[2,n]}}))}))},e}(),Lu=n(9669),Mu=n.n(Lu),Ru=function(){return(Ru=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Du=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Uu=new i.k("RestClient"),ju=function(){function e(e){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this.Credentials=Br,this._options=e,Uu.debug("API Options",this._options),null==this._cancelTokenMap&&(this._cancelTokenMap=new WeakMap)}return e.prototype.ajax=function(e,t,n){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var r,i,o,s,a,c,l,f,d,h,p,v,g,y,m=this;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(b){switch(b.label){case 0:return Uu.debug(t,e),o="us-east-1",s="execute-api",a=void 0,"string"==typeof e?(r=this._parseUrl(e),i=e):(i=e.endpoint,a=e.custom_header,o=e.region,s=e.service,r=this._parseUrl(e.endpoint)),c={method:t,url:i,host:r.host,path:r.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},l={},u.isReactNative&&(f=u.userAgent||"aws-amplify/0.1.x",l={"User-Agent":f}),d=Object.assign({},n),h=d.response,d.body&&("function"==typeof FormData&&d.body instanceof FormData?(l["Content-Type"]="multipart/form-data",c.data=d.body):(l["Content-Type"]="application/json; charset=UTF-8",c.data=JSON.stringify(d.body))),d.responseType&&(c.responseType=d.responseType),d.withCredentials&&(c.withCredentials=d.withCredentials),d.timeout&&(c.timeout=d.timeout),d.cancellableToken&&(c.cancelToken=d.cancellableToken.token),c.signerServiceInfo=d.signerServiceInfo,"function"!=typeof a?[3,2]:[4,a()];case 1:return v=b.sent(),[3,3];case 2:v=void 0,b.label=3;case 3:return p=v,c.headers=Ru(Ru(Ru({},l),p),d.headers),(g=(0,ao.Qc)(i,!0,!0)).search,y=Du(g,["search"]),c.url=(0,ao.WU)(Ru(Ru({},y),{query:Ru(Ru({},y.query),d.queryStringParameters||{})})),void 0!==c.headers.Authorization?(c.headers=Object.keys(c.headers).reduce((function(e,t){return c.headers[t]&&(e[t]=c.headers[t]),e}),{}),[2,this._request(c,h)]):[2,this.Credentials.get().then((function(r){return m._signed(Ru({},c),r,h,{region:o,service:s}).catch((function(r){if(ba.isClockSkewError(r)){var i=r.response.headers,o=i&&(i.date||i.Date),s=new Date(o),a=ba.getDateFromHeaderString(c.headers["x-amz-date"]);if(ba.isClockSkewed(a,s))return ba.setClockOffset(s.getTime()-a.getTime()),m.ajax(e,t,n)}throw r}))}),(function(e){return Uu.debug("No credentials available, the request will be unsigned"),m._request(c,h)}))]}}))}))},e.prototype.get=function(e,t){return this.ajax(e,"GET",t)},e.prototype.put=function(e,t){return this.ajax(e,"PUT",t)},e.prototype.patch=function(e,t){return this.ajax(e,"PATCH",t)},e.prototype.post=function(e,t){return this.ajax(e,"POST",t)},e.prototype.del=function(e,t){return this.ajax(e,"DELETE",t)},e.prototype.head=function(e,t){return this.ajax(e,"HEAD",t)},e.prototype.cancel=function(e,t){var n=this._cancelTokenMap.get(e);return n&&n.cancel(t),!0},e.prototype.isCancel=function(e){return Mu().isCancel(e)},e.prototype.getCancellableToken=function(){return Mu().CancelToken.source()},e.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenMap.set(e,t)},e.prototype.endpoint=function(e){var t=this,n=this._options.endpoints,r="";return Array.isArray(n)?(n.forEach((function(n){n.name===e&&(r=n.endpoint,"string"==typeof n.region?t._region=n.region:"string"==typeof t._options.region&&(t._region=t._options.region),"string"==typeof n.service?t._service=n.service||"execute-api":t._service="execute-api","function"==typeof n.custom_header?t._custom_header=n.custom_header:t._custom_header=void 0)})),r):r},e.prototype._signed=function(e,t,n,r){var i=r.service,o=r.region,s=e.signerServiceInfo,a=Du(e,["signerServiceInfo"]),u=o||this._region||this._options.region,c=i||this._service||this._options.service,l={secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken},f={region:u,service:c},d=Object.assign(f,s),h=Na.sign(a,l,d);return h.data&&(h.body=h.data),Uu.debug("Signed Request: ",h),delete h.headers.host,Mu()(h).then((function(e){return n?e:e.data})).catch((function(e){throw Uu.debug(e),e}))},e.prototype._request=function(e,t){return void 0===t&&(t=!1),Mu()(e).then((function(e){return t?e:e.data})).catch((function(e){throw Uu.debug(e),e}))},e.prototype._parseUrl=function(e){var t=e.split("/");return{host:t[2],path:"/"+t.slice(3).join("/")}},e}(),Fu=function(){return(Fu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Bu=new i.k("RestAPI"),zu=function(){function e(e){this._api=null,this.Credentials=Br,this._options=e,Bu.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"RestAPI"},e.prototype.configure=function(e){var t=e||{},n=t.API,r=void 0===n?{}:n,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["API"]),o=Fu(Fu({},i),r);if(Bu.debug("configure Rest API",{opt:o}),o.aws_project_region){if(o.aws_cloud_logic_custom){var s=o.aws_cloud_logic_custom;o.endpoints="string"==typeof s?JSON.parse(s):s}o=Object.assign({},o,{region:o.aws_project_region,header:{}})}return Array.isArray(o.endpoints)?o.endpoints.forEach((function(e){void 0!==e.custom_header&&"function"!=typeof e.custom_header&&(Bu.warn("Rest API "+e.name+", custom_header should be a function"),e.custom_header=void 0)})):this._options&&Array.isArray(this._options.endpoints)?o.endpoints=this._options.endpoints:o.endpoints=[],this._options=Object.assign({},this._options,o),this.createInstance(),this._options},e.prototype.createInstance=function(){return Bu.debug("create Rest API instance"),this._api=new ju(this._options),this._api.Credentials=this.Credentials,!0},e.prototype.get=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.get(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.post=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.post(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.put=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.put(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.patch=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.patch(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.del=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.del(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.head=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.head(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},e.prototype.isCancel=function(e){return this._api.isCancel(e)},e.prototype.cancel=function(e,t){return this._api.cancel(e,t)},e.prototype.endpoint=function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(t){return[2,this._api.endpoint(e)]}))}))},e.prototype.getEndpointInfo=function(e,t){var n=this._options.endpoints;if(!Array.isArray(n))throw new Error("API category not configured");var r=n.find((function(t){return t.name===e}));if(!r)throw new Error("API "+e+" does not exist");var i={endpoint:r.endpoint+t};return"string"==typeof r.region?i.region=r.region:"string"==typeof this._options.region&&(i.region=this._options.region),"string"==typeof r.service?i.service=r.service||"execute-api":i.service="execute-api","function"==typeof r.custom_header?i.custom_header=r.custom_header:i.custom_header=void 0,i},e}(),qu=new zu(null);s.register(qu);var Ku={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Vu={};function Hu(e){return Boolean(e&&"string"==typeof e.kind)}function Gu(e,t,n){var r=e[t];if(r){if(!n&&"function"==typeof r)return r;var i=n?r.leave:r.enter;if("function"==typeof i)return i}else{var o=n?e.leave:e.enter;if(o){if("function"==typeof o)return o;var s=o[t];if("function"==typeof s)return s}}}function Wu(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ku,r=void 0,i=Array.isArray(e),o=[e],s=-1,a=[],u=void 0,c=void 0,l=void 0,f=[],d=[],h=e;do{var p=++s===o.length,v=p&&0!==a.length;if(p){if(c=0===d.length?void 0:f[f.length-1],u=l,l=d.pop(),v){if(i)u=u.slice();else{var g={};for(var y in u)u.hasOwnProperty(y)&&(g[y]=u[y]);u=g}for(var m=0,b=0;b<a.length;b++){var w=a[b][0],S=a[b][1];i&&(w-=m),i&&null===S?(u.splice(w,1),m++):u[w]=S}}s=r.index,o=r.keys,a=r.edits,i=r.inArray,r=r.prev}else{if(c=l?i?s:o[s]:void 0,null==(u=l?l[c]:h))continue;l&&f.push(c)}var _=void 0;if(!Array.isArray(u)){if(!Hu(u))throw new Error("Invalid AST Node: "+JSON.stringify(u));var E=Gu(t,u.kind,p);if(E){if((_=E.call(t,u,c,l,f,d))===Vu)break;if(!1===_){if(!p){f.pop();continue}}else if(void 0!==_&&(a.push([c,_]),!p)){if(!Hu(_)){f.pop();continue}u=_}}}void 0===_&&v&&a.push([c,u]),p?f.pop():(r={inArray:i,index:s,keys:o,edits:a,prev:r},o=(i=Array.isArray(u))?u:n[u.kind]||[],s=-1,a=[],l&&d.push(l),l=u)}while(void 0!==r);return 0!==a.length&&(h=a[a.length-1][1]),h}(e,{leave:Yu})}var Yu={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return Ju(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=Zu("(",Ju(e.variableDefinitions,", "),")"),i=Ju(e.directives," "),o=e.selectionSet;return n||i||r||"query"!==t?Ju([t,Ju([n,r]),i,o]," "):o},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,i=e.directives;return t+": "+n+Zu(" = ",r)+Zu(" ",Ju(i," "))},SelectionSet:function(e){return Qu(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,i=e.directives,o=e.selectionSet;return Ju([Zu("",t,": ")+n+Zu("(",Ju(r,", "),")"),Ju(i," "),o]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+Zu(" ",Ju(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return Ju(["...",Zu("on ",t),Ju(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,i=e.directives,o=e.selectionSet;return"fragment ".concat(t).concat(Zu("(",Ju(r,", "),")")," ")+"on ".concat(n," ").concat(Zu("",Ju(i," ")," "))+o},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?function(e,t){var n=e.replace(/"""/g,'\\"""');return" "!==e[0]&&"\t"!==e[0]||-1!==e.indexOf("\n")?'"""\n'.concat(t?n:Xu(n),'\n"""'):'"""'.concat(n.replace(/"$/,'"\n'),'"""')}(n,"description"===t):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+Ju(e.values,", ")+"]"},ObjectValue:function(e){return"{"+Ju(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+Zu("(",Ju(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:function(e){var t=e.directives,n=e.operationTypes;return Ju(["schema",Ju(t," "),Qu(n)]," ")},OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:$u((function(e){return Ju(["scalar",e.name,Ju(e.directives," ")]," ")})),ObjectTypeDefinition:$u((function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return Ju(["type",t,Zu("implements ",Ju(n," & ")),Ju(r," "),Qu(i)]," ")})),FieldDefinition:$u((function(e){var t=e.name,n=e.arguments,r=e.type,i=e.directives;return t+(n.every((function(e){return-1===e.indexOf("\n")}))?Zu("(",Ju(n,", "),")"):Zu("(\n",Xu(Ju(n,"\n")),"\n)"))+": "+r+Zu(" ",Ju(i," "))})),InputValueDefinition:$u((function(e){var t=e.name,n=e.type,r=e.defaultValue,i=e.directives;return Ju([t+": "+n,Zu("= ",r),Ju(i," ")]," ")})),InterfaceTypeDefinition:$u((function(e){var t=e.name,n=e.directives,r=e.fields;return Ju(["interface",t,Ju(n," "),Qu(r)]," ")})),UnionTypeDefinition:$u((function(e){var t=e.name,n=e.directives,r=e.types;return Ju(["union",t,Ju(n," "),r&&0!==r.length?"= "+Ju(r," | "):""]," ")})),EnumTypeDefinition:$u((function(e){var t=e.name,n=e.directives,r=e.values;return Ju(["enum",t,Ju(n," "),Qu(r)]," ")})),EnumValueDefinition:$u((function(e){return Ju([e.name,Ju(e.directives," ")]," ")})),InputObjectTypeDefinition:$u((function(e){var t=e.name,n=e.directives,r=e.fields;return Ju(["input",t,Ju(n," "),Qu(r)]," ")})),DirectiveDefinition:$u((function(e){var t=e.name,n=e.arguments,r=e.locations;return"directive @"+t+(n.every((function(e){return-1===e.indexOf("\n")}))?Zu("(",Ju(n,", "),")"):Zu("(\n",Xu(Ju(n,"\n")),"\n)"))+" on "+Ju(r," | ")})),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return Ju(["extend schema",Ju(t," "),Qu(n)]," ")},ScalarTypeExtension:function(e){return Ju(["extend scalar",e.name,Ju(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return Ju(["extend type",t,Zu("implements ",Ju(n," & ")),Ju(r," "),Qu(i)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return Ju(["extend interface",t,Ju(n," "),Qu(r)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return Ju(["extend union",t,Ju(n," "),r&&0!==r.length?"= "+Ju(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return Ju(["extend enum",t,Ju(n," "),Qu(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return Ju(["extend input",t,Ju(n," "),Qu(r)]," ")}};function $u(e){return function(t){return Ju([t.description,e(t)],"\n")}}function Ju(e,t){return e?e.filter((function(e){return e})).join(t||""):""}function Qu(e){return e&&0!==e.length?"{\n"+Xu(Ju(e,"\n"))+"\n}":""}function Zu(e,t,n){return t?e+t+(n||""):""}function Xu(e){return e&&"  "+e.replace(/\n/g,"\n  ")}function ec(e){return(ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tc(e){return e&&"object"===ec(e)?"function"==typeof e.inspect?e.inspect():Array.isArray(e)?"["+e.map(tc).join(", ")+"]":"{"+Object.keys(e).map((function(t){return"".concat(t,": ").concat(tc(e[t]))})).join(", ")+"}":"string"==typeof e?'"'+e+'"':"function"==typeof e?"[function ".concat(e.name,"]"):String(e)}function nc(e,t){if(!e)throw new Error(t)}function rc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ic,oc=function(e,t,n){rc(this,"body",void 0),rc(this,"name",void 0),rc(this,"locationOffset",void 0),this.body=e,this.name=t||"GraphQL request",this.locationOffset=n||{line:1,column:1},this.locationOffset.line>0||nc(0,"line in locationOffset is 1-indexed and must be positive"),this.locationOffset.column>0||nc(0,"column in locationOffset is 1-indexed and must be positive")};function sc(e,t,n){return new la("Syntax Error: ".concat(n),void 0,e,[t])}function ac(e){for(var t=e.split(/\r\n|[\n\r]/g),n=null,r=1;r<t.length;r++){var i=t[r],o=uc(i);if(o<i.length&&(null===n||o<n)&&0===(n=o))break}if(n)for(var s=1;s<t.length;s++)t[s]=t[s].slice(n);for(;t.length>0&&cc(t[0]);)t.shift();for(;t.length>0&&cc(t[t.length-1]);)t.pop();return t.join("\n")}function uc(e){for(var t=0;t<e.length&&(" "===e[t]||"\t"===e[t]);)t++;return t}function cc(e){return uc(e)===e.length}function lc(){return this.lastToken=this.token,this.token=this.lookahead()}function fc(){var e=this.token;if(e.kind!==dc.EOF)do{e=e.next||(e.next=mc(this,e))}while(e.kind===dc.COMMENT);return e}ic=oc,"function"==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(ic.prototype,Symbol.toStringTag,{get:function(){return this.constructor.name}});var dc=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function hc(e){var t=e.value;return t?"".concat(e.kind,' "').concat(t,'"'):e.kind}var pc=String.prototype.charCodeAt,vc=String.prototype.slice;function gc(e,t,n,r,i,o,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=s,this.prev=o,this.next=null}function yc(e){return isNaN(e)?dc.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function mc(e,t){var n=e.source,r=n.body,i=r.length,o=function(e,t,n){for(var r=e.length,i=t;i<r;){var o=pc.call(e,i);if(9===o||32===o||44===o||65279===o)++i;else if(10===o)++i,++n.line,n.lineStart=i;else{if(13!==o)break;10===pc.call(e,i+1)?i+=2:++i,++n.line,n.lineStart=i}}return i}(r,t.end,e),s=e.line,a=1+o-e.lineStart;if(o>=i)return new gc(dc.EOF,i,i,s,a,t);var u=pc.call(r,o);switch(u){case 33:return new gc(dc.BANG,o,o+1,s,a,t);case 35:return function(e,t,n,r,i){var o,s=e.body,a=t;do{o=pc.call(s,++a)}while(null!==o&&(o>31||9===o));return new gc(dc.COMMENT,t,a,n,r,i,vc.call(s,t+1,a))}(n,o,s,a,t);case 36:return new gc(dc.DOLLAR,o,o+1,s,a,t);case 38:return new gc(dc.AMP,o,o+1,s,a,t);case 40:return new gc(dc.PAREN_L,o,o+1,s,a,t);case 41:return new gc(dc.PAREN_R,o,o+1,s,a,t);case 46:if(46===pc.call(r,o+1)&&46===pc.call(r,o+2))return new gc(dc.SPREAD,o,o+3,s,a,t);break;case 58:return new gc(dc.COLON,o,o+1,s,a,t);case 61:return new gc(dc.EQUALS,o,o+1,s,a,t);case 64:return new gc(dc.AT,o,o+1,s,a,t);case 91:return new gc(dc.BRACKET_L,o,o+1,s,a,t);case 93:return new gc(dc.BRACKET_R,o,o+1,s,a,t);case 123:return new gc(dc.BRACE_L,o,o+1,s,a,t);case 124:return new gc(dc.PIPE,o,o+1,s,a,t);case 125:return new gc(dc.BRACE_R,o,o+1,s,a,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r,i){for(var o=e.body,s=o.length,a=t+1,u=0;a!==s&&null!==(u=pc.call(o,a))&&(95===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122);)++a;return new gc(dc.NAME,t,a,n,r,i,vc.call(o,t,a))}(n,o,s,a,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,i,o){var s=e.body,a=n,u=t,c=!1;if(45===a&&(a=pc.call(s,++u)),48===a){if((a=pc.call(s,++u))>=48&&a<=57)throw sc(e,u,"Invalid number, unexpected digit after 0: ".concat(yc(a),"."))}else u=bc(e,u,a),a=pc.call(s,u);return 46===a&&(c=!0,a=pc.call(s,++u),u=bc(e,u,a),a=pc.call(s,u)),69!==a&&101!==a||(c=!0,43!==(a=pc.call(s,++u))&&45!==a||(a=pc.call(s,++u)),u=bc(e,u,a)),new gc(c?dc.FLOAT:dc.INT,t,u,r,i,o,vc.call(s,t,u))}(n,o,u,s,a,t);case 34:return 34===pc.call(r,o+1)&&34===pc.call(r,o+2)?function(e,t,n,r,i){for(var o=e.body,s=t+3,a=s,u=0,c="";s<o.length&&null!==(u=pc.call(o,s));){if(34===u&&34===pc.call(o,s+1)&&34===pc.call(o,s+2))return c+=vc.call(o,a,s),new gc(dc.BLOCK_STRING,t,s+3,n,r,i,ac(c));if(u<32&&9!==u&&10!==u&&13!==u)throw sc(e,s,"Invalid character within String: ".concat(yc(u),"."));92===u&&34===pc.call(o,s+1)&&34===pc.call(o,s+2)&&34===pc.call(o,s+3)?(c+=vc.call(o,a,s)+'"""',a=s+=4):++s}throw sc(e,s,"Unterminated string.")}(n,o,s,a,t):function(e,t,n,r,i){for(var o=e.body,s=t+1,a=s,u=0,c="";s<o.length&&null!==(u=pc.call(o,s))&&10!==u&&13!==u;){if(34===u)return c+=vc.call(o,a,s),new gc(dc.STRING,t,s+1,n,r,i,c);if(u<32&&9!==u)throw sc(e,s,"Invalid character within String: ".concat(yc(u),"."));if(++s,92===u){switch(c+=vc.call(o,a,s-1),u=pc.call(o,s)){case 34:c+='"';break;case 47:c+="/";break;case 92:c+="\\";break;case 98:c+="\b";break;case 102:c+="\f";break;case 110:c+="\n";break;case 114:c+="\r";break;case 116:c+="\t";break;case 117:var l=wc(pc.call(o,s+1),pc.call(o,s+2),pc.call(o,s+3),pc.call(o,s+4));if(l<0)throw sc(e,s,"Invalid character escape sequence: "+"\\u".concat(o.slice(s+1,s+5),"."));c+=String.fromCharCode(l),s+=4;break;default:throw sc(e,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(u),"."))}a=++s}}throw sc(e,s,"Unterminated string.")}(n,o,s,a,t)}throw sc(n,o,function(e){return e<32&&9!==e&&10!==e&&13!==e?"Cannot contain the invalid character ".concat(yc(e),"."):39===e?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(yc(e),".")}(u))}function bc(e,t,n){var r=e.body,i=t,o=n;if(o>=48&&o<=57){do{o=pc.call(r,++i)}while(o>=48&&o<=57);return i}throw sc(e,i,"Invalid number, expected digit but got: ".concat(yc(o),"."))}function wc(e,t,n,r){return Sc(e)<<12|Sc(t)<<8|Sc(n)<<4|Sc(r)}function Sc(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}gc.prototype.toJSON=gc.prototype.inspect=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}};var _c=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),Ec=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function Ic(e,t){var n="string"==typeof e?new oc(e):e;if(!(n instanceof oc))throw new TypeError("Must provide Source. Received: ".concat(tc(n)));return function(e){var t=e.token;return{kind:_c.DOCUMENT,definitions:gl(e,dc.SOF,Cc,dc.EOF),loc:ul(e,t)}}(function(e,t){var n=new gc(dc.SOF,0,0,0,0,null);return{source:e,options:t,lastToken:n,token:n,line:1,lineStart:0,advance:lc,lookahead:fc}}(n,t||{}))}function Ac(e){var t=dl(e,dc.NAME);return{kind:_c.NAME,value:t.value,loc:ul(e,t)}}function Cc(e){if(ll(e,dc.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":case"fragment":return Tc(e);case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return Yc(e);case"extend":return function(e){var t=e.lookahead();if(t.kind===dc.NAME)switch(t.value){case"schema":return function(e){var t=e.token;hl(e,"extend"),hl(e,"schema");var n=Vc(e,!0),r=ll(e,dc.BRACE_L)?gl(e,dc.BRACE_L,Qc,dc.BRACE_R):[];if(0===n.length&&0===r.length)throw pl(e);return{kind:_c.SCHEMA_EXTENSION,directives:n,operationTypes:r,loc:ul(e,t)}}(e);case"scalar":return function(e){var t=e.token;hl(e,"extend"),hl(e,"scalar");var n=Ac(e),r=Vc(e,!0);if(0===r.length)throw pl(e);return{kind:_c.SCALAR_TYPE_EXTENSION,name:n,directives:r,loc:ul(e,t)}}(e);case"type":return function(e){var t=e.token;hl(e,"extend"),hl(e,"type");var n=Ac(e),r=Zc(e),i=Vc(e,!0),o=Xc(e);if(0===r.length&&0===i.length&&0===o.length)throw pl(e);return{kind:_c.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:i,fields:o,loc:ul(e,t)}}(e);case"interface":return function(e){var t=e.token;hl(e,"extend"),hl(e,"interface");var n=Ac(e),r=Vc(e,!0),i=Xc(e);if(0===r.length&&0===i.length)throw pl(e);return{kind:_c.INTERFACE_TYPE_EXTENSION,name:n,directives:r,fields:i,loc:ul(e,t)}}(e);case"union":return function(e){var t=e.token;hl(e,"extend"),hl(e,"union");var n=Ac(e),r=Vc(e,!0),i=rl(e);if(0===r.length&&0===i.length)throw pl(e);return{kind:_c.UNION_TYPE_EXTENSION,name:n,directives:r,types:i,loc:ul(e,t)}}(e);case"enum":return function(e){var t=e.token;hl(e,"extend"),hl(e,"enum");var n=Ac(e),r=Vc(e,!0),i=il(e);if(0===r.length&&0===i.length)throw pl(e);return{kind:_c.ENUM_TYPE_EXTENSION,name:n,directives:r,values:i,loc:ul(e,t)}}(e);case"input":return function(e){var t=e.token;hl(e,"extend"),hl(e,"input");var n=Ac(e),r=Vc(e,!0),i=sl(e);if(0===r.length&&0===i.length)throw pl(e);return{kind:_c.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:i,loc:ul(e,t)}}(e)}throw pl(e,t)}(e)}else{if(ll(e,dc.BRACE_L))return Tc(e);if($c(e))return Yc(e)}throw pl(e)}function Tc(e){if(ll(e,dc.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":return Oc(e);case"fragment":return function(e){var t=e.token;return hl(e,"fragment"),e.options.experimentalFragmentVariables?{kind:_c.FRAGMENT_DEFINITION,name:jc(e),variableDefinitions:kc(e),typeCondition:(hl(e,"on"),Wc(e)),directives:Vc(e,!1),selectionSet:Lc(e),loc:ul(e,t)}:{kind:_c.FRAGMENT_DEFINITION,name:jc(e),typeCondition:(hl(e,"on"),Wc(e)),directives:Vc(e,!1),selectionSet:Lc(e),loc:ul(e,t)}}(e)}else if(ll(e,dc.BRACE_L))return Oc(e);throw pl(e)}function Oc(e){var t=e.token;if(ll(e,dc.BRACE_L))return{kind:_c.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:Lc(e),loc:ul(e,t)};var n,r=xc(e);return ll(e,dc.NAME)&&(n=Ac(e)),{kind:_c.OPERATION_DEFINITION,operation:r,name:n,variableDefinitions:kc(e),directives:Vc(e,!1),selectionSet:Lc(e),loc:ul(e,t)}}function xc(e){var t=dl(e,dc.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw pl(e,t)}function kc(e){return ll(e,dc.PAREN_L)?gl(e,dc.PAREN_L,Pc,dc.PAREN_R):[]}function Pc(e){var t=e.token;return e.options.experimentalVariableDefinitionDirectives?{kind:_c.VARIABLE_DEFINITION,variable:Nc(e),type:(dl(e,dc.COLON),Gc(e)),defaultValue:fl(e,dc.EQUALS)?Fc(e,!0):void 0,directives:Vc(e,!0),loc:ul(e,t)}:{kind:_c.VARIABLE_DEFINITION,variable:Nc(e),type:(dl(e,dc.COLON),Gc(e)),defaultValue:fl(e,dc.EQUALS)?Fc(e,!0):void 0,loc:ul(e,t)}}function Nc(e){var t=e.token;return dl(e,dc.DOLLAR),{kind:_c.VARIABLE,name:Ac(e),loc:ul(e,t)}}function Lc(e){var t=e.token;return{kind:_c.SELECTION_SET,selections:gl(e,dc.BRACE_L,Mc,dc.BRACE_R),loc:ul(e,t)}}function Mc(e){return ll(e,dc.SPREAD)?function(e){var t,n=e.token;return dl(e,dc.SPREAD),ll(e,dc.NAME)&&"on"!==e.token.value?{kind:_c.FRAGMENT_SPREAD,name:jc(e),directives:Vc(e,!1),loc:ul(e,n)}:("on"===e.token.value&&(e.advance(),t=Wc(e)),{kind:_c.INLINE_FRAGMENT,typeCondition:t,directives:Vc(e,!1),selectionSet:Lc(e),loc:ul(e,n)})}(e):function(e){var t,n,r=e.token,i=Ac(e);return fl(e,dc.COLON)?(t=i,n=Ac(e)):n=i,{kind:_c.FIELD,alias:t,name:n,arguments:Rc(e,!1),directives:Vc(e,!1),selectionSet:ll(e,dc.BRACE_L)?Lc(e):void 0,loc:ul(e,r)}}(e)}function Rc(e,t){var n=t?Uc:Dc;return ll(e,dc.PAREN_L)?gl(e,dc.PAREN_L,n,dc.PAREN_R):[]}function Dc(e){var t=e.token;return{kind:_c.ARGUMENT,name:Ac(e),value:(dl(e,dc.COLON),Fc(e,!1)),loc:ul(e,t)}}function Uc(e){var t=e.token;return{kind:_c.ARGUMENT,name:Ac(e),value:(dl(e,dc.COLON),zc(e)),loc:ul(e,t)}}function jc(e){if("on"===e.token.value)throw pl(e);return Ac(e)}function Fc(e,t){var n=e.token;switch(n.kind){case dc.BRACKET_L:return function(e,t){var n=e.token,r=t?zc:qc;return{kind:_c.LIST,values:vl(e,dc.BRACKET_L,r,dc.BRACKET_R),loc:ul(e,n)}}(e,t);case dc.BRACE_L:return function(e,t){var n=e.token;dl(e,dc.BRACE_L);for(var r=[];!fl(e,dc.BRACE_R);)r.push(Kc(e,t));return{kind:_c.OBJECT,fields:r,loc:ul(e,n)}}(e,t);case dc.INT:return e.advance(),{kind:_c.INT,value:n.value,loc:ul(e,n)};case dc.FLOAT:return e.advance(),{kind:_c.FLOAT,value:n.value,loc:ul(e,n)};case dc.STRING:case dc.BLOCK_STRING:return Bc(e);case dc.NAME:return"true"===n.value||"false"===n.value?(e.advance(),{kind:_c.BOOLEAN,value:"true"===n.value,loc:ul(e,n)}):"null"===n.value?(e.advance(),{kind:_c.NULL,loc:ul(e,n)}):(e.advance(),{kind:_c.ENUM,value:n.value,loc:ul(e,n)});case dc.DOLLAR:if(!t)return Nc(e)}throw pl(e)}function Bc(e){var t=e.token;return e.advance(),{kind:_c.STRING,value:t.value,block:t.kind===dc.BLOCK_STRING,loc:ul(e,t)}}function zc(e){return Fc(e,!0)}function qc(e){return Fc(e,!1)}function Kc(e,t){var n=e.token;return{kind:_c.OBJECT_FIELD,name:Ac(e),value:(dl(e,dc.COLON),Fc(e,t)),loc:ul(e,n)}}function Vc(e,t){for(var n=[];ll(e,dc.AT);)n.push(Hc(e,t));return n}function Hc(e,t){var n=e.token;return dl(e,dc.AT),{kind:_c.DIRECTIVE,name:Ac(e),arguments:Rc(e,t),loc:ul(e,n)}}function Gc(e){var t,n=e.token;return fl(e,dc.BRACKET_L)?(t=Gc(e),dl(e,dc.BRACKET_R),t={kind:_c.LIST_TYPE,type:t,loc:ul(e,n)}):t=Wc(e),fl(e,dc.BANG)?{kind:_c.NON_NULL_TYPE,type:t,loc:ul(e,n)}:t}function Wc(e){var t=e.token;return{kind:_c.NAMED_TYPE,name:Ac(e),loc:ul(e,t)}}function Yc(e){var t=$c(e)?e.lookahead():e.token;if(t.kind===dc.NAME)switch(t.value){case"schema":return function(e){var t=e.token;hl(e,"schema");var n=Vc(e,!0),r=gl(e,dc.BRACE_L,Qc,dc.BRACE_R);return{kind:_c.SCHEMA_DEFINITION,directives:n,operationTypes:r,loc:ul(e,t)}}(e);case"scalar":return function(e){var t=e.token,n=Jc(e);hl(e,"scalar");var r=Ac(e),i=Vc(e,!0);return{kind:_c.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:i,loc:ul(e,t)}}(e);case"type":return function(e){var t=e.token,n=Jc(e);hl(e,"type");var r=Ac(e),i=Zc(e),o=Vc(e,!0),s=Xc(e);return{kind:_c.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:i,directives:o,fields:s,loc:ul(e,t)}}(e);case"interface":return function(e){var t=e.token,n=Jc(e);hl(e,"interface");var r=Ac(e),i=Vc(e,!0),o=Xc(e);return{kind:_c.INTERFACE_TYPE_DEFINITION,description:n,name:r,directives:i,fields:o,loc:ul(e,t)}}(e);case"union":return function(e){var t=e.token,n=Jc(e);hl(e,"union");var r=Ac(e),i=Vc(e,!0),o=rl(e);return{kind:_c.UNION_TYPE_DEFINITION,description:n,name:r,directives:i,types:o,loc:ul(e,t)}}(e);case"enum":return function(e){var t=e.token,n=Jc(e);hl(e,"enum");var r=Ac(e),i=Vc(e,!0),o=il(e);return{kind:_c.ENUM_TYPE_DEFINITION,description:n,name:r,directives:i,values:o,loc:ul(e,t)}}(e);case"input":return function(e){var t=e.token,n=Jc(e);hl(e,"input");var r=Ac(e),i=Vc(e,!0),o=sl(e);return{kind:_c.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:i,fields:o,loc:ul(e,t)}}(e);case"directive":return function(e){var t=e.token,n=Jc(e);hl(e,"directive"),dl(e,dc.AT);var r=Ac(e),i=tl(e);hl(e,"on");var o=function(e){fl(e,dc.PIPE);var t=[];do{t.push(al(e))}while(fl(e,dc.PIPE));return t}(e);return{kind:_c.DIRECTIVE_DEFINITION,description:n,name:r,arguments:i,locations:o,loc:ul(e,t)}}(e)}throw pl(e,t)}function $c(e){return ll(e,dc.STRING)||ll(e,dc.BLOCK_STRING)}function Jc(e){if($c(e))return Bc(e)}function Qc(e){var t=e.token,n=xc(e);dl(e,dc.COLON);var r=Wc(e);return{kind:_c.OPERATION_TYPE_DEFINITION,operation:n,type:r,loc:ul(e,t)}}function Zc(e){var t=[];if("implements"===e.token.value){e.advance(),fl(e,dc.AMP);do{t.push(Wc(e))}while(fl(e,dc.AMP)||e.options.allowLegacySDLImplementsInterfaces&&ll(e,dc.NAME))}return t}function Xc(e){return e.options.allowLegacySDLEmptyFields&&ll(e,dc.BRACE_L)&&e.lookahead().kind===dc.BRACE_R?(e.advance(),e.advance(),[]):ll(e,dc.BRACE_L)?gl(e,dc.BRACE_L,el,dc.BRACE_R):[]}function el(e){var t=e.token,n=Jc(e),r=Ac(e),i=tl(e);dl(e,dc.COLON);var o=Gc(e),s=Vc(e,!0);return{kind:_c.FIELD_DEFINITION,description:n,name:r,arguments:i,type:o,directives:s,loc:ul(e,t)}}function tl(e){return ll(e,dc.PAREN_L)?gl(e,dc.PAREN_L,nl,dc.PAREN_R):[]}function nl(e){var t=e.token,n=Jc(e),r=Ac(e);dl(e,dc.COLON);var i,o=Gc(e);fl(e,dc.EQUALS)&&(i=zc(e));var s=Vc(e,!0);return{kind:_c.INPUT_VALUE_DEFINITION,description:n,name:r,type:o,defaultValue:i,directives:s,loc:ul(e,t)}}function rl(e){var t=[];if(fl(e,dc.EQUALS)){fl(e,dc.PIPE);do{t.push(Wc(e))}while(fl(e,dc.PIPE))}return t}function il(e){return ll(e,dc.BRACE_L)?gl(e,dc.BRACE_L,ol,dc.BRACE_R):[]}function ol(e){var t=e.token,n=Jc(e),r=Ac(e),i=Vc(e,!0);return{kind:_c.ENUM_VALUE_DEFINITION,description:n,name:r,directives:i,loc:ul(e,t)}}function sl(e){return ll(e,dc.BRACE_L)?gl(e,dc.BRACE_L,nl,dc.BRACE_R):[]}function al(e){var t=e.token,n=Ac(e);if(Ec.hasOwnProperty(n.value))return n;throw pl(e,t)}function ul(e,t){if(!e.options.noLocation)return new cl(t,e.lastToken,e.source)}function cl(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}function ll(e,t){return e.token.kind===t}function fl(e,t){var n=e.token.kind===t;return n&&e.advance(),n}function dl(e,t){var n=e.token;if(n.kind===t)return e.advance(),n;throw sc(e.source,n.start,"Expected ".concat(t,", found ").concat(hc(n)))}function hl(e,t){var n=e.token;if(n.kind===dc.NAME&&n.value===t)return e.advance(),n;throw sc(e.source,n.start,'Expected "'.concat(t,'", found ').concat(hc(n)))}function pl(e,t){var n=t||e.token;return sc(e.source,n.start,"Unexpected ".concat(hc(n)))}function vl(e,t,n,r){dl(e,t);for(var i=[];!fl(e,r);)i.push(n(e));return i}function gl(e,t,n,r){dl(e,t);for(var i=[n(e)];!fl(e,r);)i.push(n(e));return i}cl.prototype.toJSON=cl.prototype.inspect=function(){return{start:this.start,end:this.end}};var yl=function(){return(yl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ml=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},bl=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},wl=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Sl=new i.k("GraphQLAPI"),_l=function(e,t){return void 0===t&&(t={}),{query:e,variables:t}},El=function(){function e(e){this._api=null,this.Auth=Va,this.Cache=Ka,this.Credentials=Br,this._options=e,Sl.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"GraphQLAPI"},e.prototype.configure=function(e){var t=e||{},n=t.API,r=void 0===n?{}:n,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["API"]),o=yl(yl({},i),r);return Sl.debug("configure GraphQL API",{opt:o}),o.aws_project_region&&(o=Object.assign({},o,{region:o.aws_project_region,header:{}})),void 0!==o.graphql_headers&&"function"!=typeof o.graphql_headers&&(Sl.warn("graphql_headers should be a function"),o.graphql_headers=void 0),this._options=Object.assign({},this._options,o),this.createInstance(),this._options},e.prototype.createInstance=function(){return Sl.debug("create Rest instance"),this._options?(this._api=new ju(this._options),this._api.Credentials=this.Credentials,!0):Promise.reject("API not configured")},e.prototype._headerBasedAuth=function(e){return ml(this,void 0,void 0,(function(){var t,n,r,i,o,s,a,u;return bl(this,(function(c){switch(c.label){case 0:switch(t=this._options,n=t.aws_appsync_authenticationType,r=t.aws_appsync_apiKey,i={},e||n||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,9]}return[3,11];case 1:if(!r)throw new Error("No api-key configured");return i={Authorization:null,"X-Api-Key":r},[3,12];case 2:return[4,this._ensureCredentials()];case 3:if(!c.sent())throw new Error("No credentials");return[3,12];case 4:return o=void 0,[4,Ka.getItem("federatedInfo")];case 5:return(s=c.sent())?(o=s.token,[3,8]):[3,6];case 6:return[4,Va.currentAuthenticatedUser()];case 7:(a=c.sent())&&(o=a.token),c.label=8;case 8:if(!o)throw new Error("No federated jwt");return i={Authorization:o},[3,12];case 9:return[4,this.Auth.currentSession()];case 10:return u=c.sent(),i={Authorization:u.getAccessToken().getJwtToken()},[3,12];case 11:return i={Authorization:null},[3,12];case 12:return[2,i]}}))}))},e.prototype.getGraphqlOperationType=function(e){var t=Ic(e);return wl(t.definitions,1)[0].operation},e.prototype.graphql=function(e,t){var n=e.query,r=e.variables,i=void 0===r?{}:r,o=e.authMode,s=Ic("string"==typeof n?n:Wu(n)),a=wl(s.definitions.filter((function(e){return"OperationDefinition"===e.kind})),1)[0],u=(void 0===a?{}:a).operation;switch(u){case"query":case"mutation":var c=this._api.getCancellableToken(),l={cancellableToken:c},f=this._graphql({query:s,variables:i,authMode:o},t,l);return this._api.updateRequestToBeCancellable(f,c),f;case"subscription":return this._graphqlSubscribe({query:s,variables:i,authMode:o},t)}throw new Error("invalid operation type: "+u)},e.prototype._graphql=function(e,t,n){var r=e.query,i=e.variables,o=e.authMode;return void 0===t&&(t={}),void 0===n&&(n={}),ml(this,void 0,void 0,(function(){var e,s,a,u,c,l,f,d,h,p,v,g,y,m,b,w,S,_,E,I,A;return bl(this,(function(C){switch(C.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:C.sent(),C.label=2;case 2:return e=this._options,s=e.aws_appsync_region,a=e.aws_appsync_graphqlEndpoint,u=e.graphql_headers,c=void 0===u?function(){return{}}:u,l=e.graphql_endpoint,f=e.graphql_endpoint_iam_region,h=[{}],(p=!l)?[4,this._headerBasedAuth(o)]:[3,4];case 3:p=C.sent(),C.label=4;case 4:return v=[yl.apply(void 0,h.concat([p]))],(g=l)?f?[4,this._headerBasedAuth(o)]:[3,6]:[3,8];case 5:return y=C.sent(),[3,7];case 6:y={Authorization:null},C.label=7;case 7:g=y,C.label=8;case 8:return m=[yl.apply(void 0,v.concat([g]))],[4,c({query:r,variables:i})];case 9:if(d=yl.apply(void 0,[yl.apply(void 0,[yl.apply(void 0,m.concat([C.sent()])),t]),!l&&(A={},A["x-amz-user-agent"]=ya.userAgent,A)]),b={query:Wu(r),variables:i},w=Object.assign({headers:d,body:b,signerServiceInfo:{service:l?"execute-api":"appsync",region:l?f:s}},n),!(S=l||a))throw{data:{},errors:[new la("No graphql endpoint provided.")]};C.label=10;case 10:return C.trys.push([10,12,,13]),[4,this._api.post(S,w)];case 11:return _=C.sent(),[3,13];case 12:if(E=C.sent(),this._api.isCancel(E))throw E;return _={data:{},errors:[new la(E.message)]},[3,13];case 13:if((I=_.errors)&&I.length)throw _;return[2,_]}}))}))},e.prototype.isCancel=function(e){return this._api.isCancel(e)},e.prototype.cancel=function(e,t){return this._api.cancel(e,t)},e.prototype._graphqlSubscribe=function(e,t){var n=e.query,r=e.variables,i=e.authMode;void 0===t&&(t={});var o=this._options,s=o.aws_appsync_region,a=o.aws_appsync_graphqlEndpoint,u=o.aws_appsync_authenticationType,c=o.aws_appsync_apiKey,l=o.graphql_headers,f=void 0===l?function(){return{}}:l,d=i||u||"AWS_IAM";if(lu&&"function"==typeof lu.subscribe)return lu.subscribe("",{provider:zs,appSyncGraphqlEndpoint:a,authenticationType:d,apiKey:c,query:Wu(n),region:s,variables:r,graphql_headers:f,additionalHeaders:t});throw Sl.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},e.prototype._ensureCredentials=function(){var e=this;return this.Credentials.get().then((function(t){if(!t)return!1;var n=e.Credentials.shear(t);return Sl.debug("set credentials for api",n),!0})).catch((function(e){return Sl.warn("ensure credentials error",e),!1}))},e}(),Il=new El(null);s.register(Il);var Al=function(){return(Al=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Cl=new i.k("API"),Tl=new(function(){function e(e){this.Auth=No,this.Cache=Ka,this.Credentials=Br,this._options=e,this._restApi=new zu(e),this._graphqlApi=new El(e),Cl.debug("API Options",this._options)}return e.prototype.getModuleName=function(){return"API"},e.prototype.configure=function(e){this._options=Object.assign({},this._options,e),this._restApi.Credentials=this.Credentials,this._graphqlApi.Auth=this.Auth,this._graphqlApi.Cache=this.Cache,this._graphqlApi.Credentials=this.Credentials;var t=this._restApi.configure(this._options),n=this._graphqlApi.configure(this._options);return Al(Al({},t),n)},e.prototype.get=function(e,t,n){return this._restApi.get(e,t,n)},e.prototype.post=function(e,t,n){return this._restApi.post(e,t,n)},e.prototype.put=function(e,t,n){return this._restApi.put(e,t,n)},e.prototype.patch=function(e,t,n){return this._restApi.patch(e,t,n)},e.prototype.del=function(e,t,n){return this._restApi.del(e,t,n)},e.prototype.head=function(e,t,n){return this._restApi.head(e,t,n)},e.prototype.isCancel=function(e){return this._restApi.isCancel(e)},e.prototype.cancel=function(e,t){return this._restApi.cancel(e,t)},e.prototype.endpoint=function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(t){return[2,this._restApi.endpoint(e)]}))}))},e.prototype.getGraphqlOperationType=function(e){return this._graphqlApi.getGraphqlOperationType(e)},e.prototype.graphql=function(e,t){return this._graphqlApi.graphql(e,t)},e}())(null);s.register(Tl);const Ol=Tl;var xl,kl=function(){return(kl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Pl=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Nl=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Ll=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Ml=new i.k("DataStore"),Rl=function(){function e(e,t,n,r,i,o,s,a){this.schema=e,this.storage=t,this.userClasses=n,this.outbox=r,this.modelInstanceCreator=i,this.MutationEvent=o,this.conflictHandler=s,this.errorHandler=a,this.typeQuery=new WeakMap,this.processing=!1,this.generateQueries()}return e.prototype.generateQueries=function(){var e=this;Object.values(this.schema.namespaces).forEach((function(t){Object.values(t.models).filter((function(e){return e.syncable})).forEach((function(n){var r=Ll(Iu(t,n,"CREATE"),1)[0],i=Ll(Iu(t,n,"UPDATE"),1)[0],o=Ll(Iu(t,n,"DELETE"),1)[0];e.typeQuery.set(n,[r,i,o])}))}))},e.prototype.isReady=function(){return void 0!==this.observer},e.prototype.start=function(){var e=this;return new As((function(t){return e.observer=t,e.resume(),function(){e.pause()}}))},e.prototype.resume=function(){return Pl(this,void 0,void 0,(function(){var e,t,n,r,i,o,s,a,u,c,l,f,d,h,p;return Nl(this,(function(v){switch(v.label){case 0:if(this.processing||!this.isReady())return[2];this.processing=!0,t=Ns.xR,v.label=1;case 1:return(n=this.processing)?[4,this.outbox.peek(this.storage)]:[3,3];case 2:n=void 0!==(e=v.sent()),v.label=3;case 3:if(!n)return[3,12];r=e.model,i=e.operation,o=e.data,s=e.condition,a=this.userClasses[r],u=void 0,c=void 0,l=void 0,v.label=4;case 4:return v.trys.push([4,6,,7]),[4,this.jitteredRetry(t,r,i,o,s,a,this.MutationEvent,e)];case 5:return p=Ll.apply(void 0,[v.sent(),3]),u=p[0],c=p[1],l=p[2],[3,7];case 6:return"Offline"===(f=v.sent()).message||"RetryMutation"===f.message?[3,1]:[3,7];case 7:return void 0!==u?[3,9]:(Ml.debug("done retrying"),[4,this.outbox.dequeue(this.storage)]);case 8:return v.sent(),[3,1];case 9:return d=u.data[c],[4,this.outbox.dequeue(this.storage)];case 10:return v.sent(),[4,this.outbox.peek(this.storage)];case 11:return h=void 0!==v.sent(),this.observer.next({operation:i,modelDefinition:l,model:d,hasMore:h}),[3,1];case 12:return this.pause(),[2]}}))}))},e.prototype.jitteredRetry=function(e,t,n,r,i,o,s,a){return Pl(this,void 0,void 0,(function(){var u=this;return Nl(this,(function(c){switch(c.label){case 0:return[4,L((function(t,n,r,i,o,s,a){return Pl(u,void 0,void 0,(function(){var u,c,l,f,d,h,p,v,g,y,m,b,w,S,_,E,I,A,C,T,O;return Nl(this,(function(x){switch(x.label){case 0:u=Ll(this.createQueryVariables(e,t,n,r,i),5),c=u[0],l=u[1],f=u[2],d=u[3],h=u[4],p={query:c,variables:l},v=0,g=this.opTypeFromTransformerOperation(n),x.label=1;case 1:return x.trys.push([1,3,,13]),[4,Ol.graphql(p)];case 2:return[2,[x.sent(),d,h]];case 3:if(!((y=x.sent()).errors&&y.errors.length>0))return[3,12];if(m=Ll(y.errors,1),"Network Error"===(b=m[0]).message){if(!this.processing)throw new P("Offline");throw new Error("Network Error")}return"ConflictUnhandled"!==b.errorType?[3,11]:(v++,w=void 0,v>10?(w=Ps.K5,[3,7]):[3,4]);case 4:return x.trys.push([4,6,,7]),[4,this.conflictHandler({modelConstructor:o,localModel:this.modelInstanceCreator(o,l.input),remoteModel:this.modelInstanceCreator(o,b.data),operation:g,attempts:v})];case 5:return w=x.sent(),[3,7];case 6:return S=x.sent(),Ml.warn("conflict trycatch",S),[3,13];case 7:return w!==Ps.K5?[3,9]:(_=Ll(Iu(this.schema.namespaces[e],h,"GET"),1),E=Ll(_[0],3),I=E[1],A=E[2],[4,Ol.graphql({query:A,variables:{id:l.input.id}})]);case 8:return[2,[x.sent(),I,h]];case 9:return C=this.schema.namespaces[e],T=Au(C.relationships,0,g,o,w,f,s,this.modelInstanceCreator,a.id),[4,this.storage.save(T)];case 10:throw x.sent(),new P("RetryMutation");case 11:try{this.errorHandler({localModel:this.modelInstanceCreator(o,l.input),message:b.message,operation:n,errorType:b.errorType,errorInfo:b.errorInfo,remoteModel:b.data?this.modelInstanceCreator(o,b.data):null})}catch(e){Ml.warn("failed to execute errorHandler",e)}finally{return[2,b.data?[{data:(O={},O[d]=b.data,O)},d,h]:[]]}x.label=12;case 12:return[3,13];case 13:if(p)return[3,1];x.label=14;case 14:return[2]}}))}))}),[t,n,r,i,o,s,a])];case 1:return[2,c.sent()]}}))}))},e.prototype.createQueryVariables=function(e,t,n,r,i){var o=this.schema.namespaces[e].models[t],s=this.typeQuery.get(o),a=Ll(s.find((function(e){return Ll(e,1)[0]===n})),3),u=a[1],c=a[2],l=JSON.parse(r),f=l._version,d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(l,["_version"]),h=n===vu.DELETE?{id:d.id}:Object.values(o.fields).filter((function(e){var t=e.type,n=e.association;return!(0,Ps.I7)(t)||!(!(0,Ps.Fr)(n)||"BELONGS_TO"!==n.connectionType)})).map((function(e){var t=e.name,n=e.type,r=e.association,i=t,o=d[t];return(0,Ps.I7)(n)&&(0,Ps.Fr)(r)&&(i=r.targetName,o=d[i]),[i,o]})).reduce((function(e,t){var n=Ll(t,2),r=n[0],i=n[1];return e[r]=i,e}),{}),p=kl(kl({},h),{_version:f}),v=JSON.parse(i);return[c,kl({input:p},n===vu.CREATE?{}:{condition:Object.keys(v).length>0?v:null}),v,u,o]},e.prototype.opTypeFromTransformerOperation=function(e){switch(e){case vu.CREATE:return Ps.HP.INSERT;case vu.DELETE:return Ps.HP.DELETE;case vu.UPDATE:return Ps.HP.UPDATE;case vu.GET:break;default:(0,Ns.y0)(e)}},e.prototype.pause=function(){this.processing=!1},e}();!function(e){e.API_KEY="API_KEY",e.AWS_IAM="AWS_IAM",e.OPENID_CONNECT="OPENID_CONNECT",e.AMAZON_COGNITO_USER_POOLS="AMAZON_COGNITO_USER_POOLS"}(xl||(xl={}));var Dl,Ul,jl=function(){return(jl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Fl=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Bl=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},zl=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},ql=new i.k("DataStore");!function(e){e.CONNECTED="CONNECTED"}(Dl||(Dl={})),function(e){e[e.none=0]="none",e[e.unauth=1]="unauth",e[e.auth=2]="auth"}(Ul||(Ul={}));var Kl,Vl=function(){function e(e,t,n){void 0===n&&(n={}),this.schema=e,this.syncPredicates=t,this.amplifyConfig=n,this.typeQuery=new WeakMap,this.buffer=[]}return e.prototype.buildSubscription=function(e,t,n,r,i,o){var s=this.amplifyConfig.aws_appsync_authenticationType,a=this.getAuthorizationInfo(t,r,s,i,o)||{},u=a.authMode,c=a.isOwner,l=a.ownerField,f=a.ownerValue,d=zl(function(e,t,n,r,i){var o=_u(e,t),s=t.name,a=(t.pluralName,"on"+n+s),u="",c="";return r&&(u="($"+i+": String!)",c="("+i+": $"+i+")"),[n,a,"subscription operation"+u+"{\n\t\t\t"+a+c+"{\n\t\t\t\t"+o+"\n\t\t\t}\n\t\t}"]}(e,t,n,c,l),3);return{authMode:u,opType:d[0],opName:d[1],query:d[2],isOwner:c,ownerField:l,ownerValue:f}},e.prototype.getAuthorizationInfo=function(e,t,n,r,i){void 0===r&&(r={}),void 0===i&&(i={});var o,s,a,u,c=(a=(void 0===(s=([].concat((o=e).attributes).find((function(e){return e&&"auth"===e.type}))||{}).properties)?{}:s).rules,u=[],(void 0===a?[]:a).forEach((function(e){var t=e.identityClaim,n=void 0===t?"cognito:username":t,r=e.ownerField,i=void 0===r?"owner":r,s=e.operations,a=void 0===s?["create","update","delete","read"]:s,c=e.provider,l=void 0===c?"userPools":c,f=e.groupClaim,d=void 0===f?"cognito:groups":f,h=e.allow,p=void 0===h?"iam":h,v=e.groups,g=void 0===v?[]:v,y="owner"===p;if(a.includes("read")||y){var m={identityClaim:n,ownerField:i,provider:l,groupClaim:d,authStrategy:p,groups:g,areSubscriptionsPublic:!1};if(y){var b=([].concat(o.attributes).find((function(e){return e&&"model"===e.type}))||{}).properties,w=(void 0===b?{}:b).subscriptions,S=(void 0===w?{}:w).level,_=void 0===S?"on":S;m.areSubscriptionsPublic=!a.includes("read")||"public"===_}y?u.push(m):u.unshift(m)}})),u);if(n===xl.AWS_IAM&&c.find((function(e){return"private"===e.authStrategy&&"iam"===e.provider}))&&t===Ul.unauth)return null;var l,f=c.filter((function(e){return"groups"===e.authStrategy&&["userPools","oidc"].includes(e.provider)}));return n!==xl.AMAZON_COGNITO_USER_POOLS&&n!==xl.OPENID_CONNECT||!f.find((function(e){return function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(zl(arguments[t]));return e}(Ou(r,e),Ou(i,e)).find((function(t){return e.groups.find((function(e){return e===t}))}))}))?((n===xl.AMAZON_COGNITO_USER_POOLS?c.filter((function(e){return"owner"===e.authStrategy&&"userPools"===e.provider})):[]).forEach((function(e){var t=r[e.identityClaim];t&&(l={authMode:xl.AMAZON_COGNITO_USER_POOLS,isOwner:!e.areSubscriptionsPublic,ownerField:e.ownerField,ownerValue:t})})),l||((n===xl.OPENID_CONNECT?c.filter((function(e){return"owner"===e.authStrategy&&"oidc"===e.provider})):[]).forEach((function(e){var t=i[e.identityClaim];t&&(l={authMode:xl.OPENID_CONNECT,isOwner:!e.areSubscriptionsPublic,ownerField:e.ownerField,ownerValue:t})})),l||{authMode:n,isOwner:!1})):{authMode:n,isOwner:!1}},e.prototype.hubQueryCompletionListener=function(e,t){t.payload.event===tu.SUBSCRIPTION_ACK&&e()},e.prototype.start=function(){var e=this;return[new As((function(t){var n,r,i=[],o=[],s=Ul.none;return Fl(e,void 0,void 0,(function(){var e,a,u,c,l,f,d,h,p,v,g=this;return Bl(this,(function(y){switch(y.label){case 0:return y.trys.push([0,2,,3]),[4,Va.currentCredentials()];case 1:return e=y.sent(),s=e.authenticated?Ul.auth:Ul.unauth,[3,3];case 2:return y.sent(),[3,3];case 3:return y.trys.push([3,5,,6]),[4,Va.currentSession()];case 4:return a=y.sent(),n=a.getIdToken().decodePayload(),[3,6];case 5:return y.sent(),[3,6];case 6:if(y.trys.push([6,11,,12]),u=this.amplifyConfig,c=u.aws_cognito_region,l=u.Auth,!c||l&&!l.region)throw"Auth is not configured";return f=void 0,[4,Ka.getItem("federatedInfo")];case 7:return(d=y.sent())?(f=d.token,[3,10]):[3,8];case 8:return[4,Va.currentAuthenticatedUser()];case 9:(h=y.sent())&&(f=h.token),y.label=10;case 10:return f&&(p=f.split(".")[1],r=JSON.parse(Buffer.from(p,"base64").toString("utf8"))),[3,12];case 11:return v=y.sent(),ql.debug("error getting OIDC JWT",v),[3,12];case 12:return Object.values(this.schema.namespaces).forEach((function(e){Object.values(e.models).filter((function(e){return e.syncable})).forEach((function(a){return Fl(g,void 0,void 0,(function(){var u=this;return Bl(this,(function(c){return[vu.CREATE,vu.UPDATE,vu.DELETE].map((function(t){return u.buildSubscription(e,a,t,s,n,r)})).forEach((function(e){var n=e.opType,r=e.opName,s=e.query,c=e.isOwner,l=e.ownerField,f=e.ownerValue,d=e.authMode;return Fl(u,void 0,void 0,(function(){var e,u,h,p=this;return Bl(this,(function(v){if(e={},c){if(!f)return t.error("Owner field required, sign in is needed in order to perform this operation"),[2];e[l]=f}return u=Ol.graphql(jl({query:s,variables:e},{authMode:d})),o.push(u.map((function(e){return e.value})).subscribe({next:function(e){var t=e.data,i=e.errors;if(Array.isArray(i)&&i.length>0){var o=i.map((function(e){return e.message}));return ql.warn("Skipping incoming subscription. Messages: "+o.join("\n")),void p.drainBuffer()}var s=Cs.OY.getPredicates(p.syncPredicates.get(a),!1),u=t[r];p.passesPredicateValidation(u,s)&&p.pushToBuffer(n,a,u),p.drainBuffer()},error:function(e){var n=e.error,r=zl((void 0===n?{errors:[]}:n).errors,1)[0],i=(void 0===r?{}:r).message,o=void 0===i?"":i;ql.warn("subscriptionError",o),"function"==typeof h&&h(),o.includes('"errorType":"Unauthorized"')||t.error(o)}})),i.push(Fl(p,void 0,void 0,(function(){var e,t=this;return Bl(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n){h=n,e=t.hubQueryCompletionListener.bind(t,n),Yr.listen("api",e)}))];case 1:return n.sent(),Yr.remove("api",e),[2]}}))}))),[2]}))}))})),[2]}))}))}))})),Promise.all(i).then((function(){return t.next(Dl.CONNECTED)})),[2]}}))})),function(){o.forEach((function(e){return e.unsubscribe()}))}})),new As((function(t){return e.dataObserver=t,e.drainBuffer(),function(){e.dataObserver=null}}))]},e.prototype.passesPredicateValidation=function(e,t){if(!t)return!0;var n=t.predicates,r=t.type;return(0,Ns.u8)(e,r,n)},e.prototype.pushToBuffer=function(e,t,n){this.buffer.push([e,t,n])},e.prototype.drainBuffer=function(){var e=this;this.dataObserver&&(this.buffer.forEach((function(t){return e.dataObserver.next(t)})),this.buffer=[])},e}(),Hl=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Gl=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Wl=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Yl=new i.k("DataStore"),$l=function(){function e(e,t,n,r){void 0===t&&(t=1e4),void 0===n&&(n=1e3),this.schema=e,this.maxRecordsToSync=t,this.syncPageSize=n,this.syncPredicates=r,this.typeQuery=new WeakMap,this.generateQueries()}return e.prototype.generateQueries=function(){var e=this;Object.values(this.schema.namespaces).forEach((function(t){Object.values(t.models).filter((function(e){return e.syncable})).forEach((function(n){var r=Wl(Iu(t,n,"LIST"),1),i=Wl(r[0]).slice(1);e.typeQuery.set(n,i)}))}))},e.prototype.graphqlFilterFromPredicate=function(e){if(!this.syncPredicates)return null;var t=Cs.OY.getPredicates(this.syncPredicates.get(e),!1);return t?Tu(t):null},e.prototype.retrievePage=function(e,t,n,r,i){return void 0===r&&(r=null),Hl(this,void 0,void 0,(function(){var o,s,a,u,c,l,f,d,h;return Gl(this,(function(p){switch(p.label){case 0:return o=Wl(this.typeQuery.get(e),2),s=o[0],a=o[1],u={limit:r,nextToken:n,lastSync:t,filter:i},[4,this.jitteredRetry(a,u,s)];case 1:return c=p.sent().data,l=c[s],f=l.items,d=l.nextToken,h=l.startedAt,[2,{nextToken:d,startedAt:h,items:f}]}}))}))},e.prototype.jitteredRetry=function(e,t,n){return Hl(this,void 0,void 0,(function(){var r=this;return Gl(this,(function(i){switch(i.label){case 0:return[4,L((function(e,t){return Hl(r,void 0,void 0,(function(){var r,i;return Gl(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,Ol.graphql({query:e,variables:t})];case 1:return[2,o.sent()];case 2:if((r=o.sent()).errors.some((function(e){return"Unauthorized"===e.errorType})))return(i=r).data[n].items=i.data[n].items.filter((function(e){return null!==e})),Yl.warn("queryError","User is unauthorized, some items could not be returned."),[2,i];throw r;case 3:return[2]}}))}))}),[e,t])];case 1:return[2,i.sent()]}}))}))},e.prototype.start=function(e){var t=this,n=!0,r=void 0!==this.maxRecordsToSync?this.maxRecordsToSync:1e4,i=void 0!==this.syncPageSize?this.syncPageSize:1e3,o=new Map;return new As((function(s){var a=Object.values(t.schema.namespaces).reduce((function(t,n){var r,i;try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Array.from(n.modelTopologicalOrdering.keys())),s=o.next();!s.done;s=o.next()){var a=s.value,u=e.get(n.models[a]);t.set(n.models[a],u)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return t}),new Map),u=Array.from(a.entries()).filter((function(e){return Wl(e,1)[0].syncable})).map((function(e){var a=Wl(e,2),u=a[0],c=Wl(a[1],2),l=c[0],f=c[1];return Hl(t,void 0,void 0,(function(){var e,t,a,c,d,h,p,v,g,y=this;return Gl(this,(function(m){switch(m.label){case 0:return e=!1,t=null,a=null,c=null,d=0,h=this.graphqlFilterFromPredicate(u),p=this.schema.namespaces[l].modelTopologicalOrdering.get(u.name),v=p.map((function(e){return o.get(l+"_"+e)})),g=new Promise((function(o){return Hl(y,void 0,void 0,(function(){var p,g;return Gl(this,(function(y){switch(y.label){case 0:return[4,Promise.all(v)];case 1:y.sent(),y.label=2;case 2:return n?(p=Math.min(r-d,i),[4,this.retrievePage(u,f,t,p,h)]):[2];case 3:g=y.sent(),c=g.items,t=g.nextToken,a=g.startedAt,d+=c.length,e=null===t||d>=r,s.next({namespace:l,modelDefinition:u,items:c,done:e,startedAt:a,isFullSync:!f}),y.label=4;case 4:if(!e)return[3,2];y.label=5;case 5:return o(),[2]}}))}))})),o.set(l+"_"+u.name,g),[4,g];case 1:return m.sent(),[2]}}))}))}));return Promise.all(u).then((function(){s.complete()})),function(){n=!1}}))},e}(),Jl=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Ql=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Zl=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Xl=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ef=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Zl(arguments[t]));return e},tf=_().isNode,nf=new i.k("DataStore"),rf=Symbol("sync");!function(e){e.SYNC_ENGINE_STORAGE_SUBSCRIBED="storageSubscribed",e.SYNC_ENGINE_SUBSCRIPTIONS_ESTABLISHED="subscriptionsEstablished",e.SYNC_ENGINE_SYNC_QUERIES_STARTED="syncQueriesStarted",e.SYNC_ENGINE_SYNC_QUERIES_READY="syncQueriesReady",e.SYNC_ENGINE_MODEL_SYNCED="modelSynced",e.SYNC_ENGINE_OUTBOX_MUTATION_ENQUEUED="outboxMutationEnqueued",e.SYNC_ENGINE_OUTBOX_MUTATION_PROCESSED="outboxMutationProcessed",e.SYNC_ENGINE_OUTBOX_STATUS="outboxStatus",e.SYNC_ENGINE_NETWORK_STATUS="networkStatus",e.SYNC_ENGINE_READY="ready"}(Kl||(Kl={}));var of=function(){function e(e,t,n,r,i,o,s,a,u,c,l,f){void 0===f&&(f={}),this.schema=e,this.namespaceResolver=t,this.modelClasses=n,this.userModelClasses=r,this.storage=i,this.modelInstanceCreator=o,this.maxRecordsToSync=s,this.syncPageSize=a,this.syncPredicates=l,this.amplifyConfig=f,this.online=!1;var d=this.modelClasses.MutationEvent;this.outbox=new Nu(this.schema,this.namespaceResolver,d,rf),this.modelMerger=new bu(this.outbox,rf),this.syncQueriesProcessor=new $l(this.schema,this.maxRecordsToSync,this.syncPageSize,this.syncPredicates),this.subscriptionsProcessor=new Vl(this.schema,this.syncPredicates,this.amplifyConfig),this.mutationsProcessor=new Rl(this.schema,this.storage,this.userModelClasses,this.outbox,this.modelInstanceCreator,d,u,c),this.datastoreConnectivity=new hu}return e.prototype.start=function(e){var t=this;return new As((function(n){nf.log("starting sync engine...");var r=[];return Jl(t,void 0,void 0,(function(){var t,i,o,s=this;return Ql(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.setupModels(e)];case 1:return a.sent(),[3,3];case 2:return t=a.sent(),n.error(t),[2];case 3:return i=new Promise((function(e){s.datastoreConnectivity.status().subscribe((function(t){var i=t.online;return Jl(s,void 0,void 0,(function(){var t,o,s,a,u,c=this;return Ql(this,(function(l){switch(l.label){case 0:return!i||this.online?[3,10]:(this.online=i,n.next({type:Kl.SYNC_ENGINE_NETWORK_STATUS,data:{active:this.online}}),o=void 0,tf?(nf.warn("Realtime disabled when in a server-side environment"),[3,6]):[3,1]);case 1:u=Zl(this.subscriptionsProcessor.start(),2),t=u[0],o=u[1],l.label=2;case 2:return l.trys.push([2,4,,5]),[4,new Promise((function(e,n){var i=t.subscribe({next:function(t){t===Dl.CONNECTED&&e()},error:function(e){n(e),c.disconnectionHandler()(e)}});r.push(i)}))];case 3:return l.sent(),[3,5];case 4:return s=l.sent(),n.error(s),[2];case 5:nf.log("Realtime ready"),n.next({type:Kl.SYNC_ENGINE_SUBSCRIPTIONS_ESTABLISHED}),l.label=6;case 6:return l.trys.push([6,8,,9]),[4,new Promise((function(e,t){var i=c.syncQueriesObservable().subscribe({next:function(t){t.type===Kl.SYNC_ENGINE_SYNC_QUERIES_READY&&e(),n.next(t)},complete:function(){e()},error:function(e){t(e)}});i&&r.push(i)}))];case 7:return l.sent(),[3,9];case 8:return a=l.sent(),n.error(a),[2];case 9:return r.push(this.mutationsProcessor.start().subscribe((function(e){var t=e.modelDefinition,r=e.model,i=e.hasMore,o=c.userModelClasses[t.name],s=c.modelInstanceCreator(o,r);c.storage.runExclusive((function(e){return c.modelMerger.merge(e,s)})),n.next({type:Kl.SYNC_ENGINE_OUTBOX_MUTATION_PROCESSED,data:{model:o,element:s}}),n.next({type:Kl.SYNC_ENGINE_OUTBOX_STATUS,data:{isEmpty:!i}})}))),tf||r.push(o.subscribe((function(e){var t=Zl(e,3),n=(t[0],t[1]),r=t[2],i=c.userModelClasses[n.name],o=c.modelInstanceCreator(i,r);c.storage.runExclusive((function(e){return c.modelMerger.merge(e,o)}))}))),[3,11];case 10:i||(this.online=i,n.next({type:Kl.SYNC_ENGINE_NETWORK_STATUS,data:{active:this.online}}),r.forEach((function(e){return e.unsubscribe()})),r=[]),l.label=11;case 11:return e(),[2]}}))}))}))})),this.storage.observe(null,null,rf).filter((function(e){var t=e.model;return!0===s.getModelDefinition(t).syncable})).subscribe({next:function(e){var t=e.opType,r=e.model,o=e.element,a=e.condition;return Jl(s,void 0,void 0,(function(){var e,s,u,c;return Ql(this,(function(l){switch(l.label){case 0:return e=this.schema.namespaces[this.namespaceResolver(r)],s=this.modelClasses.MutationEvent,u=Cu(a),c=Au(e.relationships,this.getModelDefinition(r),t,r,o,u,s,this.modelInstanceCreator),[4,this.outbox.enqueue(this.storage,c)];case 1:return l.sent(),n.next({type:Kl.SYNC_ENGINE_OUTBOX_MUTATION_ENQUEUED,data:{model:r,element:o}}),n.next({type:Kl.SYNC_ENGINE_OUTBOX_STATUS,data:{isEmpty:!1}}),[4,i];case 2:return l.sent(),this.online&&this.mutationsProcessor.resume(),[2]}}))}))}}),n.next({type:Kl.SYNC_ENGINE_STORAGE_SUBSCRIBED}),[4,this.outbox.peek(this.storage)];case 4:return o=void 0===a.sent(),n.next({type:Kl.SYNC_ENGINE_OUTBOX_STATUS,data:{isEmpty:o}}),[4,i];case 5:return a.sent(),n.next({type:Kl.SYNC_ENGINE_READY}),[2]}}))})),function(){r.forEach((function(e){return e.unsubscribe()}))}}))},e.prototype.getModelsMetadataWithNextFullSync=function(e){return Jl(this,void 0,void 0,(function(){var t,n=this;return Ql(this,(function(r){switch(r.label){case 0:return t=Map.bind,[4,this.getModelsMetadata()];case 1:return[2,new(t.apply(Map,[void 0,r.sent().map((function(t){var r=t.namespace,i=t.model,o=t.lastSync,s=t.lastFullSync,a=t.fullSyncInterval,u=(t.lastSyncPredicate,!s||s+a<e?0:o);return[n.schema.namespaces[r].models[i],[r,u]]}))]))]}}))}))},e.prototype.syncQueriesObservable=function(){var e=this;return this.online?new As((function(t){var n,r;return Jl(e,void 0,void 0,(function(){var e,i,o=this;return Ql(this,(function(s){switch(s.label){case 0:e=function(){var e,s,a,u,c,l,f,d,h;return Ql(this,(function(p){switch(p.label){case 0:return e=new WeakMap,[4,i.getModelsMetadataWithNextFullSync(Date.now())];case 1:return s=p.sent(),a=new Set(s.keys()),[4,new Promise((function(r){n=o.syncQueriesProcessor.start(s).subscribe({next:function(i){var s=i.namespace,h=i.modelDefinition,p=i.items,v=i.done,g=i.startedAt,y=i.isFullSync;return Jl(o,void 0,void 0,(function(){var i,o,m,b,w,S,_=this;return Ql(this,(function(E){switch(E.label){case 0:return i=this.userModelClasses[h.name],e.has(i)||(e.set(i,{new:0,updated:0,deleted:0}),l=(0,Ns.Iz)(),d=void 0===d?g:Math.max(d,g)),[4,this.storage.runExclusive((function(t){return Jl(_,void 0,void 0,(function(){var n,r,o,s,a,u,c,l,f,d,h,v,g,y,m;return Ql(this,(function(b){switch(b.label){case 0:return[4,this.outbox.getModelIds(t)];case 1:n=b.sent(),r=[],o=p.filter((function(e){return!n.has(e.id)||(r.push(e),!1)})),s=[],b.label=2;case 2:b.trys.push([2,7,8,9]),a=Xl(r),u=a.next(),b.label=3;case 3:return u.done?[3,6]:(c=u.value,[4,this.modelMerger.merge(t,c)]);case 4:void 0!==(l=b.sent())&&s.push([c,l]),b.label=5;case 5:return u=a.next(),[3,3];case 6:return[3,9];case 7:return f=b.sent(),y={error:f},[3,9];case 8:try{u&&!u.done&&(m=a.return)&&m.call(a)}finally{if(y)throw y.error}return[7];case 9:return h=(d=s.push).apply,v=[s],[4,this.modelMerger.mergePage(t,i,o)];case 10:return h.apply(d,v.concat([ef.apply(void 0,[b.sent()])])),g=e.get(i),s.forEach((function(e){var t=Zl(e,2)[1];switch(t){case Ps.HP.INSERT:g.new++;break;case Ps.HP.UPDATE:g.updated++;break;case Ps.HP.DELETE:g.deleted++;break;default:(0,Ns.y0)(t)}})),[2]}}))}))}))];case 1:return E.sent(),v?(o=h.name,[4,this.getModelMetadata(s,o)]):[3,4];case 2:return m=E.sent(),b=m.lastFullSync,w=m.fullSyncInterval,c=w,u=void 0===u?b:Math.max(u,y?g:b),m=this.modelClasses.ModelMetadata.copyOf(m,(function(e){e.lastSync=g,e.lastFullSync=y?g:m.lastFullSync})),[4,this.storage.save(m,void 0,rf)];case 3:E.sent(),S=e.get(i),t.next({type:Kl.SYNC_ENGINE_MODEL_SYNCED,data:{model:i,isFullSync:y,isDeltaSync:!y,counts:S}}),a.delete(h),0===a.size&&(f=(0,Ns.Iz)()-l,r(),t.next({type:Kl.SYNC_ENGINE_SYNC_QUERIES_READY}),n.unsubscribe()),E.label=4;case 4:return[2]}}))}))},error:function(e){t.error(e)}}),t.next({type:Kl.SYNC_ENGINE_SYNC_QUERIES_STARTED,data:{models:Array.from(a).map((function(e){return e.name}))}})}))];case 2:return p.sent(),h=u+c-(d+f),nf.debug("Next fullSync in "+h/1e3+" seconds. ("+new Date(Date.now()+h)+")"),[4,new Promise((function(e){r=setTimeout(e,h)}))];case 3:return p.sent(),[2]}}))},i=this,s.label=1;case 1:return t.closed?[3,3]:[5,e()];case 2:return s.sent(),[3,1];case 3:return[2]}}))})),function(){n&&n.unsubscribe(),r&&clearTimeout(r)}})):As.of()},e.prototype.disconnectionHandler=function(){var e=this;return function(t){tu.CONNECTION_CLOSED!==t&&tu.TIMEOUT_DISCONNECT!==t||e.datastoreConnectivity.socketDisconnected()}},e.prototype.unsubscribeConnectivity=function(){this.datastoreConnectivity.unsubscribe()},e.prototype.setupModels=function(e){return Jl(this,void 0,void 0,(function(){var t,n,r,i,o,s,a,u,c,l,f,d,h,p=this;return Ql(this,(function(v){switch(v.label){case 0:t=e.fullSyncInterval,n=this.modelClasses.ModelMetadata,r=[],Object.values(this.schema.namespaces).forEach((function(e){Object.values(e.models).filter((function(e){return e.syncable})).forEach((function(t){r.push([e.name,t])}))})),o=r.map((function(e){var r=Zl(e,2),o=r[0],s=r[1];return Jl(p,void 0,void 0,(function(){var e,r,a,u,c,l,f,d,h;return Ql(this,(function(p){switch(p.label){case 0:return[4,this.getModelMetadata(o,s.name)];case 1:return e=p.sent(),r=Cs.OY.getPredicates(this.syncPredicates.get(s),!1),a=r?JSON.stringify(r):null,void 0!==e?[3,3]:[4,this.storage.save(this.modelInstanceCreator(n,{model:s.name,namespace:o,lastSync:null,fullSyncInterval:t,lastFullSync:null,lastSyncPredicate:a}),void 0,rf)];case 2:return l=Zl.apply(void 0,[p.sent(),1]),f=Zl(l[0],1),i=f[0],[3,5];case 3:return u=e.lastSyncPredicate?e.lastSyncPredicate:null,c=u!==a,[4,this.storage.save(this.modelClasses.ModelMetadata.copyOf(e,(function(e){e.fullSyncInterval=t,c&&(e.lastSync=null,e.lastFullSync=null,e.lastSyncPredicate=a)})))];case 4:d=Zl.apply(void 0,[p.sent(),1]),h=Zl(d[0],1),i=h[0],p.label=5;case 5:return[2,i]}}))}))})),s={},v.label=1;case 1:return v.trys.push([1,6,7,8]),[4,Promise.all(o)];case 2:a=Xl.apply(void 0,[v.sent()]),u=a.next(),v.label=3;case 3:if(u.done)return[3,5];c=u.value,l=c.model,s[l]=c,v.label=4;case 4:return u=a.next(),[3,3];case 5:return[3,8];case 6:return f=v.sent(),d={error:f},[3,8];case 7:try{u&&!u.done&&(h=a.return)&&h.call(a)}finally{if(d)throw d.error}return[7];case 8:return[2,s]}}))}))},e.prototype.getModelsMetadata=function(){return Jl(this,void 0,void 0,(function(){var e;return Ql(this,(function(t){switch(t.label){case 0:return e=this.modelClasses.ModelMetadata,[4,this.storage.query(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.getModelMetadata=function(e,t){return Jl(this,void 0,void 0,(function(){var n,r;return Ql(this,(function(i){switch(i.label){case 0:return n=this.modelClasses.ModelMetadata,r=Cs.OY.createFromExisting(this.schema.namespaces[Ns.J3].models[n.name],(function(n){return n.namespace("eq",e).model("eq",t)})),[4,this.storage.query(n,r,{page:0,limit:1})];case 1:return[2,Zl.apply(void 0,[i.sent(),1])[0]]}}))}))},e.prototype.getModelDefinition=function(e){var t=this.namespaceResolver(e);return this.schema.namespaces[t].models[e.name]},e.getNamespace=function(){return{name:Ns.J3,relationships:{},enums:{OperationType:{name:"OperationType",values:["CREATE","UPDATE","DELETE"]}},nonModels:{},models:{MutationEvent:{name:"MutationEvent",pluralName:"MutationEvents",syncable:!1,fields:{id:{name:"id",type:"ID",isRequired:!0,isArray:!1},model:{name:"model",type:"String",isRequired:!0,isArray:!1},data:{name:"data",type:"String",isRequired:!0,isArray:!1},modelId:{name:"modelId",type:"String",isRequired:!0,isArray:!1},operation:{name:"operation",type:{enum:"Operationtype"},isArray:!1,isRequired:!0},condition:{name:"condition",type:"String",isArray:!1,isRequired:!0}}},ModelMetadata:{name:"ModelMetadata",pluralName:"ModelsMetadata",syncable:!1,fields:{id:{name:"id",type:"ID",isRequired:!0,isArray:!1},namespace:{name:"namespace",type:"String",isRequired:!0,isArray:!1},model:{name:"model",type:"String",isRequired:!0,isArray:!1},lastSync:{name:"lastSync",type:"Int",isRequired:!1,isArray:!1},lastFullSync:{name:"lastFullSync",type:"Int",isRequired:!1,isArray:!1},fullSyncInterval:{name:"fullSyncInterval",type:"Int",isRequired:!0,isArray:!1}}}}}},e}(),sf=function(){return(sf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},af=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},uf=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},cf=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},lf=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};_s(!0);var ff,df,hf,pf,vf,gf=new i.k("DataStore"),yf=(0,Ns.c6)(Date.now()),mf=C.browserOrNode().isNode,bf="schemaVersion",wf=new WeakMap,Sf=function(e){var t=wf.get(e);return ff.namespaces[t].models[e.name]},_f=function(e){return(0,Ns.hK)(e)&&wf.has(e)},Ef=function(e){return wf.get(e)},If=function(e){var t;if(void 0!==ff)return console.warn("The schema has already been initialized"),hf;gf.log("validating schema",{schema:e});var n=sf({name:Ns.xR},e);gf.log("DataStore","Init models"),hf=Af(n),gf.log("DataStore","Models initialized");var r={name:Ns.cG,relationships:{},enums:{},nonModels:{},models:{Setting:{name:"Setting",pluralName:"Settings",syncable:!1,fields:{id:{name:"id",type:"ID",isRequired:!0,isArray:!1},key:{name:"key",type:"String",isRequired:!0,isArray:!1},value:{name:"value",type:"String",isRequired:!0,isArray:!1}}}}},i=js.getNamespace(),o=of.getNamespace();return df=Af(r),vf=Af(i),pf=Af(o),ff={namespaces:(t={},t[r.name]=r,t[n.name]=n,t[i.name]=i,t[o.name]=o,t),version:e.version},Object.keys(ff.namespaces).forEach((function(e){var t,n;ff.namespaces[e].relationships=(0,Ns.YF)(ff.namespaces[e]);var r=new Map;Object.values(ff.namespaces[e].models).forEach((function(e){var t=[];Object.values(e.fields).filter((function(t){return t.association&&"BELONGS_TO"===t.association.connectionType&&t.type.model!==e.name})).forEach((function(e){return t.push(e.type.model)})),r.set(e.name,t)}));for(var i=new Map,o=1e3;o>0&&0!==r.size;){if(0==--o)throw new Error("Models are not topologically sortable. Please verify your schema.");try{for(var s=(t=void 0,cf(Array.from(r.keys()))),a=s.next();!a.done;a=s.next()){var u=a.value,c=r.get(u);c.every((function(e){return i.has(e)}))&&i.set(u,c)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}Array.from(i.keys()).forEach((function(e){return r.delete(e)}))}ff.namespaces[e].modelTopologicalOrdering=i})),hf},Af=function(e){var t={};return Object.entries(e.models).forEach((function(n){var r=lf(n,2),i=r[0],o=r[1],s=Pf(o);t[i]=s,wf.set(s,e.name)})),Object.entries(e.nonModels||{}).forEach((function(e){var n=lf(e,2),r=n[0],i=n[1],o=Nf(i);t[r]=o})),t},Cf=new WeakSet;function Tf(e,t){return Cf.add(t),new e(t)}var Of,xf=function(e){return function(t,n){var r=e.fields[t];if(void 0!==r){var i=r.type,o=r.isRequired,s=r.isArrayNullable,a=r.name,u=r.isArray;if((!u&&o||u&&!s)&&null==n)throw new Error("Field "+a+" is required");if((0,Ps.BV)(i)){var c=Ps.n2.getJSType(i),l=Ps.n2.getValidationFunction(i);if(u){var f=c;if(o||(f=c+" | null | undefined"),!Array.isArray(n)&&!s)throw new Error("Field "+a+" should be of type ["+f+"], "+typeof n+" received. "+n);if(!(0,Ns.le)(n)&&n.some((function(e){return(0,Ns.le)(e)?o:typeof e!==c}))){var d=n.map((function(e){return null===e?"null":typeof e})).join(",");throw new Error("All elements in the "+a+" array should be of type "+f+", ["+d+"] received. "+n)}if(l&&!(0,Ns.le)(n)&&!n.map((function(e){return(0,Ns.le)(e)?!(!(0,Ns.le)(e)||o):l(e)})).every((function(e){return e})))throw new Error("All elements in the "+a+" array should be of type "+i+", validation failed for one or more elements. "+n)}else{if(!o&&void 0===n)return;if(typeof n!==c&&null!==n)throw new Error("Field "+a+" should be of type "+c+", "+typeof n+" received. "+n);if(!(0,Ns.le)(n)&&l&&!l(n))throw new Error("Field "+a+" should be of type "+i+", validation failed. "+n)}}}}},kf=function(e,t,n){var r=xf(t);Object.entries(e).forEach((function(e){var t=lf(e,2),i=t[0],o=t[1];r(i,o),n[i]=o}))},Pf=function(e){var t=function(){function n(t){return Ss(this,(function(n){kf(t,e,n);var r=Cf.has(t)?t:{},i=r.id,o=r._version,s=r._lastChangedAt,a=r._deleted,u=null!=i?i:e.syncable?(0,Es.v4)():yf();n.id=u,e.syncable&&(n._version=o,n._lastChangedAt=s,n._deleted=a)}))}return n.copyOf=function(t,n){var r=Object.getPrototypeOf(t||{}).constructor;if(!_f(r)){var i="The source object is not a valid model";throw gf.error(i,{source:t}),new Error(i)}return Ss(t,(function(r){n(r),r.id=t.id;var i=xf(e);Object.entries(r).forEach((function(e){var t=lf(e,2),n=t[0],r=t[1];i(n,r)}))}))},n.fromJSON=function(n){var r=this;if(Array.isArray(n))return n.map((function(e){return r.fromJSON(e)}));var i=Tf(t,n),o=xf(e);return Object.entries(i).forEach((function(e){var t=lf(e,2),n=t[0],r=t[1];o(n,r)})),i},n}();return t[ps]=!0,Object.defineProperty(t,"name",{value:e.name}),t},Nf=function(e){var t=function(t){return Ss(this,(function(n){kf(t,e,n)}))};return t[ps]=!0,Object.defineProperty(t,"name",{value:e.name}),t};function Lf(e){return"string"==typeof e}function Mf(e){var t=e.localModel,n=e.modelConstructor,r=e.remoteModel._version;return Tf(n,sf(sf({},t),{_version:r}))}function Rf(e){gf.warn(e)}function Df(e,t){var n;switch(e){case Ns.cG:n=df[t];break;case Ns.xR:n=hf[t];break;case Ns.J3:n=pf[t];break;case Ns.P_:n=vf[t];break;default:(0,Ns.y0)(e)}if(_f(n))return n;var r="Model name is not valid for namespace. modelName: "+t+", namespace: "+e;throw gf.error(r),new Error(r)}function Uf(e,t){return af(this,void 0,void 0,(function(){var n,r,i=this;return uf(this,(function(o){switch(o.label){case 0:return n=df.Setting,r=ff.namespaces[Ns.cG].models.Setting,[4,e.runExclusive((function(e){return af(i,void 0,void 0,(function(){var i,o;return uf(this,(function(s){switch(s.label){case 0:return[4,e.query(n,Cs.OY.createFromExisting(r,(function(e){return e.key("eq",bf)})),{page:0,limit:1})];case 1:return i=lf.apply(void 0,[s.sent(),1]),void 0===(o=i[0])?[3,4]:JSON.parse(o.value)===t?[3,3]:[4,e.clear(!1)];case 2:s.sent(),s.label=3;case 3:return[3,6];case 4:return[4,e.save(Tf(n,{key:bf,value:JSON.stringify(t)}))];case 5:s.sent(),s.label=6;case 6:return[2]}}))}))}))];case 1:return o.sent(),[2]}}))}))}var jf=new(function(){function e(){var e=this;this.amplifyConfig={},this.syncPredicates=new WeakMap,this.start=function(){return af(e,void 0,void 0,(function(){var e,t,n,r=this;return uf(this,(function(i){switch(i.label){case 0:return void 0!==this.initialized?[3,1]:(gf.debug("Starting DataStore"),this.initialized=new Promise((function(e,t){r.initResolve=e,r.initReject=t})),[3,3]);case 1:return[4,this.initialized];case 2:return i.sent(),[2];case 3:return this.storage=new js(ff,Ef,Df,Tf,void 0,this.sessionId),[4,this.storage.init()];case 4:return i.sent(),[4,Uf(this.storage,ff.version)];case 5:return i.sent(),(e=this.amplifyConfig.aws_appsync_graphqlEndpoint)?(gf.debug("GraphQL endpoint available",e),t=this,[4,this.processSyncExpressions()]):[3,7];case 6:return t.syncPredicates=i.sent(),this.sync=new of(ff,Ef,pf,hf,this.storage,Tf,this.maxRecordsToSync,this.syncPageSize,this.conflictHandler,this.errorHandler,this.syncPredicates,this.amplifyConfig),n=1e3*this.fullSyncInterval*60,Of=this.sync.start({fullSyncInterval:n}).subscribe({next:function(e){var t=e.type,n=e.data;t===(mf?Kl.SYNC_ENGINE_SYNC_QUERIES_READY:Kl.SYNC_ENGINE_STORAGE_SUBSCRIBED)&&r.initResolve(),Yr.dispatch("datastore",{event:t,data:n})},error:function(e){gf.warn("Sync error",e),r.initReject()}}),[3,8];case 7:gf.warn("Data won't be synchronized. No GraphQL endpoint configured. Did you forget `Amplify.configure(awsconfig)`?",{config:this.amplifyConfig}),this.initResolve(),i.label=8;case 8:return[4,this.initialized];case 9:return i.sent(),[2]}}))}))},this.query=function(t,n,r){return af(e,void 0,void 0,(function(){var e,i,o,s,a;return uf(this,(function(u){switch(u.label){case 0:return[4,this.start()];case 1:if(u.sent(),!_f(t))throw e="Constructor is not for a valid model",gf.error(e,{modelConstructor:t}),new Error(e);return"string"==typeof n&&void 0!==r&&gf.warn("Pagination is ignored when querying by id"),i=Sf(t),o=Lf(n)?Cs.OY.createForId(i,n):(0,Cs.i)(n)?void 0:Cs.OY.createFromExisting(i,n),s=this.processPagination(i,r),gf.debug("params ready",{modelConstructor:t,predicate:Cs.OY.getPredicates(o,!1),pagination:sf(sf({},s),{sort:Ts.c.getPredicates(s.sort,!1)})}),[4,this.storage.query(t,o,s)];case 2:return a=u.sent(),[2,Lf(n)?a[0]:a]}}))}))},this.save=function(t,n){return af(e,void 0,void 0,(function(){var e,r,i,o,s=this;return uf(this,(function(a){switch(a.label){case 0:return[4,this.start()];case 1:if(a.sent(),e=t?t.constructor:void 0,!_f(e))throw r="Object is not an instance of a valid model",gf.error(r,{model:t}),new Error(r);return i=Sf(e),o=Cs.OY.createFromExisting(i,n),[4,this.storage.runExclusive((function(n){return af(s,void 0,void 0,(function(){return uf(this,(function(r){switch(r.label){case 0:return[4,n.save(t,o)];case 1:return r.sent(),[2,n.query(e,Cs.OY.createForId(i,t.id))]}}))}))}))];case 2:return[2,lf.apply(void 0,[a.sent(),1])[0]]}}))}))},this.setConflictHandler=function(t){var n=t.DataStore;return n?n.conflictHandler:e.conflictHandler===Mf&&t.conflictHandler?t.conflictHandler:e.conflictHandler||Mf},this.setErrorHandler=function(t){var n=t.DataStore;return n?n.errorHandler:e.errorHandler===Rf&&t.errorHandler?t.errorHandler:e.errorHandler||Rf},this.delete=function(t,n){return af(e,void 0,void 0,(function(){var e,r,i,o,s,a,u;return uf(this,(function(c){switch(c.label){case 0:return[4,this.start()];case 1:if(c.sent(),!t)throw a="Model or Model Constructor required",gf.error(a,{modelOrConstructor:t}),new Error(a);if(!_f(t))return[3,3];if(i=t,!n)throw a="Id to delete or criteria required. Do you want to delete all? Pass Predicates.ALL",gf.error(a,{idOrCriteria:n}),new Error(a);if("string"==typeof n)e=Cs.OY.createForId(Sf(i),n);else if(!(e=Cs.OY.createFromExisting(Sf(i),n))||!Cs.OY.isValidPredicate(e))throw a="Criteria required. Do you want to delete all? Pass Predicates.ALL",gf.error(a,{condition:e}),new Error(a);return[4,this.storage.delete(i,e)];case 2:return[2,lf.apply(void 0,[c.sent(),1])[0]];case 3:if(r=t,i=Object.getPrototypeOf(r||{}).constructor,!_f(i))throw a="Object is not an instance of a valid model",gf.error(a,{model:r}),new Error(a);if(o=Sf(i),s=Cs.OY.createForId(o,r.id),n){if("function"!=typeof n)throw a="Invalid criteria",gf.error(a,{idOrCriteria:n}),new Error(a);e=n(s)}else e=s;return[4,this.storage.delete(r,e)];case 4:return u=lf.apply(void 0,[c.sent(),1]),[2,lf(u[0],1)[0]]}}))}))},this.observe=function(t,n){var r,i=t&&_f(t)?t:void 0;if(t&&void 0===i){var o=t,s=o&&Object.getPrototypeOf(o).constructor;if(_f(s))return n&&gf.warn("idOrCriteria is ignored when using a model instance",{model:o,idOrCriteria:n}),e.observe(s,o.id);var a="The model is not an instance of a PersistentModelConstructor";throw gf.error(a,{model:o}),new Error(a)}if(void 0!==n&&void 0===i)throw a="Cannot provide criteria without a modelConstructor",gf.error(a,n),new Error(a);if(i&&!_f(i))throw a="Constructor is not for a valid model",gf.error(a,{modelConstructor:i}),new Error(a);return r="string"==typeof n?Cs.OY.createForId(Sf(i),n):i&&Cs.OY.createFromExisting(Sf(i),n),new As((function(t){var n;return af(e,void 0,void 0,(function(){return uf(this,(function(e){switch(e.label){case 0:return[4,this.start()];case 1:return e.sent(),n=this.storage.observe(i,r).filter((function(e){var t=e.model;return Ef(t)===Ns.xR})).subscribe(t),[2]}}))})),function(){n&&n.unsubscribe()}}))},this.configure=function(t){void 0===t&&(t={});var n=t.DataStore,r=(t.conflictHandler,t.errorHandler,t.maxRecordsToSync),i=t.syncPageSize,o=t.fullSyncInterval,s=t.syncExpressions,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["DataStore","conflictHandler","errorHandler","maxRecordsToSync","syncPageSize","fullSyncInterval","syncExpressions"]);e.amplifyConfig=sf(sf({},a),e.amplifyConfig),e.conflictHandler=e.setConflictHandler(t),e.errorHandler=e.setErrorHandler(t),e.syncExpressions=n&&n.syncExpressions||e.syncExpressions||s,e.maxRecordsToSync=n&&n.maxRecordsToSync||e.maxRecordsToSync||r,e.syncPageSize=n&&n.syncPageSize||e.syncPageSize||i,e.fullSyncInterval=n&&n.fullSyncInterval||e.fullSyncInterval||o||1440,e.sessionId=e.retrieveSessionId()},this.clear=function(){return af(this,void 0,void 0,(function(){return uf(this,(function(e){switch(e.label){case 0:return void 0===this.storage?[2]:(Of&&!Of.closed&&Of.unsubscribe(),[4,this.storage.clear()]);case 1:return e.sent(),this.sync&&this.sync.unsubscribeConnectivity(),this.initialized=void 0,this.storage=void 0,this.sync=void 0,this.syncPredicates=new WeakMap,[2]}}))}))},this.stop=function(){return af(this,void 0,void 0,(function(){return uf(this,(function(e){switch(e.label){case 0:return void 0===this.initialized?[3,2]:[4,this.start()];case 1:e.sent(),e.label=2;case 2:return Of&&!Of.closed&&Of.unsubscribe(),this.sync&&this.sync.unsubscribeConnectivity(),this.initialized=void 0,this.sync=void 0,[2]}}))}))}}return e.prototype.getModuleName=function(){return"DataStore"},e.prototype.processPagination=function(e,t){var n,r=t||{},i=r.limit,o=r.page,s=r.sort;if(void 0!==o&&void 0===i)throw new Error("Limit is required when requesting a page");if(void 0!==o){if("number"!=typeof o)throw new Error("Page should be a number");if(o<0)throw new Error("Page can't be negative")}if(void 0!==i){if("number"!=typeof i)throw new Error("Limit should be a number");if(i<0)throw new Error("Limit can't be negative")}return s&&(n=Ts.c.createFromExisting(e,t.sort)),{limit:i,page:o,sort:n}},e.prototype.processSyncExpressions=function(){return af(this,void 0,void 0,(function(){var e,t=this;return uf(this,(function(n){switch(n.label){case 0:return this.syncExpressions&&this.syncExpressions.length?[4,Promise.all(this.syncExpressions.map((function(e){return af(t,void 0,void 0,(function(){var t,n,r,i,o,s;return uf(this,(function(a){switch(a.label){case 0:return[4,e];case 1:return t=a.sent(),n=t.modelConstructor,r=t.conditionProducer,i=Sf(n),[4,this.unwrapPromise(r)];case 2:return o=a.sent(),(0,Cs.i)(o)?[2,[i,null]]:(s=this.createFromCondition(i,o),[2,[i,s]])}}))}))})))]:[2,new WeakMap];case 1:return e=n.sent(),[2,this.weakMapFromEntries(e)]}}))}))},e.prototype.createFromCondition=function(e,t){try{return Cs.OY.createFromExisting(e,t)}catch(e){throw gf.error("Error creating Sync Predicate"),e}},e.prototype.unwrapPromise=function(e){return af(this,void 0,void 0,(function(){var t;return uf(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e()];case 1:return[2,n.sent()];case 2:if((t=n.sent())instanceof TypeError)return[2,e];throw t;case 3:return[2]}}))}))},e.prototype.weakMapFromEntries=function(e){return e.reduce((function(e,t){var n=lf(t,2),r=n[0],i=n[1];if(e.has(r)){var o=r.name;return gf.warn("You can only utilize one Sync Expression per model.\n          Subsequent sync expressions for the "+o+" model will be ignored."),e}return i&&e.set(r,i),e}),new WeakMap)},e.prototype.retrieveSessionId=function(){try{var e=sessionStorage.getItem("datastoreSessionId");if(e){var t=this.amplifyConfig.aws_appsync_graphqlEndpoint.split("/")[2];return e+"-"+lf(t.split("."),1)[0]}}catch(e){return}},e}());s.register(jf);var Ff=new i.k("ClientDevice_Browser");var Bf=function(){function e(){}return e.clientInfo=function(){return"undefined"==typeof window?{}:function(){if("undefined"==typeof window)return Ff.warn("No window object available to get browser client info"),{};var e=window.navigator;if(!e)return Ff.warn("No navigator object available to get browser client info"),{};var t,n=e.platform,r=e.product,i=e.vendor,o=e.userAgent,s=e.language,a=function(e){var t=/.+(Opera[\s[A-Z]*|OPR[\sA-Z]*)\/([0-9\.]+).*/i.exec(e);if(t)return{type:t[1],version:t[2]};var n=/.+(Trident|Edge)\/([0-9\.]+).*/i.exec(e);if(n)return{type:n[1],version:n[2]};var r=/.+(Chrome|Firefox|FxiOS)\/([0-9\.]+).*/i.exec(e);if(r)return{type:r[1],version:r[2]};var i=/.+(Safari)\/([0-9\.]+).*/i.exec(e);if(i)return{type:i[1],version:i[2]};var o=/.+(AppleWebKit)\/([0-9\.]+).*/i.exec(e);if(o)return{type:o[1],version:o[2]};var s=/.*([A-Z]+)\/([0-9\.]+).*/i.exec(e);return s?{type:s[1],version:s[2]}:{type:"",version:""}}(o),u=(t=/\(([A-Za-z\s].*)\)/.exec((new Date).toString()))&&t[1]||"";return{platform:n,make:r||i,model:a.type,version:a.version,appVersion:[a.type,a.version].join("/"),language:s,timezone:u}}()},e.dimension=function(){return"undefined"==typeof window?(Ff.warn("No window object available to get browser client info"),{width:320,height:320}):{width:window.innerWidth,height:window.innerHeight}},e}(),zf=function(e,t){return(zf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function qf(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}zf(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Kf,Vf,Hf,Gf,Wf,Yf,$f,Jf,Qf,Zf,Xf,ed,td,nd,rd,id,od,sd,ad,ud,cd,ld,fd,dd,hd,pd,vd,gd,yd,md,bd,wd,Sd,_d,Ed,Id,Ad,Cd,Td,Od,xd,kd,Pd,Nd,Ld,Md,Rd,Dd,Ud,jd,Fd,Bd,zd,qd,Kd,Vd,Hd,Gd,Wd,Yd,$d,Jd,Qd,Zd,Xd,eh,th,nh,rh,ih,oh,sh,ah,uh,ch,lh,fh,dh,hh,ph,vh,gh,yh,mh,bh,wh,Sh,_h,Eh,Ih,Ah,Ch,Th,Oh,xh,kh,Ph,Nh,Lh,Mh,Rh,Dh,Uh,jh,Fh,Bh,zh,qh,Kh,Vh,Hh,Gh,Wh,Yh,$h,Jh,Qh,Zh,Xh,ep,tp,np,rp,ip,op,sp,ap,up,cp,lp,fp,dp=function(){return(dp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function hp(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function pp(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function vp(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}Object.create,Object.create,function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Kf||(Kf={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Vf||(Vf={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Hf||(Hf={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Gf||(Gf={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Wf||(Wf={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Yf||(Yf={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}($f||($f={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Jf||(Jf={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Qf||(Qf={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Zf||(Zf={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Xf||(Xf={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(ed||(ed={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(td||(td={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(nd||(nd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(rd||(rd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(id||(id={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(od||(od={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(sd||(sd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(ad||(ad={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(ud||(ud={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(cd||(cd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(ld||(ld={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(fd||(fd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(dd||(dd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(hd||(hd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(pd||(pd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(vd||(vd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(gd||(gd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(yd||(yd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(md||(md={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(bd||(bd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(wd||(wd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Sd||(Sd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(_d||(_d={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Ed||(Ed={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Id||(Id={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Ad||(Ad={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Cd||(Cd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Td||(Td={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Od||(Od={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(xd||(xd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(kd||(kd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Pd||(Pd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Nd||(Nd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Ld||(Ld={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Md||(Md={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Rd||(Rd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Dd||(Dd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Ud||(Ud={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(jd||(jd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Fd||(Fd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Bd||(Bd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(zd||(zd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(qd||(qd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Kd||(Kd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Vd||(Vd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Hd||(Hd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Gd||(Gd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Wd||(Wd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Yd||(Yd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}($d||($d={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Jd||(Jd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Qd||(Qd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Zd||(Zd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Xd||(Xd={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(eh||(eh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(th||(th={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(nh||(nh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(rh||(rh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(ih||(ih={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(oh||(oh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(sh||(sh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(ah||(ah={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(uh||(uh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(ch||(ch={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(lh||(lh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(fh||(fh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(dh||(dh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(hh||(hh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(ph||(ph={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(vh||(vh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(gh||(gh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(yh||(yh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(mh||(mh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(bh||(bh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(wh||(wh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Sh||(Sh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(_h||(_h={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Eh||(Eh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Ih||(Ih={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Ah||(Ah={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Ch||(Ch={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Th||(Th={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Oh||(Oh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(xh||(xh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(kh||(kh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Ph||(Ph={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Nh||(Nh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Lh||(Lh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Mh||(Mh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Rh||(Rh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Dh||(Dh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Uh||(Uh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(jh||(jh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Fh||(Fh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Bh||(Bh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(zh||(zh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(qh||(qh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Kh||(Kh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Vh||(Vh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Hh||(Hh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Gh||(Gh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Wh||(Wh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Yh||(Yh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}($h||($h={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Jh||(Jh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Qh||(Qh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Zh||(Zh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(Xh||(Xh={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(ep||(ep={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(tp||(tp={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(np||(np={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(rp||(rp={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(ip||(ip={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(op||(op={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(sp||(sp={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(ap||(ap={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(up||(up={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(cp||(cp={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(lp||(lp={})),function(e){e.filterSensitiveLog=function(e){return dp({},e)}}(fp||(fp={}));var gp=function(e,t){return hp(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d,h,p,v;return pp(this,(function(g){switch(g.label){case 0:return r=[dp({},e)],v={},[4,Fp(e.body,t)];case 1:switch(n=dp.apply(void 0,r.concat([(v.body=g.sent(),v)])),o="UnknownError",o=Bp(e,n.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return s=[{}],[4,mp(n,t)];case 3:return i=dp.apply(void 0,[dp.apply(void 0,s.concat([g.sent()])),{name:o,$metadata:jp(e)}]),[3,17];case 4:return a=[{}],[4,bp(n,t)];case 5:return i=dp.apply(void 0,[dp.apply(void 0,a.concat([g.sent()])),{name:o,$metadata:jp(e)}]),[3,17];case 6:return u=[{}],[4,wp(n,t)];case 7:return i=dp.apply(void 0,[dp.apply(void 0,u.concat([g.sent()])),{name:o,$metadata:jp(e)}]),[3,17];case 8:return c=[{}],[4,Sp(n,t)];case 9:return i=dp.apply(void 0,[dp.apply(void 0,c.concat([g.sent()])),{name:o,$metadata:jp(e)}]),[3,17];case 10:return l=[{}],[4,_p(n,t)];case 11:return i=dp.apply(void 0,[dp.apply(void 0,l.concat([g.sent()])),{name:o,$metadata:jp(e)}]),[3,17];case 12:return f=[{}],[4,Ep(n,t)];case 13:return i=dp.apply(void 0,[dp.apply(void 0,f.concat([g.sent()])),{name:o,$metadata:jp(e)}]),[3,17];case 14:return d=[{}],[4,Ip(n,t)];case 15:return i=dp.apply(void 0,[dp.apply(void 0,d.concat([g.sent()])),{name:o,$metadata:jp(e)}]),[3,17];case 16:h=n.body,o=h.code||h.Code||o,i=dp(dp({},h),{name:""+o,message:h.message||h.Message||o,$fault:"client",$metadata:jp(e)}),g.label=17;case 17:return p=i.message||i.Message||o,i.message=p,delete i.Message,[2,Promise.reject(Object.assign(new Error(p),i))]}}))}))},yp=function(e,t){return hp(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d,h,p,v;return pp(this,(function(g){switch(g.label){case 0:return r=[dp({},e)],v={},[4,Fp(e.body,t)];case 1:switch(n=dp.apply(void 0,r.concat([(v.body=g.sent(),v)])),o="UnknownError",o=Bp(e,n.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return s=[{}],[4,mp(n,t)];case 3:return i=dp.apply(void 0,[dp.apply(void 0,s.concat([g.sent()])),{name:o,$metadata:jp(e)}]),[3,17];case 4:return a=[{}],[4,bp(n,t)];case 5:return i=dp.apply(void 0,[dp.apply(void 0,a.concat([g.sent()])),{name:o,$metadata:jp(e)}]),[3,17];case 6:return u=[{}],[4,wp(n,t)];case 7:return i=dp.apply(void 0,[dp.apply(void 0,u.concat([g.sent()])),{name:o,$metadata:jp(e)}]),[3,17];case 8:return c=[{}],[4,Sp(n,t)];case 9:return i=dp.apply(void 0,[dp.apply(void 0,c.concat([g.sent()])),{name:o,$metadata:jp(e)}]),[3,17];case 10:return l=[{}],[4,_p(n,t)];case 11:return i=dp.apply(void 0,[dp.apply(void 0,l.concat([g.sent()])),{name:o,$metadata:jp(e)}]),[3,17];case 12:return f=[{}],[4,Ep(n,t)];case 13:return i=dp.apply(void 0,[dp.apply(void 0,f.concat([g.sent()])),{name:o,$metadata:jp(e)}]),[3,17];case 14:return d=[{}],[4,Ip(n,t)];case 15:return i=dp.apply(void 0,[dp.apply(void 0,d.concat([g.sent()])),{name:o,$metadata:jp(e)}]),[3,17];case 16:h=n.body,o=h.code||h.Code||o,i=dp(dp({},h),{name:""+o,message:h.message||h.Message||o,$fault:"client",$metadata:jp(e)}),g.label=17;case 17:return p=i.message||i.Message||o,i.message=p,delete i.Message,[2,Promise.reject(Object.assign(new Error(p),i))]}}))}))},mp=function(e,t){return hp(void 0,void 0,void 0,(function(){var t,n;return pp(this,(function(r){return t={name:"BadRequestException",$fault:"client",$metadata:jp(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},bp=function(e,t){return hp(void 0,void 0,void 0,(function(){var t,n;return pp(this,(function(r){return t={name:"ForbiddenException",$fault:"client",$metadata:jp(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},wp=function(e,t){return hp(void 0,void 0,void 0,(function(){var t,n;return pp(this,(function(r){return t={name:"InternalServerErrorException",$fault:"server",$metadata:jp(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},Sp=function(e,t){return hp(void 0,void 0,void 0,(function(){var t,n;return pp(this,(function(r){return t={name:"MethodNotAllowedException",$fault:"client",$metadata:jp(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},_p=function(e,t){return hp(void 0,void 0,void 0,(function(){var t,n;return pp(this,(function(r){return t={name:"NotFoundException",$fault:"client",$metadata:jp(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},Ep=function(e,t){return hp(void 0,void 0,void 0,(function(){var t,n;return pp(this,(function(r){return t={name:"PayloadTooLargeException",$fault:"client",$metadata:jp(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},Ip=function(e,t){return hp(void 0,void 0,void 0,(function(){var t,n;return pp(this,(function(r){return t={name:"TooManyRequestsException",$fault:"client",$metadata:jp(e),Message:void 0,RequestID:void 0},void 0!==(n=e.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]}))}))},Ap=function(e,t){return dp(dp(dp(dp(dp(dp(dp(dp({},void 0!==e.AppVersion&&{AppVersion:e.AppVersion}),void 0!==e.Locale&&{Locale:e.Locale}),void 0!==e.Make&&{Make:e.Make}),void 0!==e.Model&&{Model:e.Model}),void 0!==e.ModelVersion&&{ModelVersion:e.ModelVersion}),void 0!==e.Platform&&{Platform:e.Platform}),void 0!==e.PlatformVersion&&{PlatformVersion:e.PlatformVersion}),void 0!==e.Timezone&&{Timezone:e.Timezone})},Cp=function(e,t){return dp(dp(dp(dp(dp(dp({},void 0!==e.City&&{City:e.City}),void 0!==e.Country&&{Country:e.Country}),void 0!==e.Latitude&&{Latitude:e.Latitude}),void 0!==e.Longitude&&{Longitude:e.Longitude}),void 0!==e.PostalCode&&{PostalCode:e.PostalCode}),void 0!==e.Region&&{Region:e.Region})},Tp=function(e,t){return dp(dp({},void 0!==e.UserAttributes&&{UserAttributes:Np(e.UserAttributes,t)}),void 0!==e.UserId&&{UserId:e.UserId})},Op=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=vp(t,2),i=r[0],o=r[1];return dp(dp({},e),((n={})[i]=o,n))}),{})},xp=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=vp(t,2),i=r[0],o=r[1];return dp(dp({},e),((n={})[i]=o,n))}),{})},kp=function(e,t){return Object.entries(e).reduce((function(e,n){var r,i=vp(n,2),o=i[0],s=i[1];return dp(dp({},e),((r={})[o]=function(e,t){return dp(dp(dp(dp(dp(dp(dp(dp(dp(dp({},void 0!==e.AppPackageName&&{AppPackageName:e.AppPackageName}),void 0!==e.AppTitle&&{AppTitle:e.AppTitle}),void 0!==e.AppVersionCode&&{AppVersionCode:e.AppVersionCode}),void 0!==e.Attributes&&{Attributes:xp(e.Attributes)}),void 0!==e.ClientSdkVersion&&{ClientSdkVersion:e.ClientSdkVersion}),void 0!==e.EventType&&{EventType:e.EventType}),void 0!==e.Metrics&&{Metrics:Op(e.Metrics,t)}),void 0!==e.SdkName&&{SdkName:e.SdkName}),void 0!==e.Session&&{Session:Mp(e.Session,t)}),void 0!==e.Timestamp&&{Timestamp:e.Timestamp})}(s,t),r))}),{})},Pp=function(e,t){return Object.entries(e).reduce((function(e,n){var r,i=vp(n,2),o=i[0],s=i[1];return dp(dp({},e),((r={})[o]=function(e,t){return dp(dp({},void 0!==e.Endpoint&&{Endpoint:Lp(e.Endpoint,t)}),void 0!==e.Events&&{Events:kp(e.Events,t)})}(s,t),r))}),{})},Np=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=vp(t,2),i=r[0],o=r[1];return dp(dp({},e),((n={})[i]=function(e,t){return e.map((function(e){return e}))}(o),n))}),{})},Lp=function(e,t){return dp(dp(dp(dp(dp(dp(dp(dp(dp(dp(dp({},void 0!==e.Address&&{Address:e.Address}),void 0!==e.Attributes&&{Attributes:Np(e.Attributes,t)}),void 0!==e.ChannelType&&{ChannelType:e.ChannelType}),void 0!==e.Demographic&&{Demographic:Ap(e.Demographic)}),void 0!==e.EffectiveDate&&{EffectiveDate:e.EffectiveDate}),void 0!==e.EndpointStatus&&{EndpointStatus:e.EndpointStatus}),void 0!==e.Location&&{Location:Cp(e.Location)}),void 0!==e.Metrics&&{Metrics:Op(e.Metrics,t)}),void 0!==e.OptOut&&{OptOut:e.OptOut}),void 0!==e.RequestId&&{RequestId:e.RequestId}),void 0!==e.User&&{User:Tp(e.User,t)})},Mp=function(e,t){return dp(dp(dp(dp({},void 0!==e.Duration&&{Duration:e.Duration}),void 0!==e.Id&&{Id:e.Id}),void 0!==e.StartTimestamp&&{StartTimestamp:e.StartTimestamp}),void 0!==e.StopTimestamp&&{StopTimestamp:e.StopTimestamp})},Rp=function(e,t){return{Message:void 0!==e.Message&&null!==e.Message?e.Message:void 0,StatusCode:void 0!==e.StatusCode&&null!==e.StatusCode?e.StatusCode:void 0}},Dp=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=vp(t,2),i=r[0],o=r[1];return dp(dp({},e),((n={})[i]=function(e,t){return{Message:void 0!==e.Message&&null!==e.Message?e.Message:void 0,StatusCode:void 0!==e.StatusCode&&null!==e.StatusCode?e.StatusCode:void 0}}(o),n))}),{})},Up=function(e,t){return Object.entries(e).reduce((function(e,t){var n,r=vp(t,2),i=r[0],o=r[1];return dp(dp({},e),((n={})[i]=function(e,t){return{EndpointItemResponse:void 0!==e.EndpointItemResponse&&null!==e.EndpointItemResponse?Rp(e.EndpointItemResponse):void 0,EventsItemResponse:void 0!==e.EventsItemResponse&&null!==e.EventsItemResponse?Dp(e.EventsItemResponse):void 0}}(o),n))}),{})},jp=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},Fp=function(e,t){return function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},Bp=function(e,t){var n,r=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},i=(n=e.headers,"x-amzn-errortype",Object.keys(n).find((function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()})));return void 0!==i?r(e.headers[i]):void 0!==t.code?r(t.code):void 0!==t.__type?r(t.__type):""},zp=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return qf(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ct(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.logger,o="PinpointClient",s="PutEventsCommand",a={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:Xd.filterSensitiveLog,outputFilterSensitiveLog:eh.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var u=t.requestHandler;return r.resolve((function(e){return u.handle(e.request,n||{})}),a)},t.prototype.serialize=function(e,t){return function(e,t){return hp(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return pp(this,(function(f){switch(f.label){case 0:if(n={"Content-Type":"application/json"},r="/v1/apps/{ApplicationId}/events",void 0===e.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((i=e.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");return r=r.replace("{ApplicationId}",Nt(i)),void 0!==e.EventsRequest&&(o=function(e,t){return dp({},void 0!==e.BatchItem&&{BatchItem:Pp(e.BatchItem,t)})}(e.EventsRequest,t)),void 0===o&&(o={}),o=JSON.stringify(o),[4,t.endpoint()];case 1:return s=f.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,l=s.port,[2,new Ze({protocol:c,hostname:a,port:l,method:"POST",headers:n,path:r,body:o})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return hp(void 0,void 0,void 0,(function(){var n,r;return pp(this,(function(i){switch(i.label){case 0:return 202!==e.statusCode&&e.statusCode>=300?[2,gp(e,t)]:(n={$metadata:jp(e),EventsResponse:void 0},[4,Fp(e.body,t)]);case 1:return r=i.sent(),n.EventsResponse=function(e,t){return{Results:void 0!==e.Results&&null!==e.Results?Up(e.Results,t):void 0}}(r,t),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Pt),qp=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return qf(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ct(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.logger,o="PinpointClient",s="UpdateEndpointCommand",a={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:Dh.filterSensitiveLog,outputFilterSensitiveLog:Uh.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var u=t.requestHandler;return r.resolve((function(e){return u.handle(e.request,n||{})}),a)},t.prototype.serialize=function(e,t){return function(e,t){return hp(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return pp(this,(function(f){switch(f.label){case 0:if(n={"Content-Type":"application/json"},r="/v1/apps/{ApplicationId}/endpoints/{EndpointId}",void 0===e.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((i=e.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(r=r.replace("{ApplicationId}",Nt(i)),void 0===e.EndpointId)throw new Error("No value provided for input HTTP label: EndpointId.");if((i=e.EndpointId).length<=0)throw new Error("Empty value provided for input HTTP label: EndpointId.");return r=r.replace("{EndpointId}",Nt(i)),void 0!==e.EndpointRequest&&(o=function(e,t){return dp(dp(dp(dp(dp(dp(dp(dp(dp(dp(dp({},void 0!==e.Address&&{Address:e.Address}),void 0!==e.Attributes&&{Attributes:Np(e.Attributes,t)}),void 0!==e.ChannelType&&{ChannelType:e.ChannelType}),void 0!==e.Demographic&&{Demographic:Ap(e.Demographic)}),void 0!==e.EffectiveDate&&{EffectiveDate:e.EffectiveDate}),void 0!==e.EndpointStatus&&{EndpointStatus:e.EndpointStatus}),void 0!==e.Location&&{Location:Cp(e.Location)}),void 0!==e.Metrics&&{Metrics:Op(e.Metrics,t)}),void 0!==e.OptOut&&{OptOut:e.OptOut}),void 0!==e.RequestId&&{RequestId:e.RequestId}),void 0!==e.User&&{User:Tp(e.User,t)})}(e.EndpointRequest,t)),void 0===o&&(o={}),o=JSON.stringify(o),[4,t.endpoint()];case 1:return s=f.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,l=s.port,[2,new Ze({protocol:c,hostname:a,port:l,method:"PUT",headers:n,path:r,body:o})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return hp(void 0,void 0,void 0,(function(){var n,r;return pp(this,(function(i){switch(i.label){case 0:return 202!==e.statusCode&&e.statusCode>=300?[2,yp(e,t)]:(n={$metadata:jp(e),MessageBody:void 0},[4,Fp(e.body,t)]);case 1:return r=i.sent(),n.MessageBody=function(e,t){return{Message:void 0!==e.Message&&null!==e.Message?e.Message:void 0,RequestID:void 0!==e.RequestID&&null!==e.RequestID?e.RequestID:void 0}}(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Pt);const Kp=JSON.parse('{"u2":"@aws-sdk/client-pinpoint","i8":"1.0.0-rc.4"}');var Vp="pinpoint.{region}.amazonaws.com",Hp=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Gp=new Set(["cn-north-1","cn-northwest-1"]),Wp=new Set(["us-iso-east-1"]),Yp=new Set(["us-isob-east-1"]),$p=new Set(["us-gov-east-1","us-gov-west-1"]),Jp=dp(dp({},{apiVersion:"2016-12-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-south-1":n={hostname:"pinpoint.ap-south-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-southeast-2":n={hostname:"pinpoint.ap-southeast-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-central-1":n={hostname:"pinpoint.eu-central-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-west-1":n={hostname:"pinpoint.eu-west-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"us-east-1":n={hostname:"pinpoint.us-east-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"us-west-2":n={hostname:"pinpoint.us-west-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;default:Hp.has(e)&&(n={hostname:Vp.replace("{region}",e),partition:"aws",signingService:"mobiletargeting"}),Gp.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Wp.has(e)&&(n={hostname:"pinpoint.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Yp.has(e)&&(n={hostname:"pinpoint.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),$p.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:Vp.replace("{region}",e),partition:"aws",signingService:"mobiletargeting"})}return Promise.resolve(n)},signingName:"mobiletargeting"}),{runtime:"browser",base64Decoder:cn,base64Encoder:ln,bodyLengthChecker:xn,credentialDefaultProvider:hn("Credential is missing"),defaultUserAgent:kn(Kp.u2,Kp.i8),maxAttempts:3,region:hn("Region is missing"),requestHandler:new en,sha256:Jt.Sha256,streamCollector:fn,urlParser:On,utf8Decoder:Pn,utf8Encoder:Nn}),Qp=function(e){function t(t){var n=this,r=dp(dp({},Jp),t),i=Kn(r),o=Or(Bn(i)),s=An(o);return(n=e.call(this,s)||this).config=s,n.middlewareStack.use(Nr(n.config)),n.middlewareStack.use(vn(n.config)),n.middlewareStack.use(Mr(n.config)),n.middlewareStack.use(Gn(n.config)),n.middlewareStack.use(Yn(n.config)),n.middlewareStack.use(Jn(n.config)),n}return qf(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(kt),Zp=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Xp=new i.k("EventsBuffer"),ev=[429,500],tv=[202];const nv=function(){function e(e,t){this._pause=!1,this._flush=!1,Xp.debug("Instantiating buffer with config:",t),this._buffer=[],this._client=e,this._config=t,this._sendBatch=this._sendBatch.bind(this),this._startLoop()}return e.prototype.push=function(e){var t;if(this._buffer>this._config.bufferSize)return Xp.debug("Exceeded analytics events buffer size"),e.handlers.reject(new Error("Exceeded the size of analytics events buffer"));var n=((t={})[e.params.event.eventId]=e,t);this._buffer.push(n)},e.prototype.pause=function(){this._pause=!0},e.prototype.resume=function(){this._pause=!1},e.prototype.updateClient=function(e){this._client=e},e.prototype.flush=function(){this._flush=!0},e.prototype._startLoop=function(){this._interval&&clearInterval(this._interval);var e=this._config.flushInterval;this._interval=setInterval(this._sendBatch,e)},e.prototype._sendBatch=function(){var e=this._buffer.length;if(this._flush&&!e&&clearInterval(this._interval),!this._pause&&e){var t=this._config.flushSize,n=Math.min(t,e),r=this._buffer.splice(0,n);this._putEvents(r)}},e.prototype._putEvents=function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var t,n,r,i,o;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(s){switch(s.label){case 0:t=this._bufferToMap(e),n=this._generateBatchEventParams(t),s.label=1;case 1:return s.trys.push([1,3,,4]),r=new zp(n),[4,this._client.send(r)];case 2:return i=s.sent(),this._processPutEventsSuccessResponse(i,t),[3,4];case 3:return o=s.sent(),[2,this._handlePutEventsFailure(o,t)];case 4:return[2]}}))}))},e.prototype._generateBatchEventParams=function(e){var t={ApplicationId:"",EventsRequest:{BatchItem:{}}};return Object.values(e).forEach((function(e){var n=e.params,r=n.event,i=n.timestamp,o=n.config,s=r.name,a=r.attributes,u=r.metrics,c=r.eventId,l=r.session,f=o.appId,d=o.endpointId,h=t.EventsRequest.BatchItem;t.ApplicationId=t.ApplicationId||f,h[d]||(h[d]={Endpoint:{},Events:{}}),h[d].Events[c]={EventType:s,Timestamp:new Date(i).toISOString(),Attributes:a,Metrics:u,Session:l}})),t},e.prototype._handlePutEventsFailure=function(e,t){Xp.debug("_putEvents Failed: ",e);var n=e.$metadata&&e.$metadata.httpStatusCode;if(ev.includes(n)){var r=Object.values(t);this._retry(r)}},e.prototype._processPutEventsSuccessResponse=function(e,t){var n=e.EventsResponse.Results,r=[];Object.entries(n).forEach((function(e){var n=Zp(e,2),i=n[0],o=n[1].EventsItemResponse;Object.entries(o).forEach((function(e){var n,o,s=Zp(e,2),a=s[0],u=s[1],c=u.StatusCode,l=u.Message,f=t[a],d={EventsResponse:{Results:(n={},n[i]={EventsItemResponse:(o={},o[a]={StatusCode:c,Message:l},o)},n)}};if(tv.includes(c))f.handlers.resolve(d);else{if(!ev.includes(c)){var h=f.params.event.name;return Xp.error("event "+a+" : "+h+" failed with error: "+l),f.handlers.reject(d)}r.push(f)}}))})),r.length&&this._retry(r)},e.prototype._retry=function(e){var t,n=[];e.forEach((function(e){var t,r=e.params,i=r.event,o=i.eventId,s=i.name;if(r.resendLimit-- >0)return Xp.debug("resending event "+o+" : "+s+" with "+r.resendLimit+" retry attempts remaining"),void n.push((t={},t[o]=e,t));Xp.debug("no retry attempts remaining for event "+o+" : "+s)})),(t=this._buffer).unshift.apply(t,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Zp(arguments[t]));return e}(n))},e.prototype._bufferToMap=function(e){return e.reduce((function(e,t){var n=Zp(Object.entries(t),1),r=Zp(n[0],2),i=r[0],o=r[1];return e[i]=o,e}),{})},e}();var rv=function(){return(rv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},iv=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},ov=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},sv=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},av="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",uv=function(e,t){Yr.dispatch("analytics",{event:e,data:t},"Analytics",av)},cv=new i.k("AWSPinpointProvider"),lv=[429,500],fv=[202],dv="_update_endpoint",hv="_session.stop",pv="undefined"!=typeof navigator&&navigator&&"function"==typeof navigator.sendBeacon,vv=function(){function e(e){this._endpointGenerating=!0,this._endpointUpdateInProgress=!1,this._buffer=null,this._endpointBuffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._clientInfo=Bf.clientInfo()}return e.prototype.getCategory=function(){return e.category},e.prototype.getProviderName=function(){return e.providerName},e.prototype.configure=function(e){var t=this;cv.debug("configure Analytics",e);var n=e||{};if(this._config=Object.assign({},this._config,n),this._endpointGenerating=!!e.autoSessionRecord,this._config.appId&&!this._config.disabled)if(this._config.endpointId)uv("pinpointProvider_configured",null);else{var r=this.getProviderName()+"_"+this._config.appId;this._getEndpointId(r).then((function(e){cv.debug("setting endpoint id from the cache",e),t._config.endpointId=e,uv("pinpointProvider_configured",null)})).catch((function(e){cv.debug("Failed to generate endpointId",e)}))}else this._flushBuffer();return this._config},e.prototype.record=function(e,t){return iv(this,void 0,void 0,(function(){var n,r;return ov(this,(function(i){switch(i.label){case 0:return cv.debug("_public record",e),[4,this._getCredentials()];case 1:return(n=i.sent())&&this._config.appId&&this._config.region?(this._initClients(n),r=(new Date).getTime(),this._generateSession(e),e.event.eventId=(0,Sn.v1)(),Object.assign(e,{timestamp:r,config:this._config}),e.event.immediate?[2,this._send(e,t)]:(this._putToBuffer(e,t),[2])):(cv.debug("cannot send events without credentials, applicationId or region"),[2,t.reject(new Error("No credentials, applicationId or region"))])}}))}))},e.prototype._sendEndpointUpdate=function(e){return iv(this,void 0,void 0,(function(){var t;return ov(this,(function(n){switch(n.label){case 0:return this._endpointUpdateInProgress?(this._endpointBuffer.push(e),[2]):(this._endpointUpdateInProgress=!0,[4,this._updateEndpoint(e)]);case 1:return n.sent(),t=this._endpointBuffer.shift(),this._endpointUpdateInProgress=!1,t&&this._sendEndpointUpdate(t),[2]}}))}))},e.prototype._putToBuffer=function(e,t){e.event.name!==dv?this._buffer&&this._buffer.push({params:e,handlers:t}):this._sendEndpointUpdate({params:e,handlers:t})},e.prototype._generateSession=function(e){this._sessionId=this._sessionId||(0,Sn.v1)();var t=e.event;switch(t.name){case"_session.start":this._sessionStartTimestamp=(new Date).getTime(),this._sessionId=(0,Sn.v1)(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()};break;case hv:var n=(new Date).getTime();this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||(0,Sn.v1)(),t.session={Id:this._sessionId,Duration:n-this._sessionStartTimestamp,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString(),StopTimestamp:new Date(n).toISOString()},this._sessionId=void 0,this._sessionStartTimestamp=void 0;break;default:this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||(0,Sn.v1)(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()}}},e.prototype._send=function(e,t){return iv(this,void 0,void 0,(function(){return ov(this,(function(n){switch(e.event.name){case dv:return[2,this._updateEndpoint({params:e,handlers:t})];case hv:return[2,this._pinpointSendStopSession(e,t)];default:return[2,this._pinpointPutEvents(e,t)]}return[2]}))}))},e.prototype._generateBatchItemContext=function(e){var t,n=e.event,r=e.timestamp,i=e.config,o=n.name,s=n.attributes,a=n.metrics,u=n.eventId,c=n.session,l=i.appId,f=i.endpointId,d={ApplicationId:l,EventsRequest:{BatchItem:{}}},h={Endpoint:{}};return h.Events=((t={})[u]={EventType:o,Timestamp:new Date(r).toISOString(),Attributes:s,Metrics:a,Session:c},t),d.EventsRequest.BatchItem[f]=h,d},e.prototype._pinpointPutEvents=function(e,t){return iv(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d;return ov(this,(function(h){switch(h.label){case 0:n=e.event.eventId,r=e.config.endpointId,i=this._generateBatchItemContext(e),o=new zp(i),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this.pinpointClient.send(o)];case 2:return s=h.sent(),a=r,u=n,c=s.EventsResponse.Results[a].EventsItemResponse[u],l=c.StatusCode,f=c.Message,fv.includes(l)?(cv.debug("record event success. ",s),[2,t.resolve(s)]):lv.includes(l)?(this._retry(e,t),[3,4]):(cv.error("Event "+n+" is not accepted, the error is "+f),[2,t.reject(s)]);case 3:return d=h.sent(),this._eventError(d),[2,t.reject(d)];case 4:return[2]}}))}))},e.prototype._pinpointSendStopSession=function(e,t){if(pv){var n=this._generateBatchItemContext(e),r=this._config.region,i=n.ApplicationId,o=n.EventsRequest,s={secret_key:this._config.credentials.secretAccessKey,access_key:this._config.credentials.accessKeyId,session_token:this._config.credentials.sessionToken},a="https://pinpoint."+r+".amazonaws.com/v1/apps/"+i+"/events/legacy",u=JSON.stringify(o),c={url:a,body:u,method:"POST"},l={region:r,service:"mobiletargeting"},f=Na.signUrl(c,s,l,null);return navigator.sendBeacon(f,u)?t.resolve("sendBeacon success"):t.reject("sendBeacon failure")}this._pinpointPutEvents(e,t)},e.prototype._retry=function(e,t){var n=e.config.resendLimit;e.resendLimit="number"==typeof e.resendLimit?e.resendLimit:n,e.resendLimit-- >0?(cv.debug("resending event "+e.eventName+" with "+e.resendLimit+" retry times left"),this._pinpointPutEvents(e,t)):cv.debug("retry times used up for event "+e.eventName)},e.prototype._updateEndpoint=function(e){return iv(this,void 0,void 0,(function(){var t,n,r,i,o,s,a,u,c,l,f,d;return ov(this,(function(h){switch(h.label){case 0:t=e.params,n=e.handlers,r=t.config,i=t.event,o=r.appId,s=r.endpointId,a=this._endpointRequest(r,C.transferKeyToLowerCase(i,[],["attributes","userAttributes","Attributes","UserAttributes"])),u={ApplicationId:o,EndpointId:s,EndpointRequest:a},h.label=1;case 1:return h.trys.push([1,3,,4]),c=new qp(u),[4,this.pinpointClient.send(c)];case 2:return l=h.sent(),cv.debug("updateEndpoint success",l),this._endpointGenerating=!1,this._resumeBuffer(),n.resolve(l),[2];case 3:return f=h.sent(),d={err:f,update_params:u,endpointObject:e},[2,this._handleEndpointUpdateFailure(d)];case 4:return[2]}}))}))},e.prototype._handleEndpointUpdateFailure=function(e){return iv(this,void 0,void 0,(function(){var t,n,r;return ov(this,(function(i){switch(t=e.err,n=e.endpointObject,r=t.$metadata&&t.$metadata.httpStatusCode,cv.debug("updateEndpoint error",t),r){case 403:return[2,this._handleEndpointUpdateForbidden(e)];default:if(lv.includes(r))return[2,this._retryEndpointUpdate(n,!0)];cv.error("updateEndpoint failed",t),n.handlers.reject(t)}return[2]}))}))},e.prototype._handleEndpointUpdateForbidden=function(e){var t=e.err,n=e.endpointObject,r=t.code,i=t.retryable;if("ExpiredTokenException"!==r&&!i)return n.handlers.reject(t);this._retryEndpointUpdate(n)},e.prototype._retryEndpointUpdate=function(e,t){void 0===t&&(t=!1),cv.debug("_retryEndpointUpdate",e);var n=e.params,r=n.config.resendLimit;if(n.resendLimit="number"==typeof n.resendLimit?n.resendLimit:r,n.resendLimit-- >0)return cv.debug("resending endpoint update "+n.event.eventId+" with "+n.resendLimit+" retry attempts remaining"),void(this._endpointBuffer.length?this._endpointBuffer.unshift(e):this._updateEndpoint(e));cv.warn("resending endpoint update "+n.event.eventId+" failed after "+n.config.resendLimit+" attempts"),this._endpointGenerating&&cv.error("Initial endpoint update failed. ")},e.prototype._initClients=function(e){return iv(this,void 0,void 0,(function(){var t,n;return ov(this,(function(r){return cv.debug("init clients"),this.pinpointClient&&this._config.credentials&&this._config.credentials.sessionToken===e.sessionToken&&this._config.credentials.identityId===e.identityId?(cv.debug("no change for aws credentials, directly return from init"),[2]):(t=this._config.credentials?this._config.credentials.identityId:null,this._config.credentials=e,n=this._config.region,cv.debug("init clients with credentials",e),this.pinpointClient=new Qp({region:n,credentials:e,customUserAgent:c()}),this.pinpointClient.middlewareStack.addRelativeTo((function(e){return function(t){return delete t.request.headers["amz-sdk-invocation-id"],delete t.request.headers["amz-sdk-request"],e(t)}}),{step:"finalizeRequest",relation:"after",toMiddleware:"retryMiddleware"}),this._bufferExists()&&t===e.identityId?this._updateBufferClient():this._initBuffer(),this._customizePinpointClientReq(),[2])}))}))},e.prototype._bufferExists=function(){return this._buffer&&this._buffer instanceof nv},e.prototype._initBuffer=function(){this._bufferExists()&&this._flushBuffer(),this._buffer=new nv(this.pinpointClient,this._config),this._endpointGenerating&&this._buffer.pause()},e.prototype._updateBufferClient=function(){this._bufferExists()&&this._buffer.updateClient(this.pinpointClient)},e.prototype._flushBuffer=function(){this._bufferExists()&&(this._buffer.flush(),this._buffer=null)},e.prototype._resumeBuffer=function(){this._bufferExists()&&this._buffer.resume()},e.prototype._customizePinpointClientReq=function(){},e.prototype._getEndpointId=function(e){return iv(this,void 0,void 0,(function(){var t;return ov(this,(function(n){switch(n.label){case 0:return[4,Ka.getItem(e)];case 1:return t=n.sent(),cv.debug("endpointId from cache",t,"type",typeof t),t||(t=(0,Sn.v1)(),Ka.setItem(e,t)),[2,t]}}))}))},e.prototype._endpointRequest=function(e,t){var n=e.credentials,r=this._clientInfo||{},i=e.clientContext||{},o=e.endpoint||{},s={appVersion:r.appVersion,make:r.make,model:r.model,modelVersion:r.version,platform:r.platform},a=(i.clientId,i.appTitle,i.appVersionName,i.appVersionCode,i.appPackageName,sv(i,["clientId","appTitle","appVersionName","appVersionCode","appPackageName"])),u=t.address?"android"===r.platform?"GCM":"APNS":void 0,c=rv(rv(rv({channelType:u,requestId:(0,Sn.v1)(),effectiveDate:(new Date).toISOString()},o),t),{attributes:rv(rv({},o.attributes),t.attributes),demographic:rv(rv(rv(rv({},s),a),o.demographic),t.demographic),location:rv(rv({},o.location),t.location),metrics:rv(rv({},o.metrics),t.metrics),user:{userId:t.userId||o.userId||n.identityId,userAttributes:rv(rv({},o.userAttributes),t.userAttributes)}}),l=(c.userId,c.userAttributes,c.name,c.session,c.eventId,c.immediate,sv(c,["userId","userAttributes","name","session","eventId","immediate"]));return C.transferKeyToUpperCase(l,[],["metrics","userAttributes","attributes"])},e.prototype._eventError=function(e){cv.error("record event failed.",e),cv.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:PutEvents" in order to record events')},e.prototype._getCredentials=function(){return iv(this,void 0,void 0,(function(){var e,t;return ov(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Br.get()];case 1:return(e=n.sent())?(cv.debug("set credentials for analytics",e),[2,Br.shear(e)]):[2,null];case 2:return t=n.sent(),cv.debug("ensure credentials error",t),[2,null];case 3:return[2]}}))}))},e.category="Analytics",e.providerName="AWSPinpoint",e}(),gv=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},yv=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(gv(arguments[t]));return e},mv=[],bv=function(){function e(e,t){this.context=e,this.methodName=t,this._originalMethod=e[t].bind(e)}return e.add=function(e,t,n){wv(e,t).set(n)},e.remove=function(e,t){wv(e,t).remove()},e.prototype.set=function(e){var t=this;this.context[this.methodName]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t._originalMethod.apply(t,yv(n)))}},e.prototype.remove=function(){this.context[this.methodName]=this._originalMethod},e}();function wv(e,t){var n=mv.filter((function(n){return n.context===e&&n.methodName===t}))[0];return n||(n=new bv(e,t),mv.push(n)),n}var Sv=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},_v=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Ev=new i.k("PageViewTracker"),Iv="aws-amplify-analytics-prevUrl",Av={enable:!1,provider:"AWSPinpoint",getUrl:function(){return C.browserOrNode().isBrowser?window.location.origin+window.location.pathname:""}};const Cv=function(){function e(e,t){Ev.debug("initialize pageview tracker with opts",t),this._config=Object.assign({},Av,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),"SPA"===this._config.type?this._pageViewTrackSPA():this._pageViewTrackDefault()}return e.prototype.configure=function(e){return Object.assign(this._config,e),"SPA"===this._config.type&&this._pageViewTrackSPA(),this._config},e.prototype._isSameUrl=function(){return sessionStorage.getItem(Iv)===this._config.getUrl()&&(Ev.debug("the url is same"),!0)},e.prototype._pageViewTrackDefault=function(){return Sv(this,void 0,void 0,(function(){var e,t,n,r;return _v(this,(function(i){switch(i.label){case 0:return C.browserOrNode().isBrowser&&window.addEventListener&&window.sessionStorage?(e=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(Ev.debug("not in the supported web enviroment"),[2]);case 1:return n=i.sent(),[3,3];case 2:n=this._config.attributes,i.label=3;case 3:return t=n,r=Object.assign({url:e},t),this._config.enable&&!this._isSameUrl()&&(this._tracker({name:this._config.eventName||"pageView",attributes:r},this._config.provider).catch((function(e){Ev.debug("Failed to record the page view event",e)})),sessionStorage.setItem(Iv,e)),[2]}}))}))},e.prototype._trackFunc=function(){return Sv(this,void 0,void 0,(function(){var e,t,n,r;return _v(this,(function(i){switch(i.label){case 0:return C.browserOrNode().isBrowser&&window.addEventListener&&history.pushState&&window.sessionStorage?(e=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(Ev.debug("not in the supported web enviroment"),[2]);case 1:return n=i.sent(),[3,3];case 2:n=this._config.attributes,i.label=3;case 3:return t=n,r=Object.assign({url:e},t),this._isSameUrl()||(this._tracker({name:this._config.eventName||"pageView",attributes:r},this._config.provider).catch((function(e){Ev.debug("Failed to record the page view event",e)})),sessionStorage.setItem(Iv,e)),[2]}}))}))},e.prototype._pageViewTrackSPA=function(){C.browserOrNode().isBrowser&&window.addEventListener&&history.pushState?this._config.enable&&!this._hasEnabled?(bv.add(history,"pushState",this._trackFunc),bv.add(history,"replaceState",this._trackFunc),window.addEventListener("popstate",this._trackFunc),this._trackFunc(),this._hasEnabled=!0):(bv.remove(history,"pushState"),bv.remove(history,"replaceState"),window.removeEventListener("popstate",this._trackFunc),this._hasEnabled=!1):Ev.debug("not in the supported web enviroment")},e}();var Tv=C.browserOrNode().isBrowser&&window.Element?window.Element.prototype:null,Ov=Tv?Tv.matches||Tv.matchesSelector||Tv.webkitMatchesSelector||Tv.mozMatchesSelector||Tv.msMatchesSelector||Tv.oMatchesSelector:null;function xv(e,t){if(e&&1===e.nodeType&&t){if("string"==typeof t||1===t.nodeType)return e===t||kv(e,t);if("length"in t)for(var n=0,r=void 0;r=t[n];n++)if(e===r||kv(e,r))return!0}return!1}function kv(e,t){if("string"!=typeof t)return!1;if(Ov)return Ov.call(e,t);for(var n=e.parentNode.querySelectorAll(t),r=0,i=void 0;i=n[r];r++)if(i===e)return!0;return!1}var Pv=new i.k("EventTracker"),Nv={enable:!1,events:["click"],selectorPrefix:"data-amplify-analytics-",provider:"AWSPinpoint"};const Lv=function(){function e(e,t){C.browserOrNode().isBrowser&&window.addEventListener?(this._config=Object.assign({},Nv,t),this._tracker=e,this._delegates={},this._trackFunc=this._trackFunc.bind(this),Pv.debug("initialize pageview tracker with opts",this._config),this.configure(this._config)):Pv.debug("not in the supported web environment")}return e.prototype.configure=function(e){var t=this;if(Object.assign(this._config,e),this._config.enable){if(this._config.enable&&0===Object.keys(this._delegates).length){var n="["+this._config.selectorPrefix+"on]";this._config.events.forEach((function(e){t._delegates[e]=function(e,t,n,r,i){void 0===i&&(i={});var o=function(e){var t;if(i.composed&&"function"==typeof e.composedPath)for(var o=e.composedPath(),s=0,a=void 0;a=o[s];s++)1===a.nodeType&&xv(a,n)&&(t=a);else t=function(e,t,n){if(void 0===n&&(n=!1),e&&1===e.nodeType&&t)for(var r,i=(n?[e]:[]).concat(function(e){for(var t=[],n=e;n&&n.parentNode&&1===n.parentNode.nodeType;)n=n.parentNode,t.push(n);return t}(e)),o=0;r=i[o];o++)if(xv(r,t))return r}(e.target,n,!0);t&&r.call(t,e,t)};return e.addEventListener(t,o,i.useCapture),{destroy:function(){e.removeEventListener(t,o,i.useCapture)}}}(document,e,n,t._trackFunc,{composed:!0,useCapture:!0})}))}}else Object.keys(this._delegates).forEach((function(e){"function"==typeof t._delegates[e].destroy&&t._delegates[e].destroy()})),this._delegates={};return this._config},e.prototype._trackFunc=function(e,t){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(c){switch(c.label){case 0:return n={},r=t.getAttribute(this._config.selectorPrefix+"on").split(/\s*,\s*/),i=t.getAttribute(this._config.selectorPrefix+"name"),(o=t.getAttribute(this._config.selectorPrefix+"attrs"))&&o.split(/\s*,\s*/).forEach((function(e){var t=e.trim().split(/\s*:\s*/);n[t[0]]=t[1]})),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return a=c.sent(),[3,3];case 2:a=this._config.attributes,c.label=3;case 3:return s=a,u=Object.assign({type:e.type,target:e.target.localName+" with id "+e.target.id},s,n),Pv.debug("events needed to be recorded",r),Pv.debug("attributes needed to be attached",n),r.indexOf(e.type)<0?(Pv.debug("event "+e.type+" is not selected to be recorded"),[2]):(this._tracker({name:i||"event",attributes:u},this._config.provider).catch((function(t){Pv.debug("Failed to record the "+e.type+" event', "+t)})),[2])}}))}))},e}();var Mv=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Rv=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Dv=new i.k("SessionTracker"),Uv={enable:!1,provider:"AWSPinpoint"},jv=!1;const Fv=function(){function e(e,t){this._config=Object.assign({},Uv,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),this._trackBeforeUnload=this._trackBeforeUnload.bind(this),this.configure(this._config)}return e.prototype._envCheck=function(){if(!C.browserOrNode().isBrowser)return!1;if(!document||!document.addEventListener)return Dv.debug("not in the supported web environment"),!1;if(void 0!==document.hidden)this._hidden="hidden",this._visibilityChange="visibilitychange";else if(void 0!==document.msHidden)this._hidden="msHidden",this._visibilityChange="msvisibilitychange";else{if(void 0===document.webkitHidden)return Dv.debug("not in the supported web environment"),!1;this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"}return!0},e.prototype._trackFunc=function(){return Mv(this,void 0,void 0,(function(){var e,t,n;return Rv(this,(function(r){switch(r.label){case 0:return"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return t=r.sent(),[3,3];case 2:t=this._config.attributes,r.label=3;case 3:return e=t,n=Object.assign({},e),document.visibilityState===this._hidden?this._tracker({name:"_session.stop",attributes:n},this._config.provider).catch((function(e){Dv.debug("record session stop event failed.",e)})):this._tracker({name:"_session.start",attributes:n},this._config.provider).catch((function(e){Dv.debug("record session start event failed.",e)})),[2]}}))}))},e.prototype._trackBeforeUnload=function(e){var t=this;("function"==typeof this._config.attributes?Promise.resolve(this._config.attributes()):Promise.resolve(this._config.attributes)).then((function(e){var n=Object.assign({},e);t._tracker({name:"_session.stop",attributes:n,immediate:!0},t._config.provider).catch((function(e){Dv.debug("record session stop event failed.",e)}))}))},e.prototype._sendInitialEvent=function(){return Mv(this,void 0,void 0,(function(){var e,t,n;return Rv(this,(function(r){switch(r.label){case 0:return jv?(Dv.debug("the start session has been sent when the page is loaded"),[2]):(jv=!0,"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]);case 1:return t=r.sent(),[3,3];case 2:t=this._config.attributes,r.label=3;case 3:return e=t,n=Object.assign({},e),this._tracker({name:"_session.start",attributes:n},this._config.provider).catch((function(e){Dv.debug("record session start event failed.",e)})),[2]}}))}))},e.prototype.configure=function(e){return this._envCheck()?(Object.assign(this._config,e),this._config.enable&&!this._hasEnabled?(this._sendInitialEvent(),document.addEventListener(this._visibilityChange,this._trackFunc,!1),window.addEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!0):!this._config.enable&&this._hasEnabled&&(document.removeEventListener(this._visibilityChange,this._trackFunc,!1),window.removeEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!1),this._config):this._config},e}();var Bv=function(){return(Bv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},zv=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},qv=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Kv=new i.k("AnalyticsClass"),Vv="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Hv={pageView:Cv,event:Lv,session:Fv},Gv=null,Wv=function(){function e(){this._config={},this._pluggables=[],this._disabled=!1,this._trackers={},Gv=this,this.record=this.record.bind(this),Yr.listen("auth",Qv),Yr.listen("storage",Qv),Yr.listen("analytics",Qv)}return e.prototype.getModuleName=function(){return"Analytics"},e.prototype.configure=function(e){var t=this;if(!e)return this._config;Kv.debug("configure Analytics",e);var n=Qr.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,n.Analytics,e),this._config.disabled&&(this._disabled=!0),void 0===this._config.autoSessionRecord&&(this._config.autoSessionRecord=!0),this._pluggables.forEach((function(e){var n="AWSPinpoint"!==e.getProviderName()||t._config.AWSPinpoint?t._config[e.getProviderName()]:t._config;e.configure(Bv({disabled:t._config.disabled,autoSessionRecord:t._config.autoSessionRecord},n))})),0===this._pluggables.length&&this.addPluggable(new vv),"configured",null,"The Analytics category has been configured successfully",Yr.dispatch("analytics",{event:"configured",data:null,message:"The Analytics category has been configured successfully"},"Analytics",Vv),Kv.debug("current configuration",this._config),this._config},e.prototype.addPluggable=function(e){if(e&&"Analytics"===e.getCategory()){this._pluggables.push(e);var t="AWSPinpoint"!==e.getProviderName()||this._config.AWSPinpoint?this._config[e.getProviderName()]:this._config,n=Bv({disabled:this._config.disabled},t);return e.configure(n),n}},e.prototype.getPluggable=function(e){for(var t=0;t<this._pluggables.length;t+=1){var n=this._pluggables[t];if(n.getProviderName()===e)return n}return Kv.debug("No plugin found with providerName",e),null},e.prototype.removePluggable=function(e){for(var t=0;t<this._pluggables.length&&this._pluggables[t].getProviderName()!==e;)t+=1;return t===this._pluggables.length?void Kv.debug("No plugin found with providerName",e):void this._pluggables.splice(t,t+1)},e.prototype.disable=function(){this._disabled=!0},e.prototype.enable=function(){this._disabled=!1},e.prototype.startSession=function(e){return zv(this,void 0,void 0,(function(){var t;return qv(this,(function(n){return t={event:{name:"_session.start"},provider:e},[2,this._sendEvent(t)]}))}))},e.prototype.stopSession=function(e){return zv(this,void 0,void 0,(function(){var t;return qv(this,(function(n){return t={event:{name:"_session.stop"},provider:e},[2,this._sendEvent(t)]}))}))},e.prototype.record=function(e,t,n){return zv(this,void 0,void 0,(function(){var r;return qv(this,(function(i){return null,r="string"==typeof e?{event:{name:e,attributes:t,metrics:n},provider:"AWSPinpoint"}:{event:e,provider:t},[2,this._sendEvent(r)]}))}))},e.prototype.updateEndpoint=function(e,t){return zv(this,void 0,void 0,(function(){var n;return qv(this,(function(r){return n=Bv(Bv({},e),{name:"_update_endpoint"}),[2,this.record(n,t)]}))}))},e.prototype._sendEvent=function(e){var t=this;if(this._disabled)return Kv.debug("Analytics has been disabled"),Promise.resolve();var n=e.provider?e.provider:"AWSPinpoint";return new Promise((function(r,i){t._pluggables.forEach((function(t){t.getProviderName()===n&&t.record(e,{resolve:r,reject:i})}))}))},e.prototype.autoTrack=function(e,t){if(Hv[e]){"session"===e&&(this._config.autoSessionRecord=t.enable);var n=this._trackers[e];n?n.configure(t):this._trackers[e]=new Hv[e](this.record,t)}else Kv.debug("invalid tracker type")},e}(),Yv=!1,$v=!1,Jv=!1,Qv=function(e){var t=e.channel,n=e.payload;switch(Kv.debug("on hub capsule "+t,n),t){case"auth":Xv(n);break;case"storage":Zv(n);break;case"analytics":eg(n)}},Zv=function(e){var t=e.data,n=t.attrs,r=t.metrics;n&&Jv&&Gv.record({name:"Storage",attributes:n,metrics:r}).catch((function(e){Kv.debug("Failed to send the storage event automatically",e)}))},Xv=function(e){var t=e.event;if(t){var n=function(e){return zv(void 0,void 0,void 0,(function(){var t;return qv(this,(function(n){switch(n.label){case 0:if(!$v||!Jv)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Gv.record({name:"_userauth."+e})];case 2:return[2,n.sent()];case 3:return t=n.sent(),Kv.debug("Failed to send the "+e+" event automatically",t),[3,4];case 4:return[2]}}))}))};switch(t){case"signIn":return n("sign_in");case"signUp":return n("sign_up");case"signOut":return n("sign_out");case"signIn_failure":return n("auth_fail");case"configured":($v=!0)&&Jv&&tg()}}},eg=function(e){var t=e.event;if(t)switch(t){case"pinpointProvider_configured":Jv=!0,$v&&Jv&&tg()}},tg=function(){var e=Gv.configure();!Yv&&e.autoSessionRecord&&(Gv.updateEndpoint({immediate:!0}).catch((function(e){Kv.debug("Failed to update the endpoint",e)})),Yv=!0),Gv.autoTrack("session",{enable:e.autoSessionRecord})},ng=new Wv;s.register(ng);var rg=function(e,t){return(rg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function ig(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}rg(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var og,sg,ag,ug,cg,lg,fg,dg,hg=function(){return(hg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function pg(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function vg(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create,Object.create,function(e){e.filterSensitiveLog=function(e){return hg({},e)}}(og||(og={})),function(e){e.filterSensitiveLog=function(e){return hg({},e)}}(sg||(sg={})),function(e){e.filterSensitiveLog=function(e){return hg({},e)}}(ag||(ag={})),function(e){e.filterSensitiveLog=function(e){return hg({},e)}}(ug||(ug={})),function(e){e.filterSensitiveLog=function(e){return hg({},e)}}(cg||(cg={})),function(e){e.filterSensitiveLog=function(e){return hg({},e)}}(lg||(lg={})),function(e){e.filterSensitiveLog=function(e){return hg({},e)}}(fg||(fg={})),function(e){e.filterSensitiveLog=function(e){return hg({},e)}}(dg||(dg={}));var gg=function(e,t){return pg(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return vg(this,(function(l){switch(l.label){case 0:return r=[hg({},e)],c={},[4,_g(e.body,t)];case 1:switch(n=hg.apply(void 0,r.concat([(c.body=l.sent(),c)])),o="UnknownError",o=Eg(e,n.body)){case"InvalidInputException":case"com.amazonaws.personalizeevents#InvalidInputException":return[3,2]}return[3,4];case 2:return s=[{}],[4,yg(n,t)];case 3:return i=hg.apply(void 0,[hg.apply(void 0,s.concat([l.sent()])),{name:o,$metadata:wg(e)}]),[3,5];case 4:a=n.body,o=a.code||a.Code||o,i=hg(hg({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:wg(e)}),l.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},yg=function(e,t){return pg(void 0,void 0,void 0,(function(){var t,n;return vg(this,(function(r){return t={name:"InvalidInputException",$fault:"client",$metadata:wg(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=n.message),[2,t]}))}))},mg=function(e,t){return e.map((function(e){return function(e,t){return hg(hg(hg(hg(hg(hg(hg(hg({},void 0!==e.eventId&&{eventId:e.eventId}),void 0!==e.eventType&&{eventType:e.eventType}),void 0!==e.eventValue&&{eventValue:e.eventValue}),void 0!==e.impression&&{impression:bg(e.impression,t)}),void 0!==e.itemId&&{itemId:e.itemId}),void 0!==e.properties&&{properties:Dt.fromObject(e.properties)}),void 0!==e.recommendationId&&{recommendationId:e.recommendationId}),void 0!==e.sentAt&&{sentAt:Math.round(e.sentAt.getTime()/1e3)})}(e,t)}))},bg=function(e,t){return e.map((function(e){return e}))},wg=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},Sg=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},_g=function(e,t){return function(e,t){return Sg(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},Eg=function(e,t){var n,r=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},i=(n=e.headers,"x-amzn-errortype",Object.keys(n).find((function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()})));return void 0!==i?r(e.headers[i]):void 0!==t.code?r(t.code):void 0!==t.__type?r(t.__type):""},Ig=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return ig(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ct(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.logger,o="PersonalizeEventsClient",s="PutEventsCommand",a={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:ag.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var u=t.requestHandler;return r.resolve((function(e){return u.handle(e.request,n||{})}),a)},t.prototype.serialize=function(e,t){return function(e,t){return pg(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return vg(this,(function(l){switch(l.label){case 0:return n={"Content-Type":"application/json"},r="/events",i=JSON.stringify(hg(hg(hg(hg({},void 0!==e.eventList&&{eventList:mg(e.eventList,t)}),void 0!==e.sessionId&&{sessionId:e.sessionId}),void 0!==e.trackingId&&{trackingId:e.trackingId}),void 0!==e.userId&&{userId:e.userId})),[4,t.endpoint()];case 1:return o=l.sent(),s=o.hostname,a=o.protocol,u=void 0===a?"https":a,c=o.port,[2,new Ze({protocol:u,hostname:s,port:c,method:"POST",headers:n,path:r,body:i})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return pg(void 0,void 0,void 0,(function(){var n;return vg(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,gg(e,t)]:(n={$metadata:wg(e)},[4,Sg(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Pt);const Ag=JSON.parse('{"u2":"@aws-sdk/client-personalize-events","i8":"1.0.0-rc.4"}');var Cg,Tg,Og,xg="personalize-events.{region}.amazonaws.com",kg=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Pg=new Set(["cn-north-1","cn-northwest-1"]),Ng=new Set(["us-iso-east-1"]),Lg=new Set(["us-isob-east-1"]),Mg=new Set(["us-gov-east-1","us-gov-west-1"]),Rg=hg(hg({},{apiVersion:"2018-03-22",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;return kg.has(e)&&(n={hostname:xg.replace("{region}",e),partition:"aws"}),Pg.has(e)&&(n={hostname:"personalize-events.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Ng.has(e)&&(n={hostname:"personalize-events.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Lg.has(e)&&(n={hostname:"personalize-events.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),Mg.has(e)&&(n={hostname:"personalize-events.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:xg.replace("{region}",e),partition:"aws"}),Promise.resolve(n)},signingName:"personalize"}),{runtime:"browser",base64Decoder:cn,base64Encoder:ln,bodyLengthChecker:xn,credentialDefaultProvider:hn("Credential is missing"),defaultUserAgent:kn(Ag.u2,Ag.i8),maxAttempts:3,region:hn("Region is missing"),requestHandler:new en,sha256:Jt.Sha256,streamCollector:fn,urlParser:On,utf8Decoder:Pn,utf8Encoder:Nn}),Dg=function(e){function t(t){var n=this,r=hg(hg({},Rg),t),i=Kn(r),o=Or(Bn(i)),s=An(o);return(n=e.call(this,s)||this).config=s,n.middlewareStack.use(Nr(n.config)),n.middlewareStack.use(vn(n.config)),n.middlewareStack.use(Mr(n.config)),n.middlewareStack.use(Gn(n.config)),n.middlewareStack.use(Yn(n.config)),n.middlewareStack.use(Jn(n.config)),n}return ig(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(kt),Ug=n(8367),jg=n.n(Ug),Fg=n(8446),Bg=n.n(Fg),zg="_awsct_uid",qg="_awsct_sid",Kg=(new i.k("AmazonPersonalizeProvider"),function(){function e(e){void 0===e&&(e=""),this._isBrowser=C.browserOrNode().isBrowser,this._timerKey=(0,Sn.v1)().substr(0,15),this._refreshTimer()}return e.prototype._refreshTimer=function(){this._timer&&clearInterval(this._timer);var e=this;this._timer=setInterval((function(){e._timerKey=(0,Sn.v1)().substr(0,15)}),3e4)},e.prototype.storeValue=function(e,t){var n=new Date,r=new Date;r.setTime(n.getTime()+6048e5),Ka.setItem(this._getCachePrefix(e),t,{expires:r.getTime()})},e.prototype.retrieveValue=function(e){return Ka.getItem(this._getCachePrefix(e))},e.prototype._getCachePrefix=function(e){return this._isBrowser?e+"."+window.location.host:"peronslize"},e.prototype.getTimerKey=function(){return this._timerKey},e.prototype.updateSessionInfo=function(e,t){var n=t.userId,r=t.sessionId;if(this._isRequireNewSession(e,n,r)){var i=(0,Sn.v1)();this.storeValue(zg,e),this.storeValue(qg,i),t.sessionId=i}else this._isRequireUpdateSessionInfo(e,n,r)&&this.storeValue(zg,e);t.userId=e},e.prototype._isRequireUpdateSessionInfo=function(e,t,n){return!jg()(n)&&jg()(t)&&!jg()(e)},e.prototype.retrieveSessionInfo=function(e){var t={};return t.trackingId=e,t.sessionId=this.retrieveValue(qg),t.userId=this.retrieveValue(zg),jg()(t.sessionId)&&(t.sessionId=(0,Sn.v1)(),this.storeValue(qg,t.sessionId)),this.storeValue("_awsct",e),t},e.prototype._isRequireNewSession=function(e,t,n){var r=jg()(n),i=jg()(e)&&!jg()(t),o=!jg()(e)&&!jg()(t)&&!Bg()(e,t);return r||i||o},e}());!function(e){e.PLAY="play",e.PAUSE="pause",e.ENDED="Ended"}(Cg||(Cg={})),function(e){e.IFRAME="IFRAME",e.VIDEO="VIDEO",e.AUDIO="AUDIO"}(Tg||(Tg={})),function(e){e.PLAY="Play",e.ENDED="Ended",e.PAUSE="Pause",e.TIME_WATCHED="TimeWatched"}(Og||(Og={}));var Vg=function(){function e(e,t){var n;this.eventActionMapping=((n={})[Og.ENDED]=this.endedEventAction.bind(this),n[Og.PLAY]=this.playEventAction.bind(this),n[Og.PAUSE]=this.pauseEventAction.bind(this),n);var r=e.eventData;this._params=e,this._mediaElement=document.getElementById(r.properties.domElementId),this._started=!1,this._provider=t,{IFRAME:this._iframeMediaTracker,VIDEO:this._html5MediaTracker,AUDIO:this._html5MediaTracker}[this._mediaElement.tagName].bind(this)(),this._initYoutubeFrame()}return e.prototype._initYoutubeFrame=function(){this._youTubeIframeLoader={src:"https://www.youtube.com/iframe_api",loading:!1,loaded:!1,listeners:[],load:function(e){var t=this;if(this.listeners.push(e),this.loaded)setTimeout((function(){t.done()}));else if(!this.loading){this.loading=!0,window.onYouTubeIframeAPIReady=function(){t.loaded=!0,t.done()};var n=document.createElement("script");n.type="text/javascript",n.src=this.src,document.body.appendChild(n)}},done:function(){for(delete window.onYouTubeIframeAPIReady;this.listeners.length;)this.listeners.pop()(window.YT)}}},e.prototype._iframeMediaTracker=function(){var e=this;setInterval((function(){e._started&&e.recordEvent(Tg.IFRAME,Og.TIME_WATCHED)}),3e3),this._youTubeIframeLoader.load((function(t){e._iframePlayer=new t.Player(e._mediaElement.id,{events:{onStateChange:e._onPlayerStateChange.bind(e)}})}))},e.prototype._onPlayerStateChange=function(e){var t={0:Og.ENDED,1:Og.PLAY,2:Og.PAUSE}[e.data];t&&this.eventActionMapping[t](Tg.IFRAME)},e.prototype._html5MediaTracker=function(){var e=this;setInterval((function(){e._started&&e.recordEvent(Tg.VIDEO,Og.TIME_WATCHED)}),3e3),this._mediaElement.addEventListener(Cg.PLAY,(function(){e.eventActionMapping[Og.PLAY](Tg.VIDEO)}),!1),this._mediaElement.addEventListener(Cg.PAUSE,(function(){e.eventActionMapping[Og.PAUSE](Tg.VIDEO)}),!1),this._mediaElement.addEventListener(Cg.ENDED,(function(){e.eventActionMapping[Og.ENDED](Tg.VIDEO)}),!1)},e.prototype.playEventAction=function(e){this._started=!0,this.recordEvent(e,Og.PLAY)},e.prototype.pauseEventAction=function(e){this._started=!1,this.recordEvent(e,Og.PAUSE)},e.prototype.endedEventAction=function(e){this._started=!1,this.recordEvent(e,Og.ENDED)},e.prototype.recordEvent=function(e,t){var n=Object.assign({},this._params),r=n.eventData;r.eventType=t,e===Tg.VIDEO?(r.properties.timestamp=this._mediaElement.currentTime,r.properties.duration=this._mediaElement.duration):(r.properties.timestamp=this._financial(this._iframePlayer.getCurrentTime()),r.properties.duration=this._financial(this._iframePlayer.getDuration()));var i=parseFloat(r.properties.timestamp)/parseFloat(r.properties.duration);r.properties.eventValue=Number(i.toFixed(4)),delete r.properties.domElementId,this._provider.putToBuffer(n)},e.prototype._financial=function(e){return Number.parseFloat(e).toFixed(4)},e}(),Hg=n(7361),Gg=n.n(Hg),Wg=new i.k("AmazonPersonalizeProvider"),Yg=function(){function e(e){this._buffer=[],this._config=e||{},this._config.flushSize=this._config.flushSize>0&&this._config.flushSize<=10?this._config.flushSize:5,this._config.flushInterval=this._config.flushInterval||5e3,this._sessionManager=new Kg,jg()(this._config.trackingId)||(this._sessionInfo=this._sessionManager.retrieveSessionInfo(this._config.trackingId)),this._isBrowser=C.browserOrNode().isBrowser,this._setupTimer()}return e.prototype._setupTimer=function(){this._timer&&clearInterval(this._timer);var e=this._config.flushInterval,t=this;this._timer=setInterval((function(){t._sendFromBuffer()}),e)},e.prototype.record=function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var t,n,r,i,o;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(s){switch(s.label){case 0:return[4,this._getCredentials()];case 1:return(t=s.sent())?(Object.assign(e,{config:this._config,credentials:t,sentAt:new Date}),n=e.event,r=n.eventType,i=n.properties,"Identify"===r?(this._sessionManager.updateSessionInfo(i&&i.userId?i.userId:"",this._sessionInfo),[2]):(jg()(e.event.userId)||this._sessionManager.updateSessionInfo(e.event.userId,this._sessionInfo),o=this.generateRequestParams(e,this._sessionInfo),"MediaAutoTrack"!==r?[3,7]:this._isBrowser?jg()(Gg()(o,"eventData.properties.domElementId",null))?[3,3]:[4,this.isElementFullyLoaded(this.loadElement,o.eventData.properties.domElementId,500,5)]:[3,5])):[2,Promise.resolve(!1)];case 2:return s.sent()?new Vg(o,this):Wg.debug("Cannot find the media element."),[3,4];case 3:Wg.debug("Missing domElementId field in 'properties' for MediaAutoTrack event type."),s.label=4;case 4:return[3,6];case 5:Wg.debug("MediaAutoTrack only for browser"),s.label=6;case 6:return[2];case 7:return[2,this.putToBuffer(o)]}}))}))},e.prototype.loadElement=function(e){return new Promise((function(t,n){return document.getElementById(e)&&document.getElementById(e).clientHeight?t(!0):n(!0)}))},e.prototype.isElementFullyLoaded=function(e,t,n,r){var i=this;return new Promise((function(o,s){return e(t).then(o).catch((function(a){return r-1>0?(u=n,new Promise((function(e){return setTimeout(e,u)}))).then(i.isElementFullyLoaded.bind(null,e,t,n,r-1)).then(o).catch(s):s(a);var u}))}))},e.prototype.getCategory=function(){return"Analytics"},e.prototype.getProviderName=function(){return"AmazonPersonalize"},e.prototype.configure=function(e){Wg.debug("configure Analytics",e);var t=e||{};return this._config=Object.assign({},this._config,t),jg()(this._config.trackingId)||(this._sessionInfo=this._sessionManager.retrieveSessionInfo(this._config.trackingId)),this._setupTimer(),this._config},e.prototype.generateRequestParams=function(e,t){var n={},r=e.event,i=r.eventType,o=r.properties;return n.eventData={eventType:i,properties:o},n.sessionInfo=t,n.sentAt=e.sentAt,n.credentials=e.credentials,n.config=e.config,n},e.prototype._sendEvents=function(e){var t=e.length;if(0!==t){var n=e[0],r=n.config,i=n.credentials,o=n.sessionInfo;if(!this._init(r,i))return!1;if(t>0){for(var s=[],a=0;a<t;a+=1){var u=e.shift(),c=this._generateSingleRecordPayload(u,o);s.push(c)}var l={};l.trackingId=o.trackingId,l.sessionId=o.sessionId,l.userId=o.userId,l.eventList=[],s.forEach((function(e){l.eventList.push(e)}));var f=new Ig(l);this._personalize.send(f,(function(e){e?Wg.debug("Failed to call putEvents in Personalize",e):Wg.debug("Put events")}))}}else Wg.debug("events array is empty, directly return")},e.prototype.putToBuffer=function(e){return this._buffer.length<this._config.flushSize?this._buffer.push(e):(this._buffer.push(e),this._sendFromBuffer()),Promise.resolve(!0)},e.prototype._sendFromBuffer=function(){var e=this,t=this._buffer.length;if(!(t<=0)){for(var n=[],r=null,i=[],o=0;o<t;o+=1){var s=this._buffer.shift(),a=s.credentials,u=s.sessionInfo;0===o?(i.push(s),r=a):Bg()(u,this._sessionInfo)&&a.sessionToken===r.sessionToken&&a.identityId===r.identityId?(Wg.debug("no change for cred, put event in the same group"),i.push(s)):(n.push(i),(i=[]).push(s),r=a,this._sessionInfo=u)}n.push(i),n.map((function(t){e._sendEvents(t)}))}},e.prototype._generateSingleRecordPayload=function(e,t){var n=e.eventData,r=e.sentAt,i={};return i.sentAt=r,i.properties=n.properties&&JSON.stringify(n.properties),i.eventId=this._sessionManager.getTimerKey()+t.sessionId,i.eventType=n.eventType,i},e.prototype._init=function(e,t){if(Wg.debug("init clients"),this._personalize&&this._config.credentials&&this._config.credentials.sessionToken===t.sessionToken&&this._config.credentials.identityId===t.identityId)return Wg.debug("no change for analytics config, directly return from init"),!0;this._config.credentials=t;var n=e.region;return Wg.debug("initialize personalize with credentials",t),this._personalize=new Dg({region:n,credentials:t,customUserAgent:c()}),!0},e.prototype._getCredentials=function(){var e=this;return Br.get().then((function(t){return t?(Wg.debug("set credentials for analytics",e._config.credentials),Br.shear(t)):null})).catch((function(e){return Wg.debug("ensure credentials error",e),null}))},e}(),$g=function(e,t){return($g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Jg(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}$g(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Qg,Zg,Xg,ey,ty,ny,ry,iy,oy,sy,ay,uy,cy,ly,fy,dy,hy,py,vy,gy,yy,my,by,wy,Sy,_y,Ey,Iy,Ay,Cy,Ty,Oy,xy,ky,Py,Ny,Ly,My,Ry,Dy,Uy,jy,Fy,By,zy,qy,Ky,Vy,Hy,Gy,Wy,Yy,$y,Jy,Qy,Zy,Xy,em,tm,nm,rm,im,om,sm,am,um,cm,lm,fm,dm,hm,pm,vm,gm,ym,mm,bm,wm,Sm,_m,Em,Im,Am=function(){return(Am=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Cm(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function Tm(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create,Object.create,function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Qg||(Qg={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Zg||(Zg={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Xg||(Xg={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(ey||(ey={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(ty||(ty={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(ny||(ny={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(ry||(ry={})),function(e){e.ACTIVE="ACTIVE",e.CREATING="CREATING",e.DELETING="DELETING"}(iy||(iy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(oy||(oy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(sy||(sy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(ay||(ay={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(uy||(uy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(cy||(cy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(ly||(ly={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(fy||(fy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(dy||(dy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(hy||(hy={})),function(e){e.KMS="KMS",e.NONE="NONE"}(py||(py={})),function(e){e.ALL="ALL",e.INCOMING_BYTES="IncomingBytes",e.INCOMING_RECORDS="IncomingRecords",e.ITERATOR_AGE_MILLISECONDS="IteratorAgeMilliseconds",e.OUTGOING_BYTES="OutgoingBytes",e.OUTGOING_RECORDS="OutgoingRecords",e.READ_PROVISIONED_THROUGHPUT_EXCEEDED="ReadProvisionedThroughputExceeded",e.WRITE_PROVISIONED_THROUGHPUT_EXCEEDED="WriteProvisionedThroughputExceeded"}(vy||(vy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(gy||(gy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(yy||(yy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(my||(my={})),function(e){e.ACTIVE="ACTIVE",e.CREATING="CREATING",e.DELETING="DELETING",e.UPDATING="UPDATING"}(by||(by={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(wy||(wy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Sy||(Sy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(_y||(_y={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Ey||(Ey={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Iy||(Iy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Ay||(Ay={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Cy||(Cy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Ty||(Ty={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Oy||(Oy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(xy||(xy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(ky||(ky={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Py||(Py={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Ny||(Ny={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Ly||(Ly={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(My||(My={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Ry||(Ry={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Dy||(Dy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Uy||(Uy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(jy||(jy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Fy||(Fy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(By||(By={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(zy||(zy={})),function(e){e.AFTER_SEQUENCE_NUMBER="AFTER_SEQUENCE_NUMBER",e.AT_SEQUENCE_NUMBER="AT_SEQUENCE_NUMBER",e.AT_TIMESTAMP="AT_TIMESTAMP",e.LATEST="LATEST",e.TRIM_HORIZON="TRIM_HORIZON"}(qy||(qy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Ky||(Ky={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Vy||(Vy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Hy||(Hy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Gy||(Gy={})),function(e){e.AFTER_SHARD_ID="AFTER_SHARD_ID",e.AT_LATEST="AT_LATEST",e.AT_TIMESTAMP="AT_TIMESTAMP",e.AT_TRIM_HORIZON="AT_TRIM_HORIZON",e.FROM_TIMESTAMP="FROM_TIMESTAMP",e.FROM_TRIM_HORIZON="FROM_TRIM_HORIZON"}(Wy||(Wy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Yy||(Yy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}($y||($y={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Jy||(Jy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Qy||(Qy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Zy||(Zy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Xy||(Xy={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(em||(em={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(tm||(tm={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(nm||(nm={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(rm||(rm={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(im||(im={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(om||(om={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(sm||(sm={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(am||(am={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(um||(um={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(cm||(cm={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(lm||(lm={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(fm||(fm={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(dm||(dm={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(hm||(hm={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(pm||(pm={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(vm||(vm={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(gm||(gm={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(ym||(ym={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(mm||(mm={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(bm||(bm={})),function(e){e.visit=function(e,t){return void 0!==e.KMSThrottlingException?t.KMSThrottlingException(e.KMSThrottlingException):void 0!==e.InternalFailureException?t.InternalFailureException(e.InternalFailureException):void 0!==e.ResourceInUseException?t.ResourceInUseException(e.ResourceInUseException):void 0!==e.KMSOptInRequired?t.KMSOptInRequired(e.KMSOptInRequired):void 0!==e.KMSDisabledException?t.KMSDisabledException(e.KMSDisabledException):void 0!==e.KMSAccessDeniedException?t.KMSAccessDeniedException(e.KMSAccessDeniedException):void 0!==e.KMSInvalidStateException?t.KMSInvalidStateException(e.KMSInvalidStateException):void 0!==e.KMSNotFoundException?t.KMSNotFoundException(e.KMSNotFoundException):void 0!==e.ResourceNotFoundException?t.ResourceNotFoundException(e.ResourceNotFoundException):void 0!==e.SubscribeToShardEvent?t.SubscribeToShardEvent(e.SubscribeToShardEvent):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.KMSThrottlingException?{KMSThrottlingException:By.filterSensitiveLog(e.KMSThrottlingException)}:void 0!==e.InternalFailureException?{InternalFailureException:Gy.filterSensitiveLog(e.InternalFailureException)}:void 0!==e.ResourceInUseException?{ResourceInUseException:ey.filterSensitiveLog(e.ResourceInUseException)}:void 0!==e.KMSOptInRequired?{KMSOptInRequired:Fy.filterSensitiveLog(e.KMSOptInRequired)}:void 0!==e.KMSDisabledException?{KMSDisabledException:Dy.filterSensitiveLog(e.KMSDisabledException)}:void 0!==e.KMSAccessDeniedException?{KMSAccessDeniedException:Ry.filterSensitiveLog(e.KMSAccessDeniedException)}:void 0!==e.KMSInvalidStateException?{KMSInvalidStateException:Uy.filterSensitiveLog(e.KMSInvalidStateException)}:void 0!==e.KMSNotFoundException?{KMSNotFoundException:jy.filterSensitiveLog(e.KMSNotFoundException)}:void 0!==e.ResourceNotFoundException?{ResourceNotFoundException:ty.filterSensitiveLog(e.ResourceNotFoundException)}:void 0!==e.SubscribeToShardEvent?{SubscribeToShardEvent:bm.filterSensitiveLog(e.SubscribeToShardEvent)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(wm||(wm={})),function(e){e.filterSensitiveLog=function(e){return Am(Am({},e),e.EventStream&&{EventStream:"STREAMING_CONTENT"})}}(Sm||(Sm={})),function(e){e.UNIFORM_SCALING="UNIFORM_SCALING"}(_m||(_m={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Em||(Em={})),function(e){e.filterSensitiveLog=function(e){return Am({},e)}}(Im||(Im={}));var Om=function(e,t){return Cm(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d,h,p,v,g,y,m;return Tm(this,(function(b){switch(b.label){case 0:return r=[Am({},e)],m={},[4,Qm(e.body,t)];case 1:switch(n=Am.apply(void 0,r.concat([(m.body=b.sent(),m)])),o="UnknownError",s=n.body.__type.split("#"),o=void 0===s[1]?s[0]:s[1]){case"InvalidArgumentException":case"com.amazonaws.kinesis#InvalidArgumentException":return[3,2];case"KMSAccessDeniedException":case"com.amazonaws.kinesis#KMSAccessDeniedException":return[3,4];case"KMSDisabledException":case"com.amazonaws.kinesis#KMSDisabledException":return[3,6];case"KMSInvalidStateException":case"com.amazonaws.kinesis#KMSInvalidStateException":return[3,8];case"KMSNotFoundException":case"com.amazonaws.kinesis#KMSNotFoundException":return[3,10];case"KMSOptInRequired":case"com.amazonaws.kinesis#KMSOptInRequired":return[3,12];case"KMSThrottlingException":case"com.amazonaws.kinesis#KMSThrottlingException":return[3,14];case"ProvisionedThroughputExceededException":case"com.amazonaws.kinesis#ProvisionedThroughputExceededException":return[3,16];case"ResourceNotFoundException":case"com.amazonaws.kinesis#ResourceNotFoundException":return[3,18]}return[3,20];case 2:return a=[{}],[4,xm(n,t)];case 3:return i=Am.apply(void 0,[Am.apply(void 0,a.concat([b.sent()])),{name:o,$metadata:$m(e)}]),[3,21];case 4:return u=[{}],[4,km(n,t)];case 5:return i=Am.apply(void 0,[Am.apply(void 0,u.concat([b.sent()])),{name:o,$metadata:$m(e)}]),[3,21];case 6:return c=[{}],[4,Pm(n,t)];case 7:return i=Am.apply(void 0,[Am.apply(void 0,c.concat([b.sent()])),{name:o,$metadata:$m(e)}]),[3,21];case 8:return l=[{}],[4,Nm(n,t)];case 9:return i=Am.apply(void 0,[Am.apply(void 0,l.concat([b.sent()])),{name:o,$metadata:$m(e)}]),[3,21];case 10:return f=[{}],[4,Lm(n,t)];case 11:return i=Am.apply(void 0,[Am.apply(void 0,f.concat([b.sent()])),{name:o,$metadata:$m(e)}]),[3,21];case 12:return d=[{}],[4,Mm(n,t)];case 13:return i=Am.apply(void 0,[Am.apply(void 0,d.concat([b.sent()])),{name:o,$metadata:$m(e)}]),[3,21];case 14:return h=[{}],[4,Rm(n,t)];case 15:return i=Am.apply(void 0,[Am.apply(void 0,h.concat([b.sent()])),{name:o,$metadata:$m(e)}]),[3,21];case 16:return p=[{}],[4,Dm(n,t)];case 17:return i=Am.apply(void 0,[Am.apply(void 0,p.concat([b.sent()])),{name:o,$metadata:$m(e)}]),[3,21];case 18:return v=[{}],[4,Um(n,t)];case 19:return i=Am.apply(void 0,[Am.apply(void 0,v.concat([b.sent()])),{name:o,$metadata:$m(e)}]),[3,21];case 20:g=n.body,o=g.code||g.Code||o,i=Am(Am({},g),{name:""+o,message:g.message||g.Message||o,$fault:"client",$metadata:$m(e)}),b.label=21;case 21:return y=i.message||i.Message||o,i.message=y,delete i.Message,[2,Promise.reject(Object.assign(new Error(y),i))]}}))}))},xm=function(e,t){return Cm(void 0,void 0,void 0,(function(){var n,r;return Tm(this,(function(i){return n=e.body,r=Fm(n,t),[2,Am({name:"InvalidArgumentException",$fault:"client",$metadata:$m(e)},r)]}))}))},km=function(e,t){return Cm(void 0,void 0,void 0,(function(){var n,r;return Tm(this,(function(i){return n=e.body,r=Bm(n,t),[2,Am({name:"KMSAccessDeniedException",$fault:"client",$metadata:$m(e)},r)]}))}))},Pm=function(e,t){return Cm(void 0,void 0,void 0,(function(){var n,r;return Tm(this,(function(i){return n=e.body,r=zm(n,t),[2,Am({name:"KMSDisabledException",$fault:"client",$metadata:$m(e)},r)]}))}))},Nm=function(e,t){return Cm(void 0,void 0,void 0,(function(){var n,r;return Tm(this,(function(i){return n=e.body,r=qm(n,t),[2,Am({name:"KMSInvalidStateException",$fault:"client",$metadata:$m(e)},r)]}))}))},Lm=function(e,t){return Cm(void 0,void 0,void 0,(function(){var n,r;return Tm(this,(function(i){return n=e.body,r=Km(n,t),[2,Am({name:"KMSNotFoundException",$fault:"client",$metadata:$m(e)},r)]}))}))},Mm=function(e,t){return Cm(void 0,void 0,void 0,(function(){var n,r;return Tm(this,(function(i){return n=e.body,r=Vm(n,t),[2,Am({name:"KMSOptInRequired",$fault:"client",$metadata:$m(e)},r)]}))}))},Rm=function(e,t){return Cm(void 0,void 0,void 0,(function(){var n,r;return Tm(this,(function(i){return n=e.body,r=Hm(n,t),[2,Am({name:"KMSThrottlingException",$fault:"client",$metadata:$m(e)},r)]}))}))},Dm=function(e,t){return Cm(void 0,void 0,void 0,(function(){var n,r;return Tm(this,(function(i){return n=e.body,r=Gm(n,t),[2,Am({name:"ProvisionedThroughputExceededException",$fault:"client",$metadata:$m(e)},r)]}))}))},Um=function(e,t){return Cm(void 0,void 0,void 0,(function(){var n,r;return Tm(this,(function(i){return n=e.body,r=Ym(n,t),[2,Am({name:"ResourceNotFoundException",$fault:"client",$metadata:$m(e)},r)]}))}))},jm=function(e,t){return e.map((function(e){return function(e,t){return Am(Am(Am({},void 0!==e.Data&&{Data:t.base64Encoder(e.Data)}),void 0!==e.ExplicitHashKey&&{ExplicitHashKey:e.ExplicitHashKey}),void 0!==e.PartitionKey&&{PartitionKey:e.PartitionKey})}(e,t)}))},Fm=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Bm=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},zm=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},qm=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Km=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Vm=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Hm=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Gm=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Wm=function(e,t){return(e||[]).map((function(e){return function(e,t){return{ErrorCode:void 0!==e.ErrorCode&&null!==e.ErrorCode?e.ErrorCode:void 0,ErrorMessage:void 0!==e.ErrorMessage&&null!==e.ErrorMessage?e.ErrorMessage:void 0,SequenceNumber:void 0!==e.SequenceNumber&&null!==e.SequenceNumber?e.SequenceNumber:void 0,ShardId:void 0!==e.ShardId&&null!==e.ShardId?e.ShardId:void 0}}(e)}))},Ym=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},$m=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},Jm=function(e,t,n,r,i){return Cm(void 0,void 0,void 0,(function(){var o,s,a,u,c,l;return Tm(this,(function(f){switch(f.label){case 0:return[4,e.endpoint()];case 1:return o=f.sent(),s=o.hostname,a=o.protocol,u=void 0===a?"https":a,c=o.port,l={protocol:u,hostname:s,port:c,method:"POST",path:n,headers:t},void 0!==r&&(l.hostname=r),void 0!==i&&(l.body=i),[2,new Ze(l)]}}))}))},Qm=function(e,t){return function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},Zm=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Jg(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ct(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.logger,o="KinesisClient",s="PutRecordsCommand",a={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:um.filterSensitiveLog,outputFilterSensitiveLog:lm.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var u=t.requestHandler;return r.resolve((function(e){return u.handle(e.request,n||{})}),a)},t.prototype.serialize=function(e,t){return function(e,t){return Cm(void 0,void 0,void 0,(function(){var n,r;return Tm(this,(function(i){return n={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"Kinesis_20131202.PutRecords"},r=JSON.stringify(function(e,t){return Am(Am({},void 0!==e.Records&&{Records:jm(e.Records,t)}),void 0!==e.StreamName&&{StreamName:e.StreamName})}(e,t)),[2,Jm(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Cm(void 0,void 0,void 0,(function(){var n,r,i;return Tm(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,Om(e,t)]:[4,Qm(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{EncryptionType:void 0!==e.EncryptionType&&null!==e.EncryptionType?e.EncryptionType:void 0,FailedRecordCount:void 0!==e.FailedRecordCount&&null!==e.FailedRecordCount?e.FailedRecordCount:void 0,Records:void 0!==e.Records&&null!==e.Records?Wm(e.Records,t):void 0}}(n,t),i=Am({$metadata:$m(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Pt);const Xm=JSON.parse('{"u2":"@aws-sdk/client-kinesis","i8":"1.0.0-rc.4"}');var eb=n(4079),tb=function(){function e(e){if(this.bytes=e,8!==e.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}return e.fromNumber=function(t){if(t>0x8000000000000000||t<-0x8000000000000000)throw new Error(t+" is too large (or, if negative, too small) to represent as an Int64");for(var n=new Uint8Array(8),r=7,i=Math.abs(Math.round(t));r>-1&&i>0;r--,i/=256)n[r]=i;return t<0&&nb(n),new e(n)},e.prototype.valueOf=function(){var e=this.bytes.slice(0),t=128&e[0];return t&&nb(e),parseInt(yr(e),16)*(t?-1:1)},e.prototype.toString=function(){return String(this.valueOf())},e}();function nb(e){for(var t=0;t<8;t++)e[t]^=255;for(t=7;t>-1&&(e[t]++,0===e[t]);t--);}var rb,ib=function(){function e(e,t){this.toUtf8=e,this.fromUtf8=t}return e.prototype.format=function(e){var t,n,r,i,o=[];try{for(var s=(0,q.__values)(Object.keys(e)),a=s.next();!a.done;a=s.next()){var u=a.value,c=this.fromUtf8(u);o.push(Uint8Array.from([c.byteLength]),c,this.formatHeaderValue(e[u]))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}var l=new Uint8Array(o.reduce((function(e,t){return e+t.byteLength}),0)),f=0;try{for(var d=(0,q.__values)(o),h=d.next();!h.done;h=d.next()){var p=h.value;l.set(p,f),f+=p.byteLength}}catch(e){r={error:e}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return l},e.prototype.formatHeaderValue=function(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":var t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":var n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":var r=new Uint8Array(9);return r[0]=5,r.set(e.value.bytes,1),r;case"binary":var i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);var o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":var s=this.fromUtf8(e.value),a=new DataView(new ArrayBuffer(3+s.byteLength));a.setUint8(0,7),a.setUint16(1,s.byteLength,!1);var u=new Uint8Array(a.buffer);return u.set(s,3),u;case"timestamp":var c=new Uint8Array(9);return c[0]=8,c.set(tb.fromNumber(e.value.valueOf()).bytes,1),c;case"uuid":if(!pb.test(e.value))throw new Error("Invalid UUID received: "+e.value);var l=new Uint8Array(17);return l[0]=9,l.set(function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var r=e.substr(n,2).toLowerCase();if(!(r in pr))throw new Error("Cannot decode unrecognized sequence "+r+" as hexadecimal");t[n/2]=pr[r]}return t}(e.value.replace(/\-/g,"")),1),l}},e.prototype.parse=function(e){for(var t={},n=0;n<e.byteLength;){var r=e.getUint8(n++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,r));switch(n+=r,e.getUint8(n++)){case 0:t[i]={type:ob,value:!0};break;case 1:t[i]={type:ob,value:!1};break;case 2:t[i]={type:sb,value:e.getInt8(n++)};break;case 3:t[i]={type:ab,value:e.getInt16(n,!1)},n+=2;break;case 4:t[i]={type:ub,value:e.getInt32(n,!1)},n+=4;break;case 5:t[i]={type:cb,value:new tb(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:var o=e.getUint16(n,!1);n+=2,t[i]={type:lb,value:new Uint8Array(e.buffer,e.byteOffset+n,o)},n+=o;break;case 7:var s=e.getUint16(n,!1);n+=2,t[i]={type:fb,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,s))},n+=s;break;case 8:t[i]={type:db,value:new Date(new tb(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:var a=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,t[i]={type:hb,value:yr(a.subarray(0,4))+"-"+yr(a.subarray(4,6))+"-"+yr(a.subarray(6,8))+"-"+yr(a.subarray(8,10))+"-"+yr(a.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return t},e}();!function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"}(rb||(rb={}));var ob="boolean",sb="byte",ab="short",ub="integer",cb="long",lb="binary",fb="string",db="timestamp",hb="uuid",pb=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,vb=function(){function e(e,t){this.headerMarshaller=new ib(e,t)}return e.prototype.marshall=function(e){var t=e.headers,n=e.body,r=this.headerMarshaller.format(t),i=r.byteLength+n.byteLength+16,o=new Uint8Array(i),s=new DataView(o.buffer,o.byteOffset,o.byteLength),a=new eb.Bi;return s.setUint32(0,i,!1),s.setUint32(4,r.byteLength,!1),s.setUint32(8,a.update(o.subarray(0,8)).digest(),!1),o.set(r,12),o.set(n,r.byteLength+12),s.setUint32(i-4,a.update(o.subarray(8,i-4)).digest(),!1),o},e.prototype.unmarshall=function(e){var t=function(e){var t=e.byteLength,n=e.byteOffset,r=e.buffer;if(t<16)throw new Error("Provided message too short to accommodate event stream message overhead");var i=new DataView(r,n,t),o=i.getUint32(0,!1);if(t!==o)throw new Error("Reported message length does not match received message length");var s=i.getUint32(4,!1),a=i.getUint32(8,!1),u=i.getUint32(t-4,!1),c=(new eb.Bi).update(new Uint8Array(r,n,8));if(a!==c.digest())throw new Error("The prelude checksum specified in the message ("+a+") does not match the calculated CRC32 checksum ("+c.digest()+")");if(c.update(new Uint8Array(r,n+8,t-12)),u!==c.digest())throw new Error("The message checksum ("+c.digest()+") did not match the expected value of "+u);return{headers:new DataView(r,n+8+4,s),body:new Uint8Array(r,n+8+4+s,o-s-16)}}(e),n=t.headers,r=t.body;return{headers:this.headerMarshaller.parse(n),body:r}},e.prototype.formatHeaders=function(e){return this.headerMarshaller.format(e)},e}(),gb=function(){function e(e){var t=e.utf8Encoder,n=e.utf8Decoder;this.eventMarshaller=new vb(t,n),this.utfEncoder=t}return e.prototype.deserialize=function(e,t){var n,r,i,o,s,a,u;return function(e,t){var n;return(n={})[Symbol.asyncIterator]=function(){return(0,q.__asyncGenerator)(this,arguments,(function(){var n,r,i,o,s,a,u,c,l,f,d,h,p,v,g,y,m;return(0,q.__generator)(this,(function(b){switch(b.label){case 0:b.trys.push([0,12,13,18]),n=(0,q.__asyncValues)(e),b.label=1;case 1:return[4,(0,q.__await)(n.next())];case 2:if((r=b.sent()).done)return[3,11];if(i=r.value,o=t.eventMarshaller.unmarshall(i),"error"!==(s=o.headers[":message-type"].value))return[3,3];throw(a=new Error(o.headers[":error-message"].value||"UnknownError")).name=o.headers[":error-code"].value,a;case 3:return"exception"!==s?[3,5]:(u=o.headers[":exception-type"].value,(v={})[u]=o,c=v,[4,(0,q.__await)(t.deserializer(c))]);case 4:if((l=b.sent()).$unknown)throw(f=new Error(t.toUtf8(o.body))).name=u,f;throw l[u];case 5:return"event"!==s?[3,9]:((g={})[o.headers[":event-type"].value]=o,d=g,[4,(0,q.__await)(t.deserializer(d))]);case 6:return(h=b.sent()).$unknown?[3,10]:[4,(0,q.__await)(h)];case 7:return[4,b.sent()];case 8:return b.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+o.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return p=b.sent(),y={error:p},[3,18];case 13:return b.trys.push([13,,16,17]),r&&!r.done&&(m=n.return)?[4,(0,q.__await)(m.call(n))]:[3,15];case 14:b.sent(),b.label=15;case 15:return[3,17];case 16:if(y)throw y.error;return[7];case 17:return[7];case 18:return[2]}}))}))},n}((n=e,i=0,o=0,s=null,a=null,u=function(e){if("number"!=typeof e)throw new Error("Attempted to allocate an event message where size was not a number: "+e);i=e,o=4,s=new Uint8Array(e),new DataView(s.buffer).setUint32(0,e,!1)},(r={})[Symbol.asyncIterator]=function(){return(0,q.__asyncGenerator)(this,arguments,(function(){var e,t,r,c,l,f,d,h;return(0,q.__generator)(this,(function(p){switch(p.label){case 0:e=n[Symbol.asyncIterator](),p.label=1;case 1:return[4,(0,q.__await)(e.next())];case 2:return t=p.sent(),r=t.value,t.done?i?[3,4]:[4,(0,q.__await)(void 0)]:[3,10];case 3:return[2,p.sent()];case 4:return i!==o?[3,7]:[4,(0,q.__await)(s)];case 5:return[4,p.sent()];case 6:return p.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,(0,q.__await)(void 0)];case 9:return[2,p.sent()];case 10:c=r.length,l=0,p.label=11;case 11:if(!(l<c))return[3,15];if(!s){if(f=c-l,a||(a=new Uint8Array(4)),d=Math.min(4-o,f),a.set(r.slice(l,l+d),o),l+=d,(o+=d)<4)return[3,15];u(new DataView(a.buffer).getUint32(0,!1)),a=null}return h=Math.min(i-o,c-l),s.set(r.slice(l,l+h),o),o+=h,l+=h,i&&i===o?[4,(0,q.__await)(s)]:[3,14];case 12:return[4,p.sent()];case 13:p.sent(),s=null,i=0,o=0,p.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}}))}))},r),{eventMarshaller:this.eventMarshaller,deserializer:t,toUtf8:this.utfEncoder})},e.prototype.serialize=function(e,t){var n,r=this;return(n={})[Symbol.asyncIterator]=function(){return(0,q.__asyncGenerator)(this,arguments,(function(){var n,i,o,s,a,u,c;return(0,q.__generator)(this,(function(l){switch(l.label){case 0:l.trys.push([0,7,8,13]),n=(0,q.__asyncValues)(e),l.label=1;case 1:return[4,(0,q.__await)(n.next())];case 2:return(i=l.sent()).done?[3,6]:(o=i.value,s=r.eventMarshaller.marshall(t(o)),[4,(0,q.__await)(s)]);case 3:return[4,l.sent()];case 4:l.sent(),l.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return a=l.sent(),u={error:a},[3,13];case 8:return l.trys.push([8,,11,12]),i&&!i.done&&(c=n.return)?[4,(0,q.__await)(c.call(n))]:[3,10];case 9:l.sent(),l.label=10;case 10:return[3,12];case 11:if(u)throw u.error;return[7];case 12:return[7];case 13:return[4,(0,q.__await)(new Uint8Array(0))];case 14:return[4,l.sent()];case 15:return l.sent(),[2]}}))}))},n},e}(),yb=function(){function e(e){var t=e.utf8Encoder,n=e.utf8Decoder;this.eventMarshaller=new vb(t,n),this.universalMarshaller=new gb({utf8Decoder:n,utf8Encoder:t})}return e.prototype.deserialize=function(e,t){var n,r,i=mb(e)?(n=e,(r={})[Symbol.asyncIterator]=function(){return(0,q.__asyncGenerator)(this,arguments,(function(){var e,t,r,i;return(0,q.__generator)(this,(function(o){switch(o.label){case 0:e=n.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,(0,q.__await)(e.read())];case 3:return t=o.sent(),r=t.done,i=t.value,r?[4,(0,q.__await)(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,(0,q.__await)(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}}))}))},r):e;return this.universalMarshaller.deserialize(i,t)},e.prototype.serialize=function(e,t){var n,r=this.universalMarshaller.serialize(e,t);return"function"==typeof ReadableStream?(n=r[Symbol.asyncIterator](),new ReadableStream({pull:function(e){return(0,q.__awaiter)(this,void 0,void 0,(function(){var t,r,i;return(0,q.__generator)(this,(function(o){switch(o.label){case 0:return[4,n.next()];case 1:return t=o.sent(),r=t.done,i=t.value,r?[2,e.close()]:(e.enqueue(i),[2])}}))}))}})):r},e}(),mb=function(e){return"function"==typeof ReadableStream&&e instanceof ReadableStream},bb=function(e){return new yb(e)},wb="kinesis.{region}.amazonaws.com",Sb=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),_b=new Set(["cn-north-1","cn-northwest-1"]),Eb=new Set(["us-iso-east-1"]),Ib=new Set(["us-isob-east-1"]),Ab=new Set(["us-gov-east-1","us-gov-west-1"]),Cb=Am(Am({},{apiVersion:"2013-12-02",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-east-1":n={hostname:"kinesis.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"kinesis.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"kinesis.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"kinesis.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"kinesis.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"kinesis.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":n={hostname:"kinesis.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"kinesis.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"kinesis.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"kinesis.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"kinesis.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"kinesis.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"kinesis.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"kinesis.eu-west-3.amazonaws.com",partition:"aws"};break;case"me-south-1":n={hostname:"kinesis.me-south-1.amazonaws.com",partition:"aws"};break;case"sa-east-1":n={hostname:"kinesis.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"kinesis.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"kinesis.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"kinesis.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":n={hostname:"kinesis.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":n={hostname:"kinesis.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":n={hostname:"kinesis.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":n={hostname:"kinesis.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"kinesis.us-west-2.amazonaws.com",partition:"aws"};break;default:Sb.has(e)&&(n={hostname:wb.replace("{region}",e),partition:"aws"}),_b.has(e)&&(n={hostname:"kinesis.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Eb.has(e)&&(n={hostname:"kinesis.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Ib.has(e)&&(n={hostname:"kinesis.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),Ab.has(e)&&(n={hostname:"kinesis.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:wb.replace("{region}",e),partition:"aws"})}return Promise.resolve(n)},signingName:"kinesis"}),{runtime:"browser",base64Decoder:cn,base64Encoder:ln,bodyLengthChecker:xn,credentialDefaultProvider:hn("Credential is missing"),defaultUserAgent:kn(Xm.u2,Xm.i8),eventStreamSerdeProvider:bb,maxAttempts:3,region:hn("Region is missing"),requestHandler:new en,sha256:Jt.Sha256,streamCollector:fn,urlParser:On,utf8Decoder:Pn,utf8Encoder:Nn}),Tb=function(e){return(0,q.__assign)((0,q.__assign)({},e),{eventStreamMarshaller:e.eventStreamSerdeProvider(e)})},Ob=function(e){function t(t){var n=this,r=Am(Am({},Cb),t),i=Kn(r),o=Or(Bn(i)),s=An(o),a=Tb(s);return(n=e.call(this,a)||this).config=a,n.middlewareStack.use(Nr(n.config)),n.middlewareStack.use(vn(n.config)),n.middlewareStack.use(Mr(n.config)),n.middlewareStack.use(Gn(n.config)),n.middlewareStack.use(Yn(n.config)),n.middlewareStack.use(Jn(n.config)),n}return Jg(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(kt),xb=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},kb=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Pb=new i.k("AWSKinesisProvider"),Nb=function(){function e(e){this._buffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._setupTimer()}return e.prototype._setupTimer=function(){var e=this;this._timer&&clearInterval(this._timer);var t=this._config,n=t.flushSize,r=t.flushInterval;this._timer=setInterval((function(){for(var t=e._buffer.length<n?e._buffer.length:n,r=[],i=0;i<t;i+=1){var o=e._buffer.shift();r.push(o)}e._sendFromBuffer(r)}),r)},e.prototype.getCategory=function(){return"Analytics"},e.prototype.getProviderName=function(){return"AWSKinesis"},e.prototype.configure=function(e){Pb.debug("configure Analytics",e);var t=e||{};return this._config=Object.assign({},this._config,t),this._setupTimer(),this._config},e.prototype.record=function(e){return xb(this,void 0,void 0,(function(){var t;return kb(this,(function(n){switch(n.label){case 0:return[4,this._getCredentials()];case 1:return(t=n.sent())?(Object.assign(e,{config:this._config,credentials:t}),[2,this._putToBuffer(e)]):[2,Promise.resolve(!1)]}}))}))},e.prototype.updateEndpoint=function(){return Pb.debug("updateEndpoint is not implemented in Kinesis provider"),Promise.resolve(!0)},e.prototype._putToBuffer=function(e){return this._buffer.length<1e3?(this._buffer.push(e),Promise.resolve(!0)):(Pb.debug("exceed analytics events buffer size"),Promise.reject(!1))},e.prototype._sendFromBuffer=function(e){for(var t=this,n=[],r=null,i=[],o=0;o<e.length;o+=1){var s=e[o].credentials;0===o?(i.push(e[o]),r=s):s.sessionToken===r.sessionToken&&s.identityId===r.identityId?(Pb.debug("no change for cred, put event in the same group"),i.push(e[o])):(n.push(i),(i=[]).push(e[o]),r=s)}n.push(i),n.map((function(e){t._sendEvents(e)}))},e.prototype._sendEvents=function(e){var t=this;if(0!==e.length){var n=e[0],r=n.config,i=n.credentials;if(!this._init(r,i))return!1;var o={};e.map((function(e){var t=e.event,n=t.streamName;void 0===o[n]&&(o[n]=[]);var r=t.data&&"string"!=typeof t.data?JSON.stringify(t.data):t.data,s={Data:Pn(r),PartitionKey:t.partitionKey||"partition-"+i.identityId};o[n].push(s)})),Object.keys(o).map((function(e){return xb(t,void 0,void 0,(function(){var t,n;return kb(this,(function(r){switch(r.label){case 0:Pb.debug("putting records to kinesis with records",o[e]),r.label=1;case 1:return r.trys.push([1,3,,4]),t=new Zm({Records:o[e],StreamName:e}),[4,this._kinesis.send(t)];case 2:return r.sent(),Pb.debug("Upload records to stream",e),[3,4];case 3:return n=r.sent(),Pb.debug("Failed to upload records to Kinesis",n),[3,4];case 4:return[2]}}))}))}))}},e.prototype._init=function(e,t){if(Pb.debug("init clients"),this._kinesis&&this._config.credentials&&this._config.credentials.sessionToken===t.sessionToken&&this._config.credentials.identityId===t.identityId)return Pb.debug("no change for analytics config, directly return from init"),!0;this._config.credentials=t;var n=e.region,r=e.endpoint;return this._initKinesis(n,r,t)},e.prototype._initKinesis=function(e,t,n){return Pb.debug("initialize kinesis with credentials",n),this._kinesis=new Ob({region:e,credentials:n,customUserAgent:c(),endpoint:t}),!0},e.prototype._getCredentials=function(){var e=this;return Br.get().then((function(t){return t?(Pb.debug("set credentials for analytics",e._config.credentials),Br.shear(t)):null})).catch((function(e){return Pb.debug("ensure credentials error",e),null}))},e}(),Lb=function(e,t){return(Lb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Mb(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Lb(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Rb,Db,Ub,jb,Fb,Bb,zb,qb,Kb,Vb,Hb,Gb,Wb,Yb,$b,Jb,Qb,Zb,Xb,ew,tw,nw,rw,iw,ow,sw,aw,uw,cw,lw,fw,dw,hw,pw,vw,gw,yw,mw,bw,ww,Sw,_w,Ew,Iw,Aw,Cw,Tw,Ow,xw,kw,Pw,Nw,Lw,Mw,Rw,Dw,Uw,jw,Fw,Bw,zw,qw,Kw,Vw,Hw,Gw,Ww,Yw,$w,Jw,Qw,Zw,Xw,eS,tS,nS,rS,iS,oS,sS,aS,uS,cS,lS,fS,dS,hS,pS,vS,gS,yS,mS,bS,wS,SS,_S,ES,IS,AS,CS,TS,OS=function(){return(OS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function xS(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function kS(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create,Object.create,function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Rb||(Rb={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Db||(Db={})),function(e){e.GZIP="GZIP",e.HADOOP_SNAPPY="HADOOP_SNAPPY",e.SNAPPY="Snappy",e.UNCOMPRESSED="UNCOMPRESSED",e.ZIP="ZIP"}(Ub||(Ub={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(jb||(jb={})),function(e){e.GZIP="GZIP",e.NONE="NONE"}(Fb||(Fb={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Bb||(Bb={})),function(e){e.AWS_OWNED_CMK="AWS_OWNED_CMK",e.CUSTOMER_MANAGED_CMK="CUSTOMER_MANAGED_CMK"}(zb||(zb={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(qb||(qb={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Kb||(Kb={})),function(e){e.BUFFER_INTERVAL_IN_SECONDS="BufferIntervalInSeconds",e.BUFFER_SIZE_IN_MB="BufferSizeInMBs",e.LAMBDA_ARN="LambdaArn",e.LAMBDA_NUMBER_OF_RETRIES="NumberOfRetries",e.ROLE_ARN="RoleArn"}(Vb||(Vb={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Hb||(Hb={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Gb||(Gb={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Wb||(Wb={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Yb||(Yb={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}($b||($b={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Jb||(Jb={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Qb||(Qb={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Zb||(Zb={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Xb||(Xb={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(ew||(ew={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(tw||(tw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(nw||(nw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(rw||(rw={})),function(e){e.NONE="NONE",e.SNAPPY="SNAPPY",e.ZLIB="ZLIB"}(iw||(iw={})),function(e){e.V0_11="V0_11",e.V0_12="V0_12"}(ow||(ow={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(sw||(sw={})),function(e){e.GZIP="GZIP",e.SNAPPY="SNAPPY",e.UNCOMPRESSED="UNCOMPRESSED"}(aw||(aw={})),function(e){e.V1="V1",e.V2="V2"}(uw||(uw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(cw||(cw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(lw||(lw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(fw||(fw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(dw||(dw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(hw||(hw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(pw||(pw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(vw||(vw={})),function(e){e.filterSensitiveLog=function(e){return OS(OS(OS({},e),e.Url&&{Url:Bt}),e.AccessKey&&{AccessKey:Bt})}}(gw||(gw={})),function(e){e.filterSensitiveLog=function(e){return OS(OS(OS({},e),e.AttributeName&&{AttributeName:Bt}),e.AttributeValue&&{AttributeValue:Bt})}}(yw||(yw={})),function(e){e.filterSensitiveLog=function(e){return OS(OS({},e),e.CommonAttributes&&{CommonAttributes:e.CommonAttributes.map((function(e){return yw.filterSensitiveLog(e)}))})}}(mw||(mw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(bw||(bw={})),function(e){e.filterSensitiveLog=function(e){return OS(OS(OS({},e),e.RequestConfiguration&&{RequestConfiguration:mw.filterSensitiveLog(e.RequestConfiguration)}),e.EndpointConfiguration&&{EndpointConfiguration:gw.filterSensitiveLog(e.EndpointConfiguration)})}}(ww||(ww={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Sw||(Sw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(_w||(_w={})),function(e){e.filterSensitiveLog=function(e){return OS(OS(OS({},e),e.Password&&{Password:Bt}),e.Username&&{Username:Bt})}}(Ew||(Ew={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Iw||(Iw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Aw||(Aw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Cw||(Cw={})),function(e){e.filterSensitiveLog=function(e){return OS(OS(OS({},e),e.HttpEndpointDestinationConfiguration&&{HttpEndpointDestinationConfiguration:ww.filterSensitiveLog(e.HttpEndpointDestinationConfiguration)}),e.RedshiftDestinationConfiguration&&{RedshiftDestinationConfiguration:Ew.filterSensitiveLog(e.RedshiftDestinationConfiguration)})}}(Tw||(Tw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Ow||(Ow={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(xw||(xw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(kw||(kw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Pw||(Pw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Nw||(Nw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Lw||(Lw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Mw||(Mw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Rw||(Rw={})),function(e){e.CREATE_ENI_FAILED="CREATE_ENI_FAILED",e.CREATE_KMS_GRANT_FAILED="CREATE_KMS_GRANT_FAILED",e.DELETE_ENI_FAILED="DELETE_ENI_FAILED",e.DISABLED_KMS_KEY="DISABLED_KMS_KEY",e.ENI_ACCESS_DENIED="ENI_ACCESS_DENIED",e.INVALID_KMS_KEY="INVALID_KMS_KEY",e.KMS_ACCESS_DENIED="KMS_ACCESS_DENIED",e.KMS_KEY_NOT_FOUND="KMS_KEY_NOT_FOUND",e.KMS_OPT_IN_REQUIRED="KMS_OPT_IN_REQUIRED",e.RETIRE_KMS_GRANT_FAILED="RETIRE_KMS_GRANT_FAILED",e.SECURITY_GROUP_ACCESS_DENIED="SECURITY_GROUP_ACCESS_DENIED",e.SECURITY_GROUP_NOT_FOUND="SECURITY_GROUP_NOT_FOUND",e.SUBNET_ACCESS_DENIED="SUBNET_ACCESS_DENIED",e.SUBNET_NOT_FOUND="SUBNET_NOT_FOUND",e.UNKNOWN_ERROR="UNKNOWN_ERROR"}(Dw||(Dw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Uw||(Uw={})),function(e){e.DISABLED="DISABLED",e.DISABLING="DISABLING",e.DISABLING_FAILED="DISABLING_FAILED",e.ENABLED="ENABLED",e.ENABLING="ENABLING",e.ENABLING_FAILED="ENABLING_FAILED"}(jw||(jw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Fw||(Fw={})),function(e){e.ACTIVE="ACTIVE",e.CREATING="CREATING",e.CREATING_FAILED="CREATING_FAILED",e.DELETING="DELETING",e.DELETING_FAILED="DELETING_FAILED"}(Bw||(Bw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(zw||(zw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(qw||(qw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Kw||(Kw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Vw||(Vw={})),function(e){e.filterSensitiveLog=function(e){return OS(OS({},e),e.Url&&{Url:Bt})}}(Hw||(Hw={})),function(e){e.filterSensitiveLog=function(e){return OS(OS(OS({},e),e.EndpointConfiguration&&{EndpointConfiguration:Hw.filterSensitiveLog(e.EndpointConfiguration)}),e.RequestConfiguration&&{RequestConfiguration:mw.filterSensitiveLog(e.RequestConfiguration)})}}(Gw||(Gw={})),function(e){e.filterSensitiveLog=function(e){return OS(OS({},e),e.Username&&{Username:Bt})}}(Ww||(Ww={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Yw||(Yw={})),function(e){e.filterSensitiveLog=function(e){return OS(OS(OS({},e),e.HttpEndpointDestinationDescription&&{HttpEndpointDestinationDescription:Gw.filterSensitiveLog(e.HttpEndpointDestinationDescription)}),e.RedshiftDestinationDescription&&{RedshiftDestinationDescription:Ww.filterSensitiveLog(e.RedshiftDestinationDescription)})}}($w||($w={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Jw||(Jw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Qw||(Qw={})),function(e){e.filterSensitiveLog=function(e){return OS(OS({},e),e.Destinations&&{Destinations:e.Destinations.map((function(e){return $w.filterSensitiveLog(e)}))})}}(Zw||(Zw={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(Xw||(Xw={})),function(e){e.filterSensitiveLog=function(e){return OS(OS({},e),e.DeliveryStreamDescription&&{DeliveryStreamDescription:Zw.filterSensitiveLog(e.DeliveryStreamDescription)})}}(eS||(eS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(tS||(tS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(nS||(nS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(rS||(rS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(iS||(iS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(oS||(oS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(sS||(sS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(aS||(aS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(uS||(uS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(cS||(cS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(lS||(lS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(fS||(fS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(dS||(dS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(hS||(hS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(pS||(pS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(vS||(vS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(gS||(gS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(yS||(yS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(mS||(mS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(bS||(bS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(wS||(wS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(SS||(SS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(_S||(_S={})),function(e){e.filterSensitiveLog=function(e){return OS(OS(OS({},e),e.EndpointConfiguration&&{EndpointConfiguration:gw.filterSensitiveLog(e.EndpointConfiguration)}),e.RequestConfiguration&&{RequestConfiguration:mw.filterSensitiveLog(e.RequestConfiguration)})}}(ES||(ES={})),function(e){e.filterSensitiveLog=function(e){return OS(OS(OS({},e),e.Username&&{Username:Bt}),e.Password&&{Password:Bt})}}(IS||(IS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(AS||(AS={})),function(e){e.filterSensitiveLog=function(e){return OS(OS(OS({},e),e.HttpEndpointDestinationUpdate&&{HttpEndpointDestinationUpdate:ES.filterSensitiveLog(e.HttpEndpointDestinationUpdate)}),e.RedshiftDestinationUpdate&&{RedshiftDestinationUpdate:IS.filterSensitiveLog(e.RedshiftDestinationUpdate)})}}(CS||(CS={})),function(e){e.filterSensitiveLog=function(e){return OS({},e)}}(TS||(TS={}));var PS=function(e,t){return xS(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d,h;return kS(this,(function(p){switch(p.label){case 0:return r=[OS({},e)],h={},[4,HS(e.body,t)];case 1:switch(n=OS.apply(void 0,r.concat([(h.body=p.sent(),h)])),o="UnknownError",s=n.body.__type.split("#"),o=void 0===s[1]?s[0]:s[1]){case"InvalidArgumentException":case"com.amazonaws.firehose#InvalidArgumentException":return[3,2];case"InvalidKMSResourceException":case"com.amazonaws.firehose#InvalidKMSResourceException":return[3,4];case"ResourceNotFoundException":case"com.amazonaws.firehose#ResourceNotFoundException":return[3,6];case"ServiceUnavailableException":case"com.amazonaws.firehose#ServiceUnavailableException":return[3,8]}return[3,10];case 2:return a=[{}],[4,NS(n,t)];case 3:return i=OS.apply(void 0,[OS.apply(void 0,a.concat([p.sent()])),{name:o,$metadata:KS(e)}]),[3,11];case 4:return u=[{}],[4,LS(n,t)];case 5:return i=OS.apply(void 0,[OS.apply(void 0,u.concat([p.sent()])),{name:o,$metadata:KS(e)}]),[3,11];case 6:return c=[{}],[4,MS(n,t)];case 7:return i=OS.apply(void 0,[OS.apply(void 0,c.concat([p.sent()])),{name:o,$metadata:KS(e)}]),[3,11];case 8:return l=[{}],[4,RS(n,t)];case 9:return i=OS.apply(void 0,[OS.apply(void 0,l.concat([p.sent()])),{name:o,$metadata:KS(e)}]),[3,11];case 10:f=n.body,o=f.code||f.Code||o,i=OS(OS({},f),{name:""+o,message:f.message||f.Message||o,$fault:"client",$metadata:KS(e)}),p.label=11;case 11:return d=i.message||i.Message||o,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}}))}))},NS=function(e,t){return xS(void 0,void 0,void 0,(function(){var n,r;return kS(this,(function(i){return n=e.body,r=jS(n,t),[2,OS({name:"InvalidArgumentException",$fault:"client",$metadata:KS(e)},r)]}))}))},LS=function(e,t){return xS(void 0,void 0,void 0,(function(){var n,r;return kS(this,(function(i){return n=e.body,r=FS(n,t),[2,OS({name:"InvalidKMSResourceException",$fault:"client",$metadata:KS(e)},r)]}))}))},MS=function(e,t){return xS(void 0,void 0,void 0,(function(){var n,r;return kS(this,(function(i){return n=e.body,r=zS(n,t),[2,OS({name:"ResourceNotFoundException",$fault:"client",$metadata:KS(e)},r)]}))}))},RS=function(e,t){return xS(void 0,void 0,void 0,(function(){var n,r;return kS(this,(function(i){return n=e.body,r=qS(n,t),[2,OS({name:"ServiceUnavailableException",$fault:"server",$metadata:KS(e)},r)]}))}))},DS=function(e,t){return e.map((function(e){return US(e,t)}))},US=function(e,t){return OS({},void 0!==e.Data&&{Data:t.base64Encoder(e.Data)})},jS=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},FS=function(e,t){return{code:void 0!==e.code&&null!==e.code?e.code:void 0,message:void 0!==e.message&&null!==e.message?e.message:void 0}},BS=function(e,t){return(e||[]).map((function(e){return function(e,t){return{ErrorCode:void 0!==e.ErrorCode&&null!==e.ErrorCode?e.ErrorCode:void 0,ErrorMessage:void 0!==e.ErrorMessage&&null!==e.ErrorMessage?e.ErrorMessage:void 0,RecordId:void 0!==e.RecordId&&null!==e.RecordId?e.RecordId:void 0}}(e)}))},zS=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},qS=function(e,t){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},KS=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},VS=function(e,t,n,r,i){return xS(void 0,void 0,void 0,(function(){var o,s,a,u,c,l;return kS(this,(function(f){switch(f.label){case 0:return[4,e.endpoint()];case 1:return o=f.sent(),s=o.hostname,a=o.protocol,u=void 0===a?"https":a,c=o.port,l={protocol:u,hostname:s,port:c,method:"POST",path:n,headers:t},void 0!==r&&(l.hostname=r),void 0!==i&&(l.body=i),[2,new Ze(l)]}}))}))},HS=function(e,t){return function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){return e.length?JSON.parse(e):{}}))},GS=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Mb(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ct(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i=t.logger,o="FirehoseClient",s="PutRecordBatchCommand",a={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:dS.filterSensitiveLog,outputFilterSensitiveLog:pS.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var u=t.requestHandler;return r.resolve((function(e){return u.handle(e.request,n||{})}),a)},t.prototype.serialize=function(e,t){return function(e,t){return xS(void 0,void 0,void 0,(function(){var n,r;return kS(this,(function(i){return n={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"Firehose_20150804.PutRecordBatch"},r=JSON.stringify(function(e,t){return OS(OS({},void 0!==e.DeliveryStreamName&&{DeliveryStreamName:e.DeliveryStreamName}),void 0!==e.Records&&{Records:DS(e.Records,t)})}(e,t)),[2,VS(t,n,"/",void 0,r)]}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return xS(void 0,void 0,void 0,(function(){var n,r,i;return kS(this,(function(o){switch(o.label){case 0:return e.statusCode>=300?[2,PS(e,t)]:[4,HS(e.body,t)];case 1:return n=o.sent(),r=function(e,t){return{Encrypted:void 0!==e.Encrypted&&null!==e.Encrypted?e.Encrypted:void 0,FailedPutCount:void 0!==e.FailedPutCount&&null!==e.FailedPutCount?e.FailedPutCount:void 0,RequestResponses:void 0!==e.RequestResponses&&null!==e.RequestResponses?BS(e.RequestResponses,t):void 0}}(n,t),i=OS({$metadata:KS(e)},r),[2,Promise.resolve(i)]}}))}))}(e,t)},t}(Pt);const WS=JSON.parse('{"u2":"@aws-sdk/client-firehose","i8":"1.0.0-rc.4"}');var YS="firehose.{region}.amazonaws.com",$S=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),JS=new Set(["cn-north-1","cn-northwest-1"]),QS=new Set(["us-iso-east-1"]),ZS=new Set(["us-isob-east-1"]),XS=new Set(["us-gov-east-1","us-gov-west-1"]),e_=OS(OS({},{apiVersion:"2015-08-04",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-east-1":n={hostname:"firehose.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"firehose.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"firehose.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"firehose.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"firehose.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"firehose.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":n={hostname:"firehose.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"firehose.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"firehose.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"firehose.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"firehose.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"firehose.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"firehose.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"firehose.eu-west-3.amazonaws.com",partition:"aws"};break;case"me-south-1":n={hostname:"firehose.me-south-1.amazonaws.com",partition:"aws"};break;case"sa-east-1":n={hostname:"firehose.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"firehose.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"firehose.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"firehose.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":n={hostname:"firehose.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-west-1":n={hostname:"firehose.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"firehose.us-west-2.amazonaws.com",partition:"aws"};break;default:$S.has(e)&&(n={hostname:YS.replace("{region}",e),partition:"aws"}),JS.has(e)&&(n={hostname:"firehose.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),QS.has(e)&&(n={hostname:"firehose.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),ZS.has(e)&&(n={hostname:"firehose.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),XS.has(e)&&(n={hostname:"firehose.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:YS.replace("{region}",e),partition:"aws"})}return Promise.resolve(n)},signingName:"firehose"}),{runtime:"browser",base64Decoder:cn,base64Encoder:ln,bodyLengthChecker:xn,credentialDefaultProvider:hn("Credential is missing"),defaultUserAgent:kn(WS.u2,WS.i8),maxAttempts:3,region:hn("Region is missing"),requestHandler:new en,sha256:Jt.Sha256,streamCollector:fn,urlParser:On,utf8Decoder:Pn,utf8Encoder:Nn}),t_=function(e){function t(t){var n=this,r=OS(OS({},e_),t),i=Kn(r),o=Or(Bn(i)),s=An(o);return(n=e.call(this,s)||this).config=s,n.middlewareStack.use(Nr(n.config)),n.middlewareStack.use(vn(n.config)),n.middlewareStack.use(Mr(n.config)),n.middlewareStack.use(Gn(n.config)),n.middlewareStack.use(Yn(n.config)),n.middlewareStack.use(Jn(n.config)),n}return Mb(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(kt),n_=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),r_=new i.k("AWSKineisFirehoseProvider"),i_=function(e){function t(t){return e.call(this,t)||this}return n_(t,e),t.prototype.getProviderName=function(){return"AWSKinesisFirehose"},t.prototype._sendEvents=function(e){var t=this;if(0!==e.length){var n=e[0],r=n.config,i=n.credentials;if(!this._init(r,i))return!1;var o={};e.map((function(e){var t=e.event,n=t.streamName,r=t.data;void 0===o[n]&&(o[n]=[]);var i=r&&"string"!=typeof r?JSON.stringify(r):r,s={Data:Pn(i)};o[n].push(s)})),Object.keys(o).map((function(e){r_.debug("putting records to kinesis",e,"with records",o[e]),t._kinesisFirehose.send(new GS({Records:o[e],DeliveryStreamName:e})).then((function(t){return r_.debug("Upload records to stream",e)})).catch((function(e){return r_.debug("Failed to upload records to Kinesis",e)}))}))}},t.prototype._init=function(e,t){if(r_.debug("init clients"),this._kinesisFirehose&&this._config.credentials&&this._config.credentials.sessionToken===t.sessionToken&&this._config.credentials.identityId===t.identityId)return r_.debug("no change for analytics config, directly return from init"),!0;this._config.credentials=t;var n=e.region;return this._initFirehose(n,t)},t.prototype._initFirehose=function(e,t){return r_.debug("initialize kinesis firehose with credentials",t),this._kinesisFirehose=new t_({apiVersion:"2015-08-04",region:e,credentials:t}),!0},t}(Nb),o_=function(e,t){return(o_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function s_(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a_,u_,c_,l_,f_,d_,h_,p_,v_,g_,y_,m_,b_,w_,S_,__,E_,I_,A_,C_,T_,O_,x_,k_,P_,N_,L_,M_,R_,D_,U_,j_,F_,B_,z_,q_,K_,V_,H_,G_,W_,Y_,$_,J_,Q_,Z_,X_,eE,tE,nE,rE,iE,oE,sE,aE,uE,cE,lE,fE,dE,hE,pE,vE,gE,yE,mE,bE,wE,SE,_E,EE,IE,AE,CE,TE,OE,xE,kE,PE,NE,LE,ME,RE,DE,UE,jE,FE,BE,zE,qE,KE,VE,HE,GE,WE,YE,$E,JE,QE,ZE,XE,eI,tI,nI,rI,iI,oI,sI,aI,uI,cI,lI,fI,dI,hI,pI,vI,gI,yI,mI,bI,wI,SI,_I,EI,II,AI,CI,TI,OI,xI,kI,PI,NI,LI,MI,RI,DI,UI,jI,FI,BI,zI,qI,KI,VI,HI,GI,WI,YI,$I,JI,QI,ZI,XI,eA,tA,nA,rA,iA,oA,sA,aA,uA,cA,lA,fA,dA,hA,pA,vA,gA,yA,mA,bA,wA,SA,_A,EA,IA,AA,CA,TA,OA,xA,kA,PA,NA,LA,MA,RA,DA,UA,jA,FA,BA,zA,qA,KA,VA,HA,GA,WA,YA,$A,JA,QA,ZA,XA,eC,tC,nC,rC,iC,oC,sC,aC,uC,cC,lC,fC,dC,hC,pC,vC,gC,yC,mC,bC,wC,SC,_C,EC,IC,AC,CC,TC,OC,xC,kC,PC,NC,LC,MC,RC,DC,UC,jC,FC,BC,zC,qC,KC,VC=function(){return(VC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function HC(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function GC(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create,Object.create,function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(a_||(a_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(u_||(u_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(c_||(c_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(l_||(l_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(f_||(f_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(d_||(d_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(h_||(h_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(p_||(p_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(v_||(v_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(g_||(g_={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Bt})}}(y_||(y_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(m_||(m_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(b_||(b_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(w_||(w_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(S_||(S_={})),function(e){e.filterSensitiveLog=function(e){return VC(VC(VC({},e),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Bt}),e.SSEKMSKeyId&&{SSEKMSKeyId:Bt})}}(__||(__={})),function(e){e.filterSensitiveLog=function(e){return VC(VC(VC(VC(VC({},e),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Bt}),e.SSECustomerKey&&{SSECustomerKey:Bt}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:Bt}),e.SSEKMSKeyId&&{SSEKMSKeyId:Bt})}}(E_||(E_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(I_||(I_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(A_||(A_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(C_||(C_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(T_||(T_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(O_||(O_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(x_||(x_={})),function(e){e.filterSensitiveLog=function(e){return VC(VC(VC({},e),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Bt}),e.SSEKMSKeyId&&{SSEKMSKeyId:Bt})}}(k_||(k_={})),function(e){e.filterSensitiveLog=function(e){return VC(VC(VC(VC({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Bt}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Bt}),e.SSECustomerKey&&{SSECustomerKey:Bt})}}(P_||(P_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(N_||(N_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(L_||(L_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(M_||(M_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(R_||(R_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(D_||(D_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(U_||(U_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(j_||(j_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(F_||(F_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(B_||(B_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(z_||(z_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(q_||(q_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(K_||(K_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(V_||(V_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(H_||(H_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(G_||(G_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(W_||(W_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(Y_||(Y_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}($_||($_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(J_||(J_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(Q_||(Q_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(Z_||(Z_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(X_||(X_={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(eE||(eE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(tE||(tE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(nE||(nE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(rE||(rE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(iE||(iE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(oE||(oE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(sE||(sE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(aE||(aE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(uE||(uE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(cE||(cE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(lE||(lE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(fE||(fE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(dE||(dE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(hE||(hE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(pE||(pE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(vE||(vE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(gE||(gE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(yE||(yE={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.KMSMasterKeyID&&{KMSMasterKeyID:Bt})}}(mE||(mE={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:mE.filterSensitiveLog(e.ApplyServerSideEncryptionByDefault)})}}(bE||(bE={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.Rules&&{Rules:e.Rules.map((function(e){return bE.filterSensitiveLog(e)}))})}}(wE||(wE={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:wE.filterSensitiveLog(e.ServerSideEncryptionConfiguration)})}}(SE||(SE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(_E||(_E={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.KeyId&&{KeyId:Bt})}}(EE||(EE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(IE||(IE={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.SSEKMS&&{SSEKMS:EE.filterSensitiveLog(e.SSEKMS)})}}(AE||(AE={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.Encryption&&{Encryption:AE.filterSensitiveLog(e.Encryption)})}}(CE||(CE={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.S3BucketDestination&&{S3BucketDestination:CE.filterSensitiveLog(e.S3BucketDestination)})}}(TE||(TE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(OE||(OE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(xE||(xE={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.Destination&&{Destination:TE.filterSensitiveLog(e.Destination)})}}(kE||(kE={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.InventoryConfiguration&&{InventoryConfiguration:kE.filterSensitiveLog(e.InventoryConfiguration)})}}(PE||(PE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(NE||(NE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(LE||(LE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(ME||(ME={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(RE||(RE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(DE||(DE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(UE||(UE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(jE||(jE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(FE||(FE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(BE||(BE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(zE||(zE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(qE||(qE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(KE||(KE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(VE||(VE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(HE||(HE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(GE||(GE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(WE||(WE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(YE||(YE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}($E||($E={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(JE||(JE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(QE||(QE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(ZE||(ZE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(XE||(XE={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(eI||(eI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(tI||(tI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(nI||(nI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(rI||(rI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(iI||(iI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(oI||(oI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(sI||(sI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(aI||(aI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(uI||(uI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(cI||(cI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(lI||(lI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(fI||(fI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(dI||(dI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(hI||(hI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(pI||(pI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(vI||(vI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(gI||(gI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(yI||(yI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(mI||(mI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(bI||(bI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(wI||(wI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(SI||(SI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(_I||(_I={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(EI||(EI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(II||(II={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(AI||(AI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(CI||(CI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(TI||(TI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(OI||(OI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(xI||(xI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(kI||(kI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(PI||(PI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(NI||(NI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(LI||(LI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(MI||(MI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(RI||(RI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(DI||(DI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(UI||(UI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(jI||(jI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(FI||(FI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(BI||(BI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(zI||(zI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(qI||(qI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(KI||(KI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(VI||(VI={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Bt})}}(HI||(HI={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.SSECustomerKey&&{SSECustomerKey:Bt})}}(GI||(GI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(WI||(WI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(YI||(YI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}($I||($I={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(JI||(JI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(QI||(QI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(ZI||(ZI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(XI||(XI={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(eA||(eA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(tA||(tA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(nA||(nA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(rA||(rA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(iA||(iA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(oA||(oA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(sA||(sA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(aA||(aA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(uA||(uA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(cA||(cA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(lA||(lA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(fA||(fA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(dA||(dA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(hA||(hA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(pA||(pA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(vA||(vA={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Bt})}}(gA||(gA={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.SSECustomerKey&&{SSECustomerKey:Bt})}}(yA||(yA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(mA||(mA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(bA||(bA={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.InventoryConfigurationList&&{InventoryConfigurationList:e.InventoryConfigurationList.map((function(e){return kE.filterSensitiveLog(e)}))})}}(wA||(wA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(SA||(SA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(_A||(_A={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(EA||(EA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(IA||(IA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(AA||(AA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(CA||(CA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(TA||(TA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(OA||(OA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(xA||(xA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(kA||(kA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(PA||(PA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(NA||(NA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(LA||(LA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(MA||(MA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(RA||(RA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(DA||(DA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(UA||(UA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(jA||(jA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(FA||(FA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(BA||(BA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(zA||(zA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(qA||(qA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(KA||(KA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(VA||(VA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(HA||(HA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(GA||(GA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(WA||(WA={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:wE.filterSensitiveLog(e.ServerSideEncryptionConfiguration)})}}(YA||(YA={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.InventoryConfiguration&&{InventoryConfiguration:kE.filterSensitiveLog(e.InventoryConfiguration)})}}($A||($A={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(JA||(JA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(QA||(QA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(ZA||(ZA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(XA||(XA={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(eC||(eC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(tC||(tC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(nC||(nC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(rC||(rC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(iC||(iC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(oC||(oC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(sC||(sC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(aC||(aC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(uC||(uC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(cC||(cC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(lC||(lC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(fC||(fC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(dC||(dC={})),function(e){e.filterSensitiveLog=function(e){return VC(VC(VC({},e),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Bt}),e.SSEKMSKeyId&&{SSEKMSKeyId:Bt})}}(hC||(hC={})),function(e){e.filterSensitiveLog=function(e){return VC(VC(VC(VC({},e),e.SSECustomerKey&&{SSECustomerKey:Bt}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Bt}),e.SSEKMSKeyId&&{SSEKMSKeyId:Bt})}}(pC||(pC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(vC||(vC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(gC||(gC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(yC||(yC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(mC||(mC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(bC||(bC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(wC||(wC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(SC||(SC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(_C||(_C={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(EC||(EC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(IC||(IC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(AC||(AC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(CC||(CC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(TC||(TC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(OC||(OC={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.KMSKeyId&&{KMSKeyId:Bt})}}(xC||(xC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(kC||(kC={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.Encryption&&{Encryption:xC.filterSensitiveLog(e.Encryption)})}}(PC||(PC={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.S3&&{S3:PC.filterSensitiveLog(e.S3)})}}(NC||(NC={})),function(e){e.IGNORE="IGNORE",e.NONE="NONE",e.USE="USE"}(LC||(LC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(MC||(MC={})),function(e){e.DOCUMENT="DOCUMENT",e.LINES="LINES"}(RC||(RC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(DC||(DC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(UC||(UC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(jC||(jC={})),function(e){e.ALWAYS="ALWAYS",e.ASNEEDED="ASNEEDED"}(FC||(FC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(BC||(BC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(zC||(zC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(qC||(qC={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(KC||(KC={}));var WC=function(){function e(e,t){void 0===t&&(t=[]),this.name=e,this.children=t,this.attributes={}}return e.prototype.withName=function(e){return this.name=e,this},e.prototype.addAttribute=function(e,t){return this.attributes[e]=t,this},e.prototype.addChildNode=function(e){return this.children.push(e),this},e.prototype.removeAttribute=function(e){return delete this.attributes[e],this},e.prototype.toString=function(){var e,t,n=Boolean(this.children.length),r="<"+this.name,i=this.attributes;try{for(var o=(0,q.__values)(Object.keys(i)),s=o.next();!s.done;s=o.next()){var a=s.value,u=i[a];null!=u&&(r+=" "+a+'="'+(""+u).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"')}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r+(n?">"+this.children.map((function(e){return e.toString()})).join("")+"</"+this.name+">":"/>")},e}(),YC=function(){function e(e){this.value=e}return e.prototype.toString=function(){return(""+this.value).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},e}(),$C=n(6965),JC=function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return GC(this,(function(l){switch(l.label){case 0:return r=[VC({},e)],c={},[4,hT(e.body,t)];case 1:switch(n=VC.apply(void 0,r.concat([(c.body=l.sent(),c)])),o="UnknownError",o=pT(e,n.body)){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return s=[{}],[4,aT(n,t)];case 3:return i=VC.apply(void 0,[VC.apply(void 0,s.concat([l.sent()])),{name:o,$metadata:lT(e)}]),[3,5];case 4:a=n.body,o=a.code||a.Code||o,i=VC(VC({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:lT(e)}),l.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},QC=function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u;return GC(this,(function(c){switch(c.label){case 0:return r=[VC({},e)],u={},[4,hT(e.body,t)];case 1:return n=VC.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=pT(e,n.body),s=n.body,o=s.code||s.Code||o,i=VC(VC({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:lT(e)}),a=i.message||i.Message||o,i.message=a,delete i.Message,[2,Promise.reject(Object.assign(new Error(a),i))]}}))}))},ZC=function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u;return GC(this,(function(c){switch(c.label){case 0:return r=[VC({},e)],u={},[4,hT(e.body,t)];case 1:return n=VC.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=pT(e,n.body),s=n.body,o=s.code||s.Code||o,i=VC(VC({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:lT(e)}),a=i.message||i.Message||o,i.message=a,delete i.Message,[2,Promise.reject(Object.assign(new Error(a),i))]}}))}))},XC=function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u;return GC(this,(function(c){switch(c.label){case 0:return r=[VC({},e)],u={},[4,hT(e.body,t)];case 1:return n=VC.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=pT(e,n.body),s=n.body,o=s.code||s.Code||o,i=VC(VC({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:lT(e)}),a=i.message||i.Message||o,i.message=a,delete i.Message,[2,Promise.reject(Object.assign(new Error(a),i))]}}))}))},eT=function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return GC(this,(function(l){switch(l.label){case 0:return r=[VC({},e)],c={},[4,hT(e.body,t)];case 1:switch(n=VC.apply(void 0,r.concat([(c.body=l.sent(),c)])),o="UnknownError",o=pT(e,n.body)){case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,2]}return[3,4];case 2:return s=[{}],[4,sT(n,t)];case 3:return i=VC.apply(void 0,[VC.apply(void 0,s.concat([l.sent()])),{name:o,$metadata:lT(e)}]),[3,5];case 4:a=n.body,o=a.code||a.Code||o,i=VC(VC({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:lT(e)}),l.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},tT=function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return GC(this,(function(l){switch(l.label){case 0:return r=[VC({},e)],c={},[4,hT(e.body,t)];case 1:switch(n=VC.apply(void 0,r.concat([(c.body=l.sent(),c)])),o="UnknownError",o=pT(e,n.body)){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return s=[{}],[4,oT(n,t)];case 3:return i=VC.apply(void 0,[VC.apply(void 0,s.concat([l.sent()])),{name:o,$metadata:lT(e)}]),[3,5];case 4:a=n.body,o=a.code||a.Code||o,i=VC(VC({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:lT(e)}),l.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},nT=function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u;return GC(this,(function(c){switch(c.label){case 0:return r=[VC({},e)],u={},[4,hT(e.body,t)];case 1:return n=VC.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=pT(e,n.body),s=n.body,o=s.code||s.Code||o,i=VC(VC({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:lT(e)}),a=i.message||i.Message||o,i.message=a,delete i.Message,[2,Promise.reject(Object.assign(new Error(a),i))]}}))}))},rT=function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u;return GC(this,(function(c){switch(c.label){case 0:return r=[VC({},e)],u={},[4,hT(e.body,t)];case 1:return n=VC.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=pT(e,n.body),s=n.body,o=s.code||s.Code||o,i=VC(VC({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:lT(e)}),a=i.message||i.Message||o,i.message=a,delete i.Message,[2,Promise.reject(Object.assign(new Error(a),i))]}}))}))},iT=function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u;return GC(this,(function(c){switch(c.label){case 0:return r=[VC({},e)],u={},[4,hT(e.body,t)];case 1:return n=VC.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=pT(e,n.body),s=n.body,o=s.code||s.Code||o,i=VC(VC({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:lT(e)}),a=i.message||i.Message||o,i.message=a,delete i.Message,[2,Promise.reject(Object.assign(new Error(a),i))]}}))}))},oT=function(e,t){return HC(void 0,void 0,void 0,(function(){var t;return GC(this,(function(n){return t={name:"NoSuchBucket",$fault:"client",$metadata:lT(e)},e.body,[2,t]}))}))},sT=function(e,t){return HC(void 0,void 0,void 0,(function(){var t;return GC(this,(function(n){return t={name:"NoSuchKey",$fault:"client",$metadata:lT(e)},e.body,[2,t]}))}))},aT=function(e,t){return HC(void 0,void 0,void 0,(function(){var t;return GC(this,(function(n){return t={name:"NoSuchUpload",$fault:"client",$metadata:lT(e)},e.body,[2,t]}))}))},uT=function(e,t){return e.map((function(e){return function(e,t){var n=new WC("CompletedPart");if(void 0!==e.ETag){var r=new WC("ETag").addChildNode(new YC(e.ETag)).withName("ETag");n.addChildNode(r)}return void 0!==e.PartNumber&&(r=new WC("PartNumber").addChildNode(new YC(String(e.PartNumber))).withName("PartNumber"),n.addChildNode(r)),n}(e).withName("member")}))},cT=function(e,t){var n={DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),void 0!==e.ID&&(n.ID=e.ID),n},lT=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},fT=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},dT=function(e){return!(void 0===e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)},hT=function(e,t){return function(e,t){return fT(e,t).then((function(e){return t.utf8Encoder(e)}))}(e,t).then((function(e){if(e.length){var t=(0,$C.parse)(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:function(e,t){return e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")}}),n=Object.keys(t)[0],r=t[n];return r["#text"]&&(r[n]=r["#text"],delete r["#text"]),Mt(r)}return{}}))},pT=function(e,t){return void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":""},vT=function(e){return"string"==typeof e&&0===e.indexOf("arn:")&&e.split(":").length>=6},gT=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,yT=/(\d+\.){3}\d+/,mT=/\.\./,bT=/\./,wT=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,ST=/^s3(-external-1)?\.amazonaws\.com$/,_T="amazonaws.com",ET=function(e){return AT(e)?e.replace(/fips-|-fips/,""):e},IT=function(e){var t=e.match(wT);return[t[2],e.replace(new RegExp("^"+t[0]),"")]},AT=function(e){return e.startsWith("fips-")||e.endsWith("-fips")},CT=function(e,t){return e===t||ET(e)===t||e===ET(t)},TT=function(e,t){if(void 0===t&&(t={tlsCompatible:!0}),e.length>=64||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||(null==t?void 0:t.tlsCompatible)&&bT.test(e))throw new Error("Invalid DNS label "+e)},OT=function(e){var t=e.baseHostname;return wT.test(t)?function(e){return"string"==typeof e.bucketName}(e)?kT(e):xT(e):{bucketEndpoint:!1,hostname:t}},xT=function(e){var t,n=(0,q.__read)((t=e.baseHostname,ST.test(t)?[t.replace(".amazonaws.com",""),_T]:IT(t)),2),r=n[0],i=n[1],o=e.pathStyleEndpoint,s=e.dualstackEndpoint,a=void 0!==s&&s,u=e.accelerateEndpoint,c=void 0!==u&&u,l=e.tlsCompatible,f=void 0===l||l,d=e.useArnRegion,h=e.bucketName,p=e.clientPartition,v=void 0===p?"aws":p,g=e.clientSigningRegion,y=void 0===g?r:g;!function(e){if(e.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!e.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")}({pathStyleEndpoint:o,accelerateEndpoint:c,tlsCompatible:f});var m=h.service,b=h.partition,w=h.accountId,S=h.region,_=h.resource;!function(e){if("s3"!==e&&"s3-outposts"!==e)throw new Error("Expect 's3' or 's3-outposts' in ARN service component")}(m),function(e,t){if(e!==t.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+e+'" but expected "'+t.clientPartition+'"')}(b,{clientPartition:v}),function(e){if(!/[0-9]{12}/.exec(e))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(w),function(e,t){if(""===e)throw new Error("ARN region is empty");if(!t.useArnRegion&&!CT(e,t.clientRegion)&&!CT(e,t.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+t.clientRegion);if(t.useArnRegion&&AT(e))throw new Error("Endpoint does not support FIPS region")}(S,{useArnRegion:d,clientRegion:r,clientSigningRegion:y});var E=function(e){var t=e.includes(":")?":":"/",n=(0,q.__read)(e.split(t)),r=n[0],i=n.slice(1);if("accesspoint"===r){if(1!==i.length||""===i[0])throw new Error("Access Point ARN should have one resource accesspoint"+t+"{accesspointname}");return{accesspointName:i[0]}}if("outpost"===r){if(!i[0]||"accesspoint"!==i[1]||!i[2]||3!==i.length)throw new Error("Outpost ARN should have resource outpost"+t+"{outpostId}"+t+"accesspoint"+t+"{accesspointName}");var o=(0,q.__read)(i,3),s=o[0];return o[1],{outpostId:s,accesspointName:o[2]}}throw new Error("ARN resource should begin with 'accesspoint"+t+"' or 'outpost"+t+"'")}(_),I=E.accesspointName,A=E.outpostId;TT(I+"-"+w,{tlsCompatible:f});var C=d?S:r,T=d?S:y;return A?(function(e){if("s3-outposts"!==e)throw new Error("Expect 's3-posts' in Outpost ARN service component")}(m),TT(A,{tlsCompatible:f}),function(e){if(e)throw new Error("Dualstack endpoint is not supported with Outpost")}(a),function(e){if(AT(null!=e?e:""))throw new Error("FIPS region is not supported with Outpost, got "+e)}(C),{bucketEndpoint:!0,hostname:I+"-"+w+"."+A+".s3-outposts."+C+"."+i,signingRegion:T,signingService:"s3-outposts"}):(function(e){if("s3"!==e)throw new Error("Expect 's3' in Accesspoint ARN service component")}(m),{bucketEndpoint:!0,hostname:I+"-"+w+".s3-accesspoint"+(a?".dualstack":"")+"."+C+"."+i,signingRegion:T})},kT=function(e){var t,n=e.accelerateEndpoint,r=void 0!==n&&n,i=e.baseHostname,o=e.bucketName,s=e.dualstackEndpoint,a=void 0!==s&&s,u=e.pathStyleEndpoint,c=void 0!==u&&u,l=e.tlsCompatible,f=void 0===l||l,d=(0,q.__read)((t=i,ST.test(t)?["us-east-1",_T]:IT(t)),2),h=d[0],p=d[1];return c||!function(e){return gT.test(e)&&!yT.test(e)&&!mT.test(e)}(o)||f&&bT.test(o)?{bucketEndpoint:!1,hostname:a?"s3.dualstack."+h+"."+p:i}:(r?i="s3-accelerate"+(a?".dualstack":"")+"."+p:a&&(i="s3.dualstack."+h+"."+p),{bucketEndpoint:!0,hostname:o+"."+i})},PT={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware"},NT=function(e){return{applyToStack:function(t){t.addRelativeTo(function(e){return function(t,n){return function(r){return(0,q.__awaiter)(void 0,void 0,void 0,(function(){var i,o,s,a,u,c,l,f,d,h,p,v,g,y,m,b,w;return(0,q.__generator)(this,(function(S){switch(S.label){case 0:return i=r.input.Bucket,o=e.bucketEndpoint,s=r.request,Ze.isInstance(s)?e.bucketEndpoint?(s.hostname=i,[3,6]):[3,1]:[3,7];case 1:return vT(i)?(a=function(e){var t=e.split(":");if(t.length<6||"arn"!==t[0])throw new Error("Malformed ARN");var n=(0,q.__read)(t);return{partition:n[1],service:n[2],region:n[3],accountId:n[4],resource:n.slice(5).join(":")}}(i),c=ET,[4,e.region()]):[3,5];case 2:return u=c.apply(void 0,[S.sent()]),[4,e.regionInfoProvider(u)];case 3:return l=S.sent()||{},f=l.partition,d=l.signingRegion,h=void 0===d?u:d,[4,e.useArnRegion()];case 4:return p=S.sent(),v=OT({bucketName:a,baseHostname:s.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===s.protocol,useArnRegion:p,clientPartition:f,clientSigningRegion:h}),b=v.hostname,w=v.bucketEndpoint,g=v.signingRegion,y=v.signingService,g&&g!==h&&(n.signing_region=g),y&&"s3"!==y&&(n.signing_service=y),s.hostname=b,o=w,[3,6];case 5:m=OT({bucketName:i,baseHostname:s.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===s.protocol}),b=m.hostname,w=m.bucketEndpoint,s.hostname=b,o=w,S.label=6;case 6:o&&(s.path=s.path.replace(/^(\/)?[^\/]+/,""),""===s.path&&(s.path="/")),S.label=7;case 7:return[2,t((0,q.__assign)((0,q.__assign)({},r),{request:s}))]}}))}))}}}(e),PT)}}},LT={name:"ssecMiddleware",step:"initialize",tags:["SSE"]},MT=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return(0,q.__awaiter)(t,void 0,void 0,(function(){var t,i,o,s,a,u,c,l,f,d,h,p,v,g,y,m,b;return(0,q.__generator)(this,(function(w){switch(w.label){case 0:t=(0,q.__assign)({},r.input),i=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],w.label=1;case 1:w.trys.push([1,6,7,8]),o=(0,q.__values)(i),s=o.next(),w.label=2;case 2:return s.done?[3,5]:(a=s.value,(u=t[a.target])?(c=ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):"string"==typeof u?e.utf8Decoder(u):new Uint8Array(u),l=e.base64Encoder(c),(f=new e.md5).update(c),d=[(0,q.__assign)({},t)],(b={})[a.target]=l,h=a.hash,v=(p=e).base64Encoder,[4,f.digest()]):[3,4]);case 3:t=q.__assign.apply(void 0,d.concat([(b[h]=v.apply(p,[w.sent()]),b)])),w.label=4;case 4:return s=o.next(),[3,2];case 5:return[3,8];case 6:return g=w.sent(),y={error:g},[3,8];case 7:try{s&&!s.done&&(m=o.return)&&m.call(o)}finally{if(y)throw y.error}return[7];case 8:return[2,n((0,q.__assign)((0,q.__assign)({},r),{input:t}))]}}))}))}}}(e),LT)}}},RT=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return s_(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ct(t,this.serialize,this.deserialize)),this.middlewareStack.use(MT(t)),this.middlewareStack.use(NT(t));var r=e.concat(this.middlewareStack),i=t.logger,o="S3Client",s="GetObjectCommand",a={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:GI.filterSensitiveLog,outputFilterSensitiveLog:HI.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var u=t.requestHandler;return r.resolve((function(e){return u.handle(e.request,n||{})}),a)},t.prototype.serialize=function(e,t){return function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return GC(this,(function(f){switch(f.label){case 0:if(n=VC(VC(VC(VC(VC(VC(VC(VC(VC(VC({"Content-Type":""},dT(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),dT(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),dT(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":e.SSECustomerKeyMD5}),dT(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),dT(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),dT(e.IfUnmodifiedSince)&&{"If-Unmodified-Since":Ft(e.IfUnmodifiedSince).toString()}),dT(e.IfModifiedSince)&&{"If-Modified-Since":Ft(e.IfModifiedSince).toString()}),dT(e.IfNoneMatch)&&{"If-None-Match":e.IfNoneMatch}),dT(e.IfMatch)&&{"If-Match":e.IfMatch}),dT(e.Range)&&{Range:e.Range}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Nt(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Nt(e)})).join("/")),o=VC(VC(VC(VC(VC(VC(VC(VC({"x-id":"GetObject"},void 0!==e.ResponseContentEncoding&&{"response-content-encoding":e.ResponseContentEncoding}),void 0!==e.ResponseCacheControl&&{"response-cache-control":e.ResponseCacheControl}),void 0!==e.ResponseContentLanguage&&{"response-content-language":e.ResponseContentLanguage}),void 0!==e.ResponseContentDisposition&&{"response-content-disposition":e.ResponseContentDisposition}),void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()}),void 0!==e.VersionId&&{versionId:e.VersionId}),void 0!==e.ResponseExpires&&{"response-expires":(e.ResponseExpires.toISOString().split(".")[0]+"Z").toString()}),void 0!==e.ResponseContentType&&{"response-content-type":e.ResponseContentType}),[4,t.endpoint()];case 1:return s=f.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,l=s.port,[2,new Ze({protocol:c,hostname:a,port:l,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r;return GC(this,(function(i){return 200!==e.statusCode&&e.statusCode>=300?[2,eT(e,t)]:(n={$metadata:lT(e),AcceptRanges:void 0,Body:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==e.headers["x-amz-object-lock-mode"]&&(n.ObjectLockMode=e.headers["x-amz-object-lock-mode"]),void 0!==e.headers["content-language"]&&(n.ContentLanguage=e.headers["content-language"]),void 0!==e.headers["content-disposition"]&&(n.ContentDisposition=e.headers["content-disposition"]),void 0!==e.headers["cache-control"]&&(n.CacheControl=e.headers["cache-control"]),void 0!==e.headers["content-type"]&&(n.ContentType=e.headers["content-type"]),void 0!==e.headers["content-range"]&&(n.ContentRange=e.headers["content-range"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["content-length"]&&(n.ContentLength=parseInt(e.headers["content-length"],10)),void 0!==e.headers["x-amz-object-lock-retain-until-date"]&&(n.ObjectLockRetainUntilDate=new Date(e.headers["x-amz-object-lock-retain-until-date"])),void 0!==e.headers["x-amz-object-lock-legal-hold"]&&(n.ObjectLockLegalHoldStatus=e.headers["x-amz-object-lock-legal-hold"]),void 0!==e.headers["x-amz-delete-marker"]&&(n.DeleteMarker="true"===e.headers["x-amz-delete-marker"]),void 0!==e.headers["x-amz-storage-class"]&&(n.StorageClass=e.headers["x-amz-storage-class"]),void 0!==e.headers["content-encoding"]&&(n.ContentEncoding=e.headers["content-encoding"]),void 0!==e.headers["x-amz-restore"]&&(n.Restore=e.headers["x-amz-restore"]),void 0!==e.headers["x-amz-website-redirect-location"]&&(n.WebsiteRedirectLocation=e.headers["x-amz-website-redirect-location"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-mp-parts-count"]&&(n.PartsCount=parseInt(e.headers["x-amz-mp-parts-count"],10)),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["accept-ranges"]&&(n.AcceptRanges=e.headers["accept-ranges"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers.expires&&(n.Expires=new Date(e.headers.expires)),void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-missing-meta"]&&(n.MissingMeta=parseInt(e.headers["x-amz-missing-meta"],10)),void 0!==e.headers["x-amz-replication-status"]&&(n.ReplicationStatus=e.headers["x-amz-replication-status"]),void 0!==e.headers["x-amz-tagging-count"]&&(n.TagCount=parseInt(e.headers["x-amz-tagging-count"],10)),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["last-modified"]&&(n.LastModified=new Date(e.headers["last-modified"])),void 0!==e.headers.etag&&(n.ETag=e.headers.etag),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),Object.keys(e.headers).forEach((function(t){void 0===n.Metadata&&(n.Metadata={}),t.startsWith("x-amz-meta-")&&(n.Metadata[t.substring(11)]=e.headers[t])})),r=e.body,n.Body=r,[2,Promise.resolve(n)])}))}))}(e,t)},t}(Pt),DT=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return s_(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ct(t,this.serialize,this.deserialize)),this.middlewareStack.use(NT(t));var r=e.concat(this.middlewareStack),i=t.logger,o="S3Client",s="DeleteObjectCommand",a={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:H_.filterSensitiveLog,outputFilterSensitiveLog:V_.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var u=t.requestHandler;return r.resolve((function(e){return u.handle(e.request,n||{})}),a)},t.prototype.serialize=function(e,t){return function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return GC(this,(function(f){switch(f.label){case 0:if(n=VC(VC(VC(VC({"Content-Type":""},dT(e.MFA)&&{"x-amz-mfa":e.MFA}),dT(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),dT(e.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":e.BypassGovernanceRetention.toString()}),dT(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Nt(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Nt(e)})).join("/")),o=VC({"x-id":"DeleteObject"},void 0!==e.VersionId&&{versionId:e.VersionId}),[4,t.endpoint()];case 1:return s=f.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,l=s.port,[2,new Ze({protocol:c,hostname:a,port:l,method:"DELETE",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return HC(void 0,void 0,void 0,(function(){var n;return GC(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,XC(e,t)]:(n={$metadata:lT(e),DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},void 0!==e.headers["x-amz-delete-marker"]&&(n.DeleteMarker="true"===e.headers["x-amz-delete-marker"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),[4,fT(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Pt),UT=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return s_(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ct(t,this.serialize,this.deserialize)),this.middlewareStack.use(NT(t));var r=e.concat(this.middlewareStack),i=t.logger,o="S3Client",s="ListObjectsCommand",a={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:LA.filterSensitiveLog,outputFilterSensitiveLog:NA.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var u=t.requestHandler;return r.resolve((function(e){return u.handle(e.request,n||{})}),a)},t.prototype.serialize=function(e,t){return function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return GC(this,(function(f){switch(f.label){case 0:if(n=VC(VC({"Content-Type":""},dT(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),dT(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",Nt(i)),o=VC(VC(VC(VC(VC({},void 0!==e.MaxKeys&&{"max-keys":e.MaxKeys.toString()}),void 0!==e.Marker&&{marker:e.Marker}),void 0!==e.Prefix&&{prefix:e.Prefix}),void 0!==e.Delimiter&&{delimiter:e.Delimiter}),void 0!==e.EncodingType&&{"encoding-type":e.EncodingType}),[4,t.endpoint()];case 1:return s=f.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,l=s.port,[2,new Ze({protocol:c,hostname:a,port:l,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r;return GC(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,tT(e,t)]:(n={$metadata:lT(e),CommonPrefixes:void 0,Contents:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,Marker:void 0,MaxKeys:void 0,Name:void 0,NextMarker:void 0,Prefix:void 0},[4,hT(e.body,t)]);case 1:return""===(r=i.sent()).CommonPrefixes&&(n.CommonPrefixes=[]),void 0!==r.CommonPrefixes&&(n.CommonPrefixes=function(e,t){return(e||[]).map((function(e){return function(e,t){var n={Prefix:void 0};return void 0!==e.Prefix&&(n.Prefix=e.Prefix),n}(e)}))}(Lt(r.CommonPrefixes))),""===r.Contents&&(n.Contents=[]),void 0!==r.Contents&&(n.Contents=function(e,t){return(e||[]).map((function(e){return function(e,t){var n={Size:void 0,ETag:void 0,Owner:void 0,StorageClass:void 0,Key:void 0,LastModified:void 0};return void 0!==e.Size&&(n.Size=parseInt(e.Size)),void 0!==e.ETag&&(n.ETag=e.ETag),void 0!==e.Owner&&(n.Owner=cT(e.Owner,t)),void 0!==e.StorageClass&&(n.StorageClass=e.StorageClass),void 0!==e.Key&&(n.Key=e.Key),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),n}(e,t)}))}(Lt(r.Contents),t)),void 0!==r.Delimiter&&(n.Delimiter=r.Delimiter),void 0!==r.EncodingType&&(n.EncodingType=r.EncodingType),void 0!==r.IsTruncated&&(n.IsTruncated="true"==r.IsTruncated),void 0!==r.Marker&&(n.Marker=r.Marker),void 0!==r.MaxKeys&&(n.MaxKeys=parseInt(r.MaxKeys)),void 0!==r.Name&&(n.Name=r.Name),void 0!==r.NextMarker&&(n.NextMarker=r.NextMarker),void 0!==r.Prefix&&(n.Prefix=r.Prefix),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Pt);const jT=JSON.parse('{"u2":"@aws-sdk/client-s3","i8":"1.0.0-rc.4"}');function FT(e,t,n){return void 0===n&&(n=1048576),new Promise((function(r,i){var o=new FileReader;o.addEventListener("error",i),o.addEventListener("abort",i);var s=e.size,a=0;function u(){a>=s?r():o.readAsArrayBuffer(e.slice(a,Math.min(s,a+n)))}o.addEventListener("load",(function(e){var n=e.target.result;t(new Uint8Array(n)),a+=n.byteLength,u()})),u()}))}var BT=[1732584193,4023233417,2562383102,271733878],zT=function(){function e(){this.state=Uint32Array.from(BT),this.buffer=new DataView(new ArrayBuffer(64)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(!function(e){return"string"==typeof e?0===e.length:0===e.byteLength}(e)){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=function(e){return"string"==typeof e?Pn(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}(e),n=0,r=t.byteLength;for(this.bytesHashed+=r;r>0;)this.buffer.setUint8(this.bufferLength++,t[n++]),r--,64===this.bufferLength&&(this.hashBuffer(),this.bufferLength=0)}},e.prototype.digest=function(){return(0,q.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r,i,o,s;return(0,q.__generator)(this,(function(a){if(!this.finished){if(t=(e=this).buffer,n=e.bufferLength,r=e.bytesHashed,i=8*r,t.setUint8(this.bufferLength++,128),n%64>=56){for(s=this.bufferLength;s<64;s++)t.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(s=this.bufferLength;s<56;s++)t.setUint8(s,0);t.setUint32(56,i>>>0,!0),t.setUint32(60,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}for(o=new DataView(new ArrayBuffer(16)),s=0;s<4;s++)o.setUint32(4*s,this.state[s],!0);return[2,new Uint8Array(o.buffer,o.byteOffset,o.byteLength)]}))}))},e.prototype.hashBuffer=function(){var e=this.buffer,t=this.state,n=t[0],r=t[1],i=t[2],o=t[3];n=KT(n,r,i,o,e.getUint32(0,!0),7,3614090360),o=KT(o,n,r,i,e.getUint32(4,!0),12,3905402710),i=KT(i,o,n,r,e.getUint32(8,!0),17,606105819),r=KT(r,i,o,n,e.getUint32(12,!0),22,3250441966),n=KT(n,r,i,o,e.getUint32(16,!0),7,4118548399),o=KT(o,n,r,i,e.getUint32(20,!0),12,1200080426),i=KT(i,o,n,r,e.getUint32(24,!0),17,2821735955),r=KT(r,i,o,n,e.getUint32(28,!0),22,4249261313),n=KT(n,r,i,o,e.getUint32(32,!0),7,1770035416),o=KT(o,n,r,i,e.getUint32(36,!0),12,2336552879),i=KT(i,o,n,r,e.getUint32(40,!0),17,4294925233),r=KT(r,i,o,n,e.getUint32(44,!0),22,2304563134),n=KT(n,r,i,o,e.getUint32(48,!0),7,1804603682),o=KT(o,n,r,i,e.getUint32(52,!0),12,4254626195),i=KT(i,o,n,r,e.getUint32(56,!0),17,2792965006),n=VT(n,r=KT(r,i,o,n,e.getUint32(60,!0),22,1236535329),i,o,e.getUint32(4,!0),5,4129170786),o=VT(o,n,r,i,e.getUint32(24,!0),9,3225465664),i=VT(i,o,n,r,e.getUint32(44,!0),14,643717713),r=VT(r,i,o,n,e.getUint32(0,!0),20,3921069994),n=VT(n,r,i,o,e.getUint32(20,!0),5,3593408605),o=VT(o,n,r,i,e.getUint32(40,!0),9,38016083),i=VT(i,o,n,r,e.getUint32(60,!0),14,3634488961),r=VT(r,i,o,n,e.getUint32(16,!0),20,3889429448),n=VT(n,r,i,o,e.getUint32(36,!0),5,568446438),o=VT(o,n,r,i,e.getUint32(56,!0),9,3275163606),i=VT(i,o,n,r,e.getUint32(12,!0),14,4107603335),r=VT(r,i,o,n,e.getUint32(32,!0),20,1163531501),n=VT(n,r,i,o,e.getUint32(52,!0),5,2850285829),o=VT(o,n,r,i,e.getUint32(8,!0),9,4243563512),i=VT(i,o,n,r,e.getUint32(28,!0),14,1735328473),n=HT(n,r=VT(r,i,o,n,e.getUint32(48,!0),20,2368359562),i,o,e.getUint32(20,!0),4,4294588738),o=HT(o,n,r,i,e.getUint32(32,!0),11,2272392833),i=HT(i,o,n,r,e.getUint32(44,!0),16,1839030562),r=HT(r,i,o,n,e.getUint32(56,!0),23,4259657740),n=HT(n,r,i,o,e.getUint32(4,!0),4,2763975236),o=HT(o,n,r,i,e.getUint32(16,!0),11,1272893353),i=HT(i,o,n,r,e.getUint32(28,!0),16,4139469664),r=HT(r,i,o,n,e.getUint32(40,!0),23,3200236656),n=HT(n,r,i,o,e.getUint32(52,!0),4,681279174),o=HT(o,n,r,i,e.getUint32(0,!0),11,3936430074),i=HT(i,o,n,r,e.getUint32(12,!0),16,3572445317),r=HT(r,i,o,n,e.getUint32(24,!0),23,76029189),n=HT(n,r,i,o,e.getUint32(36,!0),4,3654602809),o=HT(o,n,r,i,e.getUint32(48,!0),11,3873151461),i=HT(i,o,n,r,e.getUint32(60,!0),16,530742520),n=GT(n,r=HT(r,i,o,n,e.getUint32(8,!0),23,3299628645),i,o,e.getUint32(0,!0),6,4096336452),o=GT(o,n,r,i,e.getUint32(28,!0),10,1126891415),i=GT(i,o,n,r,e.getUint32(56,!0),15,2878612391),r=GT(r,i,o,n,e.getUint32(20,!0),21,4237533241),n=GT(n,r,i,o,e.getUint32(48,!0),6,1700485571),o=GT(o,n,r,i,e.getUint32(12,!0),10,2399980690),i=GT(i,o,n,r,e.getUint32(40,!0),15,4293915773),r=GT(r,i,o,n,e.getUint32(4,!0),21,2240044497),n=GT(n,r,i,o,e.getUint32(32,!0),6,1873313359),o=GT(o,n,r,i,e.getUint32(60,!0),10,4264355552),i=GT(i,o,n,r,e.getUint32(24,!0),15,2734768916),r=GT(r,i,o,n,e.getUint32(52,!0),21,1309151649),n=GT(n,r,i,o,e.getUint32(16,!0),6,4149444226),o=GT(o,n,r,i,e.getUint32(44,!0),10,3174756917),i=GT(i,o,n,r,e.getUint32(8,!0),15,718787259),r=GT(r,i,o,n,e.getUint32(36,!0),21,3951481745),t[0]=n+t[0]&4294967295,t[1]=r+t[1]&4294967295,t[2]=i+t[2]&4294967295,t[3]=o+t[3]&4294967295},e}();function qT(e,t,n,r,i,o){return((t=(t+e&4294967295)+(r+o&4294967295)&4294967295)<<i|t>>>32-i)+n&4294967295}function KT(e,t,n,r,i,o,s){return qT(t&n|~t&r,e,t,i,o,s)}function VT(e,t,n,r,i,o,s){return qT(t&r|n&~r,e,t,i,o,s)}function HT(e,t,n,r,i,o,s){return qT(t^n^r,e,t,i,o,s)}function GT(e,t,n,r,i,o,s){return qT(n^(t|~r),e,t,i,o,s)}var WT="s3.{region}.amazonaws.com",YT=new Set(["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),$T=new Set(["cn-north-1","cn-northwest-1"]),JT=new Set(["us-iso-east-1"]),QT=new Set(["us-isob-east-1"]),ZT=new Set(["us-gov-east-1","us-gov-west-1"]),XT=VC(VC({},{apiVersion:"2006-03-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-east-1":n={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":n={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":n={hostname:"s3-fips-us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":n={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":n={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":n={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"s3.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":n={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":n={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":n={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":n={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:YT.has(e)&&(n={hostname:WT.replace("{region}",e),partition:"aws"}),$T.has(e)&&(n={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),JT.has(e)&&(n={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),QT.has(e)&&(n={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),ZT.has(e)&&(n={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:WT.replace("{region}",e),partition:"aws"})}return Promise.resolve(n)},signingEscapePath:!1,signingName:"s3",useArnRegion:!1}),{runtime:"browser",base64Decoder:cn,base64Encoder:ln,bodyLengthChecker:xn,credentialDefaultProvider:hn("Credential is missing"),defaultUserAgent:kn(jT.u2,jT.i8),eventStreamSerdeProvider:bb,maxAttempts:3,md5:zT,region:hn("Region is missing"),requestHandler:new en,sha256:Jt.Sha256,streamCollector:fn,streamHasher:function(e,t){return(0,q.__awaiter)(this,void 0,void 0,(function(){var n;return(0,q.__generator)(this,(function(r){switch(r.label){case 0:return n=new e,[4,FT(t,(function(e){n.update(e)}))];case 1:return r.sent(),[2,n.digest()]}}))}))},urlParser:On,utf8Decoder:Pn,utf8Encoder:Nn}),eO={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware"},tO={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware"},nO={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware"},rO=function(e){function t(t){var n,r,i,o,s,a,u,c,l,f,d,h,p,v=this,g=VC(VC({},XT),t),y=Kn(g),m=Or(Bn(y)),b=(i=void 0!==(r=(n=An(m)).bucketEndpoint)&&r,s=void 0!==(o=n.forcePathStyle)&&o,u=void 0!==(a=n.useAccelerateEndpoint)&&a,l=void 0!==(c=n.useDualstackEndpoint)&&c,f=n.useArnRegion,d=void 0!==f&&f,(0,q.__assign)((0,q.__assign)({},n),{bucketEndpoint:i,forcePathStyle:s,useAccelerateEndpoint:u,useDualstackEndpoint:l,useArnRegion:"function"==typeof d?d:function(){return Promise.resolve(d)}})),w=Tb(b);return(v=e.call(this,w)||this).config=w,v.middlewareStack.use(Nr(v.config)),v.middlewareStack.use(vn(v.config)),v.middlewareStack.use(Mr(v.config)),v.middlewareStack.use(Gn(v.config)),v.middlewareStack.use((v.config,{applyToStack:function(e){e.add(function(){var e=this;return function(t){return function(n){return(0,q.__awaiter)(e,void 0,void 0,(function(){var e,r;return(0,q.__generator)(this,(function(i){if("string"==typeof(e=n.input.Bucket)&&!vT(e)&&e.indexOf("/")>=0)throw(r=new Error("Bucket name shouldn't contain '/', received '"+e+"'")).name="InvalidBucketName",r;return[2,t((0,q.__assign)({},n))]}))}))}}}(),tO)}})),v.middlewareStack.use((p=v.config,{applyToStack:function(e){e.add(function(e){return function(t){return function(n){return(0,q.__awaiter)(void 0,void 0,void 0,(function(){var r,i;return(0,q.__generator)(this,(function(o){switch(o.label){case 0:return r=n.request,!Ze.isInstance(r)||e.isCustomEndpoint?[2,t((0,q.__assign)({},n))]:"s3.amazonaws.com"!==r.hostname?[3,1]:(r.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return i="aws-global",[4,e.region()];case 2:i===o.sent()&&(r.hostname="s3.amazonaws.com"),o.label=3;case 3:return[2,t((0,q.__assign)({},n))]}}))}))}}}(p),nO)}})),v.middlewareStack.use((h=v.config,{applyToStack:function(e){e.add(function(e){var t=this;return function(n){return function(r){return(0,q.__awaiter)(t,void 0,void 0,(function(){var t;return(0,q.__generator)(this,(function(i){return t=r.request,Ze.isInstance(t)&&t.body&&"node"===e.runtime&&(t.headers=(0,q.__assign)((0,q.__assign)({},t.headers),{Expect:"100-continue"})),[2,n((0,q.__assign)((0,q.__assign)({},r),{request:t}))]}))}))}}}(h),eO)}})),v.middlewareStack.use(Yn(v.config)),v.middlewareStack.use(Jn(v.config)),v}return s_(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(kt);function iO(e){var t=e.port,n=e.query,r=e.protocol,i=e.path,o=e.hostname;r&&":"!==r.substr(-1)&&(r+=":"),t&&(o+=":"+t),i&&"/"!==i.charAt(0)&&(i="/"+i);var s=n?Xt(n):"";return s&&"?"!==s[0]&&(s="?"+s),r+"//"+o+i+s}function oO(e,t){return(0,q.__awaiter)(this,void 0,void 0,(function(){var n,r,i=this;return(0,q.__generator)(this,(function(o){switch(o.label){case 0:return n=function(e){return function(e){return(0,q.__awaiter)(i,void 0,void 0,(function(){return(0,q.__generator)(this,(function(t){return[2,{output:{request:e.request},response:void 0}]}))}))}},(r=e.middlewareStack.clone()).add(n,{step:"build",priority:"low"}),[4,t.resolveMiddleware(r,e.config,void 0)(t).then((function(e){return e.output.request}))];case 1:return[2,o.sent()]}}))}))}var sO=function(){function e(e){var t=(0,q.__assign)({service:e.signingName||e.service||"s3",uriEscapePath:e.uriEscapePath||!1},e);this.signer=new Er(t)}return e.prototype.presign=function(e,t){void 0===t&&(t={});var n=t.unsignableHeaders,r=void 0===n?new Set:n,i=(0,q.__rest)(t,["unsignableHeaders"]);return(0,q.__awaiter)(this,void 0,void 0,(function(){return(0,q.__generator)(this,(function(t){return r.add("content-type"),e.headers["X-Amz-Content-Sha256"]="UNSIGNED-PAYLOAD",[2,this.signer.presign(e,(0,q.__assign)({expiresIn:900,unsignableHeaders:r},i))]}))}))},e}(),aO=new i.k("axios-http-handler"),uO="sendProgress",cO=function(){function e(e,t){void 0===e&&(e={}),this.httpOptions=e,this.emitter=t}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=this.httpOptions.requestTimeout,r=this.emitter,i=e.path;if(e.query){var o=Xt(e.query);o&&(i+="?"+o)}var s=e.port,a=e.protocol+"//"+e.hostname+(s?":"+s:"")+i,u={};u.url=a,u.method=e.method,u.headers=e.headers,delete u.headers.host,e.body?u.data=e.body:u.headers["Content-Type"]&&(u.data=null),r&&(u.onUploadProgress=function(e){r.emit(uO,e),aO.debug(e)}),u.responseType="blob";var c,l=[Mu().request(u).then((function(e){return{response:new Qe({headers:e.headers,statusCode:e.status,body:e.data})}})).catch((function(e){throw aO.error(e),e})),(c=n,void 0===c&&(c=0),new Promise((function(e,t){c&&setTimeout((function(){var e=new Error("Request did not complete within "+c+" ms");e.name="TimeoutError",t(e)}),c)})))];return Promise.race(l)},e}();var lO,fO,dO,hO,pO,vO,gO,yO,mO,bO,wO,SO,_O,EO,IO,AO,CO,TO,OO,xO,kO=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return s_(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ct(t,this.serialize,this.deserialize)),this.middlewareStack.use(MT(t)),this.middlewareStack.use(NT(t));var r=e.concat(this.middlewareStack),i=t.logger,o="S3Client",s="PutObjectCommand",a={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:pC.filterSensitiveLog,outputFilterSensitiveLog:hC.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var u=t.requestHandler;return r.resolve((function(e){return u.handle(e.request,n||{})}),a)},t.prototype.serialize=function(e,t){return function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d;return GC(this,(function(h){switch(h.label){case 0:if(n=VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC({"Content-Type":"application/octet-stream"},dT(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),dT(e.ContentEncoding)&&{"Content-Encoding":e.ContentEncoding}),dT(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),dT(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),dT(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":e.SSECustomerKeyMD5}),dT(e.CacheControl)&&{"Cache-Control":e.CacheControl}),dT(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),dT(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),dT(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),dT(e.ContentLength)&&{"Content-Length":e.ContentLength.toString()}),dT(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),dT(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),dT(e.ContentDisposition)&&{"Content-Disposition":e.ContentDisposition}),dT(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),dT(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),dT(e.Tagging)&&{"x-amz-tagging":e.Tagging}),dT(e.Expires)&&{Expires:Ft(e.Expires).toString()}),dT(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),dT(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),dT(e.ContentMD5)&&{"Content-MD5":e.ContentMD5}),dT(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),dT(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),dT(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),dT(e.ContentLanguage)&&{"Content-Language":e.ContentLanguage}),dT(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),dT(e.ACL)&&{"x-amz-acl":e.ACL}),dT(e.ContentType)&&{"Content-Type":e.ContentType}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce((function(t,n){return t["x-amz-meta-"+n]=e.Metadata[n],t}),{})),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Nt(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Nt(e)})).join("/")),o={"x-id":"PutObject"},void 0!==e.Body&&(a=e.Body,s=a),[4,t.endpoint()];case 1:return u=h.sent(),c=u.hostname,l=u.protocol,f=void 0===l?"https":l,d=u.port,[2,new Ze({protocol:f,hostname:c,port:d,method:"PUT",headers:n,path:r,query:o,body:s})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return HC(void 0,void 0,void 0,(function(){var n;return GC(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,rT(e,t)]:(n={$metadata:lT(e),ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-server-side-encryption-context"]&&(n.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers.etag&&(n.ETag=e.headers.etag),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),[4,fT(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Pt),PO=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return s_(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ct(t,this.serialize,this.deserialize)),this.middlewareStack.use(MT(t)),this.middlewareStack.use(NT(t));var r=e.concat(this.middlewareStack),i=t.logger,o="S3Client",s="CreateMultipartUploadCommand",a={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:P_.filterSensitiveLog,outputFilterSensitiveLog:k_.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var u=t.requestHandler;return r.resolve((function(e){return u.handle(e.request,n||{})}),a)},t.prototype.serialize=function(e,t){return function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return GC(this,(function(f){switch(f.label){case 0:if(n=VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC(VC({"Content-Type":""},dT(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),dT(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":e.SSECustomerKeyMD5}),dT(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),dT(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),dT(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),dT(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),dT(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),dT(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),dT(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),dT(e.ContentType)&&{"Content-Type":e.ContentType}),dT(e.ContentLanguage)&&{"Content-Language":e.ContentLanguage}),dT(e.CacheControl)&&{"Cache-Control":e.CacheControl}),dT(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),dT(e.Tagging)&&{"x-amz-tagging":e.Tagging}),dT(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),dT(e.ACL)&&{"x-amz-acl":e.ACL}),dT(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),dT(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),dT(e.Expires)&&{Expires:Ft(e.Expires).toString()}),dT(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),dT(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),dT(e.ContentDisposition)&&{"Content-Disposition":e.ContentDisposition}),dT(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),dT(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),dT(e.ContentEncoding)&&{"Content-Encoding":e.ContentEncoding}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce((function(t,n){return t["x-amz-meta-"+n]=e.Metadata[n],t}),{})),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Nt(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Nt(e)})).join("/")),o={uploads:""},[4,t.endpoint()];case 1:return s=f.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,l=s.port,[2,new Ze({protocol:c,hostname:a,port:l,method:"POST",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r;return GC(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,ZC(e,t)]:(n={$metadata:lT(e),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==e.headers["x-amz-server-side-encryption-context"]&&(n.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-abort-date"]&&(n.AbortDate=new Date(e.headers["x-amz-abort-date"])),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-abort-rule-id"]&&(n.AbortRuleId=e.headers["x-amz-abort-rule-id"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),[4,hT(e.body,t)]);case 1:return void 0!==(r=i.sent()).Bucket&&(n.Bucket=r.Bucket),void 0!==r.Key&&(n.Key=r.Key),void 0!==r.UploadId&&(n.UploadId=r.UploadId),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Pt);!function(e){e.SELECT="SELECT"}(lO||(lO={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.OutputLocation&&{OutputLocation:NC.filterSensitiveLog(e.OutputLocation)})}}(fO||(fO={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.RestoreRequest&&{RestoreRequest:fO.filterSensitiveLog(e.RestoreRequest)})}}(dO||(dO={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(hO||(hO={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(pO||(pO={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(vO||(vO={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(gO||(gO={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(yO||(yO={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(mO||(mO={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(bO||(bO={})),function(e){e.visit=function(e,t){return void 0!==e.Cont?t.Cont(e.Cont):void 0!==e.Progress?t.Progress(e.Progress):void 0!==e.Stats?t.Stats(e.Stats):void 0!==e.End?t.End(e.End):void 0!==e.Records?t.Records(e.Records):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.Cont?{Cont:hO.filterSensitiveLog(e.Cont)}:void 0!==e.Progress?{Progress:gO.filterSensitiveLog(e.Progress)}:void 0!==e.Stats?{Stats:bO.filterSensitiveLog(e.Stats)}:void 0!==e.End?{End:pO.filterSensitiveLog(e.End)}:void 0!==e.Records?{Records:yO.filterSensitiveLog(e.Records)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(wO||(wO={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.Payload&&{Payload:"STREAMING_CONTENT"})}}(SO||(SO={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(_O||(_O={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(EO||(EO={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.SSECustomerKey&&{SSECustomerKey:Bt})}}(IO||(IO={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Bt})}}(AO||(AO={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.SSECustomerKey&&{SSECustomerKey:Bt})}}(CO||(CO={})),function(e){e.filterSensitiveLog=function(e){return VC({},e)}}(TO||(TO={})),function(e){e.filterSensitiveLog=function(e){return VC(VC({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Bt})}}(OO||(OO={})),function(e){e.filterSensitiveLog=function(e){return VC(VC(VC({},e),e.SSECustomerKey&&{SSECustomerKey:Bt}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:Bt})}}(xO||(xO={}));var NO=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return s_(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ct(t,this.serialize,this.deserialize)),this.middlewareStack.use(MT(t)),this.middlewareStack.use(NT(t));var r=e.concat(this.middlewareStack),i=t.logger,o="S3Client",s="UploadPartCommand",a={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:CO.filterSensitiveLog,outputFilterSensitiveLog:AO.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var u=t.requestHandler;return r.resolve((function(e){return u.handle(e.request,n||{})}),a)},t.prototype.serialize=function(e,t){return function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d;return GC(this,(function(h){switch(h.label){case 0:if(n=VC(VC(VC(VC(VC(VC(VC({"Content-Type":"application/octet-stream"},dT(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),dT(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),dT(e.ContentLength)&&{"Content-Length":e.ContentLength.toString()}),dT(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),dT(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),dT(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-MD5":e.SSECustomerKeyMD5}),dT(e.ContentMD5)&&{"Content-MD5":e.ContentMD5}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Nt(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Nt(e)})).join("/")),o=VC(VC({"x-id":"UploadPart"},void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()}),void 0!==e.UploadId&&{uploadId:e.UploadId}),void 0!==e.Body&&(a=e.Body,s=a),[4,t.endpoint()];case 1:return u=h.sent(),c=u.hostname,l=u.protocol,f=void 0===l?"https":l,d=u.port,[2,new Ze({protocol:f,hostname:c,port:d,method:"PUT",headers:n,path:r,query:o,body:s})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return HC(void 0,void 0,void 0,(function(){var n;return GC(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,iT(e,t)]:(n={$metadata:lT(e),ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers.etag&&(n.ETag=e.headers.etag),[4,fT(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Pt),LO=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return s_(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ct(t,this.serialize,this.deserialize)),this.middlewareStack.use(NT(t));var r=e.concat(this.middlewareStack),i=t.logger,o="S3Client",s="CompleteMultipartUploadCommand",a={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:w_.filterSensitiveLog,outputFilterSensitiveLog:y_.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var u=t.requestHandler;return r.resolve((function(e){return u.handle(e.request,n||{})}),a)},t.prototype.serialize=function(e,t){return function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d;return GC(this,(function(h){switch(h.label){case 0:if(n=VC(VC({"Content-Type":"application/xml"},dT(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),dT(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),r="/{Bucket}/{Key+}",void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");if(r=r.replace("{Key+}",i.split("/").map((function(e){return Nt(e)})).join("/")),void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",Nt(i)),o=VC({},void 0!==e.UploadId&&{uploadId:e.UploadId}),void 0!==e.MultipartUpload&&(a=function(e,t){var n=new WC("CompletedMultipartUpload");return void 0!==e.Parts&&uT(e.Parts,t).map((function(e){e=e.withName("Part"),n.addChildNode(e)})),n}(e.MultipartUpload,t),s='<?xml version="1.0" encoding="UTF-8"?>',a.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),s+=a.toString()),[4,t.endpoint()];case 1:return u=h.sent(),c=u.hostname,l=u.protocol,f=void 0===l?"https":l,d=u.port,[2,new Ze({protocol:f,hostname:c,port:d,method:"POST",headers:n,path:r,query:o,body:s})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r;return GC(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,QC(e,t)]:(n={$metadata:lT(e),Bucket:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,hT(e.body,t)]);case 1:return void 0!==(r=i.sent()).Bucket&&(n.Bucket=r.Bucket),void 0!==r.ETag&&(n.ETag=r.ETag),void 0!==r.Key&&(n.Key=r.Key),void 0!==r.Location&&(n.Location=r.Location),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Pt),MO=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return s_(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ct(t,this.serialize,this.deserialize)),this.middlewareStack.use(NT(t));var r=e.concat(this.middlewareStack),i=t.logger,o="S3Client",s="AbortMultipartUploadCommand",a={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:c_.filterSensitiveLog,outputFilterSensitiveLog:u_.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var u=t.requestHandler;return r.resolve((function(e){return u.handle(e.request,n||{})}),a)},t.prototype.serialize=function(e,t){return function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return GC(this,(function(f){switch(f.label){case 0:if(n=VC(VC({"Content-Type":""},dT(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),dT(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");if(r=r.replace("{Key+}",i.split("/").map((function(e){return Nt(e)})).join("/")),void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",Nt(i)),o=VC({"x-id":"AbortMultipartUpload"},void 0!==e.UploadId&&{uploadId:e.UploadId}),[4,t.endpoint()];case 1:return s=f.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,l=s.port,[2,new Ze({protocol:c,hostname:a,port:l,method:"DELETE",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return HC(void 0,void 0,void 0,(function(){var n;return GC(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,JC(e,t)]:(n={$metadata:lT(e),RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,fT(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Pt),RO=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return s_(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Ct(t,this.serialize,this.deserialize)),this.middlewareStack.use(NT(t));var r=e.concat(this.middlewareStack),i=t.logger,o="S3Client",s="ListPartsCommand",a={logger:i,clientName:o,commandName:s,inputFilterSensitiveLog:qA.filterSensitiveLog,outputFilterSensitiveLog:zA.filterSensitiveLog};"function"==typeof i.info&&i.info({clientName:o,commandName:s});var u=t.requestHandler;return r.resolve((function(e){return u.handle(e.request,n||{})}),a)},t.prototype.serialize=function(e,t){return function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return GC(this,(function(f){switch(f.label){case 0:if(n=VC(VC({"Content-Type":""},dT(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),dT(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",Nt(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return Nt(e)})).join("/")),o=VC(VC(VC({"x-id":"ListParts"},void 0!==e.UploadId&&{uploadId:e.UploadId}),void 0!==e.MaxParts&&{"max-parts":e.MaxParts.toString()}),void 0!==e.PartNumberMarker&&{"part-number-marker":e.PartNumberMarker.toString()}),[4,t.endpoint()];case 1:return s=f.sent(),a=s.hostname,u=s.protocol,c=void 0===u?"https":u,l=s.port,[2,new Ze({protocol:c,hostname:a,port:l,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return HC(void 0,void 0,void 0,(function(){var n,r;return GC(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,nT(e,t)]:(n={$metadata:lT(e),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},void 0!==e.headers["x-amz-abort-rule-id"]&&(n.AbortRuleId=e.headers["x-amz-abort-rule-id"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-abort-date"]&&(n.AbortDate=new Date(e.headers["x-amz-abort-date"])),[4,hT(e.body,t)]);case 1:return void 0!==(r=i.sent()).Bucket&&(n.Bucket=r.Bucket),void 0!==r.Initiator&&(n.Initiator=function(e,t){var n={ID:void 0,DisplayName:void 0};return void 0!==e.ID&&(n.ID=e.ID),void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),n}(r.Initiator)),void 0!==r.IsTruncated&&(n.IsTruncated="true"==r.IsTruncated),void 0!==r.Key&&(n.Key=r.Key),void 0!==r.MaxParts&&(n.MaxParts=parseInt(r.MaxParts)),void 0!==r.NextPartNumberMarker&&(n.NextPartNumberMarker=parseInt(r.NextPartNumberMarker)),void 0!==r.Owner&&(n.Owner=cT(r.Owner,t)),void 0!==r.PartNumberMarker&&(n.PartNumberMarker=parseInt(r.PartNumberMarker)),""===r.Part&&(n.Parts=[]),void 0!==r.Part&&(n.Parts=function(e,t){return(e||[]).map((function(e){return function(e,t){var n={Size:void 0,LastModified:void 0,PartNumber:void 0,ETag:void 0};return void 0!==e.Size&&(n.Size=parseInt(e.Size)),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),void 0!==e.PartNumber&&(n.PartNumber=parseInt(e.PartNumber)),void 0!==e.ETag&&(n.ETag=e.ETag),n}(e)}))}(Lt(r.Part))),void 0!==r.StorageClass&&(n.StorageClass=r.StorageClass),void 0!==r.UploadId&&(n.UploadId=r.UploadId),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(Pt),DO=n(7187),UO=function(e){var t,n=(0,ao.Qc)(e),r=n.hostname,i=void 0===r?"localhost":r,o=n.pathname,s=void 0===o?"/":o,a=n.port,u=n.protocol,c=void 0===u?"https:":u,l=n.search;return l&&(t=Tn(l)),{hostname:i,port:a?parseInt(a):void 0,protocol:c,path:s,query:t}},jO=function(){return(jO=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},FO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},BO=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},zO=new i.k("AWSS3ProviderManagedUpload"),qO=function(){function e(e,t,n){this.minPartSize=5242880,this.queueSize=4,this.body=null,this.params=null,this.opts=null,this.multiPartMap=[],this.cancel=!1,this.bytesUploaded=0,this.totalBytesToUpload=0,this.emitter=null,this.params=e,this.opts=t,this.emitter=n}return e.prototype.upload=function(){return FO(this,void 0,void 0,(function(){var e,t,n,r,i,o;return BO(this,(function(s){switch(s.label){case 0:return e=this,[4,this.validateAndSanitizeBody(this.params.Body)];case 1:return e.body=s.sent(),this.totalBytesToUpload=this.byteLength(this.body),this.totalBytesToUpload<=this.minPartSize?(this.params.Body=this.body,t=new kO(this.params),[4,this._createNewS3Client(this.opts,this.emitter)]):[3,3];case 2:return[2,s.sent().send(t)];case 3:return[4,this.createMultiPartUpload()];case 4:n=s.sent(),r=Math.ceil(this.totalBytesToUpload/this.minPartSize),i=0,s.label=5;case 5:return i<r?[4,this.checkIfUploadCancelled(n)]:[3,10];case 6:return s.sent(),o=this.createParts(i),[4,this.uploadParts(n,o)];case 7:return s.sent(),[4,this.checkIfUploadCancelled(n)];case 8:s.sent(),s.label=9;case 9:return i+=this.queueSize,[3,5];case 10:return[4,this.finishMultiPartUpload(n)];case 11:return[2,s.sent()]}}))}))},e.prototype.createParts=function(e){for(var t=[],n=e,r=e*this.minPartSize;r<this.totalBytesToUpload&&t.length<this.queueSize;){var i=Math.min(r+this.minPartSize,this.totalBytesToUpload);t.push({bodyPart:this.body.slice(r,i),partNumber:++n,emitter:new DO.EventEmitter,_lastUploadedBytes:0}),r+=this.minPartSize}return t},e.prototype.createMultiPartUpload=function(){return FO(this,void 0,void 0,(function(){var e,t;return BO(this,(function(n){switch(n.label){case 0:return e=new PO(this.params),[4,this._createNewS3Client(this.opts)];case 1:return[4,n.sent().send(e)];case 2:return t=n.sent(),zO.debug(t.UploadId),[2,t.UploadId]}}))}))},e.prototype.uploadParts=function(e,t){return FO(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d,h,p;return BO(this,(function(v){switch(v.label){case 0:n=[],v.label=1;case 1:v.trys.push([1,6,7,8]),r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),i=r.next(),v.label=2;case 2:return i.done?[3,5]:(o=i.value,this.setupEventListener(o),s={PartNumber:o.partNumber,Body:o.bodyPart,UploadId:e,Key:this.params.Key,Bucket:this.params.Bucket},a=new NO(s),[4,this._createNewS3Client(this.opts,o.emitter)]);case 3:u=v.sent(),n.push(u.send(a)),v.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return c=v.sent(),h={error:c},[3,8];case 7:try{i&&!i.done&&(p=r.return)&&p.call(r)}finally{if(h)throw h.error}return[7];case 8:return v.trys.push([8,10,,11]),[4,Promise.all(n)];case 9:for(l=v.sent(),f=0;f<l.length;f++)this.multiPartMap.push({PartNumber:t[f].partNumber,ETag:l[f].ETag});return[3,11];case 10:return d=v.sent(),zO.error("error happened while uploading a part. Cancelling the multipart upload",d),this.cancelUpload(),[2];case 11:return[2]}}))}))},e.prototype.finishMultiPartUpload=function(e){return FO(this,void 0,void 0,(function(){var t,n,r,i;return BO(this,(function(o){switch(o.label){case 0:return t={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:e,MultipartUpload:{Parts:this.multiPartMap}},n=new LO(t),[4,this._createNewS3Client(this.opts)];case 1:r=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,r.send(n)];case 3:return[2,o.sent().Key];case 4:return i=o.sent(),zO.error("error happened while finishing the upload. Cancelling the multipart upload",i),this.cancelUpload(),[2];case 5:return[2]}}))}))},e.prototype.checkIfUploadCancelled=function(e){return FO(this,void 0,void 0,(function(){var t,n;return BO(this,(function(r){switch(r.label){case 0:if(!this.cancel)return[3,5];t="Upload was cancelled.",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.cleanup(e)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),t+=n.errorMessage,[3,4];case 4:throw new Error(t);case 5:return[2]}}))}))},e.prototype.cancelUpload=function(){this.cancel=!0},e.prototype.cleanup=function(e){return FO(this,void 0,void 0,(function(){var t,n,r;return BO(this,(function(i){switch(i.label){case 0:return this.body=null,this.multiPartMap=[],this.bytesUploaded=0,this.totalBytesToUpload=0,t={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:e},[4,this._createNewS3Client(this.opts)];case 1:return[4,(n=i.sent()).send(new MO(t))];case 2:return i.sent(),[4,n.send(new RO(t))];case 3:if((r=i.sent())&&r.Parts&&r.Parts.length>0)throw new Error("Multi Part upload clean up failed");return[2]}}))}))},e.prototype.setupEventListener=function(e){var t=this;e.emitter.on(uO,(function(n){t.progressChanged(e.partNumber,n.loaded-e._lastUploadedBytes),e._lastUploadedBytes=n.loaded}))},e.prototype.progressChanged=function(e,t){this.bytesUploaded+=t,this.emitter.emit(uO,{loaded:this.bytesUploaded,total:this.totalBytesToUpload,part:e,key:this.params.Key})},e.prototype.byteLength=function(e){if(null==e)return 0;if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("string"!=typeof e.path)throw new Error("Cannot determine length of "+e)},e.prototype.validateAndSanitizeBody=function(e){return FO(this,void 0,void 0,(function(){return BO(this,(function(t){switch(t.label){case 0:return this.isGenericObject(e)?[2,JSON.stringify(e)]:[3,1];case 1:return this.isBlob(e)?u.isReactNative?[4,fn(e)]:[3,3]:[3,4];case 2:return[2,t.sent()];case 3:case 4:return[2,e]}}))}))},e.prototype.isBlob=function(e){return"undefined"!=typeof Blob&&e instanceof Blob},e.prototype.isGenericObject=function(e){if(null!==e&&"object"==typeof e)try{return!(this.byteLength(e)>=0)}catch(e){return!0}return!1},e.prototype._createNewS3Client=function(e,t){return FO(this,void 0,void 0,(function(){var n,r,i,o,s;return BO(this,(function(a){switch(a.label){case 0:return[4,this._getCredentials()];case 1:return n=a.sent(),r=e.region,i=e.dangerouslyConnectToHttpEndpointForTesting,o={},i&&(o={endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}),(s=new rO(jO(jO({region:r,credentials:n},o),{requestHandler:new cO({},t),customUserAgent:c(),urlParser:UO}))).middlewareStack.remove("contentLengthMiddleware"),[2,s]}}))}))},e.prototype._getCredentials=function(){return Br.get().then((function(e){if(!e)return!1;var t=Br.shear(e);return zO.debug("set credentials for storage",t),t})).catch((function(e){return zO.warn("ensure credentials error",e),!1}))},e}(),KO=function(){return(KO=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},VO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},HO=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},GO=new i.k("AWSS3Provider"),WO="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",YO=function(e,t,n,r,i){if(e){var o={attrs:n};r&&(o.metrics=r),Yr.dispatch("storage",{event:t,data:o,message:i},"Storage",WO)}},$O=function(){function e(e){this._config=e||{},GO.debug("Storage Options",this._config)}return e.prototype.getCategory=function(){return e.CATEGORY},e.prototype.getProviderName=function(){return e.PROVIDER_NAME},e.prototype.configure=function(e){if(GO.debug("configure Storage",e),!e)return this._config;var t=Qr.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,t.Storage),this._config.bucket||GO.debug("Do not have bucket yet"),this._config},e.prototype.get=function(e,t){return VO(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d,h,p,v,g,y,m,b,w,S,_,E;return HO(this,(function(I){switch(I.label){case 0:return[4,this._ensureCredentials()];case 1:if(!I.sent())return[2,Promise.reject("No credentials")];if(n=Object.assign({},this._config,t),r=n.bucket,i=n.download,o=n.cacheControl,s=n.contentDisposition,a=n.contentEncoding,u=n.contentLanguage,c=n.contentType,l=n.expires,f=n.track,d=this._prefix(n),h=d+e,p=this._createNewS3Client(n),GO.debug("get "+e+" from "+h),v={Bucket:r,Key:h},o&&(v.ResponseCacheControl=o),s&&(v.ResponseContentDisposition=s),a&&(v.ResponseContentEncoding=a),u&&(v.ResponseContentLanguage=u),c&&(v.ResponseContentType=c),!0!==i)return[3,5];g=new RT(v),I.label=2;case 2:return I.trys.push([2,4,,5]),[4,p.send(g)];case 3:return y=I.sent(),YO(f,"download",{method:"get",result:"success"},{fileSize:Number(y.Body.size||y.Body.length)},"Download success for "+e),[2,y];case 4:throw m=I.sent(),YO(f,"download",{method:"get",result:"failed"},null,"Download failed with "+m.message),m;case 5:v.Expires=l||900,I.label=6;case 6:return I.trys.push([6,9,,10]),b=new sO(KO({},p.config)),[4,oO(p,new RT(v))];case 7:return w=I.sent(),_=iO,[4,b.presign(w,{expiresIn:v.Expires})];case 8:return S=_.apply(void 0,[I.sent()]),YO(f,"getSignedUrl",{method:"get",result:"success"},null,"Signed URL: "+S),[2,S];case 9:throw E=I.sent(),GO.warn("get signed url error",E),YO(f,"getSignedUrl",{method:"get",result:"failed"},null,"Could not get a signed URL for "+e),E;case 10:return[2]}}))}))},e.prototype.put=function(e,t,n){return VO(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,f,d,h,p,v,g,y,m,b,w,S,_,E,I,A,C;return HO(this,(function(T){switch(T.label){case 0:return[4,this._ensureCredentials()];case 1:if(!T.sent())return[2,Promise.reject("No credentials")];r=Object.assign({},this._config,n),i=r.bucket,o=r.track,s=r.progressCallback,a=r.contentType,u=r.contentDisposition,c=r.cacheControl,l=r.expires,f=r.metadata,d=r.tagging,h=r.acl,p=r.serverSideEncryption,v=r.SSECustomerAlgorithm,g=r.SSECustomerKey,y=r.SSECustomerKeyMD5,m=r.SSEKMSKeyId,b=a||"binary/octet-stream",w=this._prefix(r),S=w+e,GO.debug("put "+e+" to "+S),_={Bucket:i,Key:S,Body:t,ContentType:b},c&&(_.CacheControl=c),u&&(_.ContentDisposition=u),l&&(_.Expires=l),f&&(_.Metadata=f),d&&(_.Tagging=d),p&&(_.ServerSideEncryption=p,v&&(_.SSECustomerAlgorithm=v),g&&(_.SSECustomerKey=g),y&&(_.SSECustomerKeyMD5=y),m&&(_.SSEKMSKeyId=m)),E=new DO.EventEmitter,I=new qO(_,r,E),h&&(_.ACL=h),T.label=2;case 2:return T.trys.push([2,4,,5]),E.on("sendProgress",(function(e){s&&("function"==typeof s?s(e):GO.warn("progressCallback should be a function, not a "+typeof s))})),[4,I.upload()];case 3:return A=T.sent(),GO.debug("upload result",A),YO(o,"upload",{method:"put",result:"success"},null,"Upload success for "+e),[2,{key:e}];case 4:throw C=T.sent(),GO.warn("error uploading",C),YO(o,"upload",{method:"put",result:"failed"},null,"Error uploading "+e),C;case 5:return[2]}}))}))},e.prototype.remove=function(e,t){return VO(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return HO(this,(function(f){switch(f.label){case 0:return[4,this._ensureCredentials()];case 1:if(!f.sent())return[2,Promise.reject("No credentials")];n=Object.assign({},this._config,t),r=n.bucket,i=n.track,o=this._prefix(n),s=o+e,a=this._createNewS3Client(n),GO.debug("remove "+e+" from "+s),u=new DT({Bucket:r,Key:s}),f.label=2;case 2:return f.trys.push([2,4,,5]),[4,a.send(u)];case 3:return c=f.sent(),YO(i,"delete",{method:"remove",result:"success"},null,"Deleted "+e+" successfully"),[2,c];case 4:throw l=f.sent(),YO(i,"delete",{method:"remove",result:"failed"},null,"Deletion of "+e+" failed with "+l),l;case 5:return[2]}}))}))},e.prototype.list=function(e,t){return VO(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d;return HO(this,(function(h){switch(h.label){case 0:return[4,this._ensureCredentials()];case 1:if(!h.sent())return[2,Promise.reject("No credentials")];n=Object.assign({},this._config,t),r=n.bucket,i=n.track,o=n.maxKeys,s=this._prefix(n),a=s+e,u=this._createNewS3Client(n),GO.debug("list "+e+" from "+a),c=new UT({Bucket:r,Prefix:a,MaxKeys:o}),h.label=2;case 2:return h.trys.push([2,4,,5]),[4,u.send(c)];case 3:return l=h.sent(),f=[],l&&l.Contents&&(f=l.Contents.map((function(e){return{key:e.Key.substr(s.length),eTag:e.ETag,lastModified:e.LastModified,size:e.Size}}))),YO(i,"list",{method:"list",result:"success"},null,f.length+" items returned from list operation"),GO.debug("list",f),[2,f];case 4:throw d=h.sent(),GO.warn("list error",d),YO(i,"list",{method:"list",result:"failed"},null,"Listing items failed: "+d.message),d;case 5:return[2]}}))}))},e.prototype._ensureCredentials=function(){var e=this;return Br.get().then((function(t){if(!t)return!1;var n=Br.shear(t);return GO.debug("set credentials for storage",n),e._config.credentials=n,!0})).catch((function(e){return GO.warn("ensure credentials error",e),!1}))},e.prototype._prefix=function(e){var t=e.credentials,n=e.level,r=e.customPrefix||{},i=e.identityId||t.identityId,o=(void 0!==r.private?r.private:"private/")+i+"/",s=(void 0!==r.protected?r.protected:"protected/")+i+"/",a=void 0!==r.public?r.public:"public/";switch(n){case"private":return o;case"protected":return s;default:return a}},e.prototype._createNewS3Client=function(e,t){var n=e.region,r=e.credentials,i={};return e.dangerouslyConnectToHttpEndpointForTesting&&(i={endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}),new rO(KO(KO({region:n,credentials:r,customUserAgent:c()},i),{requestHandler:new cO({},t)}))},e.CATEGORY="Storage",e.PROVIDER_NAME="AWSS3",e}(),JO=function(){return(JO=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},QO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},ZO=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},XO=new i.k("StorageClass"),ex="AWSS3",tx=function(){function e(){this._config={},this._pluggables=[],XO.debug("Storage Options",this._config),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.list=this.list.bind(this)}return e.prototype.getModuleName=function(){return"Storage"},e.prototype.addPluggable=function(e){if(e&&"Storage"===e.getCategory())return this._pluggables.push(e),e.configure(this._config[e.getProviderName()])},e.prototype.getPluggable=function(e){var t=this._pluggables.find((function(t){return t.getProviderName()===e}));return void 0===t?(XO.debug("No plugin found with providerName",e),null):t},e.prototype.removePluggable=function(e){this._pluggables=this._pluggables.filter((function(t){return t.getProviderName()!==e}))},e.prototype.configure=function(e){var t=this;if(XO.debug("configure Storage"),!e)return this._config;var n=Qr.parseMobilehubConfig(e),r=Object.keys(n.Storage),i=["bucket","region","level","track","customPrefix","serverSideEncryption","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId"],o=function(e){return i.some((function(t){return t===e}))};return r&&r.find((function(e){return o(e)}))&&!n.Storage.AWSS3&&(n.Storage.AWSS3={}),Object.entries(n.Storage).map((function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(e,2),r=t[0],i=t[1];r&&o(r)&&void 0!==i&&(n.Storage.AWSS3[r]=i,delete n.Storage[r])})),Object.keys(n.Storage).forEach((function(e){"string"!=typeof n.Storage[e]&&(t._config[e]=JO(JO({},t._config[e]),n.Storage[e]))})),this._pluggables.forEach((function(e){e.configure(t._config[e.getProviderName()])})),0===this._pluggables.length&&this.addPluggable(new $O),this._config},e.prototype.get=function(e,t){return QO(this,void 0,void 0,(function(){var n,r,i;return ZO(this,(function(o){return n=(t||{}).provider,r=void 0===n?ex:n,void 0===(i=this._pluggables.find((function(e){return e.getProviderName()===r})))&&(XO.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider")),[2,i.get(e,t)]}))}))},e.prototype.put=function(e,t,n){return QO(this,void 0,void 0,(function(){var r,i,o;return ZO(this,(function(s){return r=(n||{}).provider,i=void 0===r?ex:r,void 0===(o=this._pluggables.find((function(e){return e.getProviderName()===i})))&&(XO.debug("No plugin found with providerName",i),Promise.reject("No plugin found in Storage for the provider")),[2,o.put(e,t,n)]}))}))},e.prototype.remove=function(e,t){return QO(this,void 0,void 0,(function(){var n,r,i;return ZO(this,(function(o){return n=(t||{}).provider,r=void 0===n?ex:n,void 0===(i=this._pluggables.find((function(e){return e.getProviderName()===r})))&&(XO.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider")),[2,i.remove(e,t)]}))}))},e.prototype.list=function(e,t){return QO(this,void 0,void 0,(function(){var n,r,i;return ZO(this,(function(o){return n=(t||{}).provider,r=void 0===n?ex:n,void 0===(i=this._pluggables.find((function(e){return e.getProviderName()===r})))&&(XO.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider")),[2,i.list(e,t)]}))}))},e}(),nx=function(){return(nx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},rx=new i.k("Storage"),ix=null,ox=function(){if(ix)return ix;rx.debug("Create Storage Instance, debug"),(ix=new tx).vault=new tx;var e=ix.configure;return ix.configure=function(t){rx.debug("storage configure called");var n=nx({},e.call(ix,t));Object.keys(n).forEach((function(e){"string"!=typeof n[e]&&(n[e]=nx(nx({},n[e]),{level:"private"}))})),rx.debug("storage vault configure called"),ix.vault.configure(n)},ix}();s.register(ox)},5069:(e,t,n)=>{"use strict";n.d(t,{k:()=>s});var r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},i=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},o={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5},s=function(){function e(e,t){void 0===t&&(t="WARN"),this.name=e,this.level=t}return e.prototype._padding=function(e){return e<10?"0"+e:""+e},e.prototype._ts=function(){var e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()},e.prototype._log=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.level;e.LOG_LEVEL&&(i=e.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(i=window.LOG_LEVEL);var s=o[i],a=o[t];if(a>=s){var u=console.log.bind(console);"ERROR"===t&&console.error&&(u=console.error.bind(console)),"WARN"===t&&console.warn&&(u=console.warn.bind(console));var c="["+t+"] "+this._ts()+" "+this.name;if(1===n.length&&"string"==typeof n[0])u(c+" - "+n[0]);else if(1===n.length)u(c,n[0]);else if("string"==typeof n[0]){var l=n.slice(1);1===l.length&&(l=l[0]),u(c+" - "+n[0],l)}else u(c,n)}},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,i(["INFO"],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,i(["INFO"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,i(["WARN"],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,i(["ERROR"],e))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,i(["DEBUG"],e))},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._log.apply(this,i(["VERBOSE"],e))},e.LOG_LEVEL=null,e}()},1774:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1888),i=function(){function e(){this.state=Int32Array.from(r.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>r.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===r.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%r.BLOCK_SIZE>=r.BLOCK_SIZE-8){for(var i=this.bufferLength;i<r.BLOCK_SIZE;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<r.BLOCK_SIZE-8;i++)t.setUint8(i,0);t.setUint32(r.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(r.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var o=new Uint8Array(r.DIGEST_LENGTH);for(i=0;i<8;i++)o[4*i]=this.state[i]>>>24&255,o[4*i+1]=this.state[i]>>>16&255,o[4*i+2]=this.state[i]>>>8&255,o[4*i+3]=this.state[i]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],u=t[5],c=t[6],l=t[7],f=0;f<r.BLOCK_SIZE;f++){if(f<16)this.temp[f]=(255&e[4*f])<<24|(255&e[4*f+1])<<16|(255&e[4*f+2])<<8|255&e[4*f+3];else{var d=this.temp[f-2],h=(d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,p=((d=this.temp[f-15])>>>7|d<<25)^(d>>>18|d<<14)^d>>>3;this.temp[f]=(h+this.temp[f-7]|0)+(p+this.temp[f-16]|0)}var v=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&u^~a&c)|0)+(l+(r.KEY[f]+this.temp[f]|0)|0)|0,g=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&o^i&o)|0;l=c,c=u,u=a,a=s+v|0,s=o,o=i,i=n,n=v+g|0}t[0]+=n,t[1]+=i,t[2]+=o,t[3]+=s,t[4]+=a,t[5]+=u,t[6]+=c,t[7]+=l},e}();t.RawSha256=i},1888:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},6051:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(655).__exportStar(n(4893),t)},4893:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(1888),o=n(1774),s=n(9210),a=function(){function e(e){if(this.hash=new o.RawSha256,e){this.outer=new o.RawSha256;var t=function(e){var t=u(e);if(t.byteLength>i.BLOCK_SIZE){var n=new o.RawSha256;n.update(t),t=n.digest()}var r=new Uint8Array(i.BLOCK_SIZE);return r.set(t),r}(e),n=new Uint8Array(i.BLOCK_SIZE);n.set(t);for(var r=0;r<i.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;for(this.hash.update(t),this.outer.update(n),r=0;r<t.byteLength;r++)t[r]=0}}return e.prototype.update=function(e){if(!(t=e,("string"==typeof t?0===t.length:0===t.byteLength)||this.error))try{this.hash.update(u(e))}catch(e){this.error=e}var t},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,this.digestSync()]}))}))},e}();function u(e){return"string"==typeof e?s.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=a},9210:(e,t,n)=>{"use strict";n.r(t),n.d(t,{fromUtf8:()=>r,toUtf8:()=>i});var r=function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)}(e)},i=function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var s="%"+[i,e[++n],e[++n],e[++n]].map((function(e){return e.toString(16)})).join("%");t+=decodeURIComponent(s)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)}},6460:(e,t,n)=>{"use strict";n.d(t,{i:()=>o,gA:()=>s,OY:()=>a});var r=n(591),i=new WeakSet;function o(e){return i.has(e)}Symbol("A predicate that matches all records");var s=function(){function e(){}return Object.defineProperty(e,"ALL",{get:function(){var e=function(e){return e};return i.add(e),e},enumerable:!0,configurable:!0}),e}(),a=function(){function e(){}return e.createPredicateBuilder=function(t){var n,i=t.name,o=new Set(Object.keys(t.fields)),s=new Proxy({},n={get:function(t,s,a){var u=s;switch(u){case"and":case"or":case"not":return function(t){var r={type:u,predicates:[]},i=new Proxy({},n);return e.predicateGroupsMap.set(i,r),t(i),e.predicateGroupsMap.get(a).predicates.push(r),a};default:(0,r.y0)(u,!1)}var c=s;if(!o.has(c))throw new Error("Invalid field for model. field: "+c+", model: "+i);return function(t,n){return e.predicateGroupsMap.get(a).predicates.push({field:c,operator:t,operand:n}),a}}});return e.predicateGroupsMap.set(s,{type:"and",predicates:[]}),s},e.isValidPredicate=function(t){return e.predicateGroupsMap.has(t)},e.getPredicates=function(t,n){if(void 0===n&&(n=!0),n&&!e.isValidPredicate(t))throw new Error("The predicate is not valid");return e.predicateGroupsMap.get(t)},e.createFromExisting=function(t,n){if(n&&t)return n(e.createPredicateBuilder(t))},e.createForId=function(t,n){return e.createPredicateBuilder(t).id("eq",n)},e.predicateGroupsMap=new WeakMap,e}()},3581:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});var r=function(){function e(){}return e.createPredicateBuilder=function(t){var n=t.name,r=new Set(Object.keys(t.fields)),i=new Proxy({},{get:function(t,i,o){var s=i;if(!r.has(s))throw new Error("Invalid field for model. field: "+s+", model: "+n);return function(t){return e.sortPredicateGroupsMap.get(o).push({field:s,sortDirection:t}),o}}});return e.sortPredicateGroupsMap.set(i,[]),i},e.isValidPredicate=function(t){return e.sortPredicateGroupsMap.has(t)},e.getPredicates=function(t,n){if(void 0===n&&(n=!0),n&&!e.isValidPredicate(t))throw new Error("The predicate is not valid");return e.sortPredicateGroupsMap.get(t)},e.createFromExisting=function(t,n){if(n&&t)return n(e.createPredicateBuilder(t))},e.sortPredicateGroupsMap=new WeakMap,e}()},3177:(e,t,n)=>{"use strict";n.d(t,{l:()=>A});var r=n(5069),i=n(6471),o=n(591),s=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},a=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},u=function(){var e=this;this.db=new Map,this.getAllKeys=function(){return s(e,void 0,void 0,(function(){return a(this,(function(e){return[2,Array.from(this.db.keys())]}))}))},this.multiGet=function(t){return s(e,void 0,void 0,(function(){var e=this;return a(this,(function(n){return[2,t.reduce((function(t,n){return t.push([n,e.db.get(n)]),t}),[])]}))}))},this.multiRemove=function(t,n){return s(e,void 0,void 0,(function(){var e=this;return a(this,(function(r){return t.forEach((function(t){return e.db.delete(t)})),n(),[2]}))}))},this.multiSet=function(t,n){return s(e,void 0,void 0,(function(){var e=this;return a(this,(function(r){return t.forEach((function(t){var n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(t,2),r=n[0],i=n[1];e.setItem(r,i)})),n(),[2]}))}))},this.setItem=function(t,n){return s(e,void 0,void 0,(function(){return a(this,(function(e){return[2,this.db.set(t,n)]}))}))},this.removeItem=function(t){return s(e,void 0,void 0,(function(){return a(this,(function(e){return[2,this.db.delete(t)]}))}))},this.getItem=function(t){return s(e,void 0,void 0,(function(){return a(this,(function(e){return[2,this.db.get(t)]}))}))}},c=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},f=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},d=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},h="@AmplifyDatastore",p="Data",v=new Map;const g=function(){function e(){this._collectionInMemoryIndex=new Map,this.storage=new u}return e.prototype.getCollectionIndex=function(e){return this._collectionInMemoryIndex.has(e)||this._collectionInMemoryIndex.set(e,new Map),this._collectionInMemoryIndex.get(e)},e.prototype.getMonotonicFactory=function(e){return v.has(e)||v.set(e,(0,o.c6)()),v.get(e)},e.prototype.init=function(){return c(this,void 0,void 0,(function(){var e,t,n,r,i,o,s,a,u,c,v,g,y,m,b,w,S,_,E,I;return l(this,(function(l){switch(l.label){case 0:return this._collectionInMemoryIndex.clear(),[4,this.storage.getAllKeys()];case 1:e=l.sent(),t=[],l.label=2;case 2:l.trys.push([2,12,13,14]),n=f(e),r=n.next(),l.label=3;case 3:return r.done?[3,11]:(i=r.value,o=d(i.split("::"),5),s=o[0],a=o[1],u=o[2],c=o[3],v=o[4],s!==h?[3,10]:u!==p?[3,9]:(g=void 0,void 0!==v?[3,7]:(y=c,m=this.getMonotonicFactory(a)(),b=this.getLegacyKeyForItem(a,y),w=this.getKeyForItem(a,y,m),[4,this.storage.getItem(b)])));case 4:return S=l.sent(),[4,this.storage.setItem(w,S)];case 5:return l.sent(),[4,this.storage.removeItem(b)];case 6:return l.sent(),g=m,[3,8];case 7:g=c,l.label=8;case 8:return this.getCollectionIndex(a).set(v,g),[3,10];case 9:"Collection"===u&&t.push(i),l.label=10;case 10:return r=n.next(),[3,3];case 11:return[3,14];case 12:return _=l.sent(),E={error:_},[3,14];case 13:try{r&&!r.done&&(I=n.return)&&I.call(n)}finally{if(E)throw E.error}return[7];case 14:return t.length>0?[4,this.storage.multiRemove(t)]:[3,16];case 15:l.sent(),l.label=16;case 16:return[2]}}))}))},e.prototype.save=function(e,t){return c(this,void 0,void 0,(function(){var n,r;return l(this,(function(i){switch(i.label){case 0:return n=this.getCollectionIndex(t).get(e.id)||this.getMonotonicFactory(t)(),r=this.getKeyForItem(t,e.id,n),this.getCollectionIndex(t).set(e.id,n),[4,this.storage.setItem(r,JSON.stringify(e))];case 1:return i.sent(),[2]}}))}))},e.prototype.batchSave=function(e,t){return c(this,void 0,void 0,(function(){var n,r,o,s,a,u,c,h,p,v,g,y,m,b,w,S,_,E,I,A,C,T=this;return l(this,(function(l){switch(l.label){case 0:if(0===t.length)return[2,[]];n=[],r=this.getCollectionIndex(e),o=new Set,s=new Set,a=[],u={};try{for(c=f(t),h=c.next();!h.done;h=c.next())p=h.value,v=p.id,g=p._deleted,y=r.get(v)||this.getMonotonicFactory(e)(),_=this.getKeyForItem(e,v,y),a.push(_),u[_]={ulid:y,model:p},g?o.add(_):s.add(_)}catch(e){E={error:e}}finally{try{h&&!h.done&&(I=c.return)&&I.call(c)}finally{if(E)throw E.error}}return[4,this.storage.multiGet(a)];case 1:return m=l.sent(),b=m.filter((function(e){return!!d(e,2)[1]})).reduce((function(e,t){var n=d(t,1)[0];return e.add(n)}),new Set),[4,new Promise((function(e,t){if(0!==o.size){var n=Array.from(o);n.forEach((function(e){return r.delete(u[e].model.id)})),T.storage.multiRemove(n,(function(n){n&&n.length>0?t(n):e()}))}else e()}))];case 2:return l.sent(),[4,new Promise((function(e,t){if(0!==s.size){var n=Array.from(s).map((function(e){return[e,JSON.stringify(u[e].model)]}));s.forEach((function(e){var t=u[e],n=t.model.id,i=t.ulid;r.set(n,i)})),T.storage.multiSet(n,(function(n){n&&n.length>0?t(n):e()}))}else e()}))];case 3:l.sent();try{for(w=f(a),S=w.next();!S.done;S=w.next())_=S.value,o.has(_)&&b.has(_)?n.push([u[_].model,i.HP.DELETE]):s.has(_)&&n.push([u[_].model,b.has(_)?i.HP.UPDATE:i.HP.INSERT])}catch(e){A={error:e}}finally{try{S&&!S.done&&(C=w.return)&&C.call(w)}finally{if(A)throw A.error}}return[2,n]}}))}))},e.prototype.get=function(e,t){return c(this,void 0,void 0,(function(){var n,r,i;return l(this,(function(o){switch(o.label){case 0:return n=this.getCollectionIndex(t).get(e),r=this.getKeyForItem(t,e,n),[4,this.storage.getItem(r)];case 1:return[2,(i=o.sent())&&JSON.parse(i)]}}))}))},e.prototype.getOne=function(e,t){return c(this,void 0,void 0,(function(){var n,r,o,s,a,u,c;return l(this,(function(l){switch(l.label){case 0:return n=this.getCollectionIndex(t),r=d(e===i.fI.FIRST?function(){var e,t,r,i,o;try{for(var s=f(n),a=s.next();!a.done;a=s.next()){i=(r=d(a.value,2))[0],o=r[1];break}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return[i,o]}():function(){var e,t,r,i,o;try{for(var s=f(n),a=s.next();!a.done;a=s.next())i=(r=d(a.value,2))[0],o=r[1]}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return[i,o]}(),2),o=r[0],s=r[1],a=this.getKeyForItem(t,o,s),(c=a)?[4,this.storage.getItem(a)]:[3,2];case 1:c=l.sent(),l.label=2;case 2:return[2,(u=c)&&JSON.parse(u)||void 0]}}))}))},e.prototype.getAll=function(e,t){return c(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h,p,v,g,y,m,b,w,S;return l(this,(function(l){switch(l.label){case 0:n=this.getCollectionIndex(e),i=(r=t||{}).page,o=void 0===i?0:i,s=r.limit,a=void 0===s?0:s,u=Math.max(0,o*a)||0,c=a>0?u+a:void 0,h=[],p=0;try{for(v=f(n),g=v.next();!g.done&&(y=d(g.value,2),m=y[0],b=y[1],++p<=u||(h.push(this.getKeyForItem(e,m,b)),p!==c));g=v.next());}catch(e){w={error:e}}finally{try{g&&!g.done&&(S=v.return)&&S.call(v)}finally{if(w)throw w.error}}return[4,this.storage.multiGet(h)];case 1:return[2,l.sent().filter((function(e){return d(e,2)[1]})).map((function(e){var t=d(e,2)[1];return JSON.parse(t)}))]}}))}))},e.prototype.delete=function(e,t){return c(this,void 0,void 0,(function(){var n,r;return l(this,(function(i){switch(i.label){case 0:return n=this.getCollectionIndex(t).get(e),r=this.getKeyForItem(t,e,n),this.getCollectionIndex(t).delete(e),[4,this.storage.removeItem(r)];case 1:return i.sent(),[2]}}))}))},e.prototype.clear=function(){return c(this,void 0,void 0,(function(){var e,t;return l(this,(function(n){switch(n.label){case 0:return[4,this.storage.getAllKeys()];case 1:return e=n.sent(),t=e.filter((function(e){return e.startsWith(h)})),[4,this.storage.multiRemove(t)];case 2:return n.sent(),this._collectionInMemoryIndex.clear(),[2]}}))}))},e.prototype.getKeyForItem=function(e,t,n){return this.getKeyPrefixForStoreItems(e)+"::"+n+"::"+t},e.prototype.getLegacyKeyForItem=function(e,t){return this.getKeyPrefixForStoreItems(e)+"::"+t},e.prototype.getKeyPrefixForStoreItems=function(e){return h+"::"+e+"::"+p},e}();var y=n(6460),m=n(3581),b=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},w=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},S=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof E?E(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}},_=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},E=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},I=new r.k("DataStore"),A=function(){function e(){}return e.prototype.getStorenameForModel=function(e){var t=this.namespaceResolver(e),n=e.name;return this.getStorename(t,n)},e.prototype.getStorename=function(e,t){return e+"_"+t},e.prototype.setUp=function(e,t,n,r){return b(this,void 0,void 0,(function(){var i,o=this;return w(this,(function(s){switch(s.label){case 0:return this.initPromise?[3,1]:(this.initPromise=new Promise((function(e,t){o.resolve=e,o.reject=t})),[3,3]);case 1:return[4,this.initPromise];case 2:return s.sent(),[2];case 3:this.schema=e,this.namespaceResolver=t,this.modelInstanceCreator=n,this.getModelConstructorByModelName=r,s.label=4;case 4:return s.trys.push([4,7,,8]),this.db?[3,6]:(this.db=new g,[4,this.db.init()]);case 5:s.sent(),this.resolve(),s.label=6;case 6:return[3,8];case 7:return i=s.sent(),this.reject(i),[3,8];case 8:return[2]}}))}))},e.prototype.save=function(e,t){var n,r;return b(this,void 0,void 0,(function(){var s,a,u,c,l,f,d,h,p,v,g,m,b,_,E,A,C,T,O,x,k,P=this;return w(this,(function(w){switch(w.label){case 0:return s=Object.getPrototypeOf(e).constructor,a=this.getStorenameForModel(s),u=(0,o.jl)(s.name,e,this.schema.namespaces[this.namespaceResolver(s)],this.modelInstanceCreator,this.getModelConstructorByModelName),c=this.namespaceResolver(s),l=new Set,f=Object.values(u).map((function(e){var t=e.modelName,n=e.item,r=e.instance,i=P.getStorename(c,t);return l.add(i),{storeName:i,item:n,instance:r}})),[4,this.db.get(e.id,a)];case 1:if(d=w.sent(),t&&d&&(h=y.OY.getPredicates(t),p=h.predicates,v=h.type,!(0,o.u8)(d,v,p)))throw g="Conditional update failed",I.error(g,{model:d,condition:p}),new Error(g);m=[],w.label=2;case 2:w.trys.push([2,11,12,17]),b=S(f),w.label=3;case 3:return[4,b.next()];case 4:return(_=w.sent()).done?[3,10]:(E=_.value,A=E.storeName,C=E.item,T=E.instance,O=C.id,[4,this.db.get(O,A)]);case 5:return x=w.sent()?i.HP.UPDATE:i.HP.INSERT,O!==e.id?[3,7]:[4,this.db.save(C,A)];case 6:return w.sent(),m.push([T,x]),[3,9];case 7:return x!==i.HP.INSERT?[3,9]:[4,this.db.save(C,A)];case 8:w.sent(),m.push([T,x]),w.label=9;case 9:return[3,3];case 10:return[3,17];case 11:return k=w.sent(),n={error:k},[3,17];case 12:return w.trys.push([12,,15,16]),_&&!_.done&&(r=b.return)?[4,r.call(b)]:[3,14];case 13:w.sent(),w.label=14;case 14:return[3,16];case 15:if(n)throw n.error;return[7];case 16:return[7];case 17:return[2,m]}}))}))},e.prototype.load=function(e,t,n){var r,i,s,a,u,c,l,f,d,h;return b(this,void 0,void 0,(function(){var p,v,g,y,m,b,_,E,I,A,C,T,O,x,k,P,N,L,M=this;return w(this,(function(w){switch(w.label){case 0:if(p=this.schema.namespaces[e],v=p.relationships[t].relationTypes,g=v.map((function(t){var n=t.modelName;return M.getStorename(e,n)})),y=this.getModelConstructorByModelName(e,t),0===g.length)return[2,n.map((function(e){return M.modelInstanceCreator(y,e)}))];w.label=1;case 1:w.trys.push([1,34,35,40]),m=S(v),w.label=2;case 2:return[4,m.next()];case 3:if((b=w.sent()).done)return[3,33];switch(_=b.value,E=_.fieldName,I=_.modelName,A=_.targetName,C=_.relationType,T=this.getStorename(e,I),O=this.getModelConstructorByModelName(e,I),C){case"HAS_ONE":return[3,4];case"BELONGS_TO":return[3,17];case"HAS_MANY":return[3,30]}return[3,31];case 4:w.trys.push([4,10,11,16]),r=S(n),w.label=5;case 5:return[4,r.next()];case 6:return(i=w.sent()).done?[3,9]:(k=i.value)[E]?[4,this.db.get(k[E],T)]:[3,8];case 7:P=w.sent(),k[E]=P&&this.modelInstanceCreator(O,P),w.label=8;case 8:return[3,5];case 9:return[3,16];case 10:return x=w.sent(),l={error:x},[3,16];case 11:return w.trys.push([11,,14,15]),i&&!i.done&&(f=r.return)?[4,f.call(r)]:[3,13];case 12:w.sent(),w.label=13;case 13:return[3,15];case 14:if(l)throw l.error;return[7];case 15:return[7];case 16:return[3,32];case 17:w.trys.push([17,23,24,29]),s=S(n),w.label=18;case 18:return[4,s.next()];case 19:return(a=w.sent()).done?[3,22]:(k=a.value)[A]?[4,this.db.get(k[A],T)]:[3,21];case 20:P=w.sent(),k[E]=P&&this.modelInstanceCreator(O,P),delete k[A],w.label=21;case 21:return[3,18];case 22:return[3,29];case 23:return N=w.sent(),d={error:N},[3,29];case 24:return w.trys.push([24,,27,28]),a&&!a.done&&(h=s.return)?[4,h.call(s)]:[3,26];case 25:w.sent(),w.label=26;case 26:return[3,28];case 27:if(d)throw d.error;return[7];case 28:return[7];case 29:case 30:return[3,32];case 31:return(0,o.y0)(C),[3,32];case 32:return[3,2];case 33:return[3,40];case 34:return L=w.sent(),u={error:L},[3,40];case 35:return w.trys.push([35,,38,39]),b&&!b.done&&(c=m.return)?[4,c.call(m)]:[3,37];case 36:w.sent(),w.label=37;case 37:return[3,39];case 38:if(u)throw u.error;return[7];case 39:return[7];case 40:return[2,n.map((function(e){return M.modelInstanceCreator(y,e)}))]}}))}))},e.prototype.query=function(e,t,n){return b(this,void 0,void 0,(function(){var r,s,a,u,c,l,f,d,h,p,v,g,m;return w(this,(function(b){switch(b.label){case 0:return r=this.getStorenameForModel(e),s=this.namespaceResolver(e),a=n&&n.sort,t&&(u=y.OY.getPredicates(t))?(c=u.predicates,l=u.type,(f=1===c.length&&c.find((function(e){return(0,i.w5)(e)&&"id"===e.field&&"eq"===e.operator})))?(d=f.operand,[4,this.db.get(d,r)]):[3,4]):[3,7];case 1:return(h=b.sent())?[4,this.load(s,e.name,[h])]:[3,3];case 2:return[2,[_.apply(void 0,[b.sent(),1])[0]]];case 3:return[2,[]];case 4:return[4,this.db.getAll(r)];case 5:return p=b.sent(),v=c?p.filter((function(e){return(0,o.u8)(e,l,c)})):p,[4,this.load(s,e.name,this.inMemoryPagination(v,n))];case 6:return[2,b.sent()];case 7:return a?[4,this.db.getAll(r)]:[3,10];case 8:return g=b.sent(),[4,this.load(s,e.name,this.inMemoryPagination(g,n))];case 9:return[2,b.sent()];case 10:return[4,this.db.getAll(r,n)];case 11:return m=b.sent(),[4,this.load(s,e.name,m)];case 12:return[2,b.sent()]}}))}))},e.prototype.inMemoryPagination=function(e,t){if(t){if(t.sort){var n=m.c.getPredicates(t.sort);if(n.length){var r=(0,o.z8)(n);e.sort(r)}}var i=t.page,s=void 0===i?0:i,a=t.limit,u=void 0===a?0:a,c=Math.max(0,s*u)||0,l=u>0?c+u:e.length;return e.slice(c,l)}return e},e.prototype.queryOne=function(e,t){return void 0===t&&(t=i.fI.FIRST),b(this,void 0,void 0,(function(){var n,r;return w(this,(function(i){switch(i.label){case 0:return n=this.getStorenameForModel(e),[4,this.db.getOne(t,n)];case 1:return[2,(r=i.sent())&&this.modelInstanceCreator(e,r)]}}))}))},e.prototype.delete=function(e,t){return b(this,void 0,void 0,(function(){var n,r,i,s,a,u,c,l,f,d,h,p,v;return w(this,(function(g){switch(g.label){case 0:return n=[],(0,o.hK)(e)?(s=e,a=this.namespaceResolver(s),[4,this.query(s,t)]):[3,8];case 1:return r=g.sent(),p=this.schema.namespaces[a].relationships[s.name].relationTypes,void 0===t?[3,4]:[4,this.deleteTraverse(p,r,s.name,a,n)];case 2:return g.sent(),[4,this.deleteItem(n)];case 3:return g.sent(),v=n.reduce((function(e,t){var n=t.items;return e.concat(n)}),[]),[2,[r,v]];case 4:return[4,this.deleteTraverse(p,r,s.name,a,n)];case 5:return g.sent(),[4,this.deleteItem(n)];case 6:return g.sent(),v=n.reduce((function(e,t){var n=t.items;return e.concat(n)}),[]),[2,[r,v]];case 7:return[3,15];case 8:return i=e,s=Object.getPrototypeOf(i).constructor,a=this.namespaceResolver(s),u=this.getStorenameForModel(s),t?[4,this.db.get(i.id,u)]:[3,11];case 9:if(void 0===(c=g.sent()))return h="Model instance not found in storage",I.warn(h,{model:i}),[2,[[i],[]]];if(l=y.OY.getPredicates(t),f=l.predicates,d=l.type,!(0,o.u8)(c,d,f))throw h="Conditional update failed",I.error(h,{model:c,condition:f}),new Error(h);return p=this.schema.namespaces[a].relationships[s.name].relationTypes,[4,this.deleteTraverse(p,[i],s.name,a,n)];case 10:return g.sent(),[3,13];case 11:return p=this.schema.namespaces[a].relationships[s.name].relationTypes,[4,this.deleteTraverse(p,[i],s.name,a,n)];case 12:g.sent(),g.label=13;case 13:return[4,this.deleteItem(n)];case 14:return g.sent(),v=n.reduce((function(e,t){var n=t.items;return e.concat(n)}),[]),[2,[[i],v]];case 15:return[2]}}))}))},e.prototype.deleteItem=function(e){var t,n,r,i,o,s;return b(this,void 0,void 0,(function(){var a,u,c,l,f,d,h,p,v;return w(this,(function(g){switch(g.label){case 0:g.trys.push([0,17,18,23]),t=S(e),g.label=1;case 1:return[4,t.next()];case 2:if((n=g.sent()).done)return[3,16];a=n.value,u=a.storeName,c=a.items,g.label=3;case 3:g.trys.push([3,9,10,15]),l=S(c),g.label=4;case 4:return[4,l.next()];case 5:return(f=g.sent()).done?[3,8]:(d=f.value)?"object"!=typeof d?[3,7]:(h=d.id,[4,this.db.delete(h,u)]):[3,7];case 6:g.sent(),g.label=7;case 7:return[3,4];case 8:return[3,15];case 9:return p=g.sent(),o={error:p},[3,15];case 10:return g.trys.push([10,,13,14]),f&&!f.done&&(s=l.return)?[4,s.call(l)]:[3,12];case 11:g.sent(),g.label=12;case 12:return[3,14];case 13:if(o)throw o.error;return[7];case 14:return[7];case 15:return[3,1];case 16:return[3,23];case 17:return v=g.sent(),r={error:v},[3,23];case 18:return g.trys.push([18,,21,22]),n&&!n.done&&(i=t.return)?[4,i.call(t)]:[3,20];case 19:g.sent(),g.label=20;case 20:return[3,22];case 21:if(r)throw r.error;return[7];case 22:return[7];case 23:return[2]}}))}))},e.prototype.deleteTraverse=function(e,t,n,r,i){var s,a,u,c,l,f,d,h,p,v,g,y;return b(this,void 0,void 0,(function(){var m,b,_,E,I,A,C,T,O,x,k,P,N=this;return w(this,(function(w){switch(w.label){case 0:w.trys.push([0,35,36,41]),s=S(e),w.label=1;case 1:return[4,s.next()];case 2:if((a=w.sent()).done)return[3,34];switch(m=a.value,b=m.relationType,_=m.modelName,E=this.getStorename(r,_),I=(0,o.rw)(this.schema.namespaces[r].relationships[_].relationTypes,n)||(0,o.NA)(this.schema.namespaces[r].relationships[_].indexes,m.associatedWith),b){case"HAS_ONE":return[3,3];case"HAS_MANY":return[3,17];case"BELONGS_TO":return[3,31]}return[3,32];case 3:w.trys.push([3,10,11,16]),u=S(t),w.label=4;case 4:return[4,u.next()];case 5:return(c=w.sent()).done?[3,9]:(T=c.value,[4,this.db.getAll(E)]);case 6:return O=w.sent(),A=O.filter((function(e){return e[I]===T.id})),[4,this.deleteTraverse(this.schema.namespaces[r].relationships[_].relationTypes,A,_,r,i)];case 7:w.sent(),w.label=8;case 8:return[3,4];case 9:return[3,16];case 10:return C=w.sent(),p={error:C},[3,16];case 11:return w.trys.push([11,,14,15]),c&&!c.done&&(v=u.return)?[4,v.call(u)]:[3,13];case 12:w.sent(),w.label=13;case 13:return[3,15];case 14:if(p)throw p.error;return[7];case 15:return[7];case 16:return[3,33];case 17:w.trys.push([17,24,25,30]),l=S(t),w.label=18;case 18:return[4,l.next()];case 19:return(f=w.sent()).done?[3,23]:(T=f.value,[4,this.db.getAll(E)]);case 20:return O=w.sent(),x=O.filter((function(e){return e[I]===T.id})),[4,this.deleteTraverse(this.schema.namespaces[r].relationships[_].relationTypes,x,_,r,i)];case 21:w.sent(),w.label=22;case 22:return[3,18];case 23:return[3,30];case 24:return k=w.sent(),g={error:k},[3,30];case 25:return w.trys.push([25,,28,29]),f&&!f.done&&(y=l.return)?[4,y.call(l)]:[3,27];case 26:w.sent(),w.label=27;case 27:return[3,29];case 28:if(g)throw g.error;return[7];case 29:return[7];case 30:case 31:return[3,33];case 32:return(0,o.y0)(b),[3,33];case 33:return[3,1];case 34:return[3,41];case 35:return P=w.sent(),d={error:P},[3,41];case 36:return w.trys.push([36,,39,40]),a&&!a.done&&(h=s.return)?[4,h.call(s)]:[3,38];case 37:w.sent(),w.label=38;case 38:return[3,40];case 39:if(d)throw d.error;return[7];case 40:return[7];case 41:return i.push({storeName:this.getStorename(r,n),items:t.map((function(e){return N.modelInstanceCreator(N.getModelConstructorByModelName(r,n),e)}))}),[2]}}))}))},e.prototype.clear=function(){return b(this,void 0,void 0,(function(){return w(this,(function(e){switch(e.label){case 0:return[4,this.db.clear()];case 1:return e.sent(),this.db=void 0,this.initPromise=void 0,[2]}}))}))},e.prototype.batchSave=function(e,t){return b(this,void 0,void 0,(function(){var n,r,i,s,a,u,c,l,f,d,h;return w(this,(function(p){switch(p.label){case 0:n=e.name,r=this.namespaceResolver(e),i=this.getStorename(r,n),s=[],a=function(t){var n=t.id,r=(0,o.jl)(e.name,u.modelInstanceCreator(e,t),u.schema.namespaces[u.namespaceResolver(e)],u.modelInstanceCreator,u.getModelConstructorByModelName).find((function(e){return e.instance.id===n})).instance;s.push(r)},u=this;try{for(c=E(t),l=c.next();!l.done;l=c.next())f=l.value,a(f)}catch(e){d={error:e}}finally{try{l&&!l.done&&(h=c.return)&&h.call(c)}finally{if(d)throw d.error}}return[4,this.db.batchSave(i,s)];case 1:return[2,p.sent()]}}))}))},e}();new A},6263:(e,t,n)=>{"use strict";n.d(t,{Z:()=>M});var r=n(5069);let i,o;const s=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,l=new WeakMap;let f={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return a.get(e);if("objectStoreNames"===t)return e.objectStoreNames||u.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return h(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function d(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(o||(o=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(p(this),e),h(s.get(this))}:function(...e){return h(t.apply(p(this),e))}:function(e,...n){const r=t.call(p(this),e,...n);return u.set(r,e.sort?e.sort():[e]),h(r)}:(e instanceof IDBTransaction&&function(e){if(a.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));a.set(e,t)}(e),n=e,(i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>n instanceof e))?new Proxy(e,f):e);var t,n}function h(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(h(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&s.set(t,e)})).catch((()=>{})),l.set(t,e),t}(e);if(c.has(e))return c.get(e);const t=d(e);return t!==e&&(c.set(e,t),l.set(t,e)),t}const p=e=>l.get(e);function v(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(e,t),a=h(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(h(s.result),e.oldVersion,e.newVersion,h(s.transaction))})),n&&s.addEventListener("blocked",(()=>n())),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),a}function g(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(()=>t())),h(n).then((()=>{}))}const y=["get","getKey","getAll","getAllKeys","count"],m=["put","add","delete","clear"],b=new Map;function w(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(b.get(t))return b.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=m.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!y.includes(n))return;const o=async function(e,...t){const o=this.transaction(e,i?"readwrite":"readonly");let s=o.store;r&&(s=s.index(t.shift()));const a=await s[n](...t);return i&&await o.done,a};return b.set(t,o),o}var S;S=f,f={...S,get:(e,t,n)=>w(e,t)||S.get(e,t,n),has:(e,t)=>!!w(e,t)||S.has(e,t)};var _=n(6460),E=n(3581),I=n(6471),A=n(591),C=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},T=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},O=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof x?x(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}},x=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},k=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},P=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(k(arguments[t]));return e},N=new r.k("DataStore"),L="amplify-datastore";const M=new(function(){function e(){this.dbName=L}return e.prototype.checkPrivate=function(){return C(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return[4,(0,A.D0)().then((function(e){return e}))];case 1:return e.sent()?(N.error("IndexedDB not supported in this browser's private mode"),[2,Promise.reject("IndexedDB not supported in this browser's private mode")]):[2,Promise.resolve()]}}))}))},e.prototype.getStorenameForModel=function(e){var t=this.namespaceResolver(e),n=e.name;return this.getStorename(t,n)},e.prototype.getStorename=function(e,t){return e+"_"+t},e.prototype.setUp=function(e,t,n,r,i){return C(this,void 0,void 0,(function(){var o,s,a=this;return T(this,(function(u){switch(u.label){case 0:return[4,this.checkPrivate()];case 1:return u.sent(),this.initPromise?[3,2]:(this.initPromise=new Promise((function(e,t){a.resolve=e,a.reject=t})),[3,4]);case 2:return[4,this.initPromise];case 3:u.sent(),u.label=4;case 4:i&&(this.dbName=L+"-"+i),this.schema=e,this.namespaceResolver=t,this.modelInstanceCreator=n,this.getModelConstructorByModelName=r,u.label=5;case 5:return u.trys.push([5,8,,9]),this.db?[3,7]:(o=this,[4,v(this.dbName,2,{upgrade:function(t,n,r,i){return C(a,void 0,void 0,(function(){var o,s,a,u,c,l,f,d,h,p,v,g,y=this;return T(this,(function(m){switch(m.label){case 0:if(0===n)return Object.keys(e.namespaces).forEach((function(n){var r=e.namespaces[n];Object.keys(r.models).forEach((function(e){var r=y.getStorename(n,e),i=t.createObjectStore(r,{autoIncrement:!0});y.schema.namespaces[n].relationships[e].indexes.forEach((function(e){return i.createIndex(e,e)})),i.createIndex("byId","id",{unique:!0})}))})),[2];if(1!==n||2!==r)return[3,16];m.label=1;case 1:m.trys.push([1,14,,15]),m.label=2;case 2:m.trys.push([2,11,12,13]),o=x(i.objectStoreNames),s=o.next(),m.label=3;case 3:return s.done?[3,10]:(a=s.value,u=i.objectStore(a),c="tmp_"+a,u.name=c,(l=t.createObjectStore(a,{keyPath:void 0,autoIncrement:!0})).createIndex("byId","id",{unique:!0}),[4,u.openCursor()]);case 4:f=m.sent(),d=0,m.label=5;case 5:return f&&f.value?[4,l.put(f.value)]:[3,8];case 6:return m.sent(),[4,f.continue()];case 7:return f=m.sent(),d++,[3,5];case 8:t.deleteObjectStore(c),N.debug(d+" "+a+" records migrated"),m.label=9;case 9:return s=o.next(),[3,3];case 10:return[3,13];case 11:return h=m.sent(),v={error:h},[3,13];case 12:try{s&&!s.done&&(g=o.return)&&g.call(o)}finally{if(v)throw v.error}return[7];case 13:return[3,15];case 14:throw p=m.sent(),N.error("Error migrating IndexedDB data",p),i.abort(),p;case 15:case 16:return[2]}}))}))}})]);case 6:o.db=u.sent(),this.resolve(),u.label=7;case 7:return[3,9];case 8:return s=u.sent(),this.reject(s),[3,9];case 9:return[2]}}))}))},e.prototype._get=function(e,t){return C(this,void 0,void 0,(function(){var n,r;return T(this,(function(i){switch(i.label){case 0:return"string"==typeof e?(r=e,n=this.db.transaction(r,"readonly").store.index("byId")):n=e.index("byId"),[4,n.get(t)];case 1:return[2,i.sent()]}}))}))},e.prototype.save=function(e,t){var n,r;return C(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,f,d,h,p,v,g,y,m,b,w,S,E,C,x,k,L,M,R,D=this;return T(this,(function(T){switch(T.label){case 0:return[4,this.checkPrivate()];case 1:return T.sent(),i=Object.getPrototypeOf(e).constructor,o=this.getStorenameForModel(i),s=(0,A.jl)(i.name,e,this.schema.namespaces[this.namespaceResolver(i)],this.modelInstanceCreator,this.getModelConstructorByModelName),a=this.namespaceResolver(i),u=new Set,c=Object.values(s).map((function(e){var t=e.modelName,n=e.item,r=e.instance,i=D.getStorename(a,t);return u.add(i),{storeName:i,item:n,instance:r}})),l=this.db.transaction(P([o],Array.from(u.values())),"readwrite"),f=l.objectStore(o),[4,this._get(f,e.id)];case 2:if(d=T.sent(),t&&d&&(h=_.OY.getPredicates(t),p=h.predicates,v=h.type,!(0,A.u8)(d,v,p)))throw g="Conditional update failed",N.error(g,{model:d,condition:p}),new Error(g);y=[],T.label=3;case 3:T.trys.push([3,14,15,20]),m=O(c),T.label=4;case 4:return[4,m.next()];case 5:return(b=T.sent()).done?[3,13]:(w=b.value,S=w.storeName,E=w.item,C=w.instance,x=l.objectStore(S),k=E.id,[4,this._get(x,k)]);case 6:return L=void 0===T.sent()?I.HP.INSERT:I.HP.UPDATE,k!==e.id?[3,9]:[4,x.index("byId").getKey(E.id)];case 7:return M=T.sent(),[4,x.put(E,M)];case 8:return T.sent(),y.push([C,L]),[3,12];case 9:return L!==I.HP.INSERT?[3,12]:[4,x.index("byId").getKey(E.id)];case 10:return M=T.sent(),[4,x.put(E,M)];case 11:T.sent(),y.push([C,L]),T.label=12;case 12:return[3,4];case 13:return[3,20];case 14:return R=T.sent(),n={error:R},[3,20];case 15:return T.trys.push([15,,18,19]),b&&!b.done&&(r=m.return)?[4,r.call(m)]:[3,17];case 16:T.sent(),T.label=17;case 17:return[3,19];case 18:if(n)throw n.error;return[7];case 19:return[7];case 20:return[4,l.done];case 21:return T.sent(),[2,y]}}))}))},e.prototype.load=function(e,t,n){var r,i,o,s,a,u,c,l,f,d;return C(this,void 0,void 0,(function(){var h,p,v,g,y,m,b,w,S,_,E,I,C,x,k,N,L,M,R,D=this;return T(this,(function(T){switch(T.label){case 0:if(h=this.schema.namespaces[e],p=h.relationships[t].relationTypes,v=p.map((function(t){var n=t.modelName;return D.getStorename(e,n)})),g=this.getModelConstructorByModelName(e,t),0===v.length)return[2,n.map((function(e){return D.modelInstanceCreator(g,e)}))];y=this.db.transaction(P(v),"readonly"),T.label=1;case 1:T.trys.push([1,34,35,40]),m=O(p),T.label=2;case 2:return[4,m.next()];case 3:if((b=T.sent()).done)return[3,33];switch(w=b.value,S=w.fieldName,_=w.modelName,E=w.targetName,I=this.getStorename(e,_),C=y.objectStore(I),x=this.getModelConstructorByModelName(e,_),w.relationType){case"HAS_ONE":return[3,4];case"BELONGS_TO":return[3,17];case"HAS_MANY":return[3,30]}return[3,31];case 4:T.trys.push([4,10,11,16]),r=O(n),T.label=5;case 5:return[4,r.next()];case 6:return(i=T.sent()).done?[3,9]:(N=i.value)[S]?[4,this._get(C,N[S])]:[3,8];case 7:L=T.sent(),N[S]=L&&this.modelInstanceCreator(x,L),T.label=8;case 8:return[3,5];case 9:return[3,16];case 10:return k=T.sent(),c={error:k},[3,16];case 11:return T.trys.push([11,,14,15]),i&&!i.done&&(l=r.return)?[4,l.call(r)]:[3,13];case 12:T.sent(),T.label=13;case 13:return[3,15];case 14:if(c)throw c.error;return[7];case 15:return[7];case 16:return[3,32];case 17:T.trys.push([17,23,24,29]),o=O(n),T.label=18;case 18:return[4,o.next()];case 19:return(s=T.sent()).done?[3,22]:(N=s.value)[E]?[4,this._get(C,N[E])]:[3,21];case 20:L=T.sent(),N[S]=L&&this.modelInstanceCreator(x,L),delete N[E],T.label=21;case 21:return[3,18];case 22:return[3,29];case 23:return M=T.sent(),f={error:M},[3,29];case 24:return T.trys.push([24,,27,28]),s&&!s.done&&(d=o.return)?[4,d.call(o)]:[3,26];case 25:T.sent(),T.label=26;case 26:return[3,28];case 27:if(f)throw f.error;return[7];case 28:return[7];case 29:case 30:return[3,32];case 31:return(0,A.y0)(w.relationType),[3,32];case 32:return[3,2];case 33:return[3,40];case 34:return R=T.sent(),a={error:R},[3,40];case 35:return T.trys.push([35,,38,39]),b&&!b.done&&(u=m.return)?[4,u.call(m)]:[3,37];case 36:T.sent(),T.label=37;case 37:return[3,39];case 38:if(a)throw a.error;return[7];case 39:return[7];case 40:return[2,n.map((function(e){return D.modelInstanceCreator(g,e)}))]}}))}))},e.prototype.query=function(e,t,n){return C(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,f,d,h,p,v;return T(this,(function(g){switch(g.label){case 0:return[4,this.checkPrivate()];case 1:return g.sent(),r=this.getStorenameForModel(e),i=this.namespaceResolver(e),o=n&&n.sort,t&&(s=_.OY.getPredicates(t))?(a=s.predicates,u=s.type,(c=1===a.length&&a.find((function(e){return(0,I.w5)(e)&&"id"===e.field&&"eq"===e.operator})))?(l=c.operand,[4,this._get(r,l)]):[3,5]):[3,8];case 2:return(f=g.sent())?[4,this.load(i,e.name,[f])]:[3,4];case 3:return[2,[k.apply(void 0,[g.sent(),1])[0]]];case 4:return[2,[]];case 5:return[4,this.db.getAll(r)];case 6:return h=g.sent(),d=a?h.filter((function(e){return(0,A.u8)(e,u,a)})):h,[4,this.load(i,e.name,this.inMemoryPagination(d,n))];case 7:return[2,g.sent()];case 8:return o?[4,this.db.getAll(r)]:[3,11];case 9:return h=g.sent(),[4,this.load(i,e.name,this.inMemoryPagination(h,n))];case 10:return[2,g.sent()];case 11:return p=this.load,v=[i,e.name],[4,this.enginePagination(r,n)];case 12:return[4,p.apply(this,v.concat([g.sent()]))];case 13:return[2,g.sent()]}}))}))},e.prototype.inMemoryPagination=function(e,t){if(t){if(t.sort){var n=E.c.getPredicates(t.sort);if(n.length){var r=(0,A.z8)(n);e.sort(r)}}var i=t.page,o=void 0===i?0:i,s=t.limit,a=void 0===s?0:s,u=Math.max(0,o*a)||0,c=a>0?u+a:e.length;return e.slice(u,c)}return e},e.prototype.enginePagination=function(e,t){return C(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d;return T(this,(function(h){switch(h.label){case 0:return t?(r=t.page,i=void 0===r?0:r,o=t.limit,s=void 0===o?0:o,a=Math.max(0,i*s)||0,[4,this.db.transaction(e).objectStore(e).openCursor()]):[3,7];case 1:return(u=h.sent())&&a>0?[4,u.advance(a)]:[3,3];case 2:h.sent(),h.label=3;case 3:c=[],l="number"==typeof s&&s>0,f=!0,d=s,h.label=4;case 4:return f&&u&&u.value?(c.push(u.value),[4,u.continue()]):[3,6];case 5:return u=h.sent(),l?(d--,f=d>0&&null!==u):f=null!==u,[3,4];case 6:return n=c,[3,9];case 7:return[4,this.db.getAll(e)];case 8:n=h.sent(),h.label=9;case 9:return[2,n]}}))}))},e.prototype.queryOne=function(e,t){return void 0===t&&(t=I.fI.FIRST),C(this,void 0,void 0,(function(){var n,r,i;return T(this,(function(o){switch(o.label){case 0:return[4,this.checkPrivate()];case 1:return o.sent(),n=this.getStorenameForModel(e),[4,this.db.transaction([n],"readonly").objectStore(n).openCursor(void 0,t===I.fI.FIRST?"next":"prev")];case 2:return r=o.sent(),[2,(i=r?r.value:void 0)&&this.modelInstanceCreator(e,i)]}}))}))},e.prototype.delete=function(e,t){return C(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d,h,p,v,g;return T(this,(function(y){switch(y.label){case 0:return[4,this.checkPrivate()];case 1:return y.sent(),n=[],(0,A.hK)(e)?(o=e,s=this.namespaceResolver(o),a=this.getStorenameForModel(o),[4,this.query(o,t)]):[3,9];case 2:return r=y.sent(),v=this.schema.namespaces[s].relationships[o.name].relationTypes,void 0===t?[3,5]:[4,this.deleteTraverse(v,r,o.name,s,n)];case 3:return y.sent(),[4,this.deleteItem(n)];case 4:return y.sent(),g=n.reduce((function(e,t){var n=t.items;return e.concat(n)}),[]),[2,[r,g]];case 5:return[4,this.deleteTraverse(v,r,o.name,s,n)];case 6:return y.sent(),[4,this.db.transaction([a],"readwrite").objectStore(a).clear()];case 7:return y.sent(),g=n.reduce((function(e,t){var n=t.items;return e.concat(n)}),[]),[2,[r,g]];case 8:return[3,17];case 9:return i=e,o=Object.getPrototypeOf(i).constructor,s=this.namespaceResolver(o),a=this.getStorenameForModel(o),t?(u=this.db.transaction([a],"readwrite"),c=u.objectStore(a),[4,this._get(c,i.id)]):[3,13];case 10:if(void 0===(l=y.sent()))return p="Model instance not found in storage",N.warn(p,{model:i}),[2,[[i],[]]];if(f=_.OY.getPredicates(t),d=f.predicates,h=f.type,!(0,A.u8)(l,h,d))throw p="Conditional update failed",N.error(p,{model:l,condition:d}),new Error(p);return[4,u.done];case 11:return y.sent(),v=this.schema.namespaces[s].relationships[o.name].relationTypes,[4,this.deleteTraverse(v,[i],o.name,s,n)];case 12:return y.sent(),[3,15];case 13:return v=this.schema.namespaces[s].relationships[o.name].relationTypes,[4,this.deleteTraverse(v,[i],o.name,s,n)];case 14:y.sent(),y.label=15;case 15:return[4,this.deleteItem(n)];case 16:return y.sent(),g=n.reduce((function(e,t){var n=t.items;return e.concat(n)}),[]),[2,[[i],g]];case 17:return[2]}}))}))},e.prototype.deleteItem=function(e){var t,n,r,i,o,s;return C(this,void 0,void 0,(function(){var a,u,c,l,f,d,h,p,v,g,y,m;return T(this,(function(b){switch(b.label){case 0:a=e.map((function(e){return e.storeName})),u=this.db.transaction(P(a),"readwrite"),b.label=1;case 1:b.trys.push([1,22,23,28]),t=O(e),b.label=2;case 2:return[4,t.next()];case 3:if((n=b.sent()).done)return[3,21];c=n.value,l=c.storeName,f=c.items,d=u.objectStore(l),b.label=4;case 4:b.trys.push([4,14,15,20]),h=O(f),b.label=5;case 5:return[4,h.next()];case 6:return(p=b.sent()).done?[3,13]:(v=p.value)?(g=void 0,"object"!=typeof v?[3,8]:[4,d.index("byId").getKey(v.id)]):[3,12];case 7:return g=b.sent(),[3,10];case 8:return[4,d.index("byId").getKey(v.toString())];case 9:g=b.sent(),b.label=10;case 10:return void 0===g?[3,12]:[4,d.delete(g)];case 11:b.sent(),b.label=12;case 12:return[3,5];case 13:return[3,20];case 14:return y=b.sent(),o={error:y},[3,20];case 15:return b.trys.push([15,,18,19]),p&&!p.done&&(s=h.return)?[4,s.call(h)]:[3,17];case 16:b.sent(),b.label=17;case 17:return[3,19];case 18:if(o)throw o.error;return[7];case 19:return[7];case 20:return[3,2];case 21:return[3,28];case 22:return m=b.sent(),r={error:m},[3,28];case 23:return b.trys.push([23,,26,27]),n&&!n.done&&(i=t.return)?[4,i.call(t)]:[3,25];case 24:b.sent(),b.label=25;case 25:return[3,27];case 26:if(r)throw r.error;return[7];case 27:return[7];case 28:return[2]}}))}))},e.prototype.deleteTraverse=function(e,t,n,r,i){var o,s,a,u,c,l,f,d,h,p,v,g;return C(this,void 0,void 0,(function(){var y,m,b,w,S,_,E,I,C,x,k,P=this;return T(this,(function(T){switch(T.label){case 0:T.trys.push([0,35,36,41]),o=O(e),T.label=1;case 1:return[4,o.next()];case 2:if((s=T.sent()).done)return[3,34];switch(y=s.value,m=y.relationType,y.fieldName,b=y.modelName,w=this.getStorename(r,b),S=(0,A.rw)(this.schema.namespaces[r].relationships[b].relationTypes,n)||(0,A.NA)(this.schema.namespaces[r].relationships[b].indexes,y.associatedWith),m){case"HAS_ONE":return[3,3];case"HAS_MANY":return[3,17];case"BELONGS_TO":return[3,31]}return[3,32];case 3:T.trys.push([3,10,11,16]),a=O(t),T.label=4;case 4:return[4,a.next()];case 5:return(u=T.sent()).done?[3,9]:(I=u.value,[4,this.db.transaction(w,"readwrite").objectStore(w).index(S).get(I.id)]);case 6:return _=T.sent(),[4,this.deleteTraverse(this.schema.namespaces[r].relationships[b].relationTypes,_?[_]:[],b,r,i)];case 7:T.sent(),T.label=8;case 8:return[3,4];case 9:return[3,16];case 10:return E=T.sent(),h={error:E},[3,16];case 11:return T.trys.push([11,,14,15]),u&&!u.done&&(p=a.return)?[4,p.call(a)]:[3,13];case 12:T.sent(),T.label=13;case 13:return[3,15];case 14:if(h)throw h.error;return[7];case 15:return[7];case 16:return[3,33];case 17:T.trys.push([17,24,25,30]),c=O(t),T.label=18;case 18:return[4,c.next()];case 19:return(l=T.sent()).done?[3,23]:(I=l.value,[4,this.db.transaction(w,"readwrite").objectStore(w).index(S).getAll(I.id)]);case 20:return C=T.sent(),[4,this.deleteTraverse(this.schema.namespaces[r].relationships[b].relationTypes,C,b,r,i)];case 21:T.sent(),T.label=22;case 22:return[3,18];case 23:return[3,30];case 24:return x=T.sent(),v={error:x},[3,30];case 25:return T.trys.push([25,,28,29]),l&&!l.done&&(g=c.return)?[4,g.call(c)]:[3,27];case 26:T.sent(),T.label=27;case 27:return[3,29];case 28:if(v)throw v.error;return[7];case 29:return[7];case 30:case 31:return[3,33];case 32:return(0,A.y0)(m),[3,33];case 33:return[3,1];case 34:return[3,41];case 35:return k=T.sent(),f={error:k},[3,41];case 36:return T.trys.push([36,,39,40]),s&&!s.done&&(d=o.return)?[4,d.call(o)]:[3,38];case 37:T.sent(),T.label=38;case 38:return[3,40];case 39:if(f)throw f.error;return[7];case 40:return[7];case 41:return i.push({storeName:this.getStorename(r,n),items:t.map((function(e){return P.modelInstanceCreator(P.getModelConstructorByModelName(r,n),e)}))}),[2]}}))}))},e.prototype.clear=function(){return C(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return[4,this.checkPrivate()];case 1:return e.sent(),this.db.close(),[4,g(this.dbName)];case 2:return e.sent(),this.db=void 0,this.initPromise=void 0,[2]}}))}))},e.prototype.batchSave=function(e,t){return C(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f,d,h;return T(this,(function(p){switch(p.label){case 0:return 0===t.length?[2,[]]:[4,this.checkPrivate()];case 1:p.sent(),n=[],r=this.getStorenameForModel(e),i=this.db.transaction(r,"readwrite"),o=i.store,s=function(t){var r,i,s,u,c;return T(this,(function(l){switch(l.label){case 0:return r=(0,A.jl)(e.name,a.modelInstanceCreator(e,t),a.schema.namespaces[a.namespaceResolver(e)],a.modelInstanceCreator,a.getModelConstructorByModelName),i=t.id,s=t._deleted,[4,o.index("byId").getKey(i)];case 1:return u=l.sent(),s?[3,3]:(c=r.find((function(e){return e.instance.id===i})).instance,n.push([c,u?I.HP.UPDATE:I.HP.INSERT]),[4,o.put(c,u)]);case 2:return l.sent(),[3,5];case 3:return n.push([t,I.HP.DELETE]),u?[4,o.delete(u)]:[3,5];case 4:l.sent(),l.label=5;case 5:return[2]}}))},a=this,p.label=2;case 2:p.trys.push([2,7,8,9]),u=x(t),c=u.next(),p.label=3;case 3:return c.done?[3,6]:(l=c.value,[5,s(l)]);case 4:p.sent(),p.label=5;case 5:return c=u.next(),[3,3];case 6:return[3,9];case 7:return f=p.sent(),d={error:f},[3,9];case 8:try{c&&!c.done&&(h=u.return)&&h.call(u)}finally{if(d)throw d.error}return[7];case 9:return[4,i.done];case 10:return p.sent(),[2,n]}}))}))},e}())},6471:(e,t,n)=>{"use strict";n.d(t,{aQ:()=>u,Fr:()=>c,n2:()=>r,BV:()=>l,I7:()=>f,$v:()=>d,g5:()=>h,HP:()=>i,w5:()=>p,G9:()=>v,fI:()=>o,Sr:()=>s,K5:()=>g});var r,i,o,s,a=n(591);function u(e){return e&&void 0!==e.pluralName}function c(e){return e&&e.targetName}function l(e){return e&&void 0!==r[e]}function f(e){return!(!e||!e.model)}function d(e){return!(!e||!e.nonModel)}function h(e){return!(!e||!e.enum)}function p(e){return e&&void 0!==e.field}function v(e){return e&&void 0!==e.type}!function(e){e[e.ID=0]="ID",e[e.String=1]="String",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Boolean=4]="Boolean",e[e.AWSDate=5]="AWSDate",e[e.AWSTime=6]="AWSTime",e[e.AWSDateTime=7]="AWSDateTime",e[e.AWSTimestamp=8]="AWSTimestamp",e[e.AWSEmail=9]="AWSEmail",e[e.AWSJSON=10]="AWSJSON",e[e.AWSURL=11]="AWSURL",e[e.AWSPhone=12]="AWSPhone",e[e.AWSIPAddress=13]="AWSIPAddress"}(r||(r={})),function(e){e.getJSType=function(e){switch(e){case"Boolean":return"boolean";case"ID":case"String":case"AWSDate":case"AWSTime":case"AWSDateTime":case"AWSEmail":case"AWSJSON":case"AWSURL":case"AWSPhone":case"AWSIPAddress":return"string";case"Int":case"Float":case"AWSTimestamp":return"number";default:(0,a.y0)(e)}},e.getValidationFunction=function(e){switch(e){case"AWSDate":return a.pP;case"AWSTime":return a.Ro;case"AWSDateTime":return a.wp;case"AWSTimestamp":return a.D7;case"AWSEmail":return a.M9;case"AWSJSON":return a.nd;case"AWSURL":return a.Zu;case"AWSPhone":return a.iA;case"AWSIPAddress":return a.mY;default:return}}}(r||(r={})),function(e){e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(i||(i={})),function(e){e[e.FIRST=0]="FIRST",e[e.LAST=1]="LAST"}(o||(o={})),function(e){e.ASCENDING="ASCENDING",e.DESCENDING="DESCENDING"}(s||(s={}));var g=Symbol("DISCARD")},591:(e,t,n)=>{"use strict";n.d(t,{cG:()=>k,P_:()=>L,J3:()=>N,xR:()=>P,YF:()=>I,y0:()=>b,rw:()=>T,NA:()=>O,Iz:()=>U,pP:()=>F,wp:()=>z,M9:()=>K,mY:()=>W,nd:()=>V,iA:()=>G,Ro:()=>B,D7:()=>q,Zu:()=>H,hK:()=>E,le:()=>w,D0:()=>M,c6:()=>D,z8:()=>j,jl:()=>C,u8:()=>S});var r=n(8764),i=n(8249),o=n.n(i);function s(e){var t=new Error(e);return t.source="ulid",t}var a="0123456789ABCDEFGHJKMNPQRSTVWXYZ",u=a.length,c=Math.pow(2,48)-1;function l(e,t,n){return t>e.length-1?e:e.substr(0,t)+n+e.substr(t+1)}function f(e){var t=Math.floor(e()*u);return t===u&&(t=u-1),a.charAt(t)}function d(e,t){if(isNaN(e))throw new Error(e+" must be a number");if(e>c)throw s("cannot encode time greater than "+c);if(e<0)throw s("time must be positive");if(!1===Number.isInteger(e))throw s("time must be an integer");for(var n=void 0,r="";t>0;t--)r=a.charAt(n=e%u)+r,e=(e-n)/u;return r}function h(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];t||(t="undefined"!=typeof window?window:null);var r=t&&(t.crypto||t.msCrypto);if(r)return function(){var e=new Uint8Array(1);return r.getRandomValues(e),e[0]/255};try{var i=n(4788);return function(){return i.randomBytes(1).readUInt8()/255}}catch(e){}if(e){try{console.error("secure crypto unusable, falling back to insecure Math.random()!")}catch(e){}return function(){return Math.random()}}throw s("secure crypto unusable, insecure Math.random not allowed")}function p(e){e||(e=h());var t=0,n=void 0;return function(r){if(isNaN(r)&&(r=Date.now()),r<=t){var i=n=function(e){for(var t=void 0,n=e.length,r=void 0,i=void 0,o=u-1;!t&&n-- >=0;){if(r=e[n],-1===(i=a.indexOf(r)))throw s("incorrectly encoded string");i!==o?t=l(e,n,a[i+1]):e=l(e,n,a[0])}if("string"==typeof t)return t;throw s("cannot increment this string")}(n);return d(t,10)+i}t=r;var o=n=function(e,t){for(var n="";e>0;e--)n=f(t)+n;return n}(16,e);return d(r,10)+o}}v||(v=h());var v,g,y=n(8029),m=n(6471),b=function(e,t){if(void 0===t&&(t=!0),t)throw new Error("Invalid "+e)},w=function(e){return void 0===e||null==e},S=function(e,t,n){var r,i=!1;if(0===n.length)return!0;switch(t){case"not":r="every",i=!0;break;case"and":r="every";break;case"or":r="some";break;default:b(t)}var o=n[r]((function(t){if((0,m.w5)(t)){var n=t.field,r=t.operator,i=t.operand,o=e[n];return _(o,r,i)}if((0,m.G9)(t)){var s=t.type,a=t.predicates;return S(e,s,a)}throw new Error("Not a predicate or group")}));return i?!o:o},_=function(e,t,n){switch(t){case"ne":return e!==n;case"eq":return e===n;case"le":return e<=n;case"lt":return e<n;case"ge":return e>=n;case"gt":return e>n;case"between":var r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}(n,2),i=r[0],o=r[1];return e>=i&&e<=o;case"beginsWith":return e.startsWith(n);case"contains":return e.indexOf(n)>-1;case"notContains":return-1===e.indexOf(n);default:return b(t,!1),!1}},E=function(e){return e&&"function"==typeof e.copyOf},I=function(e){var t={};return Object.keys(e.models).forEach((function(n){t[n]={indexes:[],relationTypes:[]};var r=e.models[n];Object.keys(r.fields).forEach((function(e){var i=r.fields[e];if("object"==typeof i.type&&"model"in i.type){var o=i.association.connectionType;t[n].relationTypes.push({fieldName:i.name,modelName:i.type.model,relationType:o,targetName:i.association.targetName,associatedWith:i.association.associatedWith}),"BELONGS_TO"===o&&t[n].indexes.push(i.association.targetName)}})),r.attributes&&r.attributes.forEach((function(e){if("key"===e.type){var r=e.properties.fields;r&&r.forEach((function(e){t[n].indexes.includes(e)||t[n].indexes.push(e)}))}}))})),t},A=new WeakMap,C=function(e,t,n,r,i){var o=n.relationships,s=i(n.name,e),a=o[e],u=[],c=s.copyOf(t,(function(e){a.relationTypes.forEach((function(o){var s=i(n.name,o.modelName);switch(o.relationType){case"HAS_ONE":if(t[o.fieldName]){var a=void 0;try{a=r(s,t[o.fieldName])}catch(e){}u.push({modelName:o.modelName,item:t[o.fieldName],instance:a}),e[o.fieldName]=e[o.fieldName].id}break;case"BELONGS_TO":if(t[o.fieldName]){a=void 0;try{a=r(s,t[o.fieldName])}catch(e){}e[o.fieldName]._deleted||u.push({modelName:o.modelName,item:t[o.fieldName],instance:a})}e[o.targetName]=e[o.fieldName]?e[o.fieldName].id:null,delete e[o.fieldName];break;case"HAS_MANY":break;default:b(o.relationType)}}))}));u.unshift({modelName:e,item:c,instance:c}),A.has(n)||A.set(n,Array.from(n.modelTopologicalOrdering.keys()));var l=A.get(n);return u.sort((function(e,t){return l.indexOf(e.modelName)-l.indexOf(t.modelName)})),u},T=function(e,t){var n="";return e.some((function(e){e.modelName===t&&(n=e.targetName)})),n},O=function(e,t){return e.find((function(e){return e===t}))};!function(e){e.DATASTORE="datastore",e.USER="user",e.SYNC="sync",e.STORAGE="storage"}(g||(g={}));var x,k=g.DATASTORE,P=g.USER,N=g.SYNC,L=g.STORAGE,M=function(){return new Promise((function(e){var t,n=(0,y.v4)(),r=function(){x=!1,e(!0)},i=function(){return r=void 0,i=void 0,s=function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(r){switch(r.label){case 0:return t&&t.result&&"function"==typeof t.result.close?[4,t.result.close()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[4,indexedDB.deleteDatabase(n)];case 3:return r.sent(),x=!0,[2,e(!1)]}}))},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{u(s.next(e))}catch(e){t(e)}}function a(e){try{u(s.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(n,a)}u((s=s.apply(r,i||[])).next())}));var r,i,o,s};return!0===x?i():!1===x||null===indexedDB?r():((t=indexedDB.open(n)).onerror=r,void(t.onsuccess=i))}))},R=function(){return(1,r.lW.from(o().lib.WordArray.random(1).toString(),"hex")).readUInt8(0)/255};function D(e){var t=p(R);return function(){return t(e)}}function U(){return"undefined"!=typeof performance&&performance&&"function"==typeof performance.now?0|performance.now():Date.now()}function j(e){return function(t,n){var r,i;try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),s=o.next();!s.done;s=o.next()){var a=s.value,u=a.field,c=a.sortDirection===m.Sr.ASCENDING?1:-1;if(t[u]<n[u])return-1*c;if(t[u]>n[u])return 1*c}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return 0}}var F=function(e){return!!/^\d{4}-\d{2}-\d{2}(Z|[+-]\d{2}:\d{2}($|:\d{2}))?$/.exec(e)},B=function(e){return!!/^\d{2}:\d{2}(:\d{2}(.\d{3})?)?(Z|[+-]\d{2}:\d{2}($|:\d{2}))?$/.exec(e)},z=function(e){return!!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}(:\d{2}(.\d{3})?)?(Z|[+-]\d{2}:\d{2}($|:\d{2}))?$/.exec(e)},q=function(e){return!!/^\d+$/.exec(String(e))},K=function(e){return!!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.exec(e)},V=function(e){try{return JSON.parse(e),!0}catch(e){return!1}},H=function(e){try{return!!new URL(e)}catch(e){return!1}},G=function(e){return!!/^\+?\d[\d\s-]+$/.exec(e)},W=function(e){return!!/((^((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))$)|(^((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?$))$/.exec(e)}},8029:(e,t,n)=>{var r=n(8144),i=n(7520),o=i;o.v1=r,o.v4=i,e.exports=o},3163:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,i=t;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},1831:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},8144:(e,t,n)=>{var r,i,o=n(1831),s=n(3163),a=0,u=0;e.exports=function(e,t,n){var c=t&&n||0,l=t||[],f=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:i;if(null==f||null==d){var h=o();null==f&&(f=r=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==d&&(d=i=16383&(h[6]<<8|h[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:u+1,g=p-a+(v-u)/1e4;if(g<0&&void 0===e.clockseq&&(d=d+1&16383),(g<0||p>a)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,u=v,i=d;var y=(1e4*(268435455&(p+=122192928e5))+v)%4294967296;l[c++]=y>>>24&255,l[c++]=y>>>16&255,l[c++]=y>>>8&255,l[c++]=255&y;var m=p/4294967296*1e4&268435455;l[c++]=m>>>8&255,l[c++]=255&m,l[c++]=m>>>24&15|16,l[c++]=m>>>16&255,l[c++]=d>>>8|128,l[c++]=255&d;for(var b=0;b<6;++b)l[c+b]=f[b];return t||s(l)}},7520:(e,t,n)=>{var r=n(1831),i=n(3163);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},4079:(e,t,n)=>{"use strict";t.Bi=void 0;var r=n(655),i=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(e){var t,n;try{for(var i=r.__values(e),s=i.next();!s.done;s=i.next()){var a=s.value;this.checksum=this.checksum>>>8^o[255&(this.checksum^a)]}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return this},e.prototype.digest=function(){return(4294967295^this.checksum)>>>0},e}();t.Bi=i;var o=Uint32Array.from([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117])},8260:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6665:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5470:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},969:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5287:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMsWindow=void 0;var n=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];t.isMsWindow=function(e){if(function(e){return"MSInputMethodContext"in e&&"msCrypto"in e}(e)&&void 0!==e.msCrypto.subtle){var t=e.msCrypto,r=t.getRandomValues,i=t.subtle;return n.map((function(e){return i[e]})).concat(r).every((function(e){return"function"==typeof e}))}return!1}},87:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(655);r.__exportStar(n(8260),t),r.__exportStar(n(6665),t),r.__exportStar(n(5470),t),r.__exportStar(n(969),t),r.__exportStar(n(5287),t)},7333:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_DATA_SHA_256=t.SHA_256_HMAC_ALGO=t.SHA_256_HASH=void 0,t.SHA_256_HASH={name:"SHA-256"},t.SHA_256_HMAC_ALGO={name:"HMAC",hash:t.SHA_256_HASH},t.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},2769:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(3479),i=n(8889),o=n(1938),s=n(21),a=n(87),u=n(1135),c=function(){function e(e){s.supportsWebCrypto(u.locateWindow())?this.hash=new i.Sha256(e):a.isMsWindow(u.locateWindow())?this.hash=new r.Sha256(e):this.hash=new o.Sha256(e)}return e.prototype.update=function(e,t){this.hash.update(e,t)},e.prototype.digest=function(){return this.hash.digest()},e}();t.Sha256=c},3479:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(8036),i=n(7333),o=n(2771),s=n(1135),a=function(){function e(e){e?(this.operation=function(e){return new Promise((function(t,n){var r=s.locateWindow().msCrypto.subtle.importKey("raw",u(e),i.SHA_256_HMAC_ALGO,!1,["sign"]);r.oncomplete=function(){r.result&&t(r.result),n("ImportKey completed without importing key.")},r.onerror=function(){n("ImportKey failed to import key.")}}))}(e).then((function(e){return s.locateWindow().msCrypto.subtle.sign(i.SHA_256_HMAC_ALGO,e)})),this.operation.catch((function(){}))):this.operation=Promise.resolve(s.locateWindow().msCrypto.subtle.digest("SHA-256"))}return e.prototype.update=function(e){var t=this;r.isEmptyData(e)||(this.operation=this.operation.then((function(n){return n.onerror=function(){t.operation=Promise.reject(new Error("Error encountered updating hash"))},n.process(u(e)),n})),this.operation.catch((function(){})))},e.prototype.digest=function(){return this.operation.then((function(e){return new Promise((function(t,n){e.onerror=function(){n("Error encountered finalizing hash")},e.oncomplete=function(){e.result&&t(new Uint8Array(e.result)),n("Error encountered finalizing hash")},e.finish()}))}))},e}();function u(e){return"string"==typeof e?o.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=a},7643:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(655).__exportStar(n(2769),t);var r=n(3479);Object.defineProperty(t,"Ie11Sha256",{enumerable:!0,get:function(){return r.Sha256}});var i=n(8889);Object.defineProperty(t,"WebCryptoSha256",{enumerable:!0,get:function(){return i.Sha256}})},8036:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}},8889:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(2771),i=n(8036),o=n(7333),s=n(1135),a=function(){function e(e){this.toHash=new Uint8Array(0),void 0!==e&&(this.key=new Promise((function(t,n){s.locateWindow().crypto.subtle.importKey("raw",u(e),o.SHA_256_HMAC_ALGO,!1,["sign"]).then(t,n)})),this.key.catch((function(){})))}return e.prototype.update=function(e){if(!i.isEmptyData(e)){var t=u(e),n=new Uint8Array(this.toHash.byteLength+t.byteLength);n.set(this.toHash,0),n.set(t,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var e=this;return this.key?this.key.then((function(t){return s.locateWindow().crypto.subtle.sign(o.SHA_256_HMAC_ALGO,t,e.toHash).then((function(e){return new Uint8Array(e)}))})):i.isEmptyData(this.toHash)?Promise.resolve(o.EMPTY_DATA_SHA_256):Promise.resolve().then((function(){return s.locateWindow().crypto.subtle.digest(o.SHA_256_HASH,e.toHash)})).then((function(e){return Promise.resolve(new Uint8Array(e))}))},e}();function u(e){return"string"==typeof e?r.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=a},2771:(e,t,n)=>{"use strict";n.r(t),n.d(t,{fromUtf8:()=>r,toUtf8:()=>i});var r=function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)}(e)},i=function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var s="%"+[i,e[++n],e[++n],e[++n]].map((function(e){return e.toString(16)})).join("%");t+=decodeURIComponent(s)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)}},914:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawSha256=void 0;var r=n(9945),i=function(){function e(){this.state=Int32Array.from(r.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>r.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===r.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%r.BLOCK_SIZE>=r.BLOCK_SIZE-8){for(var i=this.bufferLength;i<r.BLOCK_SIZE;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<r.BLOCK_SIZE-8;i++)t.setUint8(i,0);t.setUint32(r.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(r.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var o=new Uint8Array(r.DIGEST_LENGTH);for(i=0;i<8;i++)o[4*i]=this.state[i]>>>24&255,o[4*i+1]=this.state[i]>>>16&255,o[4*i+2]=this.state[i]>>>8&255,o[4*i+3]=this.state[i]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],u=t[5],c=t[6],l=t[7],f=0;f<r.BLOCK_SIZE;f++){if(f<16)this.temp[f]=(255&e[4*f])<<24|(255&e[4*f+1])<<16|(255&e[4*f+2])<<8|255&e[4*f+3];else{var d=this.temp[f-2],h=(d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,p=((d=this.temp[f-15])>>>7|d<<25)^(d>>>18|d<<14)^d>>>3;this.temp[f]=(h+this.temp[f-7]|0)+(p+this.temp[f-16]|0)}var v=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&u^~a&c)|0)+(l+(r.KEY[f]+this.temp[f]|0)|0)|0,g=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&o^i&o)|0;l=c,c=u,u=a,a=s+v|0,s=o,o=i,i=n,n=v+g|0}t[0]+=n,t[1]+=i,t[2]+=o,t[3]+=s,t[4]+=a,t[5]+=u,t[6]+=c,t[7]+=l},e}();t.RawSha256=i},9945:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_HASHABLE_LENGTH=t.INIT=t.KEY=t.DIGEST_LENGTH=t.BLOCK_SIZE=void 0,t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},1938:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(655).__exportStar(n(5430),t)},5430:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sha256=void 0;var r=n(655),i=n(9945),o=n(914),s=n(1204),a=function(){function e(e){if(this.hash=new o.RawSha256,e){this.outer=new o.RawSha256;var t=function(e){var t=u(e);if(t.byteLength>i.BLOCK_SIZE){var n=new o.RawSha256;n.update(t),t=n.digest()}var r=new Uint8Array(i.BLOCK_SIZE);return r.set(t),r}(e),n=new Uint8Array(i.BLOCK_SIZE);n.set(t);for(var r=0;r<i.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;for(this.hash.update(t),this.outer.update(n),r=0;r<t.byteLength;r++)t[r]=0}}return e.prototype.update=function(e){if(!(t=e,("string"==typeof t?0===t.length:0===t.byteLength)||this.error))try{this.hash.update(u(e))}catch(e){this.error=e}var t},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,this.digestSync()]}))}))},e}();function u(e){return"string"==typeof e?s.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=a},1204:(e,t,n)=>{"use strict";n.r(t),n.d(t,{fromUtf8:()=>r,toUtf8:()=>i});var r=function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)}(e)},i=function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var s="%"+[i,e[++n],e[++n],e[++n]].map((function(e){return e.toString(16)})).join("%");t+=decodeURIComponent(s)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)}},21:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(655).__exportStar(n(7787),t)},7787:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.supportsZeroByteGCM=t.supportsSubtleCrypto=t.supportsSecureRandom=t.supportsWebCrypto=void 0;var r=n(655),i=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function o(e){return"object"==typeof e&&"object"==typeof e.crypto&&"function"==typeof e.crypto.getRandomValues}function s(e){return e&&i.every((function(t){return"function"==typeof e[t]}))}t.supportsWebCrypto=function(e){return!(!o(e)||"object"!=typeof e.crypto.subtle)&&s(e.crypto.subtle)},t.supportsSecureRandom=o,t.supportsSubtleCrypto=s,t.supportsZeroByteGCM=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:if(!s(e))return[2,!1];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,e.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return t=n.sent(),[4,e.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},t,new Uint8Array(0))];case 3:return[2,16===n.sent().byteLength];case 4:return n.sent(),[2,!1];case 5:return[2]}}))}))}},1135:(e,t,n)=>{"use strict";n.r(t),n.d(t,{locateWindow:()=>i});var r={};function i(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:r}},9669:(e,t,n)=>{e.exports=n(1609)},5448:(e,t,n)=>{"use strict";var r=n(4867),i=n(6026),o=n(4372),s=n(5327),a=n(4097),u=n(4109),c=n(7985),l=n(5061);e.exports=function(e){return new Promise((function(t,n){var f=e.data,d=e.headers;r.isFormData(f)&&delete d["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",v=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";d.Authorization="Basic "+btoa(p+":"+v)}var g=a(e.baseURL,e.url);if(h.open(e.method.toUpperCase(),s(g,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in h?u(h.getAllResponseHeaders()):null,o={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:r,config:e,request:h};i(t,n,o),h=null}},h.onabort=function(){h&&(n(l("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){n(l("Network Error",e,null,h)),h=null},h.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var y=(e.withCredentials||c(g))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;y&&(d[e.xsrfHeaderName]=y)}if("setRequestHeader"in h&&r.forEach(d,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete d[t]:h.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){h&&(h.abort(),n(e),h=null)})),f||(f=null),h.send(f)}))}},1609:(e,t,n)=>{"use strict";var r=n(4867),i=n(1849),o=n(321),s=n(7185);function a(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var u=a(n(5655));u.Axios=o,u.create=function(e){return a(s(u.defaults,e))},u.Cancel=n(5263),u.CancelToken=n(4972),u.isCancel=n(6502),u.all=function(e){return Promise.all(e)},u.spread=n(8713),u.isAxiosError=n(6268),e.exports=u,e.exports.default=u},5263:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},4972:(e,t,n)=>{"use strict";var r=n(5263);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},6502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:(e,t,n)=>{"use strict";var r=n(4867),i=n(5327),o=n(782),s=n(3572),a=n(7185);function u(e){this.defaults=e,this.interceptors={request:new o,response:new o}}u.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},u.prototype.getUri=function(e){return e=a(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,n,r){return this.request(a(r||{},{method:e,url:t,data:n}))}})),e.exports=u},782:(e,t,n)=>{"use strict";var r=n(4867);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},4097:(e,t,n)=>{"use strict";var r=n(1793),i=n(7303);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},5061:(e,t,n)=>{"use strict";var r=n(481);e.exports=function(e,t,n,i,o){var s=new Error(e);return r(s,t,n,i,o)}},3572:(e,t,n)=>{"use strict";var r=n(4867),i=n(8527),o=n(6502),s=n(5655);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return a(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(a(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},481:e=>{"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},7185:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e,t){t=t||{};var n={},i=["url","method","data"],o=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function u(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function c(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=u(void 0,e[i])):n[i]=u(e[i],t[i])}r.forEach(i,(function(e){r.isUndefined(t[e])||(n[e]=u(void 0,t[e]))})),r.forEach(o,c),r.forEach(s,(function(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=u(void 0,e[i])):n[i]=u(void 0,t[i])})),r.forEach(a,(function(r){r in t?n[r]=u(e[r],t[r]):r in e&&(n[r]=u(void 0,e[r]))}));var l=i.concat(o).concat(s).concat(a),f=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===l.indexOf(e)}));return r.forEach(f,c),n}},6026:(e,t,n)=>{"use strict";var r=n(5061);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},8527:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},5655:(e,t,n)=>{"use strict";var r=n(4867),i=n(6016),o={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,u={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(a=n(5448)),a),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){u.headers[e]=r.merge(o)})),e.exports=u},1849:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},5327:(e,t,n)=>{"use strict";var r=n(4867);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),o=s.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},7303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:(e,t,n)=>{"use strict";var r=n(4867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},6268:e=>{"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},7985:(e,t,n)=>{"use strict";var r=n(4867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},6016:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},4109:(e,t,n)=>{"use strict";var r=n(4867),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},8713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},4867:(e,t,n)=>{"use strict";var r=n(1849),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function s(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function u(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===i.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isPlainObject:u,isUndefined:s,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:c,isStream:function(e){return a(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function e(){var t={};function n(n,r){u(t[r])&&u(n)?t[r]=e(t[r],n):u(n)?t[r]=e({},n):o(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return t},extend:function(e,t,n){return l(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},9742:(e,t)=>{"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=u(e),s=o[0],a=o[1],c=new i(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),l=0,f=a>0?s-4:s;for(n=0;n<f;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===a&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[l++]=255&t),1===a&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=16383,a=0,u=r-i;a<u;a+=s)o.push(c(e,a,a+s>u?u:a+s));return 1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)n[s]=o[s],r[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,r){for(var i,o,s=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},8764:(e,t,n)=>{"use strict";var r=n(9742),i=n(645),o=n(5826);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=d(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=a(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|h(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):d(e,t);if("Buffer"===t.type&&o(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=a(e,t<0?0:0|h(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|h(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(e).length;default:if(r)return B(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return x(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var o,s=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=n;o<a;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var f=!0,d=0;d<u;d++)if(c(e,o+d)!==c(t,d)){f=!1;break}if(f)return o}return-1}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function w(e,t,n,r){return q(B(t,e.length-n),e,n,r)}function S(e,t,n,r){return q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return S(e,t,n,r)}function E(e,t,n,r){return q(z(t),e,n,r)}function I(e,t,n,r){return q(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,c=e[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=T));return n}(r)}t.lW=u,t.h2=50,u.TYPED_ARRAY_SUPPORT=void 0!==n.g.TYPED_ARRAY_SUPPORT?n.g.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):v.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.h2;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),c=this.slice(r,i),l=e.slice(t,n),f=0;f<a;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return S(this,e,t,n);case"latin1":case"binary":return _(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function k(e,t,n){var r,i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var o="",s=t;s<n;++s)o+=(r=e[s])<16?"0"+r.toString(16):r.toString(16);return o}function P(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function N(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function M(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function R(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function D(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,r,o){return o||D(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,o){return o||D(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||L(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||L(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=u.isBuffer(e)?e:B(new u(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function B(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}},6489:(e,t)=>{"use strict";t.Q=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},o=t||{},a=e.split(i),u=o.decode||n,c=0;c<a.length;c++){var l=a[c],f=l.indexOf("=");if(!(f<0)){var d=l.substr(0,f).trim(),h=l.substr(++f,l.length).trim();'"'==h[0]&&(h=h.slice(1,-1)),null==r[d]&&(r[d]=s(h,u))}}return r},t.q=function(e,t,n){var i=n||{},s=i.encode||r;if("function"!=typeof s)throw new TypeError("option encode is invalid");if(!o.test(e))throw new TypeError("argument name is invalid");var a=s(t);if(a&&!o.test(a))throw new TypeError("argument val is invalid");var u=e+"="+a;if(null!=i.maxAge){var c=i.maxAge-0;if(isNaN(c)||!isFinite(c))throw new TypeError("option maxAge is invalid");u+="; Max-Age="+Math.floor(c)}if(i.domain){if(!o.test(i.domain))throw new TypeError("option domain is invalid");u+="; Domain="+i.domain}if(i.path){if(!o.test(i.path))throw new TypeError("option path is invalid");u+="; Path="+i.path}if(i.expires){if("function"!=typeof i.expires.toUTCString)throw new TypeError("option expires is invalid");u+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(u+="; HttpOnly"),i.secure&&(u+="; Secure"),i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"strict":u+="; SameSite=Strict";break;case"none":u+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return u};var n=decodeURIComponent,r=encodeURIComponent,i=/; */,o=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function s(e,t){try{return t(e)}catch(t){return e}}},8249:function(e,t){var n;e.exports=n=n||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},i=r.lib={},o=i.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=i.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=s<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)t[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],i=function(t){t=t;var n=987654321,r=4294967295;return function(){var i=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}},o=0;o<t;o+=4){var a=i(4294967296*(n||e.random()));n=987654071*a(),r.push(4294967296*a()|0)}return new s.init(r,t)}}),a=r.enc={},u=a.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(n,t/2)}},c=a.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(n,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},f=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o),u=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*o,c=e.min(4*u,i);if(u){for(var l=0;l<u;l+=o)this._doProcessBlock(r,l);var f=r.splice(0,u);n.sigBytes-=c}return new s.init(f,c)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),d=(i.Hasher=f.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r}(Math)},8269:function(e,t,n){var r,i,o;e.exports=(r=n(8249),o=(i=r).lib.WordArray,i.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)i.push(r.charAt(s>>>6*(3-a)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(e){var t=e.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var i=0;i<n.length;i++)r[n.charCodeAt(i)]=i}var s=n.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return function(e,t,n){for(var r=[],i=0,s=0;s<t;s++)if(s%4){var a=n[e.charCodeAt(s-1)]<<s%4*2,u=n[e.charCodeAt(s)]>>>6-s%4*2;r[i>>>2]|=(a|u)<<24-i%4*8,i++}return o.create(r,i)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},r.enc.Base64)},8010:function(e,t,n){var r;e.exports=(r=n(8249),n(2153),n(9824),r.HmacSHA256)},9824:function(e,t,n){var r,i,o;e.exports=(i=(r=n(8249)).lib.Base,o=r.enc.Utf8,void(r.algo.HMAC=i.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),s=this._iKey=t.clone(),a=i.words,u=s.words,c=0;c<n;c++)a[c]^=1549556828,u[c]^=909522486;i.sigBytes=s.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))},4433:function(e,t,n){var r;e.exports=(r=n(8249),function(){if("function"==typeof ArrayBuffer){var e=r.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=e[i]<<24-i%4*8;t.call(this,r,n)}else t.apply(this,arguments)}).prototype=e}}(),r.lib.WordArray)},2153:function(e,t,n){var r;e.exports=(r=n(8249),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,s=t.algo,a=[],u=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(a[i]=n(e.pow(r,.5))),u[i]=n(e.pow(r,1/3)),i++),r++}();var c=[],l=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=n[5],f=n[6],d=n[7],h=0;h<64;h++){if(h<16)c[h]=0|e[t+h];else{var p=c[h-15],v=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,g=c[h-2],y=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;c[h]=v+c[h-7]+y+c[h-16]}var m=r&i^r&o^i&o,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),w=d+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&f)+u[h]+c[h];d=f,f=l,l=a,a=s+w|0,s=o,o=i,i=r,r=w+(b+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+l|0,n[6]=n[6]+f|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(l),t.HmacSHA256=o._createHmacHelper(l)}(Math),r.SHA256)},7187:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function i(){void 0!==o&&e.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==t&&(o=function(n){e.removeListener(t,i),r(n)},e.once("error",o)),e.once(t,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var i,o,s,c;if(a(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=u(e))>0&&s.length>i&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,c=l,console&&console.warn&&console.warn(c)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):p(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=o[e];if(void 0===u)return!1;if("function"==typeof u)r(u,this,t);else{var c=u.length,l=p(u,c);for(n=0;n<c;++n)r(l[n],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,f(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,s;if(a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return d(this,e,!0)},o.prototype.rawListeners=function(e){return d(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},259:(e,t,n)=>{"use strict";const r=n(7849).buildOptions,i={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(e){return e},attrValueProcessor:function(e){return e}},o=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function s(e){this.options=r(e,i,o),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=p),this.options.cdataTagName?this.isCDATA=v:this.isCDATA=function(){return!1},this.replaceCDATAstr=a,this.replaceCDATAarr=u,this.options.format?(this.indentate=h,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=d,this.buildObjNode=l):(this.buildTextNode=f,this.buildObjNode=c),this.buildTextValNode=f,this.buildObjectNode=c}function a(e,t){return e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e?e+"<![CDATA["+t+"]]"+this.tagEndChar:e.replace(this.options.cdataPositionChar,"<![CDATA["+t+"]]"+this.tagEndChar)}function u(e,t){if(e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e)return e+"<![CDATA["+t.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let n in t)e=e.replace(this.options.cdataPositionChar,"<![CDATA["+t[n]+"]]>");return e+this.newLine}function c(e,t,n,r){return n&&!e.includes("<")?this.indentate(r)+"<"+t+n+">"+e+"</"+t+this.tagEndChar:this.indentate(r)+"<"+t+n+this.tagEndChar+e+this.indentate(r)+"</"+t+this.tagEndChar}function l(e,t,n,r){return""!==e?this.buildObjectNode(e,t,n,r):this.indentate(r)+"<"+t+n+"/"+this.tagEndChar}function f(e,t,n,r){return this.indentate(r)+"<"+t+n+">"+this.options.tagValueProcessor(e)+"</"+t+this.tagEndChar}function d(e,t,n,r){return""!==e?this.buildTextValNode(e,t,n,r):this.indentate(r)+"<"+t+n+"/"+this.tagEndChar}function h(e){return this.options.indentBy.repeat(e)}function p(e){return!!e.startsWith(this.options.attributeNamePrefix)&&e.substr(this.attrPrefixLen)}function v(e){return e===this.options.cdataTagName}s.prototype.parse=function(e){return this.j2x(e,0).val},s.prototype.j2x=function(e,t){let n="",r="";const i=Object.keys(e),o=i.length;for(let s=0;s<o;s++){const o=i[s];if(void 0===e[o]);else if(null===e[o])r+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)r+=this.buildTextNode(e[o],o,"",t);else if("object"!=typeof e[o]){const i=this.isAttribute(o);i?n+=" "+i+'="'+this.options.attrValueProcessor(""+e[o])+'"':this.isCDATA(o)?e[this.options.textNodeName]?r+=this.replaceCDATAstr(e[this.options.textNodeName],e[o]):r+=this.replaceCDATAstr("",e[o]):o===this.options.textNodeName?e[this.options.cdataTagName]||(r+=this.options.tagValueProcessor(""+e[o])):r+=this.buildTextNode(e[o],o,"",t)}else if(Array.isArray(e[o]))if(this.isCDATA(o))r+=this.indentate(t),e[this.options.textNodeName]?r+=this.replaceCDATAarr(e[this.options.textNodeName],e[o]):r+=this.replaceCDATAarr("",e[o]);else{const n=e[o].length;for(let i=0;i<n;i++){const n=e[o][i];if(void 0===n);else if(null===n)r+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if("object"==typeof n){const e=this.j2x(n,t+1);r+=this.buildObjNode(e.val,o,e.attrStr,t)}else r+=this.buildTextNode(n,o,"",t)}}else if(this.options.attrNodeName&&o===this.options.attrNodeName){const t=Object.keys(e[o]),r=t.length;for(let i=0;i<r;i++)n+=" "+t[i]+'="'+this.options.attrValueProcessor(""+e[o][t[i]])+'"'}else{const n=this.j2x(e[o],t+1);r+=this.buildObjNode(n.val,o,n.attrStr,t)}}return{attrStr:n,val:r}},e.exports=s},8398:(e,t,n)=>{"use strict";const r=function(e){return String.fromCharCode(e)},i={nilChar:r(176),missingChar:r(201),nilPremitive:r(175),missingPremitive:r(200),emptyChar:r(178),emptyValue:r(177),boundryChar:r(179),objStart:r(198),arrStart:r(204),arrayEnd:r(185)},o=[i.nilChar,i.nilPremitive,i.missingChar,i.missingPremitive,i.boundryChar,i.emptyChar,i.emptyValue,i.arrayEnd,i.objStart,i.arrStart],s=function(e,t,n){if("string"==typeof t)return e&&e[0]&&void 0!==e[0].val?a(e[0].val,t):a(e,t);{const o=void 0===(r=e)?i.missingChar:null===r?i.nilChar:!(r.child&&0===Object.keys(r.child).length&&(!r.attrsMap||0===Object.keys(r.attrsMap).length))||i.emptyChar;if(!0===o){let r="";if(Array.isArray(t)){r+=i.arrStart;const o=t[0],c=e.length;if("string"==typeof o)for(let t=0;t<c;t++){const n=a(e[t].val,o);r=u(r,n)}else for(let t=0;t<c;t++){const i=s(e[t],o,n);r=u(r,i)}r+=i.arrayEnd}else{r+=i.objStart;const o=Object.keys(t);Array.isArray(e)&&(e=e[0]);for(let i in o){const a=o[i];let c;c=!n.ignoreAttributes&&e.attrsMap&&e.attrsMap[a]?s(e.attrsMap[a],t[a],n):a===n.textNodeName?s(e.val,t[a],n):s(e.child[a],t[a],n),r=u(r,c)}}return r}return o}var r},a=function(e){switch(e){case void 0:return i.missingPremitive;case null:return i.nilPremitive;case"":return i.emptyValue;default:return e}},u=function(e,t){return c(t[0])||c(e[e.length-1])||(e+=i.boundryChar),e+t},c=function(e){return-1!==o.indexOf(e)},l=n(3543),f=n(7849).buildOptions;t.convert2nimn=function(e,t,n){return n=f(n,l.defaultOptions,l.props),s(e,t,n)}},284:(e,t,n)=>{"use strict";const r=n(7849),i=function(e,t){const n={};if(!(e.child&&!r.isEmptyObject(e.child)||e.attrsMap&&!r.isEmptyObject(e.attrsMap)))return r.isExist(e.val)?e.val:"";r.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)&&("strict"===t.arrayMode?n[t.textNodeName]=[e.val]:n[t.textNodeName]=e.val),r.merge(n,e.attrsMap,t.arrayMode);const o=Object.keys(e.child);for(let r=0;r<o.length;r++){var s=o[r];if(e.child[s]&&e.child[s].length>1)for(var a in n[s]=[],e.child[s])e.child[s].hasOwnProperty(a)&&n[s].push(i(e.child[s][a],t));else if(!0===t.arrayMode){const r=i(e.child[s][0],t);n[s]="object"==typeof r?[r]:r}else"strict"===t.arrayMode?n[s]=[i(e.child[s][0],t)]:n[s]=i(e.child[s][0],t)}return n};t.convertToJson=i},7702:(e,t,n)=>{"use strict";const r=n(7849),i=n(7849).buildOptions,o=n(3543),s=function(e,t,n){let i="{";const o=Object.keys(e.child);for(let n=0;n<o.length;n++){var a=o[n];if(e.child[a]&&e.child[a].length>1){for(var u in i+='"'+a+'" : [ ',e.child[a])i+=s(e.child[a][u],t)+" , ";i=i.substr(0,i.length-1)+" ] "}else i+='"'+a+'" : '+s(e.child[a][0],t)+" ,"}return r.merge(i,e.attrsMap),r.isEmptyObject(i)?r.isExist(e.val)?e.val:"":(r.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)&&(i+='"'+t.textNodeName+'" : '+(!0!==(c=e.val)&&!1!==c&&isNaN(c)?'"'+c+'"':c)),","===i[i.length-1]&&(i=i.substr(0,i.length-2)),i+"}");var c};t.convertToJsonString=function(e,t){return(t=i(t,o.defaultOptions,o.props)).indentBy=t.indentBy||"",s(e,t,0)}},6965:(e,t,n)=>{"use strict";const r=n(284),i=n(3543),o=n(3543),s=n(7849).buildOptions,a=n(8501);t.parse=function(e,t,n){if(n){!0===n&&(n={});const t=a.validate(e,n);if(!0!==t)throw Error(t.err.msg)}t=s(t,o.defaultOptions,o.props);const u=i.getTraversalObj(e,t);return r.convertToJson(u,t)},t.convertTonimn=n(8398).convert2nimn,t.getTraversalObj=i.getTraversalObj,t.convertToJson=r.convertToJson,t.convertToJsonString=n(7702).convertToJsonString,t.validate=a.validate,t.j2xParser=n(259),t.parseToNimn=function(e,n,r){return t.convertTonimn(t.getTraversalObj(e,r),n,r)}},7849:(e,t)=>{"use strict";const n="[:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",r=new RegExp("^"+n+"$");t.isExist=function(e){return void 0!==e},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.merge=function(e,t,n){if(t){const r=Object.keys(t),i=r.length;for(let o=0;o<i;o++)e[r[o]]="strict"===n?[t[r[o]]]:t[r[o]]}},t.getValue=function(e){return t.isExist(e)?e:""},t.buildOptions=function(e,t,n){var r={};if(!e)return t;for(let i=0;i<n.length;i++)void 0!==e[n[i]]?r[n[i]]=e[n[i]]:r[n[i]]=t[n[i]];return r},t.isName=function(e){return!(null==r.exec(e))},t.getAllMatches=function(e,t){const n=[];let r=t.exec(e);for(;r;){const i=[],o=r.length;for(let e=0;e<o;e++)i.push(r[e]);n.push(i),r=t.exec(e)}return n},t.nameRegexp=n},8501:(e,t,n)=>{"use strict";const r=n(7849),i={allowBooleanAttributes:!1},o=["allowBooleanAttributes"];function s(e,t){for(var n=t;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{var r=e.substr(n,t-n);if(t>5&&"xml"===r)return d("InvalidXml","XML declaration allowed only at the start of the document.",p(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function a(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let n=1;for(t+=8;t<e.length;t++)if("<"===e[t])n++;else if(">"===e[t]&&(n--,0===n))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}function u(e,t){let n="",r="",i=!1;for(;t<e.length;t++){if('"'===e[t]||"'"===e[t])if(""===r)r=e[t];else{if(r!==e[t])continue;r=""}else if(">"===e[t]&&""===r){i=!0;break}n+=e[t]}return""===r&&{value:n,index:t,tagClosed:i}}t.validate=function(e,t){t=r.buildOptions(t,i,o);const n=[];let c=!1,h=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let i=0;i<e.length;i++){if("<"!==e[i]){if(" "===e[i]||"\t"===e[i]||"\n"===e[i]||"\r"===e[i])continue;return d("InvalidChar","char '"+e[i]+"' is not expected.",p(e,i))}if(i++,"?"===e[i]){if(i=s(e,++i),i.err)return i}else{if("!"===e[i]){i=a(e,i);continue}{let o=!1;"/"===e[i]&&(o=!0,i++);let s="";for(;i<e.length&&">"!==e[i]&&" "!==e[i]&&"\t"!==e[i]&&"\n"!==e[i]&&"\r"!==e[i];i++)s+=e[i];if(s=s.trim(),"/"===s[s.length-1]&&(s=s.substring(0,s.length-1),i--),v=s,!r.isName(v)){let t;return t=0===s.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '"+s+"' is an invalid name.",d("InvalidTag",t,p(e,i))}const g=u(e,i);if(!1===g)return d("InvalidAttr","Attributes for '"+s+"' have open quote.",p(e,i));let y=g.value;if(i=g.index,"/"===y[y.length-1]){y=y.substring(0,y.length-1);const n=l(y,t);if(!0!==n)return d(n.err.code,n.err.msg,p(e,i-y.length+n.err.line));c=!0}else if(o){if(!g.tagClosed)return d("InvalidTag","Closing tag '"+s+"' doesn't have proper closing.",p(e,i));if(y.trim().length>0)return d("InvalidTag","Closing tag '"+s+"' can't have attributes or invalid starting.",p(e,i));{const t=n.pop();if(s!==t)return d("InvalidTag","Closing tag '"+t+"' is expected inplace of '"+s+"'.",p(e,i));0==n.length&&(h=!0)}}else{const r=l(y,t);if(!0!==r)return d(r.err.code,r.err.msg,p(e,i-y.length+r.err.line));if(!0===h)return d("InvalidXml","Multiple possible root nodes found.",p(e,i));n.push(s),c=!0}for(i++;i<e.length;i++){if("<"===e[i]){if("!"===e[i+1]){i++,i=a(e,i);continue}break}if("&"===e[i]){const t=f(e,i);if(-1==t)return d("InvalidChar","char '&' is not expected.",p(e,i));i=t}}"<"===e[i]&&i--}}}var v;return c?!(n.length>0)||d("InvalidXml","Invalid '"+JSON.stringify(n,null,4).replace(/\r?\n/g,"")+"' found.",1):d("InvalidXml","Start tag expected.",1)};const c=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function l(e,t){const n=r.getAllMatches(e,c),i={};for(let r=0;r<n.length;r++){if(0===n[r][1].length)return d("InvalidAttr","Attribute '"+n[r][2]+"' has no space in starting.",v(e,n[r][0]));if(void 0===n[r][3]&&!t.allowBooleanAttributes)return d("InvalidAttr","boolean attribute '"+n[r][2]+"' is not allowed.",v(e,n[r][0]));const o=n[r][2];if(!h(o))return d("InvalidAttr","Attribute '"+o+"' is an invalid name.",v(e,n[r][0]));if(i.hasOwnProperty(o))return d("InvalidAttr","Attribute '"+o+"' is repeated.",v(e,n[r][0]));i[o]=1}return!0}function f(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let n=/\d/;for("x"===e[t]&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(n))break}return-1}(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(";"===e[t])break;return-1}return t}function d(e,t,n){return{err:{code:e,msg:t,line:n}}}function h(e){return r.isName(e)}function p(e,t){return e.substring(0,t).split(/\r?\n/).length}function v(e,t){return e.indexOf(t)+t.length}},6468:e=>{"use strict";e.exports=function(e,t,n){this.tagname=e,this.parent=t,this.child={},this.attrsMap={},this.val=n,this.addChild=function(e){Array.isArray(this.child[e.tagname])?this.child[e.tagname].push(e):this.child[e.tagname]=[e]}}},3543:(e,t,n)=>{"use strict";const r=n(7849),i=n(7849).buildOptions,o=n(6468);"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,r.nameRegexp),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const s={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(e,t){return e},attrValueProcessor:function(e,t){return e},stopNodes:[]};t.defaultOptions=s;const a=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];function u(e,t,n){return t&&(n.trimValues&&(t=t.trim()),t=l(t=n.tagValueProcessor(t,e),n.parseNodeValue,n.parseTrueNumberOnly)),t}function c(e,t){if(t.ignoreNameSpace){const t=e.split(":"),n="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=n+t[1])}return e}function l(e,t,n){if(t&&"string"==typeof e){let t;return""===e.trim()||isNaN(e)?t="true"===e||"false"!==e&&e:(-1!==e.indexOf("0x")?t=Number.parseInt(e,16):-1!==e.indexOf(".")?(t=Number.parseFloat(e),e=e.replace(/\.?0+$/,"")):t=Number.parseInt(e,10),n&&(t=String(t)===e?t:e)),t}return r.isExist(e)?e:""}t.props=a;const f=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function d(e,t){if(!t.ignoreAttributes&&"string"==typeof e){e=e.replace(/\r?\n/g," ");const n=r.getAllMatches(e,f),i=n.length,o={};for(let e=0;e<i;e++){const r=c(n[e][1],t);r.length&&(void 0!==n[e][4]?(t.trimValues&&(n[e][4]=n[e][4].trim()),n[e][4]=t.attrValueProcessor(n[e][4],r),o[t.attributeNamePrefix+r]=l(n[e][4],t.parseAttributeValue,t.parseTrueNumberOnly)):t.allowBooleanAttributes&&(o[t.attributeNamePrefix+r]=!0))}if(!Object.keys(o).length)return;if(t.attrNodeName){const e={};return e[t.attrNodeName]=o,e}return o}}function h(e,t){let n,r="";for(let i=t;i<e.length;i++){let t=e[i];if(n)t===n&&(n="");else if('"'===t||"'"===t)n=t;else{if(">"===t)return{data:r,index:i};"\t"===t&&(t=" ")}r+=t}}function p(e,t,n,r){const i=e.indexOf(t,n);if(-1===i)throw new Error(r);return i+t.length-1}t.getTraversalObj=function(e,t){e=e.replace(/\r\n?/g,"\n"),t=i(t,s,a);const n=new o("!xml");let c=n,l="";for(let n=0;n<e.length;n++)if("<"===e[n])if("/"===e[n+1]){const i=p(e,">",n,"Closing Tag is not closed.");let o=e.substring(n+2,i).trim();if(t.ignoreNameSpace){const e=o.indexOf(":");-1!==e&&(o=o.substr(e+1))}c&&(c.val?c.val=r.getValue(c.val)+""+u(o,l,t):c.val=u(o,l,t)),t.stopNodes.length&&t.stopNodes.includes(c.tagname)&&(c.child=[],null==c.attrsMap&&(c.attrsMap={}),c.val=e.substr(c.startIndex+1,n-c.startIndex-1)),c=c.parent,l="",n=i}else if("?"===e[n+1])n=p(e,"?>",n,"Pi Tag is not closed.");else if("!--"===e.substr(n+1,3))n=p(e,"--\x3e",n,"Comment is not closed.");else if("!D"===e.substr(n+1,2)){const t=p(e,">",n,"DOCTYPE is not closed.");n=e.substring(n,t).indexOf("[")>=0?e.indexOf("]>",n)+1:t}else if("!["===e.substr(n+1,2)){const i=p(e,"]]>",n,"CDATA is not closed.")-2,s=e.substring(n+9,i);if(l&&(c.val=r.getValue(c.val)+""+u(c.tagname,l,t),l=""),t.cdataTagName){const e=new o(t.cdataTagName,c,s);c.addChild(e),c.val=r.getValue(c.val)+t.cdataPositionChar,s&&(e.val=s)}else c.val=(c.val||"")+(s||"");n=i+2}else{const i=h(e,n+1);let s=i.data;const a=i.index,f=s.indexOf(" ");let p=s;if(-1!==f&&(p=s.substr(0,f).replace(/\s\s*$/,""),s=s.substr(f+1)),t.ignoreNameSpace){const e=p.indexOf(":");-1!==e&&(p=p.substr(e+1))}if(c&&l&&"!xml"!==c.tagname&&(c.val=r.getValue(c.val)+""+u(c.tagname,l,t)),s.length>0&&s.lastIndexOf("/")===s.length-1){"/"===p[p.length-1]?(p=p.substr(0,p.length-1),s=p):s=s.substr(0,s.length-1);const e=new o(p,c,"");p!==s&&(e.attrsMap=d(s,t)),c.addChild(e)}else{const e=new o(p,c);t.stopNodes.length&&t.stopNodes.includes(e.tagname)&&(e.startIndex=a),p!==s&&(e.attrsMap=d(s,t)),c.addChild(e),c=e}l="",n=a}else l+=e[n];return n}},645:(e,t)=>{t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,f=n?i-1:0,d=n?-1:1,h=e[t+f];for(f+=d,o=h&(1<<-l)-1,h>>=-l,l+=a;l>0;o=256*o+e[t+f],f+=d,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+f],f+=d,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),o-=c}return(h?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*u-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[n+h]=255&a,h+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+h]=255&s,h+=p,s/=256,c-=8);e[n+h-p]|=128*v}},5826:e=>{var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},204:(e,t,n)=>{e.exports=self.fetch||(self.fetch=n(5869).default||n(5869))},6808:(e,t,n)=>{var r,i,o;void 0===(i="function"==typeof(r=o=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var u in o)o[u]&&(a+="; "+u,!0!==o[u]&&(a+="="+o[u].split(";")[0]));return document.cookie=t+"="+n+a}}function s(e,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],s=0;s<o.length;s++){var a=o[s].split("="),u=a.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=t(a[0]);if(u=(r.read||r)(u,c)||t(u),n)try{u=JSON.parse(u)}catch(e){}if(i[c]=u,e===c)break}catch(e){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return s(e,!1)},i.getJSON=function(e){return s(e,!0)},i.remove=function(t,n){o(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))})?r.call(t,n,t,e):r)||(e.exports=i),e.exports=o()},8552:(e,t,n)=>{var r=n(852)(n(5639),"DataView");e.exports=r},1989:(e,t,n)=>{var r=n(1789),i=n(401),o=n(7667),s=n(1327),a=n(1866);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=a,e.exports=u},8407:(e,t,n)=>{var r=n(7040),i=n(4125),o=n(2117),s=n(7518),a=n(4705);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=a,e.exports=u},7071:(e,t,n)=>{var r=n(852)(n(5639),"Map");e.exports=r},3369:(e,t,n)=>{var r=n(4785),i=n(1285),o=n(6e3),s=n(9916),a=n(5265);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=a,e.exports=u},3818:(e,t,n)=>{var r=n(852)(n(5639),"Promise");e.exports=r},8525:(e,t,n)=>{var r=n(852)(n(5639),"Set");e.exports=r},8668:(e,t,n)=>{var r=n(3369),i=n(619),o=n(2385);function s(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}s.prototype.add=s.prototype.push=i,s.prototype.has=o,e.exports=s},6384:(e,t,n)=>{var r=n(8407),i=n(7465),o=n(3779),s=n(7599),a=n(4758),u=n(4309);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=s,c.prototype.has=a,c.prototype.set=u,e.exports=c},2705:(e,t,n)=>{var r=n(5639).Symbol;e.exports=r},1149:(e,t,n)=>{var r=n(5639).Uint8Array;e.exports=r},577:(e,t,n)=>{var r=n(852)(n(5639),"WeakMap");e.exports=r},4963:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}},4636:(e,t,n)=>{var r=n(2545),i=n(5694),o=n(1469),s=n(4144),a=n(5776),u=n(6719),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),l=!n&&i(e),f=!n&&!l&&s(e),d=!n&&!l&&!f&&u(e),h=n||l||f||d,p=h?r(e.length,String):[],v=p.length;for(var g in e)!t&&!c.call(e,g)||h&&("length"==g||f&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,v))||p.push(g);return p}},9932:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},2488:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},2908:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},8470:(e,t,n)=>{var r=n(7813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},7786:(e,t,n)=>{var r=n(1811),i=n(327);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},8866:(e,t,n)=>{var r=n(2488),i=n(1469);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},4239:(e,t,n)=>{var r=n(2705),i=n(9607),o=n(2333),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):o(e)}},9454:(e,t,n)=>{var r=n(4239),i=n(7005);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},939:(e,t,n)=>{var r=n(2492),i=n(7005);e.exports=function e(t,n,o,s,a){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:r(t,n,o,s,e,a))}},2492:(e,t,n)=>{var r=n(6384),i=n(7114),o=n(8351),s=n(6096),a=n(4160),u=n(1469),c=n(4144),l=n(6719),f="[object Arguments]",d="[object Array]",h="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,v,g,y){var m=u(e),b=u(t),w=m?d:a(e),S=b?d:a(t),_=(w=w==f?h:w)==h,E=(S=S==f?h:S)==h,I=w==S;if(I&&c(e)){if(!c(t))return!1;m=!0,_=!1}if(I&&!_)return y||(y=new r),m||l(e)?i(e,t,n,v,g,y):o(e,t,w,n,v,g,y);if(!(1&n)){var A=_&&p.call(e,"__wrapped__"),C=E&&p.call(t,"__wrapped__");if(A||C){var T=A?e.value():e,O=C?t.value():t;return y||(y=new r),g(T,O,n,v,y)}}return!!I&&(y||(y=new r),s(e,t,n,v,g,y))}},8458:(e,t,n)=>{var r=n(3560),i=n(5346),o=n(3218),s=n(346),a=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,f=c.hasOwnProperty,d=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?d:a).test(s(e))}},8749:(e,t,n)=>{var r=n(4239),i=n(1780),o=n(7005),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!s[r(e)]}},280:(e,t,n)=>{var r=n(5726),i=n(6916),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},2545:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},531:(e,t,n)=>{var r=n(2705),i=n(9932),o=n(1469),s=n(3448),a=r?r.prototype:void 0,u=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(s(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},1717:e=>{e.exports=function(e){return function(t){return e(t)}}},4757:e=>{e.exports=function(e,t){return e.has(t)}},1811:(e,t,n)=>{var r=n(1469),i=n(5403),o=n(5514),s=n(9833);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(s(e))}},4429:(e,t,n)=>{var r=n(5639)["__core-js_shared__"];e.exports=r},7114:(e,t,n)=>{var r=n(8668),i=n(2908),o=n(4757);e.exports=function(e,t,n,s,a,u){var c=1&n,l=e.length,f=t.length;if(l!=f&&!(c&&f>l))return!1;var d=u.get(e),h=u.get(t);if(d&&h)return d==t&&h==e;var p=-1,v=!0,g=2&n?new r:void 0;for(u.set(e,t),u.set(t,e);++p<l;){var y=e[p],m=t[p];if(s)var b=c?s(m,y,p,t,e,u):s(y,m,p,e,t,u);if(void 0!==b){if(b)continue;v=!1;break}if(g){if(!i(t,(function(e,t){if(!o(g,t)&&(y===e||a(y,e,n,s,u)))return g.push(t)}))){v=!1;break}}else if(y!==m&&!a(y,m,n,s,u)){v=!1;break}}return u.delete(e),u.delete(t),v}},8351:(e,t,n)=>{var r=n(2705),i=n(1149),o=n(7813),s=n(7114),a=n(8776),u=n(1814),c=r?r.prototype:void 0,l=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,f,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=a;case"[object Set]":var p=1&r;if(h||(h=u),e.size!=t.size&&!p)return!1;var v=d.get(e);if(v)return v==t;r|=2,d.set(e,t);var g=s(h(e),h(t),r,c,f,d);return d.delete(e),g;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},6096:(e,t,n)=>{var r=n(8234),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,s,a){var u=1&n,c=r(e),l=c.length;if(l!=r(t).length&&!u)return!1;for(var f=l;f--;){var d=c[f];if(!(u?d in t:i.call(t,d)))return!1}var h=a.get(e),p=a.get(t);if(h&&p)return h==t&&p==e;var v=!0;a.set(e,t),a.set(t,e);for(var g=u;++f<l;){var y=e[d=c[f]],m=t[d];if(o)var b=u?o(m,y,d,t,e,a):o(y,m,d,e,t,a);if(!(void 0===b?y===m||s(y,m,n,o,a):b)){v=!1;break}g||(g="constructor"==d)}if(v&&!g){var w=e.constructor,S=t.constructor;w==S||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof S&&S instanceof S||(v=!1)}return a.delete(e),a.delete(t),v}},1957:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},8234:(e,t,n)=>{var r=n(8866),i=n(9551),o=n(3674);e.exports=function(e){return r(e,o,i)}},5050:(e,t,n)=>{var r=n(7019);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},852:(e,t,n)=>{var r=n(8458),i=n(7801);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},9607:(e,t,n)=>{var r=n(2705),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[a]=n:delete e[a]),i}},9551:(e,t,n)=>{var r=n(4963),i=n(479),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(e){return null==e?[]:(e=Object(e),r(s(e),(function(t){return o.call(e,t)})))}:i;e.exports=a},4160:(e,t,n)=>{var r=n(8552),i=n(7071),o=n(3818),s=n(8525),a=n(577),u=n(4239),c=n(346),l="[object Map]",f="[object Promise]",d="[object Set]",h="[object WeakMap]",p="[object DataView]",v=c(r),g=c(i),y=c(o),m=c(s),b=c(a),w=u;(r&&w(new r(new ArrayBuffer(1)))!=p||i&&w(new i)!=l||o&&w(o.resolve())!=f||s&&w(new s)!=d||a&&w(new a)!=h)&&(w=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case v:return p;case g:return l;case y:return f;case m:return d;case b:return h}return t}),e.exports=w},7801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},1789:(e,t,n)=>{var r=n(4536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},7667:(e,t,n)=>{var r=n(4536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},1327:(e,t,n)=>{var r=n(4536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},1866:(e,t,n)=>{var r=n(4536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},5776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},5403:(e,t,n)=>{var r=n(1469),i=n(3448),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||s.test(e)||!o.test(e)||null!=t&&e in Object(t)}},7019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5346:(e,t,n)=>{var r,i=n(4429),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},5726:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},7040:e=>{e.exports=function(){this.__data__=[],this.size=0}},4125:(e,t,n)=>{var r=n(8470),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},2117:(e,t,n)=>{var r=n(8470);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7518:(e,t,n)=>{var r=n(8470);e.exports=function(e){return r(this.__data__,e)>-1}},4705:(e,t,n)=>{var r=n(8470);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},4785:(e,t,n)=>{var r=n(1989),i=n(8407),o=n(7071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},1285:(e,t,n)=>{var r=n(5050);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},6e3:(e,t,n)=>{var r=n(5050);e.exports=function(e){return r(this,e).get(e)}},9916:(e,t,n)=>{var r=n(5050);e.exports=function(e){return r(this,e).has(e)}},5265:(e,t,n)=>{var r=n(5050);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},8776:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},4523:(e,t,n)=>{var r=n(8306);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},4536:(e,t,n)=>{var r=n(852)(Object,"create");e.exports=r},6916:(e,t,n)=>{var r=n(5569)(Object.keys,Object);e.exports=r},1167:(e,t,n)=>{e=n.nmd(e);var r=n(1957),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,s=o&&o.exports===i&&r.process,a=function(){try{return o&&o.require&&o.require("util").types||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=a},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},5639:(e,t,n)=>{var r=n(1957),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2385:e=>{e.exports=function(e){return this.__data__.has(e)}},1814:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},7465:(e,t,n)=>{var r=n(8407);e.exports=function(){this.__data__=new r,this.size=0}},3779:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},7599:e=>{e.exports=function(e){return this.__data__.get(e)}},4758:e=>{e.exports=function(e){return this.__data__.has(e)}},4309:(e,t,n)=>{var r=n(8407),i=n(7071),o=n(3369);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<199)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}},5514:(e,t,n)=>{var r=n(4523),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=s},327:(e,t,n)=>{var r=n(3448);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},7361:(e,t,n)=>{var r=n(7786);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},5694:(e,t,n)=>{var r=n(9454),i=n(7005),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return i(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=u},1469:e=>{var t=Array.isArray;e.exports=t},8612:(e,t,n)=>{var r=n(3560),i=n(1780);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},4144:(e,t,n)=>{e=n.nmd(e);var r=n(5639),i=n(5062),o=t&&!t.nodeType&&t,s=o&&e&&!e.nodeType&&e,a=s&&s.exports===o?r.Buffer:void 0,u=(a?a.isBuffer:void 0)||i;e.exports=u},8367:(e,t,n)=>{var r=n(280),i=n(4160),o=n(5694),s=n(1469),a=n(8612),u=n(4144),c=n(5726),l=n(6719),f=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(a(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||l(e)||o(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!r(e).length;for(var n in e)if(f.call(e,n))return!1;return!0}},8446:(e,t,n)=>{var r=n(939);e.exports=function(e,t){return r(e,t)}},3560:(e,t,n)=>{var r=n(4239),i=n(3218);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},3218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},3448:(e,t,n)=>{var r=n(4239),i=n(7005);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},6719:(e,t,n)=>{var r=n(8749),i=n(1717),o=n(1167),s=o&&o.isTypedArray,a=s?i(s):r;e.exports=a},3674:(e,t,n)=>{var r=n(4636),i=n(280),o=n(8612);e.exports=function(e){return o(e)?r(e):i(e)}},8306:(e,t,n)=>{var r=n(3369);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},479:e=>{e.exports=function(){return[]}},5062:e=>{e.exports=function(){return!1}},9833:(e,t,n)=>{var r=n(531);e.exports=function(e){return null==e?"":r(e)}},8295:function(e,t,n){var r;r=function(){return function(e){var t,n=e.localStorage||(t={},{setItem:function(e,n){t[e]=n},getItem:function(e){return t[e]},removeItem:function(e){delete t[e]}}),r=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n)){var r="Unknown property, "+n+". Valid properties are:";for(var i in t)t.hasOwnProperty(i)&&(r=r+" "+i);throw new Error(r)}if(typeof e[n]!==t[n])throw new Error(a(o.INVALID_TYPE,[typeof e[n],n]))}},i=function(e,t){return function(){return e.apply(t,arguments)}},o={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},s={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},a=function(e,t){var n=e.text;if(t)for(var r,i,o=0;o<t.length;o++)if(r="{"+o+"}",(i=n.indexOf(r))>0){var s=n.substring(0,i),a=n.substring(i+r.length);n=s+t[o]+a}return n},u=[0,6,77,81,73,115,100,112,3],c=[0,4,77,81,84,84,4],l=function(e,t){for(var n in this.type=e,t)t.hasOwnProperty(n)&&(this[n]=t[n])};function f(e,t){var n,r=t,i=e[t],o=i>>4,s=i&=15;t+=1;var a=0,u=1;do{if(t==e.length)return[null,r];a+=(127&(n=e[t++]))*u,u*=128}while(0!=(128&n));var c=t+a;if(c>e.length)return[null,r];var f=new l(o);switch(o){case 2:1&e[t++]&&(f.sessionPresent=!0),f.returnCode=e[t++];break;case 3:var d=s>>1&3,h=p(e,t),v=y(e,t+=2,h);t+=h,d>0&&(f.messageIdentifier=p(e,t),t+=2);var g=new S(e.subarray(t,c));1==(1&s)&&(g.retained=!0),8==(8&s)&&(g.duplicate=!0),g.qos=d,g.destinationName=v,f.payloadMessage=g;break;case 4:case 5:case 6:case 7:case 11:f.messageIdentifier=p(e,t);break;case 9:f.messageIdentifier=p(e,t),t+=2,f.returnCode=e.subarray(t,c)}return[f,c]}function d(e,t,n){return t[n++]=e>>8,t[n++]=e%256,n}function h(e,t,n,r){return g(e,n,r=d(t,n,r)),r+t}function p(e,t){return 256*e[t]+e[t+1]}function v(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r>2047?(55296<=r&&r<=56319&&(n++,t++),t+=3):r>127?t+=2:t++}return t}function g(e,t,n){for(var r=n,i=0;i<e.length;i++){var s=e.charCodeAt(i);if(55296<=s&&s<=56319){var u=e.charCodeAt(++i);if(isNaN(u))throw new Error(a(o.MALFORMED_UNICODE,[s,u]));s=u-56320+(s-55296<<10)+65536}s<=127?t[r++]=s:s<=2047?(t[r++]=s>>6&31|192,t[r++]=63&s|128):s<=65535?(t[r++]=s>>12&15|224,t[r++]=s>>6&63|128,t[r++]=63&s|128):(t[r++]=s>>18&7|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=63&s|128)}return t}function y(e,t,n){for(var r,i="",s=t;s<t+n;){var u=e[s++];if(u<128)r=u;else{var c=e[s++]-128;if(c<0)throw new Error(a(o.MALFORMED_UTF,[u.toString(16),c.toString(16),""]));if(u<224)r=64*(u-192)+c;else{var l=e[s++]-128;if(l<0)throw new Error(a(o.MALFORMED_UTF,[u.toString(16),c.toString(16),l.toString(16)]));if(u<240)r=4096*(u-224)+64*c+l;else{var f=e[s++]-128;if(f<0)throw new Error(a(o.MALFORMED_UTF,[u.toString(16),c.toString(16),l.toString(16),f.toString(16)]));if(!(u<248))throw new Error(a(o.MALFORMED_UTF,[u.toString(16),c.toString(16),l.toString(16),f.toString(16)]));r=262144*(u-240)+4096*c+64*l+f}}}r>65535&&(r-=65536,i+=String.fromCharCode(55296+(r>>10)),r=56320+(1023&r)),i+=String.fromCharCode(r)}return i}l.prototype.encode=function(){var e,t=(15&this.type)<<4,n=0,r=[],i=0;switch(void 0!==this.messageIdentifier&&(n+=2),this.type){case 1:switch(this.mqttVersion){case 3:n+=u.length+3;break;case 4:n+=c.length+3}n+=v(this.clientId)+2,void 0!==this.willMessage&&(n+=v(this.willMessage.destinationName)+2,(e=this.willMessage.payloadBytes)instanceof Uint8Array||(e=new Uint8Array(s)),n+=e.byteLength+2),void 0!==this.userName&&(n+=v(this.userName)+2),void 0!==this.password&&(n+=v(this.password)+2);break;case 8:t|=2;for(var o=0;o<this.topics.length;o++)r[o]=v(this.topics[o]),n+=r[o]+2;n+=this.requestedQos.length;break;case 10:for(t|=2,o=0;o<this.topics.length;o++)r[o]=v(this.topics[o]),n+=r[o]+2;break;case 6:t|=2;break;case 3:this.payloadMessage.duplicate&&(t|=8),t=t|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(t|=1),n+=(i=v(this.payloadMessage.destinationName))+2;var s=this.payloadMessage.payloadBytes;n+=s.byteLength,s instanceof ArrayBuffer?s=new Uint8Array(s):s instanceof Uint8Array||(s=new Uint8Array(s.buffer))}var a=function(e){var t=new Array(1),n=0;do{var r=e%128;(e>>=7)>0&&(r|=128),t[n++]=r}while(e>0&&n<4);return t}(n),l=a.length+1,f=new ArrayBuffer(n+l),p=new Uint8Array(f);if(p[0]=t,p.set(a,1),3==this.type)l=h(this.payloadMessage.destinationName,i,p,l);else if(1==this.type){switch(this.mqttVersion){case 3:p.set(u,l),l+=u.length;break;case 4:p.set(c,l),l+=c.length}var g=0;this.cleanSession&&(g=2),void 0!==this.willMessage&&(g|=4,g|=this.willMessage.qos<<3,this.willMessage.retained&&(g|=32)),void 0!==this.userName&&(g|=128),void 0!==this.password&&(g|=64),p[l++]=g,l=d(this.keepAliveInterval,p,l)}switch(void 0!==this.messageIdentifier&&(l=d(this.messageIdentifier,p,l)),this.type){case 1:l=h(this.clientId,v(this.clientId),p,l),void 0!==this.willMessage&&(l=h(this.willMessage.destinationName,v(this.willMessage.destinationName),p,l),l=d(e.byteLength,p,l),p.set(e,l),l+=e.byteLength),void 0!==this.userName&&(l=h(this.userName,v(this.userName),p,l)),void 0!==this.password&&(l=h(this.password,v(this.password),p,l));break;case 3:p.set(s,l);break;case 8:for(o=0;o<this.topics.length;o++)l=h(this.topics[o],r[o],p,l),p[l++]=this.requestedQos[o];break;case 10:for(o=0;o<this.topics.length;o++)l=h(this.topics[o],r[o],p,l)}return f};var m=function(e,t){this._client=e,this._keepAliveInterval=1e3*t,this.isReset=!1;var n=new l(12).encode(),r=function(e){return function(){return i.apply(e)}},i=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(n),this.timeout=setTimeout(r(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(o.PING_TIMEOUT.code,a(o.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(r(this),this._keepAliveInterval))},this.cancel=function(){clearTimeout(this.timeout)}},b=function(e,t,n,r){t||(t=30),this.timeout=setTimeout(function(e,t,n){return function(){return e.apply(t,n)}}(n,e,r),1e3*t),this.cancel=function(){clearTimeout(this.timeout)}},w=function(t,r,i,s,u){if(!("WebSocket"in e)||null===e.WebSocket)throw new Error(a(o.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in e)||null===e.ArrayBuffer)throw new Error(a(o.UNSUPPORTED,["ArrayBuffer"]));for(var c in this._trace("Paho.Client",t,r,i,s,u),this.host=r,this.port=i,this.path=s,this.uri=t,this.clientId=u,this._wsuri=null,this._localKey=r+":"+i+("/mqtt"!=s?":"+s:"")+":"+u+":",this._msg_queue=[],this._buffered_msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,n)0!==c.indexOf("Sent:"+this._localKey)&&0!==c.indexOf("Received:"+this._localKey)||this.restore(c)};w.prototype.host=null,w.prototype.port=null,w.prototype.path=null,w.prototype.uri=null,w.prototype.clientId=null,w.prototype.socket=null,w.prototype.connected=!1,w.prototype.maxMessageIdentifier=65536,w.prototype.connectOptions=null,w.prototype.hostIndex=null,w.prototype.onConnected=null,w.prototype.onConnectionLost=null,w.prototype.onMessageDelivered=null,w.prototype.onMessageArrived=null,w.prototype.traceFunction=null,w.prototype._msg_queue=null,w.prototype._buffered_msg_queue=null,w.prototype._connectTimeout=null,w.prototype.sendPinger=null,w.prototype.receivePinger=null,w.prototype._reconnectInterval=1,w.prototype._reconnecting=!1,w.prototype._reconnectTimeout=null,w.prototype.disconnectedPublishing=!1,w.prototype.disconnectedBufferSize=5e3,w.prototype.receiveBuffer=null,w.prototype._traceBuffer=null,w.prototype._MAX_TRACE_ENTRIES=100,w.prototype.connect=function(e){var t=this._traceMask(e,"password");if(this._trace("Client.connect",t,this.socket,this.connected),this.connected)throw new Error(a(o.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(a(o.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),this.connectOptions=e,this._reconnectInterval=1,this._reconnecting=!1,e.uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},w.prototype.subscribe=function(e,t){if(this._trace("Client.subscribe",e,t),!this.connected)throw new Error(a(o.INVALID_STATE,["not connected"]));var n=new l(8);n.topics=e.constructor===Array?e:[e],void 0===t.qos&&(t.qos=0),n.requestedQos=[];for(var r=0;r<n.topics.length;r++)n.requestedQos[r]=t.qos;t.onSuccess&&(n.onSuccess=function(e){t.onSuccess({invocationContext:t.invocationContext,grantedQos:e})}),t.onFailure&&(n.onFailure=function(e){t.onFailure({invocationContext:t.invocationContext,errorCode:e,errorMessage:a(e)})}),t.timeout&&(n.timeOut=new b(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:o.SUBSCRIBE_TIMEOUT.code,errorMessage:a(o.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},w.prototype.unsubscribe=function(e,t){if(this._trace("Client.unsubscribe",e,t),!this.connected)throw new Error(a(o.INVALID_STATE,["not connected"]));var n=new l(10);n.topics=e.constructor===Array?e:[e],t.onSuccess&&(n.callback=function(){t.onSuccess({invocationContext:t.invocationContext})}),t.timeout&&(n.timeOut=new b(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:o.UNSUBSCRIBE_TIMEOUT.code,errorMessage:a(o.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},w.prototype.send=function(e){this._trace("Client.send",e);var t=new l(3);if(t.payloadMessage=e,this.connected)e.qos>0?this._requires_ack(t):this.onMessageDelivered&&(this._notify_msg_sent[t]=this.onMessageDelivered(t.payloadMessage)),this._schedule_message(t);else{if(!this._reconnecting||!this.disconnectedPublishing)throw new Error(a(o.INVALID_STATE,["not connected"]));if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw new Error(a(o.BUFFER_FULL,[this.disconnectedBufferSize]));e.qos>0?this._requires_ack(t):(t.sequence=++this._sequence,this._buffered_msg_queue.unshift(t))}},w.prototype.disconnect=function(){if(this._trace("Client.disconnect"),this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),!this.socket)throw new Error(a(o.INVALID_STATE,["not connecting or connected"]));var e=new l(14);this._notify_msg_sent[e]=i(this._disconnected,this),this._schedule_message(e)},w.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var e in this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length),this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(var e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},w.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,"@VERSION@-@BUILDLEVEL@")},w.prototype.stopTrace=function(){delete this._traceBuffer},w.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var t=e.split(":");t[0]="wss",e=t.join(":")}this._wsuri=e,this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(e,["mqttv3.1"]):this.socket=new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=i(this._on_socket_open,this),this.socket.onmessage=i(this._on_socket_message,this),this.socket.onerror=i(this._on_socket_error,this),this.socket.onclose=i(this._on_socket_close,this),this.sendPinger=new m(this,this.connectOptions.keepAliveInterval),this.receivePinger=new m(this,this.connectOptions.keepAliveInterval),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._connectTimeout=new b(this,this.connectOptions.timeout,this._disconnected,[o.CONNECT_TIMEOUT.code,a(o.CONNECT_TIMEOUT)])},w.prototype._schedule_message=function(e){this._msg_queue.unshift(e),this.connected&&this._process_queue()},w.prototype.store=function(e,t){var r={type:t.type,messageIdentifier:t.messageIdentifier,version:1};switch(t.type){case 3:t.pubRecReceived&&(r.pubRecReceived=!0),r.payloadMessage={};for(var i="",s=t.payloadMessage.payloadBytes,u=0;u<s.length;u++)s[u]<=15?i=i+"0"+s[u].toString(16):i+=s[u].toString(16);r.payloadMessage.payloadHex=i,r.payloadMessage.qos=t.payloadMessage.qos,r.payloadMessage.destinationName=t.payloadMessage.destinationName,t.payloadMessage.duplicate&&(r.payloadMessage.duplicate=!0),t.payloadMessage.retained&&(r.payloadMessage.retained=!0),0===e.indexOf("Sent:")&&(void 0===t.sequence&&(t.sequence=++this._sequence),r.sequence=t.sequence);break;default:throw Error(a(o.INVALID_STORED_DATA,[e+this._localKey+t.messageIdentifier,r]))}n.setItem(e+this._localKey+t.messageIdentifier,JSON.stringify(r))},w.prototype.restore=function(e){var t=n.getItem(e),r=JSON.parse(t),i=new l(r.type,r);switch(r.type){case 3:for(var s=r.payloadMessage.payloadHex,u=new ArrayBuffer(s.length/2),c=new Uint8Array(u),f=0;s.length>=2;){var d=parseInt(s.substring(0,2),16);s=s.substring(2,s.length),c[f++]=d}var h=new S(c);h.qos=r.payloadMessage.qos,h.destinationName=r.payloadMessage.destinationName,r.payloadMessage.duplicate&&(h.duplicate=!0),r.payloadMessage.retained&&(h.retained=!0),i.payloadMessage=h;break;default:throw Error(a(o.INVALID_STORED_DATA,[e,t]))}0===e.indexOf("Sent:"+this._localKey)?(i.payloadMessage.duplicate=!0,this._sentMessages[i.messageIdentifier]=i):0===e.indexOf("Received:"+this._localKey)&&(this._receivedMessages[i.messageIdentifier]=i)},w.prototype._process_queue=function(){for(var e=null;e=this._msg_queue.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},w.prototype._requires_ack=function(e){var t=Object.keys(this._sentMessages).length;if(t>this.maxMessageIdentifier)throw Error("Too many messages:"+t);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,this._sentMessages[e.messageIdentifier]=e,3===e.type&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},w.prototype._on_socket_open=function(){var e=new l(1,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},w.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data);for(var t=this._deframeMessages(e.data),n=0;n<t.length;n+=1)this._handleMessage(t[n])},w.prototype._deframeMessages=function(e){var t=new Uint8Array(e),n=[];if(this.receiveBuffer){var r=new Uint8Array(this.receiveBuffer.length+t.length);r.set(this.receiveBuffer),r.set(t,this.receiveBuffer.length),t=r,delete this.receiveBuffer}try{for(var i=0;i<t.length;){var s=f(t,i),u=s[0];if(i=s[1],null===u)break;n.push(u)}i<t.length&&(this.receiveBuffer=t.subarray(i))}catch(e){var c="undefined"==e.hasOwnProperty("stack")?e.stack.toString():"No Error Stack Available";return void this._disconnected(o.INTERNAL_ERROR.code,a(o.INTERNAL_ERROR,[e.message,c]))}return n},w.prototype._handleMessage=function(e){this._trace("Client._handleMessage",e);try{switch(e.type){case 2:if(this._connectTimeout.cancel(),this._reconnectTimeout&&this._reconnectTimeout.cancel(),this.connectOptions.cleanSession){for(var t in this._sentMessages){var r=this._sentMessages[t];n.removeItem("Sent:"+this._localKey+r.messageIdentifier)}for(var t in this._sentMessages={},this._receivedMessages){var i=this._receivedMessages[t];n.removeItem("Received:"+this._localKey+i.messageIdentifier)}this._receivedMessages={}}if(0!==e.returnCode){this._disconnected(o.CONNACK_RETURNCODE.code,a(o.CONNACK_RETURNCODE,[e.returnCode,s[e.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var u=[];for(var c in this._sentMessages)this._sentMessages.hasOwnProperty(c)&&u.push(this._sentMessages[c]);if(this._buffered_msg_queue.length>0)for(var f=null;f=this._buffered_msg_queue.pop();)u.push(f),this.onMessageDelivered&&(this._notify_msg_sent[f]=this.onMessageDelivered(f.payloadMessage));u=u.sort((function(e,t){return e.sequence-t.sequence}));for(var d=0,h=u.length;d<h;d++)if(3==(r=u[d]).type&&r.pubRecReceived){var p=new l(6,{messageIdentifier:r.messageIdentifier});this._schedule_message(p)}else this._schedule_message(r);this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});var v=!1;this._reconnecting&&(v=!0,this._reconnectInterval=1,this._reconnecting=!1),this._connected(v,this._wsuri),this._process_queue();break;case 3:this._receivePublish(e);break;case 4:(r=this._sentMessages[e.messageIdentifier])&&(delete this._sentMessages[e.messageIdentifier],n.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(r.payloadMessage));break;case 5:(r=this._sentMessages[e.messageIdentifier])&&(r.pubRecReceived=!0,p=new l(6,{messageIdentifier:e.messageIdentifier}),this.store("Sent:",r),this._schedule_message(p));break;case 6:i=this._receivedMessages[e.messageIdentifier],n.removeItem("Received:"+this._localKey+e.messageIdentifier),i&&(this._receiveMessage(i),delete this._receivedMessages[e.messageIdentifier]);var g=new l(7,{messageIdentifier:e.messageIdentifier});this._schedule_message(g);break;case 7:r=this._sentMessages[e.messageIdentifier],delete this._sentMessages[e.messageIdentifier],n.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(r.payloadMessage);break;case 9:(r=this._sentMessages[e.messageIdentifier])&&(r.timeOut&&r.timeOut.cancel(),128===e.returnCode[0]?r.onFailure&&r.onFailure(e.returnCode):r.onSuccess&&r.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case 11:(r=this._sentMessages[e.messageIdentifier])&&(r.timeOut&&r.timeOut.cancel(),r.callback&&r.callback(),delete this._sentMessages[e.messageIdentifier]);break;case 13:this.sendPinger.reset();break;case 14:this._disconnected(o.INVALID_MQTT_MESSAGE_TYPE.code,a(o.INVALID_MQTT_MESSAGE_TYPE,[e.type]));break;default:this._disconnected(o.INVALID_MQTT_MESSAGE_TYPE.code,a(o.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}}catch(e){var y="undefined"==e.hasOwnProperty("stack")?e.stack.toString():"No Error Stack Available";return void this._disconnected(o.INTERNAL_ERROR.code,a(o.INTERNAL_ERROR,[e.message,y]))}},w.prototype._on_socket_error=function(e){this._reconnecting||this._disconnected(o.SOCKET_ERROR.code,a(o.SOCKET_ERROR,[e.data]))},w.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(o.SOCKET_CLOSE.code,a(o.SOCKET_CLOSE))},w.prototype._socket_send=function(e){if(1==e.type){var t=this._traceMask(e,"password");this._trace("Client._socket_send",t)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},w.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var t=new l(4,{messageIdentifier:e.messageIdentifier});this._schedule_message(t),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e);var n=new l(5,{messageIdentifier:e.messageIdentifier});this._schedule_message(n);break;default:throw Error("Invaild qos="+e.payloadMessage.qos)}},w.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},w.prototype._connected=function(e,t){this.onConnected&&this.onConnected(e,t)},w.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=2*this._reconnectInterval),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))},w.prototype._disconnected=function(e,t){if(this._trace("Client._disconnected",e,t),void 0!==e&&this._reconnecting)this._reconnectTimeout=new b(this,this._reconnectInterval,this._reconnect);else if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else if(void 0===e&&(e=o.OK.code,t=a(o.OK)),this.connected){if(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:t,reconnect:this.connectOptions.reconnect,uri:this._wsuri}),e!==o.OK.code&&this.connectOptions.reconnect)return this._reconnectInterval=1,void this._reconnect()}else 4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:t})},w.prototype._trace=function(){if(this.traceFunction){var e=Array.prototype.slice.call(arguments);for(var t in e)void 0!==e[t]&&e.splice(t,1,JSON.stringify(e[t]));var n=e.join("");this.traceFunction({severity:"Debug",message:n})}if(null!==this._traceBuffer){t=0;for(var r=arguments.length;t<r;t++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===t||void 0===arguments[t]?this._traceBuffer.push(arguments[t]):this._traceBuffer.push("  "+JSON.stringify(arguments[t]))}},w.prototype._traceMask=function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=r==t?"******":e[r]);return n};var S=function(e){var t,n;if(!("string"==typeof e||e instanceof ArrayBuffer||ArrayBuffer.isView(e)&&!(e instanceof DataView)))throw a(o.INVALID_ARGUMENT,[e,"newPayload"]);t=e;var r=0,i=!1,s=!1;Object.defineProperties(this,{payloadString:{enumerable:!0,get:function(){return"string"==typeof t?t:y(t,0,t.length)}},payloadBytes:{enumerable:!0,get:function(){if("string"==typeof t){var e=new ArrayBuffer(v(t)),n=new Uint8Array(e);return g(t,n,0),n}return t}},destinationName:{enumerable:!0,get:function(){return n},set:function(e){if("string"!=typeof e)throw new Error(a(o.INVALID_ARGUMENT,[e,"newDestinationName"]));n=e}},qos:{enumerable:!0,get:function(){return r},set:function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid argument:"+e);r=e}},retained:{enumerable:!0,get:function(){return i},set:function(e){if("boolean"!=typeof e)throw new Error(a(o.INVALID_ARGUMENT,[e,"newRetained"]));i=e}},topic:{enumerable:!0,get:function(){return n},set:function(e){n=e}},duplicate:{enumerable:!0,get:function(){return s},set:function(e){s=e}}})};return{Client:function(e,t,n,i){var s;if("string"!=typeof e)throw new Error(a(o.INVALID_TYPE,[typeof e,"host"]));if(2==arguments.length){i=t;var u=(s=e).match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!u)throw new Error(a(o.INVALID_ARGUMENT,[e,"host"]));e=u[4]||u[2],t=parseInt(u[7]),n=u[8]}else{if(3==arguments.length&&(i=n,n="/mqtt"),"number"!=typeof t||t<0)throw new Error(a(o.INVALID_TYPE,[typeof t,"port"]));if("string"!=typeof n)throw new Error(a(o.INVALID_TYPE,[typeof n,"path"]));var c=-1!==e.indexOf(":")&&"["!==e.slice(0,1)&&"]"!==e.slice(-1);s="ws://"+(c?"["+e+"]":e)+":"+t+n}for(var l=0,f=0;f<i.length;f++){var d=i.charCodeAt(f);55296<=d&&d<=56319&&f++,l++}if("string"!=typeof i||l>65535)throw new Error(a(o.INVALID_ARGUMENT,[i,"clientId"]));var h=new w(s,e,t,n,i);Object.defineProperties(this,{host:{get:function(){return e},set:function(){throw new Error(a(o.UNSUPPORTED_OPERATION))}},port:{get:function(){return t},set:function(){throw new Error(a(o.UNSUPPORTED_OPERATION))}},path:{get:function(){return n},set:function(){throw new Error(a(o.UNSUPPORTED_OPERATION))}},uri:{get:function(){return s},set:function(){throw new Error(a(o.UNSUPPORTED_OPERATION))}},clientId:{get:function(){return h.clientId},set:function(){throw new Error(a(o.UNSUPPORTED_OPERATION))}},onConnected:{get:function(){return h.onConnected},set:function(e){if("function"!=typeof e)throw new Error(a(o.INVALID_TYPE,[typeof e,"onConnected"]));h.onConnected=e}},disconnectedPublishing:{get:function(){return h.disconnectedPublishing},set:function(e){h.disconnectedPublishing=e}},disconnectedBufferSize:{get:function(){return h.disconnectedBufferSize},set:function(e){h.disconnectedBufferSize=e}},onConnectionLost:{get:function(){return h.onConnectionLost},set:function(e){if("function"!=typeof e)throw new Error(a(o.INVALID_TYPE,[typeof e,"onConnectionLost"]));h.onConnectionLost=e}},onMessageDelivered:{get:function(){return h.onMessageDelivered},set:function(e){if("function"!=typeof e)throw new Error(a(o.INVALID_TYPE,[typeof e,"onMessageDelivered"]));h.onMessageDelivered=e}},onMessageArrived:{get:function(){return h.onMessageArrived},set:function(e){if("function"!=typeof e)throw new Error(a(o.INVALID_TYPE,[typeof e,"onMessageArrived"]));h.onMessageArrived=e}},trace:{get:function(){return h.traceFunction},set:function(e){if("function"!=typeof e)throw new Error(a(o.INVALID_TYPE,[typeof e,"onTrace"]));h.traceFunction=e}}}),this.connect=function(e){if(r(e=e||{},{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),e.mqttVersion>4||e.mqttVersion<3)throw new Error(a(o.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0!==e.password&&void 0===e.userName)throw new Error(a(o.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof S))throw new Error(a(o.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload=null,void 0===e.willMessage.destinationName)throw new Error(a(o.INVALID_TYPE,[typeof e.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}if(void 0===e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array))throw new Error(a(o.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));if(e.hosts.length<1)throw new Error(a(o.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var t=!1,i=0;i<e.hosts.length;i++){if("string"!=typeof e.hosts[i])throw new Error(a(o.INVALID_TYPE,[typeof e.hosts[i],"connectOptions.hosts["+i+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[i])){if(0===i)t=!0;else if(!t)throw new Error(a(o.INVALID_ARGUMENT,[e.hosts[i],"connectOptions.hosts["+i+"]"]))}else if(t)throw new Error(a(o.INVALID_ARGUMENT,[e.hosts[i],"connectOptions.hosts["+i+"]"]))}if(t)e.uris=e.hosts;else{if(!e.ports)throw new Error(a(o.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(!(e.ports instanceof Array))throw new Error(a(o.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(e.hosts.length!==e.ports.length)throw new Error(a(o.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));for(e.uris=[],i=0;i<e.hosts.length;i++){if("number"!=typeof e.ports[i]||e.ports[i]<0)throw new Error(a(o.INVALID_TYPE,[typeof e.ports[i],"connectOptions.ports["+i+"]"]));var u=e.hosts[i],c=e.ports[i],l=-1!==u.indexOf(":");s="ws://"+(l?"["+u+"]":u)+":"+c+n,e.uris.push(s)}}}h.connect(e)},this.subscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(r(t=t||{},{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(void 0!==t.qos&&0!==t.qos&&1!==t.qos&&2!==t.qos)throw new Error(a(o.INVALID_ARGUMENT,[t.qos,"subscribeOptions.qos"]));h.subscribe(e,t)},this.unsubscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(r(t=t||{},{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");h.unsubscribe(e,t)},this.send=function(e,t,n,r){var i;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof S)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(void 0===(i=e).destinationName)throw new Error(a(o.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));h.send(i)}else(i=new S(t)).destinationName=e,arguments.length>=3&&(i.qos=n),arguments.length>=4&&(i.retained=r),h.send(i)},this.publish=function(e,t,n,r){var i;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof S)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(void 0===(i=e).destinationName)throw new Error(a(o.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));h.send(i)}else(i=new S(t)).destinationName=e,arguments.length>=3&&(i.qos=n),arguments.length>=4&&(i.retained=r),h.send(i)},this.disconnect=function(){h.disconnect()},this.getTraceLog=function(){return h.getTraceLog()},this.startTrace=function(){h.startTrace()},this.stopTrace=function(){h.stopTrace()},this.isConnected=function(){return h.connected}},Message:S}}(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},e.exports=r()},4971:function(e,t,n){var r;e=n.nmd(e),function(i){t&&t.nodeType,e&&e.nodeType;var o="object"==typeof n.g&&n.g;o.global!==o&&o.window!==o&&o.self;var s,a=2147483647,u=36,c=/^xn--/,l=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,p=String.fromCharCode;function v(e){throw RangeError(d[e])}function g(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function y(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+g((e=e.replace(f,".")).split("."),t).join(".")}function m(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function b(e){return g(e,(function(e){var t="";return e>65535&&(t+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+p(e)})).join("")}function w(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function S(e,t,n){var r=0;for(e=n?h(e/700):e>>1,e+=h(e/t);e>455;r+=u)e=h(e/35);return h(r+36*e/(e+38))}function _(e){var t,n,r,i,o,s,c,l,f,d,p,g=[],y=e.length,m=0,w=128,_=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&v("not-basic"),g.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<y;){for(o=m,s=1,c=u;i>=y&&v("invalid-input"),((l=(p=e.charCodeAt(i++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:u)>=u||l>h((a-m)/s))&&v("overflow"),m+=l*s,!(l<(f=c<=_?1:c>=_+26?26:c-_));c+=u)s>h(a/(d=u-f))&&v("overflow"),s*=d;_=S(m-o,t=g.length+1,0==o),h(m/t)>a-w&&v("overflow"),w+=h(m/t),m%=t,g.splice(m++,0,w)}return b(g)}function E(e){var t,n,r,i,o,s,c,l,f,d,g,y,b,_,E,I=[];for(y=(e=m(e)).length,t=128,n=0,o=72,s=0;s<y;++s)(g=e[s])<128&&I.push(p(g));for(r=i=I.length,i&&I.push("-");r<y;){for(c=a,s=0;s<y;++s)(g=e[s])>=t&&g<c&&(c=g);for(c-t>h((a-n)/(b=r+1))&&v("overflow"),n+=(c-t)*b,t=c,s=0;s<y;++s)if((g=e[s])<t&&++n>a&&v("overflow"),g==t){for(l=n,f=u;!(l<(d=f<=o?1:f>=o+26?26:f-o));f+=u)E=l-d,_=u-d,I.push(p(w(d+E%_,0))),l=h(E/_);I.push(p(w(l,0))),o=S(n,b,r==i),n=0,++r}++n,++t}return I.join("")}s={version:"1.3.2",ucs2:{decode:m,encode:b},decode:_,encode:E,toASCII:function(e){return y(e,(function(e){return l.test(e)?"xn--"+E(e):e}))},toUnicode:function(e){return y(e,(function(e){return c.test(e)?_(e.slice(4).toLowerCase()):e}))}},void 0===(r=function(){return s}.call(t,n,t,e))||(e.exports=r)}()},2587:e=>{"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,n,r,i){n=n||"&",r=r||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(n);var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var u=e.length;a>0&&u>a&&(u=a);for(var c=0;c<u;++c){var l,f,d,h,p=e[c].replace(s,"%20"),v=p.indexOf(r);v>=0?(l=p.substr(0,v),f=p.substr(v+1)):(l=p,f=""),d=decodeURIComponent(l),h=decodeURIComponent(f),t(o,d)?Array.isArray(o[d])?o[d].push(h):o[d]=[o[d],h]:o[d]=h}return o}},2361:e=>{"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,r,i){return n=n||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(i){var o=encodeURIComponent(t(i))+r;return Array.isArray(e[i])?e[i].map((function(e){return o+encodeURIComponent(t(e))})).join(n):o+encodeURIComponent(t(e[i]))})).join(n):i?encodeURIComponent(t(i))+r+encodeURIComponent(t(e)):""}},7673:(e,t,n)=>{"use strict";t.decode=t.parse=n(2587),t.encode=t.stringify=n(2361)},655:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__extends:()=>i,__assign:()=>o,__rest:()=>s,__decorate:()=>a,__param:()=>u,__metadata:()=>c,__awaiter:()=>l,__generator:()=>f,__createBinding:()=>d,__exportStar:()=>h,__values:()=>p,__read:()=>v,__spread:()=>g,__spreadArrays:()=>y,__await:()=>m,__asyncGenerator:()=>b,__asyncDelegator:()=>w,__asyncValues:()=>S,__makeTemplateObject:()=>_,__importStar:()=>E,__importDefault:()=>I,__classPrivateFieldGet:()=>A,__classPrivateFieldSet:()=>C});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function f(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function d(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function h(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof m?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function w(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:m(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function S(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}function A(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function C(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},4788:()=>{},5869:(e,t,n)=>{"use strict";function r(e,t){return t=t||{},new Promise((function(n,r){var i=new XMLHttpRequest,o=[],s=[],a={},u=function(){return{ok:2==(i.status/100|0),statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:u,headers:{keys:function(){return o},entries:function(){return s},get:function(e){return a[e.toLowerCase()]},has:function(e){return e.toLowerCase()in a}}}};for(var c in i.open(t.method||"get",e,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,n){o.push(t=t.toLowerCase()),s.push([t,n]),a[t]=a[t]?a[t]+","+n:n})),n(u())},i.onerror=r,i.withCredentials="include"==t.credentials,t.headers)i.setRequestHeader(c,t.headers[c]);i.send(t.body||null)}))}n.r(t),n.d(t,{default:()=>r})},8575:(e,t,n)=>{"use strict";var r=n(4971),i=n(2502);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.Qc=b,t.WU=function(e){return i.isString(e)&&(e=b(e)),e instanceof o?e.format():o.prototype.format.call(e)};var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),f=["%","/","?",";","#"].concat(l),d=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=n(7673);function b(e,t,n){if(e&&i.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}o.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),a=-1!==o&&o<e.indexOf("#")?"?":"#",c=e.split(a);c[0]=c[0].replace(/\\/g,"/");var b=e=c.join(a);if(b=b.trim(),!n&&1===e.split("#").length){var w=u.exec(b);if(w)return this.path=b,this.href=b,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?m.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var S=s.exec(b);if(S){var _=(S=S[0]).toLowerCase();this.protocol=_,b=b.substr(S.length)}if(n||S||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===b.substr(0,2);!E||S&&g[S]||(b=b.substr(2),this.slashes=!0)}if(!g[S]&&(E||S&&!y[S])){for(var I,A,C=-1,T=0;T<d.length;T++)-1!==(O=b.indexOf(d[T]))&&(-1===C||O<C)&&(C=O);for(-1!==(A=-1===C?b.lastIndexOf("@"):b.lastIndexOf("@",C))&&(I=b.slice(0,A),b=b.slice(A+1),this.auth=decodeURIComponent(I)),C=-1,T=0;T<f.length;T++){var O;-1!==(O=b.indexOf(f[T]))&&(-1===C||O<C)&&(C=O)}-1===C&&(C=b.length),this.host=b.slice(0,C),b=b.slice(C),this.parseHost(),this.hostname=this.hostname||"";var x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x)for(var k=this.hostname.split(/\./),P=(T=0,k.length);T<P;T++){var N=k[T];if(N&&!N.match(h)){for(var L="",M=0,R=N.length;M<R;M++)N.charCodeAt(M)>127?L+="x":L+=N[M];if(!L.match(h)){var D=k.slice(0,T),U=k.slice(T+1),j=N.match(p);j&&(D.push(j[1]),U.unshift(j[2])),U.length&&(b="/"+U.join(".")+b),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),x||(this.hostname=r.toASCII(this.hostname));var F=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+F,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!v[_])for(T=0,P=l.length;T<P;T++){var z=l[T];if(-1!==b.indexOf(z)){var q=encodeURIComponent(z);q===z&&(q=escape(z)),b=b.split(z).join(q)}}var K=b.indexOf("#");-1!==K&&(this.hash=b.substr(K),b=b.slice(0,K));var V=b.indexOf("?");if(-1!==V?(this.search=b.substr(V),this.query=b.substr(V+1),t&&(this.query=m.parse(this.query)),b=b.slice(0,V)):t&&(this.search="",this.query={}),b&&(this.pathname=b),y[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var H=this.search||"";this.path=F+H}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=m.stringify(this.query));var a=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(n[l]=e[l])}return y[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!y[e.protocol]){for(var f=Object.keys(e),d=0;d<f.length;d++){var h=f[d];n[h]=e[h]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||g[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var v=n.pathname||"",m=n.search||"";n.path=v+m}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),S=w||b||n.host&&e.pathname,_=S,E=n.pathname&&n.pathname.split("/")||[],I=(p=e.pathname&&e.pathname.split("/")||[],n.protocol&&!y[n.protocol]);if(I&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),S=S&&(""===p[0]||""===E[0])),w)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,E=p;else if(p.length)E||(E=[]),E.pop(),E=E.concat(p),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search))return I&&(n.hostname=n.host=E.shift(),(x=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=x.shift(),n.host=n.hostname=x.shift())),n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var A=E.slice(-1)[0],C=(n.host||e.host||E.length>1)&&("."===A||".."===A)||""===A,T=0,O=E.length;O>=0;O--)"."===(A=E[O])?E.splice(O,1):".."===A?(E.splice(O,1),T++):T&&(E.splice(O,1),T--);if(!S&&!_)for(;T--;T)E.unshift("..");!S||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),C&&"/"!==E.join("/").substr(-1)&&E.push("");var x,k=""===E[0]||E[0]&&"/"===E[0].charAt(0);return I&&(n.hostname=n.host=k?"":E.length?E.shift():"",(x=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=x.shift(),n.host=n.hostname=x.shift())),(S=S||n.host&&E.length)&&!k&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},2502:e=>{"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},5877:(e,t,n)=>{var r=n(3570),i=n(1171),o=i;o.v1=r,o.v4=i,e.exports=o},3075:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,i=t;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},5217:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},3570:(e,t,n)=>{var r,i,o=n(5217),s=n(3075),a=0,u=0;e.exports=function(e,t,n){var c=t&&n||0,l=t||[],f=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:i;if(null==f||null==d){var h=o();null==f&&(f=r=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==d&&(d=i=16383&(h[6]<<8|h[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:u+1,g=p-a+(v-u)/1e4;if(g<0&&void 0===e.clockseq&&(d=d+1&16383),(g<0||p>a)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,u=v,i=d;var y=(1e4*(268435455&(p+=122192928e5))+v)%4294967296;l[c++]=y>>>24&255,l[c++]=y>>>16&255,l[c++]=y>>>8&255,l[c++]=255&y;var m=p/4294967296*1e4&268435455;l[c++]=m>>>8&255,l[c++]=255&m,l[c++]=m>>>24&15|16,l[c++]=m>>>16&255,l[c++]=d>>>8|128,l[c++]=255&d;for(var b=0;b<6;++b)l[c+b]=f[b];return t||s(l)}},1171:(e,t,n)=>{var r=n(5217),i=n(3075);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},9013:(e,t,n)=>{e.exports=n(5135).Observable},5135:(e,t)=>{"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}t.Observable=void 0;var o=function(){return"function"==typeof Symbol},s=function(e){return o()&&Boolean(Symbol[e])},a=function(e){return s(e)?Symbol[e]:"@@"+e};o()&&!s("observable")&&(Symbol.observable=Symbol("observable"));var u=a("iterator"),c=a("observable"),l=a("species");function f(e,t){var n=e[t];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function d(e){var t=e.constructor;return void 0!==t&&null===(t=t[l])&&(t=void 0),void 0!==t?t:_}function h(e){return e instanceof _}function p(e){p.log?p.log(e):setTimeout((function(){throw e}))}function v(e){Promise.resolve().then((function(){try{e()}catch(e){p(e)}}))}function g(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{var n=f(t,"unsubscribe");n&&n.call(t)}}catch(e){p(e)}}function y(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function m(e,t,n){e._state="running";var r=e._observer;try{var i=f(r,t);switch(t){case"next":i&&i.call(r,n);break;case"error":if(y(e),!i)throw n;i.call(r,n);break;case"complete":y(e),i&&i.call(r)}}catch(e){p(e)}"closed"===e._state?g(e):"running"===e._state&&(e._state="ready")}function b(e,t,n){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:n}],void v((function(){return function(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(m(e,t[n].type,t[n].value),"closed"!==e._state);++n);}}(e)}))):void m(e,t,n);e._queue.push({type:t,value:n})}}var w=function(){function e(t,r){n(this,e),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var i=new S(this);try{this._cleanup=r.call(void 0,i)}catch(e){i.error(e)}"initializing"===this._state&&(this._state="ready")}return i(e,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(y(this),g(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),e}(),S=function(){function e(t){n(this,e),this._subscription=t}return i(e,[{key:"next",value:function(e){b(this._subscription,"next",e)}},{key:"error",value:function(e){b(this._subscription,"error",e)}},{key:"complete",value:function(){b(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),_=function(){function e(t){if(n(this,e),!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}return i(e,[{key:"subscribe",value:function(e){return"object"==typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new w(e,this._subscriber)}},{key:"forEach",value:function(e){var t=this;return new Promise((function(n,r){if("function"==typeof e)var i=t.subscribe({next:function(t){try{e(t,o)}catch(e){r(e),i.unsubscribe()}},error:r,complete:n});else r(new TypeError(e+" is not a function"));function o(){i.unsubscribe(),n()}}))}},{key:"map",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(d(this))((function(n){return t.subscribe({next:function(t){try{t=e(t)}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"filter",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(d(this))((function(n){return t.subscribe({next:function(t){try{if(!e(t))return}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"reduce",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=d(this),r=arguments.length>1,i=!1,o=arguments[1],s=o;return new n((function(n){return t.subscribe({next:function(t){var o=!i;if(i=!0,!o||r)try{s=e(s,t)}catch(e){return n.error(e)}else s=t},error:function(e){n.error(e)},complete:function(){if(!i&&!r)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(s),n.complete()}})}))}},{key:"concat",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=d(this);return new i((function(t){var r,o=0;return function e(s){r=s.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){o===n.length?(r=void 0,t.complete()):e(i.from(n[o++]))}})}(e),function(){r&&(r.unsubscribe(),r=void 0)}}))}},{key:"flatMap",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=d(this);return new n((function(r){var i=[],o=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(e){return r.error(e)}var o=n.from(t).subscribe({next:function(e){r.next(e)},error:function(e){r.error(e)},complete:function(){var e=i.indexOf(o);e>=0&&i.splice(e,1),s()}});i.push(o)},error:function(e){r.error(e)},complete:function(){s()}});function s(){o.closed&&0===i.length&&r.complete()}return function(){i.forEach((function(e){return e.unsubscribe()})),o.unsubscribe()}}))}},{key:c,value:function(){return this}}],[{key:"from",value:function(t){var n="function"==typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var r=f(t,c);if(r){var i=r.call(t);if(Object(i)!==i)throw new TypeError(i+" is not an object");return h(i)&&i.constructor===n?i:new n((function(e){return i.subscribe(e)}))}if(s("iterator")&&(r=f(t,u)))return new n((function(e){v((function(){if(!e.closed){var n=!0,i=!1,o=void 0;try{for(var s,a=r.call(t)[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var u=s.value;if(e.next(u),e.closed)return}}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}e.complete()}}))}));if(Array.isArray(t))return new n((function(e){v((function(){if(!e.closed){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}}))}));throw new TypeError(t+" is not observable")}},{key:"of",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i="function"==typeof this?this:e;return new i((function(e){v((function(){if(!e.closed){for(var t=0;t<n.length;++t)if(e.next(n[t]),e.closed)return;e.complete()}}))}))}},{key:l,get:function(){return this}}]),e}();t.Observable=_,o()&&Object.defineProperty(_,Symbol("extensions"),{value:{symbol:c,hostReportError:p},configurable:!0})},9329:(e,t,n)=>{e.exports=n(8786).Observable},8786:(e,t,n)=>{"use strict";e=n.nmd(e),function(e,t){function n(e){return"function"==typeof Symbol&&Boolean(Symbol[e])}function r(e){return n(e)?Symbol[e]:"@@"+e}function i(e){setTimeout((function(){throw e}))}function o(e,t){var n=e[t];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function s(e){var t=e.constructor;return void 0!==t&&null===(t=t[r("species")])&&(t=void 0),void 0!==t?t:d}function a(e,t){Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);r.enumerable=!1,Object.defineProperty(e,n,r)}))}function u(e){var t=e._cleanup;if(t){e._cleanup=void 0;try{t()}catch(e){i(e)}}}function c(e){return void 0===e._observer}function l(e,t){if(Object(e)!==e)throw new TypeError("Observer must be an object");this._cleanup=void 0,this._observer=e;try{var n=o(e,"start");n&&n.call(e,this)}catch(e){i(e)}if(!c(this)){e=new f(this);try{var r=t.call(void 0,e);if(null!=r){if("function"==typeof r.unsubscribe)s=r,r=function(){s.unsubscribe()};else if("function"!=typeof r)throw new TypeError(r+" is not a function");this._cleanup=r}}catch(t){return void e.error(t)}c(this)&&u(this)}var s}function f(e){this._subscription=e}function d(e){if(!(this instanceof d))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof e)throw new TypeError("Observable initializer must be a function");this._subscriber=e}"function"!=typeof Symbol||Symbol.observable||(Symbol.observable=Symbol("observable")),a(l.prototype={},{get closed(){return c(this)},unsubscribe:function(){var e;c(e=this)||(e._observer=void 0,u(e))}}),a(f.prototype={},{get closed(){return c(this._subscription)},next:function(e){var t=this._subscription;if(!c(t)){var n=t._observer;try{var r=o(n,"next");r&&r.call(n,e)}catch(e){i(e)}}},error:function(e){var t=this._subscription;if(c(t))i(e);else{var n=t._observer;t._observer=void 0;try{var r=o(n,"error");if(!r)throw e;r.call(n,e)}catch(e){i(e)}u(t)}},complete:function(){var e=this._subscription;if(!c(e)){var t=e._observer;e._observer=void 0;try{var n=o(t,"complete");n&&n.call(t)}catch(e){i(e)}u(e)}}}),a(d.prototype,{subscribe:function(e){for(var t=[],n=1;n<arguments.length;++n)t.push(arguments[n]);return"function"==typeof e?e={next:e,error:t[0],complete:t[1]}:"object"==typeof e&&null!==e||(e={}),new l(e,this._subscriber)},forEach:function(e){var t=this;return new Promise((function(n,r){if("function"!=typeof e)return Promise.reject(new TypeError(e+" is not a function"));t.subscribe({_subscription:null,start:function(e){if(Object(e)!==e)throw new TypeError(e+" is not an object");this._subscription=e},next:function(t){var n=this._subscription;if(!n.closed)try{e(t)}catch(e){r(e),n.unsubscribe()}},error:r,complete:n})}))},map:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(s(this))((function(n){return t.subscribe({next:function(t){if(!n.closed){try{t=e(t)}catch(e){return n.error(e)}n.next(t)}},error:function(e){n.error(e)},complete:function(){n.complete()}})}))},filter:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(s(this))((function(n){return t.subscribe({next:function(t){if(!n.closed){try{if(!e(t))return}catch(e){return n.error(e)}n.next(t)}},error:function(e){n.error(e)},complete:function(){n.complete()}})}))},reduce:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=s(this),r=arguments.length>1,i=!1,o=arguments[1];return new n((function(n){return t.subscribe({next:function(t){if(!n.closed){var s=!i;if(i=!0,!s||r)try{o=e(o,t)}catch(e){return n.error(e)}else o=t}},error:function(e){n.error(e)},complete:function(){if(!i&&!r)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(o),n.complete()}})}))}}),Object.defineProperty(d.prototype,r("observable"),{value:function(){return this},writable:!0,configurable:!0}),a(d,{from:function(e){var t="function"==typeof this?this:d;if(null==e)throw new TypeError(e+" is not an object");var i=o(e,r("observable"));if(i){var s=i.call(e);if(Object(s)!==s)throw new TypeError(s+" is not an object");return s.constructor===t?s:new t((function(e){return s.subscribe(e)}))}if(n("iterator")&&(i=o(e,r("iterator"))))return new t((function(t){for(var n,r=i.call(e)[Symbol.iterator]();!(n=r.next()).done;){var o=n.value;if(t.next(o),t.closed)return}t.complete()}));if(Array.isArray(e))return new t((function(t){for(var n=0;n<e.length;++n)if(t.next(e[n]),t.closed)return;t.complete()}));throw new TypeError(e+" is not observable")},of:function(){for(var e=[],t=0;t<arguments.length;++t)e.push(arguments[t]);return new("function"==typeof this?this:d)((function(t){for(var n=0;n<e.length;++n)if(t.next(e[n]),t.closed)return;t.complete()}))}}),Object.defineProperty(d,r("species"),{get:function(){return this},configurable:!0}),Object.defineProperty(d,"extensions",{value:{observableSymbol:r("observable"),setHostReportError:function(e){i=e}}}),e.Observable=d}(t)},1404:(e,t,n)=>{"use strict";var r,i,o=n(9329);function s(e,t,n){if(e._observer)a(e._observer,t,n);else if(e._observers){var r=[];e._observers.forEach((function(e){r.push(e)})),r.forEach((function(e){a(e,t,n)}))}}function a(e,t,n){if(!e.closed)switch(t){case"next":return e.next(n);case"error":return e.error(n);case"complete":return e.complete(n)}}function u(e){return e._observer||e._observers&&e._observers.size>0}function c(e){var t=this;this._observer=null,this._observers=null,this._observable=new o((function(n){return function(e,t){!u(e)&&t&&t.start&&t.start()}(t,e),function(e,t){e._observers?e._observers.add(t):e._observer?(e._observers=new Set,e._observers.add(e._observer),e._observers.add(t),e._observer=null):e._observer=t}(t,n),function(){!function(e,t){e._observers?e._observers.delete(t):e._observer===t&&(e._observer=null)}(t,n),function(e,t){!u(e)&&t&&t.pause&&t.pause()}(t,e)}}))}r=c.prototype,i={get observable(){return this._observable},get observed(){return u(this)},next:function(e){s(this,"next",e)},error:function(e){s(this,"error",e)},complete:function(e){s(this,"complete",e)}},Object.keys(i).forEach((function(e){var t=Object.getOwnPropertyDescriptor(i,e);t.enumerable=!1,Object.defineProperty(r,e,t)})),e.exports=c}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n(5439)})();